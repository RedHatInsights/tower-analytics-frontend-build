"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[837],{69837:(t,e,r)=>{r.r(e),r.d(e,{default:()=>Pt});var a=r(15861),n=r(4942),i=r(87757),l=r.n(i),o=r(92950),s=r.n(o),c=r(48236),u=r(64866),d=r(13784),p=r(86350),m=r(48716),f=r(39173),h=r(58788),g=r(15671),y=r(43144),b=r(97326),v=r(60136),_=r(6215),x=r(61120),E=r(87986),T=r(25914),k=r(45697),w=r.n(k);const j=function(){function t(e){var r=this;(0,g.Z)(this,t),(0,n.Z)(this,"handleMouseOver",(function(t){var e=0,a=0,n=0,i=T.Ba6.pageX-T.Ys(r.svg).node().getBoundingClientRect().x+10,l=T.Ba6.pageY-T.Ys(r.svg).node().getBoundingClientRect().y-10,o=T.i$Z("%m/%d");if(t){var s=r.toolTipBase.node().getBoundingClientRect().width,c=T.Ys(r.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<i/c*100;t&&(e=t.RAN||0,a=t.FAIL||0,n=t.TOTAL||0,r.date.text(o(t.DATE||null))),t&&t.data&&(e=t.data.RAN||0,a=t.data.FAIL||0,n=t.data.TOTAL||0,r.date.text(o(t.data.DATE||null))),r.jobs.text(n+" jobs"),r.jobsWidth=r.jobs.node().getComputedTextLength(),r.failed.text(""+a),r.successful.text(""+e),r.successTextWidth=r.successful.node().getComputedTextLength(),r.failTextWidth=r.failed.node().getComputedTextLength();var d,p=r.jobsWidth/r.boxWidth*100,m=p/40;d=p>40?r.boxWidth*m:r.boxWidth,r.boundingBox.attr("width",d),r.toolTipBase.attr("transform","translate("+i+","+l+")"),u?(r.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),r.boundingBox.attr("x",-d-20),r.circleSuccess.attr("cx",-d),r.circleFail.attr("cx",-d),r.failedIcon.attr("x",-d-7),r.successIcon.attr("x",-d-7),r.successText.attr("x",17-d),r.failText.attr("x",17-d),r.successful.attr("x",-r.successTextWidth-20-12),r.failed.attr("x",-r.failTextWidth-20-12),r.date.attr("x",-d-5),r.jobs.attr("x",-r.jobsWidth/2-7),r.clickMore.attr("x",-d)):(r.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),r.boundingBox.attr("x",10),r.circleSuccess.attr("cx",26),r.circleFail.attr("cx",26),r.failedIcon.attr("x",19),r.successIcon.attr("x",19),r.successText.attr("x",43),r.failText.attr("x",43),r.successful.attr("x",d-r.successTextWidth),r.failed.attr("x",d-r.failTextWidth),r.date.attr("x",20),r.jobs.attr("x",d),r.clickMore.attr("x",20)),r.toolTipBase.style("opacity",1),r.toolTipBase.interrupt()}})),(0,n.Z)(this,"handleMouseOut",(function(){r.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")})),this.svg=e.svg,this.colors=e.colors,this.draw()}return(0,y.Z)(t,[{key:"draw",value:function(){this.toolTipBase=T.Ys(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=145,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-41).attr("rx",2).attr("height",110).attr("width",this.boxWidth).attr("fill","#393f44"),this.circleSuccess=this.toolTipBase.append("circle").attr("cx",26).attr("cy",0).attr("r",8).attr("stroke","white").attr("fill","white"),this.circleFail=this.toolTipBase.append("circle").attr("cx",26).attr("cy",26).attr("r",8).attr("stroke","white").attr("fill","white"),this.successText=this.toolTipBase.append("text").attr("x",43).attr("y",4).attr("font-size",12).attr("fill","white").text("Successful"),this.failText=this.toolTipBase.append("text").attr("x",43).attr("y",28).attr("font-size",12).attr("fill","white").text("Failed"),this.successIcon=this.toolTipBase.append("text").attr("class","fas fa-sm").attr("fill",this.colors(1)).attr("x",19).attr("y",5).text(""),this.failedIcon=this.toolTipBase.append("text").attr("class","fas fa-sm").attr("fill",this.colors(0)).attr("x",20).attr("y",31).text(""),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("x",137).attr("y",-21).attr("font-size",12).attr("text-anchor","end").text("No jobs"),this.successful=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",4).text("0"),this.failed=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",28).text("0"),this.date=this.toolTipBase.append("text").attr("fill","white").attr("stroke","white").attr("x",20).attr("y",-21).attr("font-size",12).text("Never"),this.clickMore=this.toolTipBase.append("text").attr("fill","white").attr("x",20).attr("y",55).attr("font-size",12).text("Click for details")}}]),t}();var O=r(20806),Z=r(53345),P=r(47116);function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var A=function(t){(0,v.Z)(i,t);var e,r,a=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,x.Z)(e);if(r){var n=(0,x.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,_.Z)(this,t)});function i(t){var e;return(0,g.Z)(this,i),(e=a.call(this,t)).draw=e.draw.bind((0,b.Z)(e)),e.init=e.init.bind((0,b.Z)(e)),e.resize=e.resize.bind((0,b.Z)(e)),e.redirectToJobExplorer=e.redirectToJobExplorer.bind((0,b.Z)(e)),e.state={formattedData:[],timeout:null},e}return(0,y.Z)(i,[{key:"redirectToJobExplorer",value:function(t){var e=t.data.DATE,r=(0,Z.p6)(e),a=(0,n.Z)({},P.zG,L(L({},d.cY.defaultParams),{},{start_date:r,end_date:r,quick_date_range:"custom",status:["failed","successful"],template_id:this.props.queryParams.template_id,org_id:this.props.queryParams.org_id,job_type:this.props.queryParams.job_type}));this.props.redirect(O.n.jobExplorer,a)}},{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout((function(){t.init()}),500)})}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){T.td_("#"+this.props.id+" > *").remove();var t,e=T.Z1g("%Y-%m-%d"),r=this.props.data.reduce((function(t,r){var a=r.created_date,n=r.successful_count,i=r.failed_count,l=e(a)||new Date,o=+n||0,s=+i||0,c=+n+i||0;return t.concat({DATE:l,RAN:o,FAIL:s,TOTAL:c})}),[]),a=this.props.getWidth(),n=this.props.getHeight(),i=T.tiA().rangeRound([0,a]).padding(.35),l=T.BYU().range([n,0]),o=T.Ys("#"+this.props.id).append("svg").attr("width",a+this.props.margin.left+this.props.margin.right).attr("height",n+this.props.margin.top+this.props.margin.bottom).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),s=T.PKp(["#6EC664","#A30000"]),c=new j({svg:"#"+this.props.id,colors:s}),u=T.knu().keys(["FAIL","RAN"]).order(T.Qxt).offset(T.HLf)(r);i.domain(u[0].map((function(t){return t.data.DATE}))),l.domain([0,T.Fp7(u[u.length-1],(function(t){return 1.15*t[1]}))||8]),o.append("g").attr("class","y-axis").call(T.y4O(l).tickSize(-a,0,0)).selectAll("line").attr("stroke","#d7d7d7"),o.selectAll(".y-axis .tick text").attr("x",-5),o.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-n/2).attr("dy","1em").style("text-anchor","middle").text("Jobs across all clusters");var d=Math.round(r.length/(r.length/2));t=r.map((function(t){return t.DATE})),r.length>14&&(t=r.map((function(t,e){return e%d==0?t.DATE:void 0})).filter((function(t){return t}))),o.append("g").attr("class","x-axis").attr("transform","translate(0,"+n+")").call(T.LLu(i).tickValues(t).tickFormat(T.i$Z("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),o.selectAll(".x-axis .tick text").attr("y",10),o.append("text").attr("transform","translate("+a/2+" ,"+(n+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var p=o.selectAll("layer").data(u).enter().append("g").attr("class","layer").style("fill",(function(t,e){return s(e)}));p.selectAll("rect").data((function(t){return t})).enter().append("rect").attr("x",(function(t){return i(t.data.DATE)})).attr("y",(function(t){return l(t[0])})).attr("height",0).attr("width",i.bandwidth()-1).transition().duration(550).ease(T.LUP).attr("y",(function(t){return l(t[1])})).attr("height",(function(t){return l(t[0])-l(t[1])})),p.selectAll("rect").on("mouseover",c.handleMouseOver).on("mousemove",c.handleMouseOver).on("mouseout",c.handleMouseOut).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.data!==this.props.data&&this.init()}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return s().createElement("div",{id:this.props.id})}}]),i}(o.Component);A.propTypes={id:w().string,queryParams:w().object,data:w().array,margin:w().object,getHeight:w().func,getWidth:w().func,redirect:w().func};const q=(0,E.Z)(A);function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var I=function(t){(0,v.Z)(i,t);var e,r,a=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,x.Z)(e);if(r){var n=(0,x.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,_.Z)(this,t)});function i(t){var e;return(0,g.Z)(this,i),(e=a.call(this,t)).init=e.init.bind((0,b.Z)(e)),e.draw=e.draw.bind((0,b.Z)(e)),e.resize=e.resize.bind((0,b.Z)(e)),e.updateCluster=e.updateCluster.bind((0,b.Z)(e)),e.redirectToJobExplorer=e.redirectToJobExplorer.bind((0,b.Z)(e)),e.state={formattedData:[],timeout:null},e}return(0,y.Z)(i,[{key:"redirectToJobExplorer",value:function(t){var e=t.DATE,r=(0,Z.p6)(e),a=(0,n.Z)({},P.zG,B(B({},d.cY.defaultParams),{},{start_date:r,end_date:r,quick_date_range:"custom",status:["failed","successful"],cluster_id:this.props.queryParams.cluster_id,org_id:this.props.queryParams.org_id,template_id:this.props.queryParams.template_id,job_type:this.props.queryParams.job_type}));this.props.redirect(O.n.jobExplorer,a)}},{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout((function(){t.init()}),500)})}},{key:"updateCluster",value:function(){this.init()}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){T.td_("#"+this.props.id+" > *").remove();var t=this.props.getWidth(),e=this.props.getHeight();function r(t){t.transition().duration(1e3).attrTween("stroke-dasharray",a)}function a(){var t=this.getTotalLength(),e=T.ITZ("0,"+t,t+","+t);return function(t){return e(t)}}var n=T.Xf().rangeRound([0,t]),i=T.BYU().range([e,0]),l=T.PKp(["#6EC664","#A30000","#06C"]),o=T.Ys("#"+this.props.id).append("svg").attr("width",t+this.props.margin.left+this.props.margin.right).attr("height",e+this.props.margin.top+this.props.margin.bottom).attr("z",100).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),s=new j({svg:"#"+this.props.id,colors:l}),c=this.props.data,u=T.Z1g("%Y-%m-%d"),d=c.reduce((function(t,e){var r=e.created_date,a=e.successful_count,n=e.failed_count,i=u(r)||new Date,l=+a||0,o=+n||0,s=+a+n||0;return t.concat({DATE:i,RAN:l,FAIL:o,TOTAL:s})}),[]);n.domain(T.Wem(d,(function(t){return t.DATE}))),i.domain([0,T.Fp7(d,(function(t){return 1.15*t.TOTAL||8}))]);var p,m=T.jvg().curve(T.FdL).x((function(t){return n(t.DATE)})).y((function(t){return i(t.RAN)})),f=T.jvg().defined((function(t){return!isNaN(t.FAIL)})).curve(T.FdL).x((function(t){return n(t.DATE)})).y((function(t){return i(t.FAIL)}));o.append("g").attr("class","y-axis").call(T.y4O(i).ticks(10).tickSize(-t)).selectAll("line").attr("stroke","#d7d7d7"),o.selectAll(".y-axis .tick text").attr("x",-5),o.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-e/2).attr("dy","1em").style("text-anchor","middle").text("Job runs");var h=Math.round(d.length/(d.length/2));p=d.map((function(t){return t.DATE})),d.length>14&&(p=d.map((function(t,e){return e%h==0?t.DATE:void 0})).filter((function(t){return t}))),o.append("g").attr("class","x-axis").attr("transform","translate(0,"+e+")").call(T.LLu(n).tickValues(p).tickSize(-e).tickFormat(T.i$Z("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),o.selectAll(".x-axis .tick text").attr("y",10),o.append("text").attr("transform","translate("+t/2+" ,"+(e+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var g=o.append("path").attr("class","mouse-line").style("stroke","black").style("stroke-width","3px").style("stroke-dasharray","3, 3").style("opacity","0"),y=function(t){s.handleMouseOver(t),g.transition().style("opacity","1")},b=function(){var t=this.cx.baseVal.value;g.attr("d",(function(){return"M"+t+","+e+" "+t+",0"}))},v=function(){s.handleMouseOut(),g.transition().style("opacity",0)};o.append("path").data([d]).attr("class","line").style("fill","none").style("stroke",(function(){return l(1)})).attr("stroke-width",2).attr("d",m).call(r),o.append("path").data([d]).attr("class","line").style("fill","none").style("stroke",(function(){return l(0)})).attr("stroke-width",2).attr("d",f).call(r),o.selectAll("dot").data(d).enter().append("circle").attr("r",3).style("stroke",(function(){return l(1)})).style("fill",(function(){return l(1)})).attr("cx",(function(t){return n(t.DATE)})).attr("cy",(function(t){return i(t.RAN)})).on("mouseover",y).on("mousemove",b).on("mouseout",v).on("click",this.redirectToJobExplorer),o.selectAll("dot").data(d).enter().append("circle").attr("r",3).style("stroke",(function(){return l(0)})).style("fill",(function(){return l(0)})).attr("cx",(function(t){return n(t.DATE)})).attr("cy",(function(t){return i(t.FAIL)})).on("mouseover",y).on("mousemove",b).on("mouseout",v).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.updateCluster(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.data!==this.props.data&&this.updateCluster()}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return s().createElement("div",{id:this.props.id})}}]),i}(o.Component);I.propTypes={id:w().string,queryParams:w().object,data:w().array,margin:w().object,getHeight:w().func,getWidth:w().func,redirect:w().func};const R=(0,E.Z)(I);var S,z,M,F=r(30168),W=r(29163),N=r(83061),U=(0,W.ZP)(h.DataListCell)(S||(S=(0,F.Z)(["\n  --pf-c-data-list__cell-cell--MarginRight: 0;\n"]))),Y=(0,W.ZP)(h.DataListItem)(z||(z=(0,F.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n"]))),J=(0,W.ZP)(U)(M||(M=(0,F.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]))),G=function(t){var e=t.modules,r=t.isLoading;return s().createElement(h.DataList,{"aria-label":"Top Modules",style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},s().createElement(Y,{"aria-labelledby":"top-modules-header"},s().createElement(U,null,s().createElement("h3",null,"Top modules")),s().createElement(J,null,s().createElement("h3",null,"Usage"))),r&&s().createElement(h.DataListItem,{"aria-labelledby":"modules-loading",key:r,style:{border:"none"}},s().createElement(h.DataListCell,null,s().createElement(c.Z,null))),!r&&e.length<=0&&s().createElement(h.DataListItem,{"aria-labelledby":"modules-no-data",key:r,style:{border:"none"}},s().createElement(h.DataListCell,null,s().createElement(N.Z,null))),!r&&e.filter((function(t){return null!==t.name})).map((function(t,e){var r=t.name,a=t.host_task_count;return s().createElement(Y,{"aria-labelledby":"top-modules-detail",key:e},s().createElement(U,null,s().createElement("span",null,(0,Z.mN)(r))),s().createElement(J,null,a))})))};G.propTypes={modules:w().array,isLoading:w().bool};const H=G;var V,K=r(70885),$=r(45987),X=r(9771),Q=r(37384),tt=r(94592),et=r(62455),rt=r(65460),at=r(86445),nt=r(77388),it=["result","request"],lt=["result","request"];function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function st(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ct=W.ZP.div(V||(V=(0,F.Z)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 2rem;\n"]))),ut=function(t){if(t){if(t&&t[0]){var e=Math.ceil(t[0].failed_count/t[0].total_failed_count*100);return"".concat(t[0].task_name," ").concat(e,"%")}return"Unavailable"}},dt=function(t,e){return Math.ceil(t/e*100)+"%"},pt=function(t){var e,r,a,i,l,p,m,f=t.selectedId,g=t.isOpen,y=t.handleModal,b=t.qp,v=t.jobType,_=(0,P.eR)(),x=st(st({},b),{},{template_id:[f],attributes:["id","status","job_type","started","finished","elapsed","created","cluster_name","org_name"],group_by_time:!1,limit:5,sort_options:"created",sort_oder:"desc",quick_date_range:b.quick_date_range?b.quick_date_range:"last_30_days",job_type:[v]}),E={group_by:"template",template_id:[f],attributes:["elapsed","job_type","successful_count","failed_count","error_count","waiting_count","pending_count","canceled_count","new_count","running_count","total_count","job"===v?"most_failed_tasks":"most_failed_steps"],status:b.status,quick_date_range:b.quick_date_range?b.quick_date_range:"last_30_days",job_type:[v]},T=(0,nt.ZP)((0,o.useCallback)((function(){return(0,u.Ij)(E)}),[f]),{}),k=T.result,w=T.request,j=(0,$.Z)(T,it),D=(0,nt.ZP)((0,o.useCallback)((function(){return(0,u.Ij)(x)}),[f]),{}),L=D.result,A=D.request,q=(0,$.Z)(D,lt);(0,o.useEffect)((function(){A(),w()}),[f]);var C,B,I=null!==(e=j.isSuccess&&(null==k?void 0:k.items[0]))&&void 0!==e?e:null,R=I?{success:I.successful_count,cancelled:I.canceled_count,error:I.error_count,failed:I.failed_count,new:I.new_count,pending:I.pending_count,running:I.running_count,waiting:I.waiting_count}:null,S={success:rt.global_palette_green_200.value,cancelled:rt.global_palette_black_850.value,error:rt.global_palette_orange_300.value,failed:rt.global_palette_red_100.value,new:rt.global_palette_cyan_200.value,pending:rt.global_palette_purple_300.value,running:rt.global_palette_blue_300.value,waiting:rt.global_palette_light_green_200.value},z=I&&[{label:"Number of runs",id:"total-runs",value:null!==(r=I.total_count)&&void 0!==r?r:"Unavailable"},{label:"Total time",id:"total-time",value:I.elapsed?(0,Z.yH)(I.elapsed):"Unavailable"},{label:"Average time",id:"avg-time",value:I.elapsed?(C=I.elapsed,B=I.total_count,new Date(1e3*Math.ceil(C/B)).toISOString().substr(11,8)):"Unavailable"},{label:"Type",id:"type",value:v?(0,Z.GV)(v):"Unavailable"},{label:"Success rate",id:"success-rate",value:isNaN(I.successful_count)?"Unavailable":dt(I.successful_count,I.total_count)},{label:"Most failed task",id:"most-failed",value:I.most_failed_tasks?ut(I.most_failed_tasks):"Unavailable"}],M=function(){y(!1)};return s().createElement(h.Modal,{"aria-label":"modal",variant:h.ModalVariant.medium,title:q.isSuccess&&j.isSuccess&&(null==k||null===(a=k.items)||void 0===a?void 0:a.length)>0&&(null!==(i=null==k||null===(l=k.items[0])||void 0===l?void 0:l.name)&&void 0!==i?i:"No template name"),isOpen:g,onClose:M},(j.isLoading||q.isLoading)&&s().createElement(c.Z,null),(j.error||q.error)&&s().createElement(X.Z,{message:q.error.error}),j.isSuccess&&q.isSuccess&&(null==L||null===(p=L.items)||void 0===p?void 0:p.length)<=0&&s().createElement(Q.Z,null),j.isSuccess&&q.isSuccess&&(null==L||null===(m=L.items)||void 0===m?void 0:m.length)>0&&s().createElement(s().Fragment,null,R&&s().createElement(tt.Z,{categoryCount:R,categoryColor:S}),s().createElement(h.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},z.map((function(t){var e=t.label,r=t.id,a=t.value;return s().createElement(h.DescriptionListGroup,{className:r,key:e},s().createElement(h.DescriptionListTerm,null,e),s().createElement(h.DescriptionListDescription,null,a))}))),s().createElement(h.Divider,{component:"div",style:{marginTop:"2rem",marginBottom:"1.5rem"}}),s().createElement("p",null,s().createElement("strong",null,"Last 5 jobs")),s().createElement(at.TableComposable,{"aria-label":"Template information table",variant:"compact"},s().createElement(at.Thead,null,s().createElement(at.Tr,null,["Id/Name","Status","Cluster","Finished","Total time"].map((function(t,e){return s().createElement(at.Th,{key:e},t)})))),s().createElement(at.Tbody,null,L.items.map((function(t,e){return s().createElement(at.Tr,{key:"job-detail-".concat(e)},s().createElement(at.Td,null,"".concat(t.id.id," - ").concat(t.id.template_name)),s().createElement(at.Td,null,s().createElement(et.Z,{status:t.status})),s().createElement(at.Td,null,t.cluster_name),s().createElement(at.Td,null,(0,Z.o0)(t.finished)),s().createElement(at.Td,null,(0,Z.yH)(t.elapsed)))}))))),s().createElement(ct,null,s().createElement(h.Button,{key:"cancel",variant:"secondary",onClick:function(){M()}},"Close"),s().createElement(h.Button,{component:"a",onClick:function(){var t=b.start_date,e=b.end_date,r=b.quick_date_range,a=(0,n.Z)({},P.zG,st(st({},d.cY.defaultParams),{},{template_id:[f],status:[],job_type:[v],quick_date_range:r,start_date:t,end_date:e}));_(O.n.jobExplorer,a)},variant:"link"},"View all jobs")))};pt.propTypes={selectedId:w().number.isRequired,qp:w().object.isRequired,jobType:w().string.isRequired,isOpen:w().bool.isRequired,handleModal:w().func.isRequired};const mt=pt;var ft,ht,gt,yt=(0,W.ZP)(h.DataListCell)(ft||(ft=(0,F.Z)(["\n  --pf-c-data-list__cell-cell--MarginRight: 0;\n"]))),bt=(0,W.ZP)(h.DataListItem)(ht||(ht=(0,F.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n  justify-content: center;\n  align-items: center;\n"]))),vt=(0,W.ZP)(yt)(gt||(gt=(0,F.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]))),_t=function(t){var e=t.templates,r=t.isLoading,a=t.qp,n=t.title,i=t.jobType,l=(0,o.useState)(null),u=(0,K.Z)(l,2),d=u[0],p=u[1],m=(0,o.useState)(!1),f=(0,K.Z)(m,2),g=f[0],y=f[1],b=function(t){return"job"===t?"templates":"workflows"};return s().createElement(s().Fragment,null,s().createElement(h.DataList,{"aria-label":"Top ".concat(b(i)),style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},s().createElement(bt,{"aria-labelledby":"top-".concat(b(i),"-header")},s().createElement(yt,null,s().createElement("h3",null,n)),s().createElement(vt,null,s().createElement("h3",null,"Usage"))),r&&s().createElement(h.DataListItem,{"aria-labelledby":"".concat(b(i),"-loading"),key:r,style:{border:"none"}},s().createElement(h.DataListCell,null,s().createElement(c.Z,null))),!r&&e.length<=0&&s().createElement(h.DataListItem,{"aria-labelledby":"".concat(b(i),"-no-data"),key:r,style:{border:"none"}},s().createElement(h.DataListCell,null,s().createElement(N.Z,null))),!r&&e.map((function(t,e){var r=t.name,a=t.total_count,n=t.id;return s().createElement(bt,{"aria-labelledby":"top-".concat(b(i),"-detail"),key:e},s().createElement(yt,null,s().createElement("a",{onClick:function(){y(!0),p(n)}},r)),s().createElement(vt,null,a))}))),d&&s().createElement(mt,{isOpen:g,handleModal:y,selectedId:d,qp:a,jobType:i}))};_t.propTypes={templates:w().array,isLoading:w().bool,queryParams:w().object,title:w().string,qp:w().object,jobType:w().string};const xt=_t;var Et=r(83474);function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var wt={group_by:"template",limit:10,job_type:["job"],group_by_time:!1,status:["successful","failed"]},jt={group_by:"template",limit:10,job_type:["workflowjob"],group_by_time:!1,status:["successful","failed"]},Ot={group_by:"module",sort_options:"host_task_count",sort_oder:"desc",limit:10},Zt={attributes:d.cY.attributes};const Pt=function(){var t,e,r=(0,P.Kx)(Zt),n=(0,P.Kx)(d.kK.defaultParams),i=n.queryParams,g=n.setFromToolbar,y=(0,nt.ZP)((0,o.useCallback)((function(){return(0,u.VU)(r)}),[r]),{}),b=y.result,v=y.error,_=y.request,x=i.cluster_id,E=i.org_id,T=i.template_id,k=i.quick_date_range,w=i.start_date,j=i.end_date,O=kt({cluster_id:x,org_id:E,template_id:T,quick_date_range:k,start_date:w,end_date:j},wt),Z=kt({cluster_id:x,org_id:E,template_id:T,quick_date_range:k,start_date:w,end_date:j},jt),D=kt({cluster_id:x,org_id:E,template_id:T,quick_date_range:k,start_date:w,end_date:j},Ot),L=(0,nt.ZP)((0,o.useCallback)((0,a.Z)(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.Ij)(i);case 2:return e=t.sent,t.abrupt("return",e.items);case 4:case"end":return t.stop()}}),t)}))),[i]),[]),A=L.result,C=L.isLoading,B=L.isSuccess,I=L.request,S=(0,nt.ZP)((0,o.useCallback)((0,a.Z)(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.wi)(D);case 2:return e=t.sent,t.abrupt("return",e.items);case 4:case"end":return t.stop()}}),t)}))),[i]),[]),z=S.result,M=S.isLoading,F=S.request,W=(0,nt.ZP)((0,o.useCallback)((0,a.Z)(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.Ij)(O);case 2:return e=t.sent,t.abrupt("return",e.items);case 4:case"end":return t.stop()}}),t)}))),[i]),[]),N=W.result,U=W.isLoading,Y=W.request,J=(0,nt.ZP)((0,o.useCallback)((0,a.Z)(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.Ij)(Z);case 2:return e=t.sent,t.abrupt("return",e.items);case 4:case"end":return t.stop()}}),t)}))),[i]),[]),G=J.result,V=J.isLoading,K=J.request;return(0,o.useEffect)((function(){_(),I(),F(),Y(),K()}),[i]),v?s().createElement(X.Z,{message:v.error}):s().createElement(s().Fragment,null,s().createElement(m.Z,null,s().createElement(f.Z,{title:"Clusters"}),s().createElement(Et.Z,{categories:b,filters:i,setFilters:g})),s().createElement(p.Z,null,s().createElement(h.Grid,{hasGutter:!0},s().createElement(h.GridItem,{span:12},s().createElement(h.Card,null,s().createElement(h.CardTitle,null,s().createElement("h2",null,"Job status")),s().createElement(h.CardBody,null,C&&s().createElement(c.Z,null),(!i.cluster_id||(null===(t=i.cluster_id)||void 0===t?void 0:t.length)<=0)&&B&&s().createElement(q,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-bar-chart-root",data:A,queryParams:i}),(null===(e=i.cluster_id)||void 0===e?void 0:e.length)>0&&B&&s().createElement(R,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-line-chart-root",data:A,queryParams:i})))),s().createElement(h.GridItem,{span:4},s().createElement(xt,{qp:i,templates:G,isLoading:V,title:"Top workflows",jobType:"workflowjob"})),s().createElement(h.GridItem,{span:4},s().createElement(xt,{qp:i,templates:N,isLoading:U,title:"Top templates",jobType:"job"})),s().createElement(h.GridItem,{span:4},s().createElement(H,{modules:z,isLoading:M})))))}}}]);