"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[521],{86521:(e,t,n)=>{n.r(t),n.d(t,{default:()=>fn,paths:()=>pn});var a=n(92950),r=n.n(a),l=n(86235),i=n(20806),o=n(1085),c=n(86350),s=n(48716),u=n(39173),m=n(69595),d=n(49148),p=n(4942),f=n(15861),E=n(70885),v=n(87757),g=n.n(v),y=n(45697),b=n.n(y),h=n(77388),k="SET_NAME",Z="SET_CATEGORY",P="SET_DESCRIPTION",C="SET_MANUAL_TIME",_="SET_HOSTS",D="SET_FREQUENCY_PERIOD",O="SET_TASKS",S="SET_TEMPLATE_ID";function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null!=e&&e.length)return e.sort((function(e,t){return e.task_order-t.task_order})).map((function(e){return e.task}))};var j,q,B,F,I,L,R=n(87462),A=n(45987),N=n(30168),G=n(35451),M=n(84564),W=n(19694),z=n(31369),H=n(77669),V=n(29163),U=["isOpen","title","label","variant","children"],K=(0,V.ZP)(M.ZP)(j||(j=(0,N.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),Y=(0,V.ZP)(H.ZP)(q||(q=(0,N.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),$=(0,V.ZP)(z.ZP)(B||(B=(0,N.Z)(["\n  color: var(--pf-global--info-color--100);\n"]))),X=(0,V.ZP)(G.ZP)(F||(F=(0,N.Z)(["\n  color: var(--pf-global--success-color--100);\n"]))),J=(0,V.ZP)(W.ZP)(I||(I=(0,N.Z)(["\n  color: var(--pf-global--warning-color--100);\n"]))),Q=V.ZP.div(L||(L=(0,N.Z)(["\n  display: flex;\n  svg {\n    margin-right: 16px;\n  }\n"]))),ee=function(e){var t=e.isOpen,n=e.title,a=e.label,l=void 0===a?"Alert modal":a,i=e.variant,c=void 0===i?"warning":i,s=e.children,u=(0,A.Z)(e,U),m={danger:r().createElement(K,{size:"lg"}),error:r().createElement(Y,{size:"lg"}),info:r().createElement($,{size:"lg"}),success:r().createElement(X,{size:"lg"}),warning:r().createElement(J,{size:"lg"})},d=r().createElement(Q,null,c?m[c]:null,r().createElement(o.Title,{id:"alert-modal-header-label",size:"2xl",headingLevel:"h2"},n));return r().createElement(o.Modal,(0,R.Z)({header:d,"aria-label":l,"aria-labelledby":"alert-modal-header-label",isOpen:!!t,variant:"small",title:n},u),s)};ee.propTypes={isOpen:b().bool.isRequired,title:b().string.isRequired,label:b().string,variant:b().string,children:b().node};const te=ee;var ne,ae,re,le=(0,V.ZP)(o.Card)(ne||(ne=(0,N.Z)(["\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n"]))),ie=(0,V.ZP)(o.CardBody)(ae||(ae=(0,N.Z)(["\n  max-height: 200px;\n  overflow: scroll;\n"]))),oe=(0,V.ZP)(o.ExpandableSection)(re||(re=(0,N.Z)(["\n  text-align: left;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n"])));function ce(e){var t=e.error,n=(0,a.useState)(!1),l=(0,E.Z)(n,2),i=l[0],o=l[1];return r().createElement(r().Fragment,null,Array.isArray(t)&&t.length&&r().createElement(oe,{toggleText:"Details",onToggle:function(){o(!i)},isExpanded:i},r().createElement(le,null,r().createElement(ie,null,r().createElement("ul",null,t.map((function(e){return"string"==typeof e?r().createElement("li",{key:e},e):null})))))))}ce.propTypes={error:b().arrayOf(b().string)};const se=ce;var ue=n(53345),me=function(e){var t=e.options,n=e.formData,l=e.dispatch,i=n.name,c=n.category,s=n.description,u=n.manual_time,m=n.hosts,d=n.frequency_period,p=(0,a.useState)(!1),f=(0,E.Z)(p,2),v=f[0],g=f[1],y=(0,a.useState)(!1),b=(0,E.Z)(y,2),h=b[0],O=b[1],S=(0,a.useState)(!1),T=(0,E.Z)(S,2),x=T[0],w=T[1],j=(0,a.useState)(!1),q=(0,E.Z)(j,2),B=q[0],F=q[1];return r().createElement(o.Form,null,t&&r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What do you want to automate?",isRequired:!0,fieldId:"name-field"},r().createElement(o.TextInput,{isRequired:!0,placeholder:"Example: Provision NGINX server",type:"text",id:"name-field",name:"name",value:i,onChange:function(e){return l({type:k,value:e})},onFocus:function(){return F(!i)},onBlur:function(){return F(!i)}}),!n.name&&B&&r().createElement(o.FormHelperText,{isError:!0,icon:r().createElement(M.ZP,null),isHidden:!B},"Name is required")),r().createElement(o.FormGroup,{label:"What type of task is it?",fieldId:"category-field"},r().createElement(o.Select,{id:"category-field",isOpen:v,variant:"single","aria-label":"Plan category selector",maxHeight:390,onToggle:function(){return g(!v)},onSelect:function(e,t){l({type:Z,value:t}),g(!1)},selections:c},((null==t?void 0:t.category)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"Enter a description of your automation plan",fieldId:"description-field"},r().createElement(o.TextInput,{type:"text",placeholder:"Place description here",id:"description-field",name:"description",value:s,onChange:function(e){return l({type:P,value:e})}})),r().createElement(o.FormGroup,{label:"How long does it take to do this manually?",fieldId:"manual-time-field"},r().createElement(o.Select,{id:"manual-time-field",isOpen:h,variant:"single",placeholderText:"Select amount","aria-label":"Plan time selector",onToggle:function(){return O(!h)},onSelect:function(e,t){l({type:C,value:t}),O(!1)},selections:u},((null==t?void 0:t.manual_time)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"How many hosts do you plan to run this on?",fieldId:"hosts-field"},r().createElement(o.NumberInput,{inputAriaLabel:"Number of hosts",widthChars:8,onChange:function(e){((0,ue.i_)(e.target.value)||0===e.target.value.length)&&l({type:_,value:parseInt(e.target.value)})},onMinus:function(){return l({type:_,value:(0,ue.i_)(m)?m-1:0})},onPlus:function(){return l({type:_,value:(0,ue.i_)(m)?m+1:1})},id:"hosts-field",name:"hosts",value:m,min:0})),r().createElement(o.FormGroup,{label:"How often do you do this?",fieldId:"frequency-period-field"},r().createElement(o.Select,{id:"frequency-period-field",isOpen:x,variant:"single",placeholderText:"Select frequency period","aria-label":"Plan frequency period selector",onToggle:function(){w(!x)},onSelect:function(e,t){l({type:D,value:t}),w(!1)},selections:d},((null==t?void 0:t.frequency_period)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)}))))))};me.propTypes={options:b().object.isRequired,formData:b().object.isRequired,dispatch:b().func.isRequired};const de=me;var pe,fe,Ee,ve,ge,ye=n(42982),be=n(12294),he=n(33606),ke=V.ZP.div(pe||(pe=(0,N.Z)(["\n  margin-top: 20px;\n"]))),Ze=(0,V.ZP)(o.Title)(fe||(fe=(0,N.Z)(["\n  margin-bottom: 10px;\n"]))),Pe=(0,V.ZP)(o.Button)(Ee||(Ee=(0,N.Z)(["\n  padding: 0 16px;\n"]))),Ce=(0,V.ZP)(o.DataListAction)(ve||(ve=(0,N.Z)(["\n  padding: 6px 0;\n"]))),_e=(0,V.ZP)(o.DataListItemRow)(ge||(ge=(0,N.Z)(["\n  align-items: center;\n"]))),De=function(e){var t=e.tasks,n=e.dispatch,l=function(e){n({type:O,value:e})},i=(0,a.useState)(""),c=(0,E.Z)(i,2),s=c[0],u=c[1],m=(0,a.useState)(""),d=(0,E.Z)(m,2),p=d[0],f=d[1],v=(0,a.useState)(""),g=(0,E.Z)(v,2),y=g[0],b=g[1],h=function(){var e=s.trim();""!==e&&(l([].concat((0,ye.Z)(t),[e])),u(""))};return r().createElement(r().Fragment,null,r().createElement(o.Form,null,r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What tasks do you need to accomplish this plan?",fieldId:"task-field"},r().createElement(o.InputGroup,null,r().createElement(o.TextInput,{placeholder:"Enter a description of each task",type:"text",id:"task-field",name:"task",value:s,onChange:function(e){return u(e)},onKeyDown:function(e){e.key&&"Enter"===e.key&&(e.preventDefault(),h())}}),r().createElement(o.Button,{onClick:h,isDisabled:""===s.trim(),variant:"control","aria-label":"Add task"},r().createElement(be.ZP,null)))))),t.length>0&&r().createElement(ke,null,r().createElement(Ze,{headingLevel:"h4",size:"xl"},"Tasks"),r().createElement(o.DataList,{"aria-label":"Draggable list to reorder and remove tasks.",isCompact:!0,onDragFinish:function(e){f("Dragging finished"),l(e.map((function(e){return e.split("-").slice(0,-1).join("-")})))},onDragStart:function(e){b(e),f("Dragging started for task ".concat(e,"."))},onDragMove:function(e,t){f("Dragging task ".concat(y,".  Task ").concat(e," is now task ").concat(t,"."))},onDragCancel:function(){f("Dragging cancelled. Tasks list order is unchanged.")},itemOrder:t.map((function(e,t){return"".concat(e,"-").concat(t)}))},t.map((function(e,n){return r().createElement(o.DataListItem,{"aria-labelledby":"cell-".concat(n+1),id:"".concat(e,"-").concat(n),key:n+1},r().createElement(_e,null,r().createElement(o.DataListControl,null,r().createElement(o.DataListDragButton,{"aria-label":"Reorder","aria-labelledby":"cell-".concat(n+1),"aria-describedby":"Press space or enter to begin dragging, and use the arrow keys to navigate up or down. Press enter to confirm the drag, or any other key to cancel the drag operation.","aria-pressed":"false"})),r().createElement(o.DataListItemCells,{dataListCells:[r().createElement(o.DataListCell,{key:n+1},r().createElement("span",{id:"cell-".concat(n+1)},"".concat(n+1,". ").concat(e)))]}),r().createElement(Ce,{"aria-label":"Actions"},r().createElement(Pe,{onClick:function(){return function(e){l(t.filter((function(t,n){return n!==e})))}(n)},variant:"plain","aria-label":"Delete"},r().createElement(he.ZP,null)))))})))),r().createElement("div",{className:"pf-screen-reader","aria-live":"assertive"},p))};De.propTypes={tasks:b().array.isRequired,dispatch:b().func.isRequired};const Oe=De;var Se,Te=n(48607),xe=n(48236),we=n(37384),je=n(9771),qe=n(12613),Be=n(16559),Fe=n(83474),Ie=["quick_date_range","sort_options"],Le=V.ZP.div(Se||(Se=(0,N.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Re={group_by:"template",limit:10,group_by_time:!1,offset:0,sort_options:"name",sort_order:"asc",cluster_id:[],inventory_id:[],job_type:[],org_id:[],status:[],template_id:[]},Ae=function(e){var t=e.template_id,n=e.dispatch,l=(0,Be.Kx)(Re),i=l.queryParams,c=l.setFromPagination,s=l.setFromToolbar,u=l.dispatch,m=(0,h.ZP)((0,f.Z)(g().mark((function e(){var t,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.ZW)();case 2:return(t=e.sent).quick_date_range,t.sort_options,n=(0,A.Z)(t,Ie),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),{}),p=m.result,E=m.error,v=m.isSuccess,y=m.request,b=(0,h.ZP)(d.Ij,{items:[],meta:{count:0}}),k=b.result,Z=k.items,P=k.meta,C=b.isLoading,_=b.isSuccess,D=b.request,O={sort:{sortBy:{direction:i.sort_order},onSort:function(e,t,n){u({type:"SET_SORT_ORDER",value:{sort_order:n}})}}};return(0,a.useEffect)((function(){y(),D(i)}),[i]),v?r().createElement(o.Form,null,r().createElement(o.FormGroup,{label:"Link a template to this plan:",fieldId:"template-link-field"},r().createElement(Fe.Z,{categories:p,filters:i,setFilters:s,pagination:r().createElement(qe.Z,{count:P.count,params:{limit:+i.limit,offset:+i.offset},setPagination:c,isCompact:!0})}),E&&r().createElement(je.Z,{message:E.error}),C&&r().createElement(xe.Z,null),_&&Z.length<=0&&r().createElement(we.Z,null),_&&Z.length>0&&r().createElement(Te.TableComposable,{"aria-label":"Template link table",variant:"compact"},r().createElement(Te.Thead,null,r().createElement(Te.Tr,null,r().createElement(Te.Th,null),r().createElement(Te.Th,O,"Name"))),r().createElement(Te.Tbody,null,Z.map((function(e){var a=e.id,l=e.name;return r().createElement(Te.Tr,{key:"template-detail-".concat(a)},r().createElement(Te.Td,{"data-testid":"radio-".concat(a),key:"template-detail-".concat(a,"-radio-td"),select:{rowIndex:a,onSelect:function(e,t,a){return n({type:S,value:a})},isSelected:t===a,variant:"radio"}}),r().createElement(Te.Td,null,l))})))),r().createElement(Le,null,r().createElement("div",null,-2!==t&&r().createElement(o.Button,{key:"clear-selection-button",variant:"link","aria-label":"Clear selection",onClick:function(){n({type:S,value:-2})}},"Clear selection")),r().createElement(qe.Z,{count:P.count,params:{limit:+i.limit,offset:+i.offset},setPagination:c,variant:o.PaginationVariant.bottom})))):null};Ae.propTypes={template_id:b().number.isRequired,dispatch:b().func.isRequired};const Ne=Ae;function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function(e){var t,n=e.title,i=e.options,c=e.data,s=void 0===c?{}:c,u=(0,l.useHistory)(),m=(0,l.useLocation)(),p=m.hash,v=m.pathname,y=(0,a.useState)(null),b=(0,E.Z)(y,2),T=b[0],j=b[1],q=(0,h.ZP)(function(){var e=(0,f.Z)(g().mark((function e(t,n){var a,r,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}if(!n){e.next=7;break}return e.next=4,(0,d.Vs)(n,t);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,(0,d.he)(t);case 9:return a=e.sent,r=a.id,l=a.plan_created,e.abrupt("return",{plan_created:Me({id:r},l)});case 13:return e.abrupt("return",{plan_created:{id:0}});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{plan_created:{id:0}}),B=q.result,F=q.isSuccess,I=q.error,L=q.request,R=function(e){var t,n=(0,a.useReducer)((function(e,t){var n=t.type,a=t.value;switch(n){case k:return x(x({},e),{},{name:a});case Z:return x(x({},e),{},{category:a});case P:return x(x({},e),{},{description:a});case C:return x(x({},e),{},{manual_time:a});case _:return x(x({},e),{},{hosts:a});case D:return x(x({},e),{},{frequency_period:a});case O:return x(x({},e),{},{tasks:a});case S:return x(x({},e),{},{template_id:a});default:throw new Error("usePlanData reducer action type ".concat(n," was not found."))}}),{name:(null==e?void 0:e.name)||"",category:(null==e?void 0:e.category)||"system",description:(null==e?void 0:e.description)||"",manual_time:(null==e?void 0:e.manual_time)||240,hosts:(null==e?void 0:e.hosts)||1,frequency_period:(null==e?void 0:e.frequency_period)||"weekly",tasks:w(null==e?void 0:e.tasks)||[],template_id:(null==e?void 0:e.template_id)||-2}),r=(0,E.Z)(n,2),l=r[0],i=r[1];return{formData:l,requestPayload:(t=x({},l),t.tasks=t.tasks.map((function(e,t){return{task:e,task_order:t+1}})),t.hosts&&""!==t.hosts||(t.hosts=1),t.hourly_rate=50,t.frequency_per_period=1,t),dispatch:i}}(s),A=R.formData,N=R.requestPayload,G=R.dispatch,M=[{step_number:1,id:"details",name:"Details",component:r().createElement(de,{options:i,formData:A,dispatch:G})},{step_number:2,id:"tasks",name:"Tasks",component:r().createElement(Oe,{tasks:A.tasks,dispatch:G}),canJumpTo:!!A.name},{step_number:3,id:"link_template",name:"Link template",component:r().createElement(Ne,{template_id:A.template_id,dispatch:G}),canJumpTo:!!A.name,nextButtonText:"Save"}];(0,a.useEffect)((function(){-1===v.indexOf("/add")&&p?j(M.find((function(e){return"#".concat(e.id)===p})).step_number):(u.replace({hash:"details"}),j(1))}),[]);var W=function(e){u.replace({hash:e.id})},z=function(){L(N,null==s?void 0:s.id)},H=r().createElement(o.WizardFooter,null,r().createElement(o.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack,l=e.onClose;return 3!==t.step_number?r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:n,isDisabled:!A.name},"Next"),1!==t.step_number&&r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel")):r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:z,isDisabled:!A.name},"Save"),r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel"))})));return r().createElement(r().Fragment,null,F&&r().createElement(l.Redirect,{to:{pathname:pn.getDetails(B.plan_created.id),state:{reload:!0}}}),T&&r().createElement(o.Wizard,{navAriaLabel:"".concat(n," steps"),mainAriaLabel:"".concat(n," content"),steps:M,onGoToStep:W,onNext:W,onBack:W,onSave:z,onClose:function(){-1!==location.pathname.indexOf("/edit")?u.push(pn.getDetails(null==s?void 0:s.id)):u.push(pn.get)},footer:H,startAtStep:T,height:"calc(100vh - 240px)"}),I&&r().createElement(te,{isOpen:!!I,onClose:function(){L()},title:"Error",variant:"error"},"There was an error saving the plan.",r().createElement(se,{error:null==I||null===(t=I.error)||void 0===t?void 0:t.detail.name})))};We.propTypes={title:b().string.isRequired,options:b().object.isRequired,data:b().object};const ze=We,He=function(){var e,t,n,p,f,E,v=(0,h.ZP)(d.nE,{}),g=v.result,y=v.isSuccess,b=v.request;(0,a.useEffect)((function(){b({})}),[]);var k=y&&(!0===(null===(e=g.meta)||void 0===e||null===(t=e.rbac)||void 0===t||null===(n=t.perms)||void 0===n?void 0:n.write)||!0===(null===(p=g.meta)||void 0===p||null===(f=p.rbac)||void 0===f||null===(E=f.perms)||void 0===E?void 0:E.all)),Z="Create new plan";return y?k?r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:[{title:"Savings Planner",navigate:"/savings-planner"}]}),r().createElement(u.Z,{title:Z})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(o.CardBody,null,r().createElement(ze,{title:Z,options:g}))))):r().createElement(l.Redirect,{to:i.n.savingsPlanner}):null};var Ve,Ue,Ke=n(83264),Ye=V.ZP.div(Xe||(Ve=["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"],Ue=["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"],Object.defineProperty?Object.defineProperty(Ve,"raw",{value:Ue}):Ve.raw=Ue,Xe=Ve));const $e=function(e){var t=e.children;return r().createElement(Ye,null,r().createElement(o.CardActions,null,t))};var Xe,Je,Qe;function et(e){return tt.apply(this,arguments)}function tt(){return tt=(0,f.Z)(g().mark((function e(t){var n,a,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=null,r=!1,e.prev=3,e.next=6,Promise.all(t.map(function(){var e=(0,f.Z)(g().mark((function e(t){var a,l,i,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.request,l=t.label,e.next=3,a();case 3:i=e.sent,(o=i.items.count)>0&&(n[l]=o,r=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a=e.t0;case 11:return e.abrupt("return",{results:r&&n,error:a});case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))),tt.apply(this,arguments)}var nt=(0,V.ZP)(o.Alert)(Je||(Je=(0,N.Z)(["\n  margin-top: 10px;\n"]))),at=V.ZP.span(Qe||(Qe=(0,N.Z)(["\n  && {\n    margin-right: 10px;\n  }\n"]))),rt=function(e){var t=e.onConfirm,n=e.modalTitle,l=void 0===n?"Delete":n,i=e.name,c=void 0===i?"":i,s=e.variant,u=void 0===s?"secondary":s,m=e.isDisabled,d=void 0!==m&&m,p=e.ouiaId,v=void 0===p?null:p,y=e.deleteMessage,b=void 0===y?"Delete?":y,h=e.deleteDetailsRequests,k=void 0===h?[]:h,Z=e.disabledTooltip,P=void 0===Z?"This item cannot be deleted":Z,C=e.children,_=(0,a.useState)(!1),D=(0,E.Z)(_,2),O=D[0],S=D[1],T=(0,a.useState)(),x=(0,E.Z)(T,2),w=x[0],j=x[1],q=(0,a.useState)({}),B=(0,E.Z)(q,2),F=B[0],I=B[1],L=(0,a.useState)(!1),R=(0,E.Z)(L,2),A=R[0],N=R[1],G=function(){var e=(0,f.Z)(g().mark((function e(t){var n,a,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),!(k.length>0&&t)){e.next=8;break}return e.next=4,et(k);case 4:n=e.sent,a=n.results,(r=n.error)?j(r):I(a);case 8:N(!1),S(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return w?r().createElement(te,{isOpen:!!w,variant:"error",title:"Error!",onClose:function(){G(!1),j()}},r().createElement(se,{error:w.detail})):r().createElement(r().Fragment,null,P?r().createElement(o.Tooltip,{content:P,position:"top"},r().createElement("div",null,r().createElement(o.Button,{spinnerAriaValueText:A?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return G(!0)},ouiaId:v},C||"Delete"))):r().createElement(o.Button,{ouiaId:v,spinnerAriaValueText:A?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return G(!0)}},C||"Delete"),r().createElement(te,{isOpen:O,title:l,variant:"danger",onClose:function(){return G(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"Confirm Delete",isDisabled:d,onClick:function(){t(),G(!1)}},"Delete"),r().createElement(o.Button,{ouiaId:"delete-modal-cancel",key:"cancel",variant:"link","aria-label":"Cancel",onClick:function(){return G(!1)}},"Cancel")]},"Are you sure you want to delete:",r().createElement("br",null),r().createElement("strong",null,c),Object.values(F).length>0&&r().createElement(nt,{variant:"warning",isInline:!0,title:r().createElement("div",null,r().createElement("div",{"aria-label":b},b),r().createElement("br",null),Object.entries(F).map((function(e){var t=(0,E.Z)(e,2),n=t[0],a=t[1];return r().createElement("div",{"aria-label":"".concat(n,": ").concat(a),key:n},r().createElement(at,null,n)," ",r().createElement(o.Badge,null,a))})))})))};rt.propTypes={onConfirm:b().func.isRequired,modalTitle:b().string,name:b().string,variant:b().object,isDisabled:b().bool,ouiaId:b().string,deleteMessage:b().string,deleteDetailsRequests:b().array,disabledTooltip:b().bool,children:b().node};const lt=rt;var it=function(e){var t=e.tabsArray,n=e.defaultTabId,a=void 0===n?1:n,i=(0,l.useHistory)(),c=(0,l.useLocation)();return r().createElement(o.Tabs,{activeKey:function(e){var n;return(null===(n=t.find((function(e){return e.link===c.pathname})))||void 0===n?void 0:n.id)||e}(a),onSelect:function(e,n){var a=t.find((function(e){return e.id===n}));a&&i.push(a.link)}},t.map((function(e){return r().createElement(o.Tab,{"aria-label":"string"==typeof e.name?e.name:"".concat(e.id," tab"),eventKey:e.id,key:e.id,link:e.link,title:r().createElement(o.TabTitleText,null,e.name),role:"tab"})})))};it.propTypes={defaultTabId:b().number,tabsArray:(0,y.arrayOf)((0,y.shape)({id:y.number.isRequired,link:y.string.isRequired,name:(0,y.oneOfType)([y.string.isRequired,y.node.isRequired])})).isRequired};const ot=it;var ct,st,ut=n(62455),mt=n(35993);function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=(0,V.ZP)(o.CardBody)(ct||(ct=(0,N.Z)(["\n  min-height: 500px;\n  padding: 0;\n  padding-bottom: 20px;\n\n  &:first-child {\n    padding-top: 0;\n  }\n"]))),Et=(0,V.ZP)(o.Divider)(st||(st=(0,N.Z)(["\n  padding-top: 24px;\n"]))),vt=function(e){var t=e.tabsArray,n=e.plan,c=e.canWrite,s=(0,l.useLocation)().pathname,u=(0,Be.eR)(),m=n.id,E=n.automation_status,v=n.category,y=n.description,b=n.frequency_period,k=n.hosts,Z=n.manual_time,P=n.modified,C=n.name,_=n.tasks,D=n.template_details,O=n.template_id,S=(0,h.ZP)(d.nE,{}),T=S.result,x=S.isSuccess,w=S.request;(0,a.useEffect)((function(){w({})}),[]);var j=function(e,t){var n;if(!x||!T[e])return"";var a=T[e].find((function(e){return e.key===t}));return null!==(n=null==a?void 0:a.value)&&void 0!==n?n:""},q={Name:C||void 0,"Automation type":v?j("category",v):void 0,Description:y||void 0,"Manual time":Z?j("manual_time",Z):void 0,"Run on hosts":k||void 0,Frequency:b?j("frequency_period",b):void 0,Template:O?function(e){if(e.id)return r().createElement("a",{onClick:function(){return function(e){var t=(0,p.Z)({},Be.zG,pt(pt({},mt.cY.defaultParams),{},{quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]}));u(i.n.jobExplorer,t)}(e.id)}},e.name)}(D):void 0,"Last job status":E.status&&"None"!==E.status?r().createElement(ut.Z,{status:E.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(M.ZP,null)},"Not Running"),"Last updated":P?r().createElement("span",null,(0,ue.o0)(P)):void 0},B=(0,h.ZP)(function(){var e=(0,f.Z)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Kh)(t);case 2:u(i.n.savingsPlanner);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=B.request,I=B.error,L=(0,h.pF)(I),R=L.error,A=L.dismissError;return r().createElement(r().Fragment,null,n&&r().createElement(r().Fragment,null,r().createElement(ft,null,r().createElement(ot,{tabsArray:t}),r().createElement("div",{style:{padding:"1rem"}},r().createElement(o.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},Object.keys(q).map((function(e,t){return void 0!==q[e]&&r().createElement(o.DescriptionListGroup,{key:t},r().createElement(o.DescriptionListTerm,null,e),r().createElement(o.DescriptionListDescription,null,q[e]))}))),_.length>0&&r().createElement(o.DescriptionList,null,r().createElement(Et,{component:"div"}),r().createElement(o.DescriptionListGroup,{key:_},r().createElement(o.DescriptionListTerm,null,"Tasks"),r().createElement(o.DescriptionListDescription,null,r().createElement(o.List,{component:"ol",type:"1"},_.map((function(e){var t=e.id,n=e.task;return r().createElement(o.ListItem,{key:t},n)})))))))),c&&r().createElement(o.CardFooter,null,r().createElement($e,null,r().createElement(o.Button,{key:"edit-plan-button",variant:"primary","aria-label":"Edit plan",onClick:function(){u("".concat(s.split("/details")[0],"/edit"))}},"Edit"),r().createElement(lt,{key:"delete-plan-button",name:C,modalTitle:"Delete Plan",onConfirm:function(){return F(m)}},"Delete")),R&&r().createElement(te,{isOpen:!!R,onClose:A,title:"Error",variant:"error"},r().createElement(se,{error:R.detail})))))};vt.propTypes={plan:b().object,tabsArray:b().array,canWrite:b().bool.isRequired};const gt=vt;var yt=n(90952),bt=n(96953),ht=n(91354);const kt=function(e){return(+e.toFixed(0)).toLocaleString()+" hours"};var Zt=function(e){var t=e.value,n=void 0===t?0:t,a=e.isMoney,l=void 0===a||a;return r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),r().createElement(o.CardBody,null,r().createElement(o.Title,{headingLevel:"h3",size:"4xl",style:{color:l?"var(--pf-global--success-color--200)":"#0063CF"}},l?""+(0,ht.Z)(n):""+kt(n))))};Zt.propTypes={value:b().number,isMoney:b().bool};const Pt=Zt;var Ct=n(53688),_t=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Cost")),r().createElement("p",null,"The cost includes the hours spent in implementation, deployment, training and other expenditures for creating, maintaining and running the automation. These hours (cost of investment) are usually higher at the onset, and will be greatly reduced once the automation has been created and only maintenance is required."),r().createElement("br",null),r().createElement("p",null,"For the initial period and the first year, we assume approximately 10 hours spent on each host, as well as some buffer time and a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"For the next two years after the first year, we assume 4 hours spent on each host, as well as a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for the initial period and year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 10) + buffer time\nC2 = C1 * 40% risk adjustment\ninitial cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 1 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for years 2 and 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 4)\nC2 = C1 * 40% risk adjustment\nyear 2 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 3 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")))},Dt=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Savings")),r().createElement("p",null,"The savings indicates the time and money saved as a result of automating the plan."),r().createElement("br",null),r().createElement("p",null,"We assume 50% productivity recapture to account for the productivity that is usually gained by repeated manual implementation of a task over a period of time. We also add a -5% risk adjustment for unforeseen situations that might arise and need to be handled. We also assume a 15% year over year growth in savings."),r().createElement("br",null),r().createElement("p",null,"Money savings for the initial period is 0, so there is no formula necessary."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 0:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"initial period savings = 0 - initial cost")),r().createElement("br",null),r().createElement("p",null,"The formula used for savings for year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = (number of hosts * (manual time in minutes / 60) * yearly frequency of automation)\nS2 = S1 * 50% productivity recapture\nS3 = S2 * 5% risk adjustment * (cost per hour in USD if applicable, based on display)\nyear 1 savings = S2 - S3 - year 1 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 2:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = year 1 savings * 15% growth\nyear 2 savings = year 1 savings + S1 - year 2 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S2 = year 2 savings * 15% growth\nyear 3 savings = year 2 savings + S2 - year 3 cost")))};const Ot=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.link,onClick:function(){return n(!0)},icon:r().createElement(Ct.uM,null)},"Automation formula"),r().createElement(o.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:o.ModalVariant.medium,actions:[r().createElement(o.Button,{key:"cancel",variant:o.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},r().createElement("p",null,"We use risk-adjusted factors to create the 3-year projection of cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the risk-adjustment factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),r().createElement("br",null),r().createElement(_t,null),r().createElement("br",null),r().createElement(Dt,null)))};var St=n(86552),Tt=function(){return Tt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Tt.apply(this,arguments)},xt=function(e){return{items:e.projections.series_stats,meta:{legend:[],count:0}}},wt=function(e){return{cost:{key:e?"total_costs":"total_hours_spent_risk_adjusted",color:"#8B8D8F"},benefit:{key:e?"total_benefits":"total_hours_saved",color:e?"var(--pf-global--success-color--100)":"#0063CF"},net:{key:e?"cumulative_net_benefits":"cumulative_time_net_benefits",color:"#EE7A00"}}};const jt=function(e){var t,n,l,i,c=e.tabsArray,s=e.plan,u=(n={initial:"Initial",year1:"Year 1",year2:"Year 2",year3:"Year 3"},l=(t=s).projections.series_stats.map((function(e){return Tt(Tt({},e),{year:n[e.year],total_costs:-1*e.total_costs,total_hours_spent_risk_adjusted:-1*e.total_hours_spent_risk_adjusted})})),Tt(Tt({},t),{projections:Tt(Tt({},t.projections),{series_stats:l})})),m=(0,a.useState)(!0),d=m[0],p=m[1],f=[{id:1e3,kind:bt.$v.wrapper,type:bt.yD.chart,parent:null,props:{height:600,domainPadding:{x:100},padding:{bottom:60,left:80},themeColor:bt.nz.gray},tooltip:{cursor:!0,stickToAxis:"x",mouseFollow:!0,legendTooltip:{legendData:[{childName:wt(d).benefit.key,name:"Savings",symbol:{fill:wt(d).benefit.color}},{childName:wt(d).cost.key,name:"Costs",symbol:{fill:wt(d).cost.color}},{childName:wt(d).net.key,name:"Cumulative savings",symbol:{fill:wt(d).net.color}}],titleProperyForLegend:"year"},labelFormat:"customTooltipFormatting"},xAxis:{label:"Time"},yAxis:{label:d?"Money Saved":"Hours Saved",tickFormat:"formatNumberAsK",style:{grid:{stroke:"#D2D2D2"},axisLabel:{padding:60}}}},{id:1001,kind:bt.$v.stack,parent:1e3,props:{}},{id:1102,kind:bt.$v.simple,type:bt.oX.bar,name:wt(d).benefit.key,parent:1001,props:{x:"year",y:wt(d).benefit.key,barRatio:.8,barWidth:0,style:{data:{fill:wt(d).benefit.color,width:120}}},tooltip:{labelName:""}},{id:1101,kind:bt.$v.simple,type:bt.oX.bar,name:wt(d).cost.key,parent:1001,props:{x:"year",y:wt(d).cost.key,barRatio:.8,barWidth:0,style:{data:{fill:wt(d).cost.color,width:120}}},tooltip:{labelName:""}},{id:1002,kind:bt.$v.simple,type:bt.oX.line,name:wt(d).net.key,parent:1e3,props:{x:"year",y:wt(d).net.key,style:{data:{stroke:wt(d).net.color,strokeWidth:5}}},tooltip:{labelName:""}}];return r().createElement(o.Card,null,r().createElement(ot,{tabsArray:c}),r().createElement(o.Grid,null,r().createElement(o.GridItem,{span:9},r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardHeader,null,r().createElement(o.CardActions,null,r().createElement(o.ToggleGroup,{"aria-label":"toggleButton"},r().createElement(o.ToggleGroupItem,{text:"Money",buttonId:"money",isSelected:d,onChange:function(){return p(!0)}}),r().createElement(o.ToggleGroupItem,{text:"Time",buttonId:"time",isSelected:!d,onChange:function(){return p(!1)}}))),r().createElement(o.CardTitle,null,u.name)),r().createElement(o.CardBody,null,r().createElement(St.Z,{schema:f,data:xt(u),specificFunctions:{labelFormat:{customTooltipFormatting:function(e){var t=e.datum;return d?(0,ht.Z)(+t.y):kt(+t.y)}}}})))),r().createElement(o.GridItem,{span:3},r().createElement(r().Fragment,null,r().createElement(Pt,{value:(i=u,d?i.projections.series_stats[3].cumulative_net_benefits:i.projections.series_stats[3].cumulative_time_net_benefits),isMoney:d}),r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardBody,null,r().createElement(o.List,{isPlain:!0},r().createElement(o.ListItem,{icon:r().createElement(yt.fU,{color:wt(d).benefit.color})},"Savings from automating this plan"),r().createElement(o.ListItem,{icon:r().createElement(yt.fU,{color:wt(d).cost.color})},"Costs from creating, maintaining and running the automation"),r().createElement(o.ListItem,{icon:r().createElement(yt.fU,{color:wt(d).net.color})},"Cumulative savings over time")))),r().createElement(Ot,null)))))};var qt=n(47217),Bt=function(e){var t,n,i=e.data,o=(0,l.useParams)().id,c=(0,h.ZP)(d.nE,{meta:{rbac:{perms:{}}}}),s=c.result,u=c.isSuccess,m=c.request,p=!0===(null===(t=s.meta.rbac.perms)||void 0===t?void 0:t.write)||!0===(null===(n=s.meta.rbac.perms)||void 0===n?void 0:n.all);return(0,a.useEffect)((function(){m({})}),[]),(0,a.useEffect)((function(){u&&!p&&(0,qt.Z)(pn.getDetails(o))}),[p]),u?r().createElement(ze,{title:"Edit plan",options:s,data:i}):null};Bt.propTypes={data:b().object.isRequired};const Ft=Bt,It=function(){var e,t,n=(0,l.useParams)().id,i=(0,l.useLocation)(),p=(0,l.useHistory)(),f={id:[n]},E="Details";-1!==i.pathname.indexOf("/statistics")?E="Statistics":-1!==i.pathname.indexOf("/edit")&&(E="Edit plan");var v=(0,h.ZP)(d.wD,{plan:{},rbac:{perms:{}}}),g=v.result,y=g.rbac,b=g.plan,k=v.isSuccess,Z=v.error,P=v.request;(0,a.useEffect)((function(){return p.listen((function(e){e.pathname.includes("/edit")||P(n)}))}),[]),(0,a.useEffect)((function(){P(n)}),[n]);var C=k&&(!0===(null===(e=y.perms)||void 0===e?void 0:e.write)||!0===(null===(t=y.perms)||void 0===t?void 0:t.all)),_=[{id:0,name:r().createElement(r().Fragment,null,r().createElement(Ke.ZP,null),"Back to Plans"),link:pn.get},{id:1,name:"Details",link:pn.getDetails(n)},{id:2,name:"Statistics",link:"".concat(pn.getDetails(n),"/statistics")}],D=k?[{title:"Savings Planner",navigate:pn.get},{title:b.name,navigate:pn.getDetails(n)}]:[];return r().createElement(r().Fragment,null,Z&&r().createElement(je.Z,{message:Z.error}),k&&r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:D}),r().createElement(u.Z,{title:E})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/edit"},r().createElement(Ft,{data:b})),r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/statistics"},r().createElement(jt,{tabsArray:_,plan:b,queryParams:f})),r().createElement(l.Route,{exact:!0,path:pn.details},r().createElement(gt,{plan:b,tabsArray:_,canWrite:C})))))))};var Lt=n(60433),Rt=n(80810);const At=function(e){var t=e.label,n=void 0===t?"":t,a=e.title,l=void 0===a?"No items found.":a,i=e.message,c=void 0===i?"":i,s=e.canAdd,u=void 0!==s&&s,m=e.path,d=void 0===m?void 0:m,p=(0,Be.eR)();return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},r().createElement(o.EmptyStateIcon,{icon:u?Lt.Mh:Rt.W1}),r().createElement(o.Title,{size:"lg",headingLevel:"h3"},l),r().createElement(o.EmptyStateBody,null,c),u&&r().createElement(o.Button,{key:"add-item-button",variant:o.ButtonVariant.primary,"aria-label":n,onClick:function(){d&&p(d)}},n))};var Nt,Gt,Mt,Wt,zt;function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ut=(0,V.ZP)(o.CardTitle)(Nt||(Nt=(0,N.Z)(["\n  word-break: break-word;\n"]))),Kt=V.ZP.span(Gt||(Gt=(0,N.Z)(["\n  margin-right: 5px;\n  font-weight: bold;\n"]))),Yt=V.ZP.small(Mt||(Mt=(0,N.Z)(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n"]))),$t=(0,V.ZP)(o.Checkbox)(Wt||(Wt=(0,N.Z)(["\n  &.pf-c-check.pf-m-standalone {\n    margin-top: -3px;\n  }\n"]))),Xt=V.ZP.div(zt||(zt=(0,N.Z)(["\n  display: flex;\n  min-height: 30px;\n  align-items: center;\n"]))),Jt=function(e){var t,n=e.isSuccess,c=e.plan,s=e.selected,u=void 0===s?[]:s,m=e.handleSelect,d=void 0===m?function(){}:m,f=e.canWrite,v=e.options,g=c.id,y=c.automation_status,b=c.category,h=c.description,k=c.frequency_period,Z=c.modified,P=c.name,C=c.template_details,_=c.projections,D=(0,Be.eR)(),O=null==_?void 0:_.series_stats[_.series_stats.length-1].cumulative_net_benefits,S=(0,a.useState)(!1),T=(0,E.Z)(S,2),x=T[0],w=T[1],j=(0,l.useRouteMatch)(),q=function(e,t){return v[e]?v[e].find((function(e){return e.key===t})).value:t},B=[r().createElement(r().Fragment,{key:g},r().createElement(o.DropdownItem,{key:"edit",onClick:function(){return D("".concat(j.url,"/").concat(g,"/edit"))},position:"right"},"Edit"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return D("".concat(j.url,"/").concat(g,"/edit#tasks"))},position:"right"},"Manage tasks"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return D("".concat(j.url,"/").concat(g,"/edit#link_template"))},position:"right"},"Link template"))];return r().createElement(o.Card,null,r().createElement(o.CardHeader,null,r().createElement(o.CardHeaderMain,null,r().createElement(Ut,null,r().createElement(l.Link,{to:"".concat(j.url,"/").concat(g)},P))),f&&r().createElement(o.CardActions,null,r().createElement(o.Dropdown,{onSelect:function(){},toggle:r().createElement(o.KebabToggle,{onToggle:function(){return w(!x)}}),isOpen:x,isPlain:!0,dropdownItems:B,position:"right"}),r().createElement($t,{onChange:function(){return d(c)},isChecked:u.some((function(e){return e.id===c.id})),"aria-label":"card checkbox",id:"check-1",name:"check1"}))),r().createElement(o.CardBody,null,h?r().createElement(Yt,null,h):null,r().createElement(Xt,null,r().createElement(Kt,null,"Frequency")," ",k?q("frequency_period",k):r().createElement("span",null,"None")),r().createElement(Xt,null,r().createElement(Kt,null,"Template")," ",0!==Object.keys(C||{}).length?(t=C)&&n?r().createElement("a",{onClick:function(){return function(e){var t=(0,p.Z)({},Be.zG,Vt(Vt({},mt.cY.defaultParams),{},{quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]}));D(i.n.jobExplorer,t)}(t.id)}},t.name):null:r().createElement("span",null,"None -"," ",r().createElement("a",{onClick:function(){return D("".concat(j.url,"/").concat(g,"/edit#link_template"))}},"Link template"))),r().createElement(Xt,null,r().createElement(Kt,null,"Last job status"),"None"!==y.status?r().createElement(ut.Z,{status:y.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(M.ZP,null)},"Not Running")),O&&r().createElement(Xt,null,r().createElement(Kt,null,"Projected savings"),r().createElement("a",{onClick:function(){return D("".concat(j.url,"/").concat(g,"/statistics"))}},(0,ht.Z)(+O))),r().createElement(Xt,null,r().createElement(Kt,null,"Last updated")," ",r().createElement("span",null,(0,ue.o0)(Z)))),r().createElement(o.CardFooter,null,r().createElement(o.Label,null,q("category",b))))};Jt.propTypes={isSuccess:b().bool.isRequired,canWrite:b().bool.isRequired,selected:b().array,handleSelect:b().func,plan:b().object,options:b().object};const Qt=Jt;var en=function(e){var t=e.name,n=e.username,a=e.image;return t||n||a?(t&&b().checkPropTypes({name:b().string},{name:e.name},"prop","ItemToDelete"),n&&b().checkPropTypes({username:b().string},{username:e.username},"prop","ItemToDelete"),a&&b().checkPropTypes({image:b().string},{image:e.image},"prop","ItemToDelete"),null):new Error("One of 'name', 'username' or 'image' is required by ItemToDelete component.")},tn=function(e){var t,n=e.itemsToDelete,l=e.pluralizedItemName,i=void 0===l?"Items":l,c=e.onDelete,s=e.errorMessage,u=void 0===s?"Error while deleting":s,m=e.deleteDetailsRequests,d=void 0===m?[]:m,p=e.cannotDelete,v=void 0===p?function(e){return!e}:p,y=(0,a.useState)(!1),b=(0,E.Z)(y,2),h=b[0],k=b[1],Z=(0,a.useState)(null),P=(0,E.Z)(Z,2),C=P[0],_=P[1],D=(0,a.useState)(!1),O=(0,E.Z)(D,2),S=O[0],T=O[1],x=(0,a.useState)(""),w=(0,E.Z)(x,2),j=w[0],q=w[1],B=function(){var e=(0,f.Z)(g().mark((function e(t){var a,r,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),_(null),!(t&&1===n.length&&(null==d?void 0:d.length)>0)){e.next=9;break}return e.next=5,et(d);case 5:a=e.sent,r=a.results,(l=a.error)?q(l):_(r);case 9:T(!1),k(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F="Delete ".concat(i,"?"),I=0===n.length||n.some(v);return j?r().createElement(te,{isOpen:!!j,title:"Error!",onClose:function(){B(!1),q()}},r().createElement(se,{error:j.detail})):r().createElement(r().Fragment,null,r().createElement(o.Tooltip,{content:(t=n.filter(v).map((function(e){return e.name||e.username})).join(", "),n.some(v)?r().createElement("div",null,u?r().createElement(r().Fragment,null,r().createElement("span",null,u),r().createElement("span",null,": ".concat(t))):"You do not have permission to delete ".concat(i,": ").concat(t)):n.length?"Delete":"Select a plan to delete"),position:"top"},r().createElement("div",null,r().createElement(o.Button,{variant:"secondary",ouiaId:"delete-button",spinnerAriaValueText:S?"Loading":void 0,"aria-label":"Delete",onClick:function(){return B(!0)},isDisabled:I},"Delete"))),h&&r().createElement(te,{variant:"danger",title:F,isOpen:h,onClose:function(){return B(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"confirm delete",isDisabled:Boolean(C),onClick:function(){c(),B()}},"Delete"),r().createElement(o.Button,{key:"cancel",variant:"link","aria-label":"cancel delete",onClick:function(){return B(!1)}},"Cancel")]},r().createElement("div",null,"This action will delete the following:"),n.map((function(e){return r().createElement("span",{key:e.id},r().createElement("strong",null,e.name||e.username||e.image),r().createElement("br",null))}))))};tn.propTypes={itemsToDelete:b().arrayOf(b().shape({id:b().number.isRequired,name:en,username:en,image:en})).isRequired,pluralizedItemName:b().string,onDelete:b().func.isRequired,errorMessage:b().string,warningMessage:b().node,deleteDetailsRequests:b().array,cannotDelete:b().func,deleteMessage:b().string};const nn=tn;var an,rn,ln;function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=V.ZP.div(an||(an=(0,N.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 76px);\n"]))),un=V.ZP.div(rn||(rn=(0,N.Z)(["\n  flex-shrink: 0;\n"]))),mn=(0,V.ZP)(c.Z)(ln||(ln=(0,N.Z)(["\n  flex-grow: 1;\n"])));const dn=function(){var e,t,n=(0,Be.eR)(),i=(0,l.useLocation)().pathname,c=(0,Be.Kx)(mt.bE.defaultParams),m=c.queryParams,p=c.setFromPagination,v=c.setFromToolbar,y=(0,h.ZP)(d.nE,{}),b=y.result,k=y.isSuccess,Z=y.request,P=(0,h.ZP)(d.Wu,{items:[],rbac:{perms:{}},meta:{count:0}}),C=P.result,_=C.items,D=C.rbac,O=C.meta,S=P.isLoading,T=P.isSuccess,x=P.error,w=P.request,j=cn(cn({},b),{},{name:[{key:"name",value:null}]});(0,a.useEffect)((function(){Z({})}),[]),(0,a.useEffect)((function(){w(m)}),[m]);var q=T&&(!0===(null===(e=D.perms)||void 0===e?void 0:e.write)||!0===(null===(t=D.perms)||void 0===t?void 0:t.all)),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,a.useState)([]),n=(0,E.Z)(t,2),r=n[0],l=n[1],i=r.length>0&&r.length===e.length,o=function(e){r.some((function(t){return t.id===e.id}))?l((function(t){return(0,ye.Z)(t.filter((function(t){return t.id!==e.id})))})):l((function(t){return[].concat((0,ye.Z)(t),[e])}))};return{selected:r,isAllSelected:i,handleSelect:o,setSelected:l}}(_),F=B.selected,I=B.handleSelect,L=B.setSelected,R=(0,h.px)(d.z2,null),A=R.isLoading,N=R.deletionError,G=R.deleteItems,M=R.clearDeletionError,W=function(){var e=(0,f.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(F.map((function(e){return e.id})));case 2:L([]),w(m);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r().createElement(sn,null,r().createElement(s.Z,null,r().createElement(u.Z,{title:"Savings Planner"}),r().createElement(Fe.Z,{categories:j,filters:m,setFilters:v,additionalControls:[].concat((0,ye.Z)(q?[r().createElement(o.Button,{key:"add-plan-button",variant:"primary","aria-label":"Add plan",onClick:function(){n("".concat(i,"/add"))}},"Add plan")]:[]),[q&&k&&_.length>0&&r().createElement(nn,{key:"delete-plan-button",onDelete:W,itemsToDelete:F,pluralizedItemName:"Savings plan"})]),pagination:T&&_.length>0?r().createElement(qe.Z,{count:O.count,params:{limit:+m.limit,offset:+m.offset},setPagination:p,isCompact:!0}):null})),r().createElement(mn,null,x?r().createElement(je.Z,{message:x.error}):S||A?r().createElement(xe.Z,null):!T||0!==_.length||S||A?!T||S||A?null:r().createElement(o.Gallery,{hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},_.map((function(e){return r().createElement(Qt,{key:e.id,isSuccess:T,selected:F,plan:e,handleSelect:I,canWrite:q,options:b})}))):r().createElement(At,{label:"Add plan",title:"No plans found",message:q?"Update the applied filters or add a new plan.":"Update the applied filters.",canAdd:q,path:"".concat(i,"/add")})),_.length>0&&!(S||A)&&r().createElement(un,null,r().createElement(qe.Z,{count:O.count,params:{limit:+m.limit,offset:+m.offset},setPagination:p,variant:o.PaginationVariant.bottom})),N&&r().createElement(te,{"aria-label":"Deletion error",isOpen:N,onClose:M,title:"Error",variant:"error"},"Failed to delete one or more plans.",r().createElement(se,{error:N.detail})))};var pn={get:""+i.n.savingsPlanner,add:i.n.savingsPlanner+"/add",edit:i.n.savingsPlanner+"/:id/edit",getEdit:function(e){return i.n.savingsPlanner+"/"+e+"/edit"},details:i.n.savingsPlanner+"/:id",getDetails:function(e){return i.n.savingsPlanner+"/"+e}};const fn=function(){return r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:pn.get},r().createElement(dn,null)),r().createElement(l.Route,{exact:!0,path:pn.add},r().createElement(He,null)),r().createElement(l.Route,{path:[pn.edit,pn.details]},r().createElement(It,null)))}}}]);
//# sourceMappingURL=../sourcemaps/521.9313687e6005f8d932d62c1dc1093636.js.map