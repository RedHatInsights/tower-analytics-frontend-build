"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[4903],{94592:(e,t,n)=>{n.d(t,{Z:()=>E});var a,o,r,l,i,s=n(30168),c=n(92950),u=n.n(c),d=n(29163),m=n(45697),p=n.n(m),f=d.default.div(a||(a=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 100%;\n  max-width: 100%;\n  height: 1rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n"]))),g=d.default.div(o||(o=(0,s.Z)(["\n  height: 100%;\n"]))),v=d.default.div(r||(r=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n"]))),h=d.default.div(l||(l=(0,s.Z)(["\n  padding-left: 2rem;\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n"]))),y=d.default.div(i||(i=(0,s.Z)(["\n  width: 0.75rem;\n  height: 0.75rem;\n  margin-right: 0.5rem;\n"])));function _(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}var b=function(e){var t=e.categoryCount,n=e.categoryColor,a=e.showPercent,o=void 0!==a&&a,r=Object.values(t).reduce((function(e,t){return e+t})),l=Object.keys(t).filter((function(e){return t[e]>0})).sort((function(e,n){return t[e]<t[n]?1:t[e]>t[n]?-1:0})).map((function(e){return{name:e,barSpacing:t[e]/r,color:n[e]}})),i=1-.15*(l.length-1)/100;return u().createElement(u().Fragment,null,u().createElement(f,null,l.map((function(e,t){var n=e.barSpacing,a=e.color;return t<l.length-1?u().createElement(u().Fragment,{key:t},u().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}),u().createElement(g,{style:{backgroundColor:"transparent",width:"".concat(.15,"%")}})):u().createElement(u().Fragment,{key:t},u().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}))}))),u().createElement(v,null,l.map((function(e){var t=e.name,n=e.barSpacing,a=e.color;return u().createElement(h,{key:"label-".concat(t)},u().createElement(y,{style:{backgroundColor:a}}),o?u().createElement("p",null,_(t)," ",Math.round(100*n),"%"):u().createElement("p",null,_(t)))}))))};b.propTypes={categoryColor:p().object.isRequired,categoryCount:p().object.isRequired,showPercent:p().bool};const E=b},48236:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(92950),o=n.n(a),r=n(1085),l=n(76473);const i=function(){return o().createElement(r.EmptyState,{variant:r.EmptyStateVariant.full,style:{minHeight:"400px"}},o().createElement(r.EmptyStateIcon,{icon:l.TF}),o().createElement(r.Title,{headingLevel:"h5",size:"lg"},"Loading..."),o().createElement(r.EmptyStateBody,null,"Please wait."))}},83061:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(92950),o=n.n(a),r=n(1085),l=n(76473);const i=function(e){var t=e.title,n=e.subtext;return o().createElement(r.EmptyState,{variant:r.EmptyStateVariant.full,style:{minHeight:"400px"}},o().createElement(r.EmptyStateIcon,{icon:l.TF}),o().createElement(r.Title,{headingLevel:"h5",size:"lg"},t||"No Data"),n&&o().createElement(r.EmptyStateBody,null,n))}},86552:(e,t,n)=>{n.d(t,{Z:()=>f});var a,o=n(92950),r=n.n(o),l=n(43047),i=n(50028),s=n(77685),c=n(44586);!function(e){e.nonGrouped="nonGrouped",e.grouped="grouped"}(a||(a={}));var u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)},m=function(e){var t=e.x,n=e.y,a=(e.disableInlineStyles,function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["x","y","disableInlineStyles"]));return null!=t&&null!=n?r().createElement(l.$O,d({x:t-8,y:n-8},a,a.events)):null},p=function(e){return d(d({},i.wk),{axisFormat:d(d(d({},i.wk.axisFormat),{formatAsYear:function(e){return Intl.DateTimeFormat("en",{year:"numeric"}).format(new Date(e))},formatAsMonth:function(e){return Intl.DateTimeFormat("en",{month:"long"}).format(new Date(e))}}),null==e?void 0:e.axisFormat),labelFormat:d(d({},i.wk.labelFormat),null==e?void 0:e.labelFormat),onClick:d(d({},i.wk.onClick),null==e?void 0:e.onClick),dataComponent:{scatterPlot:m}})};const f=function(e){var t=e.schema,n=e.data,l=e.specificFunctions,m=e.namespace,f=void 0===m?"settings":m,g=(0,s.Kx)({chartSeriesHiddenProps:[]},f),v=g.queryParams.chartSeriesHiddenProps,h=g.dispatch,y=(0,o.useState)({series:[],legend:[]}),_=y[0],b=y[1];return(0,o.useEffect)((function(){b(function(e,t){return void 0===t&&(t=[]),d(d({},e),{series:e.series.map((function(e){return d(d({},e),{hidden:!(!e.serie[0].id&&!e.serie[0].host_id||!t.includes(e.serie[0].hasOwnProperty("host_id").toString()||e.serie[0].hasOwnProperty("id").toString()))})}))})}(function(e){var t,n={series:[],legend:[]};switch(e.type="dates"in e?a.grouped:a.nonGrouped,e.type){case a.grouped:n.series=function(e){var t=e.dates,n=[];return t.forEach((function(e){e.items.forEach((function(t,a){n[a]||(n[a]={serie:[],hidden:!1,name:(0,c.Z)()}),n[a].serie.push(u({created_date:e.date},t))}))})),n}(e);break;case a.nonGrouped:n.series=[{serie:e.items||e.meta.legend,hidden:!1,name:(0,c.Z)()}]}return(null===(t=e.meta)||void 0===t?void 0:t.legend)&&(n.legend=e.meta.legend.map((function(e){var t=n.series.find((function(t){return t.serie.find((function(t){return t.id===e.id}))}));return u(u({},e),{childName:t&&t.name?t.name:""})}))),n}(n),v))}),[n]),r().createElement(i.ZP,{schema:t,functions:d({},p(l)),dataState:[_,function(e){h({type:"SET_CHART_SERIES_HIDDEN_PROPS",value:e.series.map((function(e){return[e.serie[0].id,e.hidden]}))}),b(e)}]})}},10001:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(92950),o=n.n(a),r=n(1085),l=n(60433),i=n(80810),s=n(77685),c=n(62012);const u=function(e){var t=e.label,n=void 0===t?"":t,a=e.title,u=void 0===a?"No items found.":a,d=e.message,m=void 0===d?"":d,p=e.canAdd,f=void 0!==p&&p,g=e.showButton,v=void 0!==g&&g,h=e.path,y=void 0===h?void 0:h,_=e.onButtonClick,b=void 0===_?void 0:_,E=(0,c.useNavigate)();return o().createElement(r.EmptyState,{variant:r.EmptyStateVariant.full},o().createElement(r.EmptyStateIcon,{icon:f?l.Mh:i.W1}),o().createElement(r.Title,{size:"lg",headingLevel:"h3"},u),o().createElement(r.EmptyStateBody,null,m),(f||v)&&o().createElement(r.Button,{key:"add-item-button",variant:r.ButtonVariant.primary,"aria-label":n,onClick:function(){y&&E((0,s.uJ)(y)),b&&b()}},n))}},12613:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(92950),o=n.n(a),r=n(45697),l=n.n(r),i=n(1085),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},c=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],u=function(e){var t=e.count,n=void 0===t?0:t,a=e.perPageOptions,r=void 0===a?null:a,l=e.params,u=e.setPagination,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["count","perPageOptions","params","setPagination"]),m=l.offset,p=l.limit,f=Math.floor(m/p+1),g=function(e){return(e-1)*p};return o().createElement(i.Pagination,s({"data-cy":d.isCompact?"pagination_top":"pagination_bottom",itemCount:n,widgetId:"aa-pagination",perPageOptions:null!=r?r:c,perPage:p,page:f,onPerPageSelect:function(e,t,n){u(g(n),t)},onSetPage:function(e,t){u(g(t))}},d))};u.propTypes={count:l().number,params:l().exact({offset:l().number.isRequired,limit:l().number.isRequired}).isRequired,setPagination:l().func.isRequired,perPageOptions:l().arrayOf(l().exact({title:l().string.isRequired,value:l().number.isRequired}).isRequired)};const d=u},54903:(e,t,n)=>{n.d(t,{Z:()=>rt});var a=n(92950),o=n.n(a),r=n(1085),l=n(12613),i=n(77685),s=n(77388),c=n(9771),u=n(48236),d=n(83061);const m=function(e){var t=e.api,n=e.children,a=e.customLoading,r=void 0!==a&&a,l=e.customEmptyState,i=void 0!==l&&l;return r&&t.isLoading?o().createElement(o().Fragment,null,n):!t||t.isLoading?o().createElement(u.Z,{"data-cy":"api_loading_state"}):t.error?o().createElement(c.Z,{message:t.error.error.error||t.error.error}):t.isSuccess?0===t.result.meta.count&&!i&&t.result.meta.tableData?o().createElement(d.Z,{title:"There is currently no data to display.",subtext:"Select a template filter to see data."}):0!==t.result.meta.count||i?o().createElement(o().Fragment,null,n):o().createElement(d.Z,null):null};var p=n(68936),f=n(86552),g=n(45697),v=n.n(g),h=n(58660),y=n(35993),_=function(e){var t=e.data,n=(0,y.Me)("templates_by_organization"),a=(0,i.Kx)(n).queryParams,r="Organization";function l(){switch(a.adoption_rate_type){case"elapsed_of_templates_by_org":return"Elapsed";case"job_count_of_templates_by_org":return"Job count";case"task_count_of_templates_by_org":return"Task count";case"host_count_of_templates_by_org":return"Host count";default:return""}}var s=t.map((function(e){return e.org_name})),c=t.map((function(e){return e.template_count})),u=t.map((function(e){switch(a.adoption_rate_type){case"elapsed_of_templates_by_org":return e.elapsed;case"job_count_of_templates_by_org":return e.total_count;case"task_count_of_templates_by_org":return e.host_task_count;case"host_count_of_templates_by_org":return e.host_count;default:return null}})),d={config:{modeBarButtonsToRemove:["zoom"],displaylogo:!1,responsive:!0},data:[{customdata:t,hovertemplate:" <br>  <b>".concat(r,"</b>: %{").concat("customdata.org_name","}  <br>  <b>").concat("Template","</b>: %{").concat("customdata.template_name","}  <br>  <b>").concat(l(),"</b>: %{").concat(function(){switch(a.adoption_rate_type){case"elapsed_of_templates_by_org":return"customdata.elapsed";case"job_count_of_templates_by_org":return"customdata.total_count";case"task_count_of_templates_by_org":return"customdata.host_task_count";case"host_count_of_templates_by_org":return"customdata.host_count";default:return""}}(),"}  <br> "),marker:{color:u,coloraxis:"coloraxis"},name:"",x:s,y:c,type:"bar"}],layout:{template:{data:{bar:[{error_x:{color:"#2a3f5f"},error_y:{color:"#2a3f5f"},marker:{line:{color:"white",width:.5},pattern:{fillmode:"overlay",size:10,solidity:.2}},type:"bar"}]},layout:{hoverlabel:{align:"left"},hovermode:"closest",paper_bgcolor:"white",plot_bgcolor:"white",xaxis:{automargin:!0,gridcolor:"#D2D2D2",linecolor:"#D2D2D2",title:{standoff:15},zerolinecolor:"#D2D2D2",zerolinewidth:2},yaxis:{automargin:!0,gridcolor:"#D2D2D2",linecolor:"#D2D2D2",title:{standoff:15},zerolinecolor:"#D2D2D2",zerolinewidth:2}}},xaxis:{tickangle:-45,title:{text:"".concat(r),font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15,color:"black"}}},yaxis:{anchor:"x",domain:[0,1],title:{text:"".concat("Template count"),font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15,color:"black"}},color:"#4f5255"},coloraxis:{colorbar:{title:{text:"".concat(l()),font:{color:"#4f5255",family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15}},tickfont:{color:"#4f5255",family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15}},colorscale:[[0,"#0066CC"],[.2,"#004B95"],[.4,"#5752D1"],[.6,"#3C3D99"],[.8,"#C9190B"],[1,"#A30000"]]},legend:{title:{font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",color:"#4f5255"}},font:{size:10}},margin:{t:30},font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:14,color:"#4f5255"},title:{font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",color:"#4f5255",size:15}},hoverlabel:{font:{size:14,family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif"},bgcolor:"#151515"},style:{cursor:"auto"}},style:{height:"500px",width:"100%"}};return o().createElement(h.Z,d)};_.propTypes={data:v().array};const b=_;var E=n(48607),k=n(91573),w=n(53345),T=n(91354);const x=function(e){return new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(e)},C=function(e){var t=e.isExpanded,n=e.item;return o().createElement(E.Tr,{isExpanded:t},o().createElement(E.Td,{colSpan:6},o().createElement(E.ExpandableRowContent,null,o().createElement(r.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n,a,o;return[{label:"Slow Hosts Count",value:null!==(t=e.slow_hosts_count)&&void 0!==t?t:0},{label:"Host Task Count",value:null!==(n=e.host_task_count)&&void 0!==n?n:0},{label:"Slow Hosts Percentage",value:null!==(a="".concat(x(e.slow_hosts_percentage),"%"))&&void 0!==a?a:0},{label:"Template Success Rate",value:null!==(o="".concat(x(e.template_success_rate),"%"))&&void 0!==o?o:0}]}(n).map((function(e){var t=e.label,n=e.value;return o().createElement(r.DescriptionListGroup,{key:t},o().createElement(r.DescriptionListTerm,null,t),o().createElement(r.DescriptionListDescription,null,n))}))))))};var S,D,O=n(94592),P=n(29163),R=(0,P.default)(r.DescriptionList)(I||(S=["\n  row-gap: 16px;\n"],D=["\n  row-gap: 16px;\n"],Object.defineProperty?Object.defineProperty(S,"raw",{value:D}):S.raw=D,I=S));const F=function(e){var t,n,a,l,i,s,c,u,d,m,p,f,g,v,h,_,b,k=e.isExpanded,w=e.item,T=w?{ok:null!==(t=null==w?void 0:w.successful_count)&&void 0!==t?t:0,skipped:null!==(n=null==w?void 0:w.skipped_count)&&void 0!==n?n:0,failed:null!==(a=null==w?void 0:w.failed_count)&&void 0!==a?a:0,error:null!==(l=null==w?void 0:w.error_count)&&void 0!==l?l:0}:null,x=w?{ok:null!==(i=null==w?void 0:w.average_host_task_ok_count_per_host)&&void 0!==i?i:0,skipped:null!==(s=null==w?void 0:w.average_host_task_skipped_count_per_host)&&void 0!==s?s:0,changed:null!==(c=null==w?void 0:w.average_host_task_changed_count_per_host)&&void 0!==c?c:0,failed:null!==(u=null==w?void 0:w.average_host_task_failed_count_per_host)&&void 0!==u?u:0,unreachable:null!==(d=null==w?void 0:w.average_host_task_unreachable_count_per_host)&&void 0!==d?d:0}:null,C=w?{ok:null!==(m=null==w?void 0:w.ok_host_count)&&void 0!==m?m:0,skipped:null!==(p=null==w?void 0:w.skipped_host_count)&&void 0!==p?p:0,changed:null!==(f=null==w?void 0:w.changed_host_count)&&void 0!==f?f:0,failed:null!==(g=null==w?void 0:w.failed_host_count)&&void 0!==g?g:0,unreachable:null!==(v=null==w?void 0:w.unreachable_host_count)&&void 0!==v?v:0}:null;return o().createElement(E.Tr,{isExpanded:k},o().createElement(E.Td,{colSpan:6},o().createElement(E.ExpandableRowContent,null,o().createElement(r.Flex,null,o().createElement(r.FlexItem,null,o().createElement("strong",null,"Job status")),o().createElement(r.FlexItem,{align:{default:"alignRight"}},o().createElement("strong",null,"Jobs"),"  ",null!==(h=null==w?void 0:w.total_count)&&void 0!==h?h:0)),o().createElement(O.Z,{categoryCount:T,categoryColor:y.ss,showPercent:!0}),o().createElement(r.Flex,null,o().createElement(r.FlexItem,null,o().createElement("strong",null,"All Host status")),o().createElement(r.FlexItem,{align:{default:"alignRight"}},o().createElement("strong",null,"Hosts"),"  ",null!==(_=null==w?void 0:w.host_count)&&void 0!==_?_:0)),o().createElement(O.Z,{categoryCount:C,categoryColor:y.ss,showPercent:!0}),o().createElement(r.Flex,null,o().createElement(r.FlexItem,null,o().createElement("strong",null,"All Task status")),o().createElement(r.FlexItem,{align:{default:"alignRight"}},o().createElement("strong",null,"Tasks"),"  ",null!==(b=null==w?void 0:w.host_task_count)&&void 0!==b?b:0)),o().createElement(O.Z,{categoryCount:x,categoryColor:y.ss,showPercent:!0}),o().createElement(r.Divider,{component:"div",style:{marginTop:"2rem",marginBottom:"1.5rem"}}),function(e){var t=e.most_failed_tasks;if(null!=t)return o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement("strong",null,"Most failed tasks")),o().createElement("br",null),o().createElement(r.Grid,{hasGutter:!0},t.slice(0,t.length).map((function(e,t){var n,a,l,i,s,c,u={passed:null!==(n=null==e?void 0:e.passed_host_count)&&void 0!==n?n:0,failed:null!==(a=null==e?void 0:e.failed_host_count)&&void 0!==a?a:0,unreachable:null!==(l=null==e?void 0:e.unreachable_host_count)&&void 0!==l?l:0},d={passed:null!==(i=null==e?void 0:e.successful_count)&&void 0!==i?i:0,failed:null!==(s=null==e?void 0:e.failed_count)&&void 0!==s?s:0,unfinished:null!==(c=null==e?void 0:e.unfinished_count)&&void 0!==c?c:0};return o().createElement(o().Fragment,null,o().createElement(r.GridItem,null,o().createElement(R,{isHorizontal:!0},function(e){return[{label:"Task name",value:e.task_name},{label:"Module name",value:e.module_name}]}(e).map((function(e){var t=e.label,n=e.value;return o().createElement(r.DescriptionListGroup,{key:t},o().createElement(r.DescriptionListTerm,null,t),o().createElement(r.DescriptionListDescription,null,n))})))),o().createElement(r.GridItem,{lg:6,md:12,key:"hosts-".concat(t)},o().createElement(r.Flex,null,o().createElement(r.FlexItem,null,o().createElement("strong",null,"Host status")),o().createElement(r.FlexItem,{align:{default:"alignRight"}},o().createElement("strong",null,"Hosts"),"  ",function(e){return parseInt(e.passed_host_count)+parseInt(e.failed_host_count)+parseInt(e.unreachable_host_count)}(e))),o().createElement(O.Z,{categoryCount:u,categoryColor:y.ss,showPercent:!0})),o().createElement(r.GridItem,{lg:6,md:12,key:"tasks-".concat(t)},o().createElement(r.Flex,null,o().createElement(r.FlexItem,null,o().createElement("strong",null,"Task status")),o().createElement(r.FlexItem,{align:{default:"alignRight"}},o().createElement("strong",null,"Tasks"),"  ",function(e){return parseInt(e.successful_count)+parseInt(e.failed_count)+parseInt(e.unfinished_count)}(e))),o().createElement(O.Z,{categoryCount:d,categoryColor:y.ss,showPercent:!0})))}))))}(w),o().createElement(r.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n;return[{label:"Clusters",value:null!==(t=e.total_cluster_count)&&void 0!==t?t:0},{label:"Organizations",value:null!==(n=e.total_org_count)&&void 0!==n?n:0}]}(w).map((function(e){var t=e.label,n=e.value;return o().createElement(r.DescriptionListGroup,{key:t},o().createElement(r.DescriptionListTerm,null,t),o().createElement(r.DescriptionListDescription,null,n))}))))))};var I;const L=function(e){var t,n,a,l,i,s,c=e.isExpanded,u=e.item,d=u?{ok:null!==(t=null==u?void 0:u.host_task_ok_count)&&void 0!==t?t:0,changed:null!==(n=null==u?void 0:u.host_task_changed_count)&&void 0!==n?n:0,failed:null!==(a=null==u?void 0:u.host_task_failed_count)&&void 0!==a?a:0,skipped:null!==(l=null==u?void 0:u.host_task_skipped_count)&&void 0!==l?l:0,unreachable:null!==(i=null==u?void 0:u.host_task_unreachable_count)&&void 0!==i?i:0}:null;return o().createElement(E.Tr,{isExpanded:c},o().createElement(E.Td,{colSpan:10},o().createElement(E.ExpandableRowContent,null,o().createElement(r.Flex,null,o().createElement(r.FlexItem,null,o().createElement("strong",null,"All Task status")),o().createElement(r.FlexItem,{align:{default:"alignRight"}},o().createElement("strong",null,"Tasks"),"  ",null!==(s=null==u?void 0:u.host_task_count)&&void 0!==s?s:0)),o().createElement(O.Z,{categoryCount:d,categoryColor:y.ss,showPercent:!0}))))};var j;!function(e){e.templatesExplorer="templatesExplorer",e.hostAnomalies="hostAnomalies",e.mostUsedModules="mostUsedModules"}(j||(j={}));var G=n(22030),B=n(62012),A=function(){return A=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},M=["elapsed"],Z=[],H=function(e,t){return"id"===t&&-1===e[t]},z=function(e,t){return"id"===t&&-2===e[t]};const N=function(e){var t,n,l=e.legendEntry,s=e.headers,c=e.expandedRowName,u=e.clickableLinking,d=(0,a.useState)(!1),m=d[0],p=d[1],f=(0,B.useNavigate)();return o().createElement(o().Fragment,null,o().createElement(E.Tr,{style:(n=l,"id",H(n,"id")?{backgroundColor:k.global_disabled_color_300.value}:{})},c&&o().createElement(E.Td,{expand:{rowIndex:+l.id,isExpanded:m,onToggle:function(){return p(!m)}}}),s.map((function(e){var t=e.key;return function(e){switch(!0){case"total_elapsed_per_org"==e&&void 0===l.total_elapsed_per_org:case"total_job_count_per_org"==e&&void 0===l.total_job_count_per_org:case"total_host_count_per_org"==e&&void 0===l.total_host_count_per_org:case"total_task_count_per_org"==e&&void 0===l.total_task_count_per_org:return!0;default:return!1}}(t)?null:o().createElement(E.Td,{key:"".concat(l.id,"-").concat(t)},u?function(e,t){var n=(0,i.Kx)((0,y.gb)("templates_by_organization")).queryParams,a={host_task_count:"module_usage_by_task",total_org_count:"module_usage_by_organization",total_template_count:"module_usage_by_job_template",total_templates_per_org:"templates_explorer"};return z(e,t)||H(e,t)?"-":M.includes(t)?(0,w.yH)(+e[t]):Z.includes(t)?(0,T.Z)(+e[t]):Object.keys(a).includes(t)&&-1!=e.id&&e.name?o().createElement(r.Tooltip,{content:"View ".concat(e.name," usage")},o().createElement("a",{onClick:function(){return function(e,t){var n,a=((n={})[i.zG]=A(A({},(0,y.gb)(e)),{task_action_id:[t]}),n);f((0,i.uJ)("reports/"+G.Z.getDetails(e).replace("/",""),!0,a))}(a[t],e.id)}},"".concat(e[t]))):Object.keys(a).includes(t)&&e.org_id?o().createElement(r.Tooltip,{content:"View ".concat(e.org_name," usage")},o().createElement("a",{onClick:function(){return function(e,t,n){var a,o=((a={})[i.zG]=A(A({},(0,y.gb)(e)),{org_id:[t],template_id:n.template_id,cluster_id:n.cluster_id,inventory_id:n.inventory_id,status:n.status,limit:n.limit,granularity:n.granularity,quick_date_range:n.quick_date_range}),a);f((0,i.uJ)("reports/"+G.Z.getDetails(e).replace("/",""),!0,o))}(a[t],e.org_id,n)}},"".concat(e[t]))):"".concat(e[t])}(l,t):function(e,t){return z(e,t)||H(e,t)?"-":M.includes(t)?(0,w.yH)(+e[t]):Z.includes(t)?(0,T.Z)(+e[t]):function(e,t){return"average_duration_per_task"===t}(0,t)?(0,w.Xt)(+e[t]):"".concat(e[t])}(l,t))}))),(t=function(e){switch(e){case"templatesExplorer":return F;case"hostAnomalies":return C;case"mostUsedModules":return L;default:return null}}(c))?o().createElement(t,{item:l,isExpanded:m}):null)};var q=function(){return q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},q.apply(this,arguments)};const U=function(e){var t=e.legend,n=e.headers,l=e.getSortParams,s=void 0===l?function(){return{}}:l,c=e.expandedRowName,u=e.clickableLinking,d=e.showKebab,m=(0,a.useState)(!1),p=m[0],f=m[1],g=(0,y.Me)("host_anomalies_scatter"),v=(0,i.Kx)(g).setFromToolbar,h=[o().createElement(r.DropdownItem,{key:"showAll",component:"button",onClick:function(){return v("anomaly",void 0)}},"Display all host rows"),o().createElement(r.DropdownItem,{key:"showAnomalousHosts",component:"button",onClick:function(){return v("anomaly",!0)}},"Display only slow host rows"),o().createElement(r.DropdownItem,{key:"showNonAnomalousHosts",component:"button",onClick:function(){return v("anomaly",!1)}},"Display only non-slow host rows")];return o().createElement(E.TableComposable,{"aria-label":"Report Table",variant:E.TableVariant.compact},o().createElement(E.Thead,null,o().createElement(E.Tr,null,c&&o().createElement(E.Th,null),n.map((function(e){var n=e.key,a=e.value;return d&&"anomaly"===n?o().createElement(E.Th,{key:n,style:{overflow:"visible",zIndex:1}},"Slow",o().createElement(r.Dropdown,{onSelect:function(){f(!0)},toggle:o().createElement(r.KebabToggle,{style:{paddingBottom:"0px"},id:"table-kebab",onToggle:function(){return f(!p)}}),isOpen:p,isPlain:!0,dropdownItems:h,position:"right"})):function(e){switch(!0){case"total_elapsed_per_org"==e&&void 0===t[0].total_elapsed_per_org:case"total_job_count_per_org"==e&&void 0===t[0].total_job_count_per_org:case"total_host_count_per_org"==e&&void 0===t[0].total_host_count_per_org:case"total_task_count_per_org"==e&&void 0===t[0].total_task_count_per_org:return!0;default:return!1}}(n)?null:o().createElement(E.Th,q({key:n},s(n),{"data-cy":n}),a)})))),o().createElement(E.Tbody,null,t.map((function(e){return o().createElement(N,{key:e.id,legendEntry:e,headers:n,expandedRowName:c,clickableLinking:u})}))))};var V,J=n(43047),K=n(53983),W=n(16659),Y=n(28527),$="RESET_DATA",X="SET_DOWNLOAD_TYPE",Q="SET_SHOW_EXTRA_ROWS",ee="SET_SELECTED_RBAC_GROUPS",te="SET_USERS",ne="SET_ADDITIONAL_RECIPIENTS",ae="SET_EMAIL_EXTRA_ROWS",oe="SET_SUBJECT",re="SET_BODY",le="SET_SELECTED_EXPIRY";!function(e){e.moduleReports="moduleReports",e.newAutomationCalculator="newAutomationCalculator",e.onboardingReports="aa21Onboarding",e.sendEmail="sendEmail"}(V||(V={}));var ie=n(63746);const se=function(e){var t,n,a,l,i,s=e.formData,c=e.dispatchReducer,u=s.downloadType;return o().createElement(o().Fragment,null,o().createElement(r.Title,{size:"md",headingLevel:"h4"},"Select export format:"),o().createElement(r.Grid,{sm:2},o().createElement(r.GridItem,null,o().createElement(r.Radio,{onChange:function(){return c({type:X,value:"pdf"})},isChecked:"pdf"===u,name:"optionSelected",label:"PDF",id:"pdf-radio","aria-label":"pdf-radio"})),(t=V.sendEmail,n="beta_".concat(t),a=(0,ie.useFlagsStatus)().flagsReady,l="beta"===window.location.pathname.split("/")[1]?n:t,i=(0,ie.useFlag)(l),(!("localhost"!==window.location.hostname&&!window.location.hostname.includes("ephemeral"))||!!a&&i)&&o().createElement(r.GridItem,null,o().createElement(r.Radio,{onChange:function(){return c({type:X,value:"email"})},isChecked:"email"===u,name:"optionSelected",label:"E-mail",id:"email-radio","aria-label":"email-radio"})))))},ce=function(e){var t=e.options,n=e.formData,a=e.dispatchReducer,l=n.showExtraRows,i=t.totalPages,s=t.pageLimit,c=i<=Math.ceil(100/s)?"All ".concat(i.toString()," pages"):"Top ".concat(Math.ceil(100/s)," of ").concat(i.toString()," pages");return o().createElement(o().Fragment,null,o().createElement(r.Title,{size:"md",headingLevel:"h4"},"Select details:"),o().createElement(r.Grid,{md:4},o().createElement(r.GridItem,null,o().createElement(r.Radio,{onChange:function(){return a({type:Q,value:!1})},isChecked:!l,name:"showExtraRows",label:"Current page",id:"current-radio","aria-label":"current-radio"})),o().createElement(r.GridItem,null,o().createElement(r.Radio,{onChange:function(){return a({type:Q,value:!0})},isChecked:l,name:"showExtraRows",label:c,id:"extra-radio","aria-label":"extra-radio"}))))};var ue=n(49148),de=n(13704);const me=function(e){var t=e.options,n=e.formData,l=e.dispatchReducer,i=n.body,c=n.selectedRbacGroups,u=n.users,d=n.subject,m=n.additionalRecipients,p=n.emailExtraRows,f=n.expiry,g=(0,s.ZP)((function(){return(0,ue.kL)()}),{data:[],meta:{count:0}}),v=g.result.data,h=g.request,y=window.location.href;(0,a.useEffect)((function(){h()}),[]);var _=(0,s.ZP)((function(){return(0,ue.Vk)(c.at(-1))}),{data:[]}),b=_.result.data,E=_.request;(0,a.useEffect)((function(){c.length>0&&E()}),[c]);var k=function(e){var t;return null===(t=v.find((function(t){return t.uuid===e})))||void 0===t?void 0:t.name},T=function(){var e=b.map((function(e){return e.email})),t=b.map((function(e){return e.username})),n=c.at(-1),a={uuid:n,name:k(n),usernames:t,emails:e};-1===u.findIndex((function(e){return e.uuid===a.uuid}))&&u.push(a),l({type:te,value:u})};(0,a.useEffect)((function(){c.length>0&&T()}),[b]);var x=t.totalPages,C=t.pageLimit,S=m.length>0,D=x<=Math.ceil(100/C)?"All ".concat(x," pages"):"Top ".concat(Math.ceil(100/C)," of ").concat(x," pages"),O=(0,a.useState)(!1),P=O[0],R=O[1],F=function(e){for(var t=e.target.value.split(","),n=0;n<t.length;n++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(t[n]))return void R(!0);R(!1)},I=(0,a.useState)(!1),L=I[0],j=I[1];return o().createElement(r.Form,null,x>1&&o().createElement(r.FormGroup,{label:"Select details:",fieldId:"details-field"},o().createElement(r.Grid,{md:4},o().createElement(r.GridItem,null,o().createElement(r.Radio,{onChange:function(){return l({type:ae,value:!1})},isChecked:!p,name:"emailExtraRows",label:"Current page",id:"email-current-radio","aria-label":"email-current-radio"})),o().createElement(r.GridItem,null,o().createElement(r.Radio,{onChange:function(){return l({type:ae,value:!0})},isChecked:p,name:"emailExtraRows",label:D,id:"email-extra-radio","aria-label":"email-extra-radio"})))),o().createElement(r.FormGroup,{label:"Recipient(s)",isRequired:!0,fieldId:"selectedRbacGroups-field"},o().createElement(r.Select,{variant:r.SelectVariant.checkbox,"aria-label":"Recipient",isOpen:L,onClear:function(){return l({type:ee,value:[]}),void l({type:te,value:[]})},onToggle:function(){return j(!L)},onSelect:function(e,t){!function(e,t){var n,a=[t];if(c.indexOf(t)>-1){a=c.filter((function(e){return e!==t}));var o=u.findIndex((function(e){return e.uuid===t}));o>=0&&u.splice(o,1),n=a}else n=c.concat(a);l({type:ee,value:n})}(0,"string"!=typeof t?t.toString():t),j(!1)},hasInlineFilter:!0,selections:c,placeholderText:"Select Recipients"},v.map((function(e,t){var n=e.uuid,a=e.name;return o().createElement(r.SelectOption,{key:t,value:n},a)})))),u.length>0&&o().createElement(r.FormGroup,{label:"User emails",fieldId:"emails-field"},u.map((function(e,t){var n=e.name,a=e.emails;return o().createElement("p",{key:t},o().createElement("b",null,n),":"," ",a.length>0?a.join(", "):o().createElement("i",null,"No emails associated with this group"))}))),o().createElement(r.FormGroup,{label:"External recipient(s)",fieldId:"additionalRecipients-field"},o().createElement(r.TextInput,{placeholder:"Comma separated emails",type:"email",id:"additionalRecipients",name:"additionalRecipients",value:m,onBlur:function(e){return F(e)},onFocus:function(e){return F(e)},onChange:function(e){return l({type:ne,value:e})}}),m&&P&&o().createElement(r.FormHelperText,{isError:!0,icon:o().createElement(J.$O,null),isHidden:!P},"The email format must be valid and comma separated.")),o().createElement(r.FormGroup,{label:"Subject",fieldId:"subject-field"},o().createElement(r.TextInput,{placeholder:"Report is ready to be downloaded",type:"text",id:"subject",name:"subject",value:d,onChange:function(e){return l({type:oe,value:e})}})),o().createElement(r.FormGroup,{label:"Body",fieldId:"body-field"},o().createElement(r.TextArea,{rows:10,autoResize:!0,placeholder:"",type:"text",id:"body",name:"body",value:i,onChange:function(e){return l({type:re,value:e})}})),S&&o().createElement(o().Fragment,null,o().createElement(r.FormGroup,{label:"Link expires on",fieldId:"expiry-field"},o().createElement(de.Z,{categoryKey:"start_date",value:f,setValue:function(e){return l({type:le,value:e}),void T()},validators:[function(e){return e<(0,w.Lg)()?"Must not be before today":""}]})),o().createElement(r.FormHelperText,{isError:!0,icon:o().createElement(J.$O,null),isHidden:!S},"Link expiry date only applies to external users")),o().createElement(r.FormGroup,{label:"Report link",fieldId:"link-field"},y))};var pe=n(37347),fe=function(){return fe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fe.apply(this,arguments)};var ge=function(){return ge=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ge.apply(this,arguments)};var ve=function(e,t,n,a,o){var r="slug=".concat(o,"&token=").concat(n);return location.protocol+"//"+location.host+"/api/tower-analytics/v1/generate_pdf/"+(""===new URL(t).search?"?"+r:location.search+"&"+r)};var he=function(){return he=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},he.apply(this,arguments)};const ye=function(e){var t=e.settingsNamespace,n=void 0===t?"settings":t,l=e.slug,s=e.isMoney,c=e.name,u=e.description,d=e.endpointUrl,m=e.queryParams,p=e.selectOptions,f=e.y,g=e.label,v=e.xTickFormat,h=e.chartType,y=e.totalPages,_=e.pageLimit,b=e.sortOptions,E=e.sortOrder,k=e.dateGranularity,T=e.startDate,x=e.endDate,C=e.dateRange,S=e.adoptionRateType,D=e.inputs,O=(0,a.useState)(!1),P=O[0],R=O[1],F=(0,Y.TL)(),I=(0,Y.CG)((function(e){return null==e?void 0:e.pdfDownloadButton[l]})),L=I===W.r.pending,j=I===W.r.rejected,G=(0,i.cm)({chartSeriesHiddenProps:[]},n).chartSeriesHiddenProps,B=(0,a.useState)(1),A=B[0],M=B[1],Z=function(e,t,n){var o,r={downloadType:(null==e?void 0:e.downloadType)||"pdf",showExtraRows:(null==e?void 0:e.showExtraRows)||!1,additionalRecipients:(null==e?void 0:e.additionalRecipients)||"",eula:(null==e?void 0:e.eula)||!1,emailExtraRows:(null==e?void 0:e.emailExtraRows)||!1,subject:(null==e?void 0:e.subject)||"The Ansible report, ".concat(t,", is available for view"),body:(null==e?void 0:e.body)||"<b>".concat(t,"</b>\nThis report shows ").concat(n[0].toLowerCase()).concat(n.substring(1)),selectedRbacGroups:(null==e?void 0:e.selectedRbacGroups)||[],users:(null==e?void 0:e.users)||[],expiry:(null==e?void 0:e.expiry)||(o=new Date,o.setMonth(o.getMonth()+3),(0,w.p6)(o))},l=(0,a.useReducer)((function(e,t){switch(t.type){case X:return ge(ge({},e),{downloadType:t.value});case Q:return ge(ge({},e),{showExtraRows:t.value});case ee:return ge(ge({},e),{selectedRbacGroups:t.value});case ne:return ge(ge({},e),{additionalRecipients:t.value});case"SET_EULA":return ge(ge({},e),{eula:t.value});case ae:return ge(ge({},e),{emailExtraRows:t.value});case oe:return ge(ge({},e),{subject:t.value});case re:return ge(ge({},e),{body:t.value});case te:return ge(ge({},e),{users:t.value});case le:return ge(ge({},e),{expiry:t.value});case $:return r;default:throw new Error("useOptionsData reducer action type ".concat(t.type," was not found."))}}),r);return{formData:l[0],dispatchReducer:l[1]}}({},c,u),H=Z.formData,z=Z.dispatchReducer,N=H.users,q=H.additionalRecipients,U=H.subject,V=H.body,ie=H.emailExtraRows,ue=H.showExtraRows,de=H.downloadType,ye=H.expiry,_e=function(){if("pdf"===de&&function(e){var t=e.slug,n=e.isMoney,a=e.endpointUrl,o=e.queryParams,r=e.selectOptions,l=e.y,i=e.label,s=e.xTickFormat,c=e.chartType,u=e.totalPages,d=e.pageLimit,m=e.sortOptions,p=e.sortOrder,f=e.dateGranularity,g=e.startDate,v=e.endDate,h=e.dateRange,y=e.adoptionRateType,_=e.dispatch,b=e.chartSeriesHiddenProps,E=e.showExtraRows,k=e.inputs,w=k?fe(fe({},o),{inputs:k}):o;b||(b=[]),_((0,pe.jG)({slug:t,schemaParams:{y:l,label:i,xTickFormat:s,chartType:c},dataFetchingParams:{isMoney:n,showExtraRows:E,endpointUrl:a,queryParams:w,selectOptions:r,chartSeriesHiddenProps:b,totalPages:u,pageLimit:d,sortOptions:m,sortOrder:p,dateGranularity:f,startDate:g,endDate:v,dateRange:h,adoptionRateType:y}},_,t,""))}({slug:l,isMoney:s,endpointUrl:d,queryParams:m,selectOptions:p,y:f,label:g,xTickFormat:v,chartType:h,totalPages:y,pageLimit:_,sortOptions:b,sortOrder:E,dateGranularity:k,startDate:T,endDate:x,dateRange:C,adoptionRateType:S,dispatch:F,chartSeriesHiddenProps:G,showExtraRows:ue,inputs:D}),"email"===de){var e={y:m.sort_options,label:m.sort_options,xTickFormat:(0,w.MA)(m.granularity),chartType:h},t=D?he(he({},m),{inputs:D}):m,n={slug:l,schemaParams:{y:e.y,label:e.label,xTickFormat:e.xTickFormat,chartType:e.chartType},dataFetchingParams:{expiry:ye,showExtraRows:ue,endpointUrl:d,queryParams:t,chartSeriesHiddenProps:G||[],totalPages:y,isMoney:s,pageLimit:_,sortOptions:m.sort_options,sortOrder:"desc"===m.sort_order?"desc":"asc",dateGranularity:m.granularity,startDate:m.start_date,endDate:m.end_date,dateRange:m.quick_date_range,adoptionRateType:m.adoption_rate_type}};!function(e){var t=e.slug,n=e.users,a=e.additionalRecipients,o=e.subject,r=e.body,l=e.dispatch,i=e.emailExtraRows,s=e.expiry,c=e.pdfPostBody,u=n.map((function(e){return e.usernames}));c.dataFetchingParams.showExtraRows=i,""!==a&&u.push(a.split(","));var d=Math.random().toString(36).substring(2,16),m=window.location.href;l((0,pe.Do)({recipient:u.flat(),subject:""===o?"Report is ready to be viewed":o,body:r.toString().replace(/(?:\r\n|\r|\n)/g,"<br>"),reportUrl:ve(0,m,d,0,t),expiry:s,slug:t,token:d,payload:"Download",pdfPostBody:c},l,t,d))}({slug:l,users:N,additionalRecipients:q,subject:U,body:V,dispatch:F,emailExtraRows:ie,expiry:ye,pdfPostBody:n})}z({type:$}),R(!1)},be=function(){var e=H.additionalRecipients,t=H.selectedRbacGroups,n=H.users;if(""!==e){for(var a=e.split(","),o=0;o<a.length;o++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(a[o]))return!0;return!1}return 0===t.length&&""===e||(0===n.length||1===n.length&&n[0].emails.length<=0)&&""===e||void 0},Ee=[{id:1,name:"Export format",component:o().createElement(se,{formData:H,dispatchReducer:z})},{id:2,name:"Configure details",nextButtonText:"pdf"===de?"Export":"Send e-mail",component:"pdf"===de?o().createElement(ce,{options:{settingsNamespace:"settings",slug:l,isMoney:s,name:c,description:u,endpointUrl:d,queryParams:m,selectOptions:p,y:f,label:g,xTickFormat:v,chartType:h,totalPages:y,pageLimit:_,sortOptions:b,sortOrder:E,dateGranularity:k,startDate:T,endDate:x,dateRange:C,adoptionRateType:S},formData:H,dispatchReducer:z}):o().createElement(me,{options:{totalPages:y,pageLimit:_},formData:H,dispatchReducer:z})}],ke=function(e){M(A<(null==e?void 0:e.id)?e.id:A)},we=function(){z({type:$}),R(!1)},Te=o().createElement(r.WizardFooter,null,o().createElement(r.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack;return 2!==t.id?o().createElement(o().Fragment,null,o().createElement(r.Button,{variant:r.ButtonVariant.primary,type:"submit",onClick:"pdf"===de&&y<=1?_e:n,isDisabled:!de},"pdf"===de&&y<=1?"Export":"Next"),1!==t.id&&o().createElement(r.Button,{variant:"secondary",onClick:a},"Back"),o().createElement(r.Button,{variant:"link",onClick:we},"Cancel")):o().createElement(o().Fragment,null,o().createElement(r.Button,{variant:r.ButtonVariant.primary,type:"submit",onClick:_e,isDisabled:"email"===de&&be()},"email"===de?"Send e-mail":"Export"),o().createElement(r.Button,{variant:"secondary",onClick:a},"Back"),o().createElement(r.Button,{variant:"link",onClick:we},"Cancel"))})));return o().createElement(o().Fragment,null,o().createElement(r.Tooltip,{position:r.TooltipPosition.top,content:"Export report"},o().createElement(r.Button,{variant:j?r.ButtonVariant.link:r.ButtonVariant.plain,"aria-label":"Export report",onClick:function(){return R(!0)},isDanger:j,"data-cy":"download-button"},L&&o().createElement(r.Spinner,{"data-cy":"download-button-loading",isSVG:!0,size:"md"}),!L&&j&&o().createElement(J.$O,{"data-cy":"download-button-error"}),!L&&!j&&o().createElement(K._8,{"data-cy":"download-button-icon"}))),P&&o().createElement(r.Wizard,{title:"Export report",description:"".concat(c," | ").concat("pdf"===de?"PDF":"E-mail"),steps:Ee,hideClose:!0,onNext:function(){return ke},onBack:function(){return ke},onSave:_e,onClose:function(){we()},footer:Te,isOpen:P}))};var _e=n(74221);const be=function(e){return function(t){if(!t)return e;var n=JSON.stringify(e);return Object.entries(t).forEach((function(e){var t=new RegExp("VAR_".concat(e[0]),"g");n=n.replace(t,"".concat(e[1]))})),JSON.parse(n)}};var Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ee.apply(this,arguments)};const ke=function(e){var t,n,c=e.slug,u=e.name,d=e.description,g=e.tableHeaders,v=e.expandedTableRowName,h=e.clickableLinking,_=e.showPagination,E=e.showKebab,k=e.defaultSelectedToolbarCategory,T=void 0===k?"":k,C=e.availableChartTypes,S=e.dataEndpoint,D=e.optionsEndpoint,O=e.schema,P=e.fullCard,R=void 0===P||P,F=(0,ue.Bt)(S),I=(0,ue.Bt)(D),L=(0,y.Me)(c),j=(0,i.Kx)(L),G=j.queryParams,A=j.setFromPagination,M=j.setFromToolbar,Z=(0,i.Kx)({chartType:C[0]},"settings"),H=Z.queryParams,z=Z.dispatch,N=(0,s.ZP)(I,{}),q=N.result,V=N.request,J=(0,s.ZP)(F,{meta:{count:0,legend:[]}}),K=J.request,W=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(J,["request"]),Y=(0,B.useNavigate)();(0,a.useEffect)((function(){K(G),V(G)}),[G]);var $={y:G.sort_options,label:(null===(n=null===(t=q.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===G.sort_options})))||void 0===n?void 0:n.value)||"Label Y",xTickFormat:(0,w.MA)(G.granularity),chartType:H.chartType||C[0]},X=function(e,t){var n;switch(e){case"average_duration_per_task":n=t.toFixed(2)+" seconds";break;case"slow_hosts_percentage":case"template_success_rate":n=x(t)+"%";break;default:n=t.toFixed(2)}return n},Q=function(e,t){!function(e,t,n,a,o,r,l,s){var c,u=((c={})[i.zG]=Ee(Ee({},(0,y.gb)(e)),{template_id:t,cluster_id:n,org_id:a,inventory_id:o,status:r,host_status:l,quick_date_range:s}),c);Y((0,i.uJ)("reports\\".concat(e),!0,u))}("host_anomalies_scatter",t.datum.id,G.cluster_id,G.org_id,G.inventory_id,G.status,G.host_status,G.quick_date_range),window.location.reload()},ee=function(e){var t=e.datum;return t.host_status?"Host: "+t.host_name+"\nAverage duration per task: "+X(G.sortOptions,t.y)+"\nHost status: "+t.host_status+"\nTotal tasks executed: "+t.total_tasks_executed+"\nLast Referenced: "+t.last_referenced+"\nSlow: "+(t.failed_duration?"True":"False"):$.label+" for "+t.name+": "+X(G.sort_options,t.y)},te=function(e){var t,n=null===(t=null==q?void 0:q.sort_options)||void 0===t?void 0:t.map((function(e){return e.key}));return(null==n?void 0:n.includes(e))?{sort:{sortBy:{index:g.findIndex((function(e){return e.key===G.sort_options}))||0,direction:G.sort_order||"none"},onSort:function(e,t,n){var a;M("sort_order",n),M("sort_options",null===(a=g[t])||void 0===a?void 0:a.key)},columnIndex:g.findIndex((function(t){return t.key===e}))}}:{}},ne=[C.length>1&&o().createElement(r.ToggleGroup,{"aria-label":"Chart type toggle",key:"chart-toggle"},C.map((function(e){return o().createElement(r.ToggleGroupItem,{key:e,"data-cy":"chart_type",text:"".concat((0,w.kC)(e)," Chart"),buttonId:e,isSelected:e===$.chartType,onChange:function(){z({type:"SET_CHART_TYPE",value:e})}})}))),o().createElement(ye,{key:"download-button",slug:c,name:u,description:d,endpointUrl:S,queryParams:G,selectOptions:q,y:$.y,label:$.label,xTickFormat:$.xTickFormat,totalPages:Math.ceil(W.result.meta.count/G.limit),pageLimit:G.limit,chartType:$.chartType,sortOptions:$.y,sortOrder:G.sort_order,dateGranularity:G.granularity,startDate:G.start_date,endDate:G.end_date,dateRange:G.quick_date_range,adoptionRateType:G.adoption_rate_type})];return R?o().createElement(r.Card,{"data-cy":W.isLoading?"toolbar_loading":"toolbar_loaded"},o().createElement(r.CardBody,null,o().createElement(p.Z,{categories:q,defaultSelected:T,filters:G,setFilters:M,pagination:_&&o().createElement(l.Z,{count:W.result.meta.count,perPageOptions:_e.zT,params:{limit:+G.limit,offset:+G.offset},setPagination:A,isCompact:!0}),additionalControls:ne}),g&&!E&&"templates_by_organization"!==c?o().createElement(m,{api:W},o().createElement(f.Z,{schema:be(O)({label:$.label,y:$.y,xTickFormat:$.xTickFormat,chartType:$.chartType}),dataComponent:"foobar",data:W.result,specificFunctions:{labelFormat:{customTooltipFormatting:ee},onClick:{handleClick:Q}}}),o().createElement(U,{legend:W.result.meta.tableData?W.result.meta.tableData:W.result.meta.legend,headers:g,getSortParams:te,expandedRowName:v,clickableLinking:h,showKebab:E})):g&&!E&&"templates_by_organization"===c?o().createElement(m,{api:W},o().createElement(b,{data:W.result.items}),o().createElement(U,{legend:W.result.meta.tableData?W.result.meta.tableData:W.result.meta.legend,headers:g,getSortParams:te,expandedRowName:v,clickableLinking:h,showKebab:E})):o().createElement(o().Fragment,null,o().createElement(m,{api:W},o().createElement(f.Z,{schema:be(O)({label:$.label,y:$.y,xTickFormat:$.xTickFormat,chartType:$.chartType}),dataComponent:"foobar",data:W.result,specificFunctions:{labelFormat:{customTooltipFormatting:ee},onClick:{handleClick:Q}}})),o().createElement(U,{legend:W.result.meta.tableData?W.result.meta.tableData:W.result.meta.legend,headers:g,getSortParams:te,expandedRowName:v,clickableLinking:h,showKebab:E}))),o().createElement(r.CardFooter,null,_&&o().createElement(l.Z,{count:W.result.meta.count,perPageOptions:_e.zT,params:{limit:+G.limit,offset:+G.offset},setPagination:A,variant:r.PaginationVariant.bottom}))):o().createElement("div",{"data-cy":W.isLoading?"toolbar_loading":"toolbar_loaded"},o().createElement(p.Z,{categories:q,defaultSelected:T,filters:G,setFilters:M}),g&&"templates_by_organization"===c?o().createElement(m,{api:W},o().createElement(b,{data:W.result.items})):o().createElement(m,{api:W},o().createElement(f.Z,{schema:be(O)({label:$.label,y:$.y,xTickFormat:$.xTickFormat,chartType:$.chartType}),data:W.result,specificFunctions:{labelFormat:{customTooltipFormatting:ee}}})))};var we=n(83474),Te=n(70682),xe=P.default.div(Se||(Se=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 46.8px;\n  padding-left: 100px;\n"],["\n  height: 46.8px;\n  padding-left: 100px;\n"])));const Ce=function(e){var t=e.totalSavings,n=void 0===t?0:t,a=e.currentPageSavings,l=void 0===a?0:a,i=e.isLoading,s=void 0!==i&&i,c=e.isMoney,u=void 0===c||c;return o().createElement(o().Fragment,null,["Total savings","Current page savings"].map((function(e,t){return o().createElement(r.Card,{"data-cy":e.toLowerCase().replace(" ","_").replace(" ","_"),isPlain:!0,isCompact:!0,key:e},o().createElement(r.CardTitle,null,e),o().createElement(r.CardBody,null,o().createElement(r.Title,{headingLevel:"h3",size:0===t?"4xl":"xl",style:{color:"var(--pf-global--success-color--200)"}},s?o().createElement(xe,null,o().createElement(r.Spinner,{"data-cy":"spinner",isSVG:!0,size:"lg"})):u?(0,T.Z)(0===t?n:l):(0,Te.Z)(0===t?n:l))))})))};var Se,De=n(97960),Oe=(0,P.default)(r.InputGroup)(Fe||(Fe=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  width: 170px;\n"],["\n  width: 170px;\n"]))),Pe=function(e){return+e&&+e<0?NaN:e};const Re=function(e){var t=e.costManual,n=void 0===t?0:t,a=e.setFromCalculation,l=void 0===a?function(){return{}}:a,i=e.costAutomation,s=void 0===i?0:i,c=e.readOnly,u=void 0===c||c;return o().createElement(r.Card,{isPlain:!0,isCompact:!0},o().createElement(r.CardBody,null,o().createElement("p",null,"Manual cost of automation",o().createElement("span",{style:{color:"var(--pf-global--Color--dark-200)",fontSize:"0.8em",display:"block"}},"(e.g. average salary of mid-level Software Engineer)")),o().createElement(Oe,null,o().createElement(r.InputGroupText,null,o().createElement(De.bk,null)),o().createElement(r.TextInput,{id:"manual-cost",key:"manual-cost",type:"number","aria-label":"manual-cost",value:isNaN(n)?"":n.toString(),onChange:function(e){return l("manual_cost",Pe(+e))},isDisabled:u}),o().createElement(r.InputGroupText,null,"/hr")),o().createElement("p",{style:{paddingTop:"10px"}},"Automated process cost"),o().createElement(Oe,null,o().createElement(r.InputGroupText,null,o().createElement(De.bk,null)),o().createElement(r.TextInput,{id:"automation-cost",key:"automation-cost",type:"number","aria-label":"automation-cost",value:isNaN(s)?"":s.toString(),onChange:function(e){return l("automation_cost",Pe(+e))},isDisabled:u}),o().createElement(r.InputGroupText,null,"/hr"))))};var Fe,Ie=n(53688),Le=function(){return o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement("strong",null,"Savings per template")),o().createElement("p",null,"Savings per template is the difference between the manual cost and automation cost of successfully running templates across hosts. Manual cost is calculated by multiplying the number of hours spent manually running templates across hosts by the average hourly wages per engineer. Automation cost is the total amount of time, in seconds, spent running templates automatically multiplied by the average monthly cost for automated processes."),o().createElement("br",null),o().createElement("p",null,"The formula used to calculate manual cost:"),o().createElement(r.CodeBlock,null,o().createElement(r.CodeBlockCode,null,"manual time  = configurable time (in minutes) to manually complete the task on one host * number of host runs \nmanual cost = manual time * configurable manual cost of automation (e.g. average salary of mid-level Software Engineer)")),o().createElement("br",null),o().createElement("p",null,"The formula used to calculate automation cost:"),o().createElement(r.CodeBlock,null,o().createElement(r.CodeBlockCode,null,"automation time = successful elapsed total / 3600\nautomation cost = automation time * configurable automated process cost")),o().createElement("br",null),o().createElement("p",null,"The formula used to calculate automation cost:"),o().createElement(r.CodeBlock,null,o().createElement(r.CodeBlockCode,null,"savings per template = manual cost - automation cost")),o().createElement("br",null))},je=function(){return o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement("strong",null,"Failed hosts cost per template")),o().createElement("p",null,"Failed hosts cost per template is the total amount of time spent on failed automated job runs multiplied by the configured automated process cost."),o().createElement("br",null),o().createElement("p",null,"The formula used to calculate failed host cost per template:"),o().createElement(r.CodeBlock,null,o().createElement(r.CodeBlockCode,null,"failed cost per template = (failed elapsed total / 3600) * configurable automated process cost")),o().createElement("br",null))},Ge=function(){return o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement("strong",null,"Monetary gain per template")),o().createElement("p",null,"Monetary gain per template is the difference between total savings per template and failed hosts cost per template."),o().createElement("br",null),o().createElement("p",null,"The formula for monetary gain per template:"),o().createElement(r.CodeBlock,null,o().createElement(r.CodeBlockCode,null,"monetary gain per template = savings per template - failed host cost per template")),o().createElement("br",null))};const Be=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return o().createElement(o().Fragment,null,o().createElement(r.Button,{variant:r.ButtonVariant.link,onClick:function(){return n(!0)},icon:o().createElement(Ie.uM,null),"data-cy":"automation_formula_button"},"Automation formula"),o().createElement(r.Modal,{title:"Automation formula","data-cy":"automation_formula_modal",isOpen:t,onClose:function(){return n(!1)},variant:r.ModalVariant.medium,actions:[o().createElement(r.Button,{key:"cancel",variant:r.ButtonVariant.primary,onClick:function(){return n(!1)},"data-cy":"automation_formula_cancel_button"},"Close")]},o().createElement("p",null,"We use manual effort versus time spent on automation as factors to create formulas for cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),o().createElement("br",null),o().createElement(Le,null),o().createElement("br",null),o().createElement(je,null),o().createElement("br",null),o().createElement(Ge,null)))},Ae=function(e){var t=e.template;return o().createElement(E.Td,{colSpan:5},o().createElement(E.ExpandableRowContent,null,o().createElement(r.DescriptionList,{columnModifier:{default:"3Col"}},o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Elapsed"),o().createElement(r.DescriptionListDescription,null,t.elapsed," seconds")),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Host count"),o().createElement(r.DescriptionListDescription,null,t.host_count)),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Total count"),o().createElement(r.DescriptionListDescription,null,t.total_count)),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Total org count"),o().createElement(r.DescriptionListDescription,null,t.total_org_count)),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Total cluster count"),o().createElement(r.DescriptionListDescription,null,t.total_cluster_count)),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Total inventory count"),o().createElement(r.DescriptionListDescription,null,t.total_inventory_count)),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Template success rate"),o().createElement(r.DescriptionListDescription,null,t.template_success_rate.toFixed(2))),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Costs from failed hosts"),o().createElement(r.DescriptionListDescription,null,(0,T.Z)(t.failed_hosts_costs))),o().createElement(r.DescriptionListGroup,null,o().createElement(r.DescriptionListTerm,null,"Monetary gain"),o().createElement(r.DescriptionListDescription,null,(0,T.Z)(t.monetary_gain))))))};var Me=function(e,t){if("successful_hosts_savings"===e||"successful_hosts_saved_hours"===e)return t.successful_hosts_savings>0&&t.successful_hosts_saved_hours>0?k.global_success_color_200.value:k.global_palette_red_200.value};const Ze=function(e){var t=e.template,n=e.variableRow,l=e.setDataRunTime,i=e.setEnabled,s=e.navigateToJobExplorer,c=e.readOnly,u=void 0===c||c,d=e.isMoney,m=(0,a.useState)("true"===window.localStorage.getItem(t.id.toString())||!1),p=m[0],f=m[1];return o().createElement(o().Fragment,null,o().createElement(E.Tr,null,o().createElement(E.Td,{expand:{rowIndex:t.id,isExpanded:p,onToggle:function(){return e=!p,n=t.id,window.localStorage.setItem(n.toString(),e?"true":"false"),void f(e);var e,n}}}),o().createElement(E.Td,null,o().createElement(r.Tooltip,{content:"List of jobs for this template for past 30 days"},o().createElement(r.Button,{onClick:function(){return s(t.id)},variant:r.ButtonVariant.link,style:{padding:"0px"}},t.name))),n&&o().createElement(E.Td,{style:{color:Me(n.key,t)}},function(e,t){var n,a;switch(e){case"elapsed":a=t,n=new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(a)+" seconds";break;case"successful_hosts_saved_hours":n=(0,Te.Z)(t);break;case"template_automation_percentage":n=x(t)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;default:n=(+t).toFixed(2)}return n}(n.key,+t[n.key])),o().createElement(E.Td,null,o().createElement(r.InputGroup,null,o().createElement(r.TextInput,{autoFocus:window.localStorage.getItem("focused")==="manual-time-"+t.id.toString(),id:"manual-time-"+t.id.toString(),"data-cy":"manual-time",style:{maxWidth:"150px"},type:"number","aria-label":"time run manually",defaultValue:t.avgRunTime/60,onBlur:function(e){var n=+e.target.value;n<=0||isNaN(n)?(e.target.value="60",l(60*+e.target.value,t.id)):l(60*n,t.id),window.localStorage.setItem("focused","")},onChange:function(){window.localStorage.setItem("focused","manual-time-"+t.id.toString())},isDisabled:u}),o().createElement(r.InputGroupText,null,"min"),o().createElement(r.InputGroupText,{variant:r.InputGroupTextVariant.plain},"x ",t.successful_hosts_total," host runs"))),o().createElement(E.Td,{"data-cy":"savings",style:{color:t.enabled?t.successful_hosts_savings>0||t.successful_hosts_saved_hours>0?k.global_success_color_200.value:k.global_palette_red_200.value:k.global_disabled_color_200.value}},d?(0,T.Z)(+t.successful_hosts_savings):(0,Te.Z)(+t.successful_hosts_saved_hours)),o().createElement(E.Td,null,o().createElement(r.Switch,{label:"Show",labelOff:"Hide",isChecked:t.enabled,onChange:function(e){return i(e)},isDisabled:u}))),o().createElement(E.Tr,{isExpanded:p},o().createElement(Ae,{template:t,isMoney:d})))};var He=function(){return He=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},He.apply(this,arguments)};const ze=function(e){var t=e.data,n=void 0===t?[]:t,l=e.variableRow,s=e.setDataRunTime,c=void 0===s?function(){return{}}:s,u=e.setEnabled,d=void 0===u?function(){return function(){return{}}}:u,m=e.navigateToJobExplorer,p=void 0===m?function(){return{}}:m,f=e.getSortParams,g=void 0===f?function(){return{}}:f,v=e.readOnly,h=void 0===v||v,_=e.isMoney,b=(0,a.useState)(!1),k=b[0],w=b[1],T=(0,y.Me)("automation_calculator"),x=(0,i.Kx)(T).setFromToolbar,C=[o().createElement(r.DropdownItem,{key:"showAll",component:"button",onClick:function(){return d(void 0)(!0)}},"Show all"),o().createElement(r.DropdownItem,{key:"hideAll",component:"button",onClick:function(){return d(void 0)(!1)}},"Hide all"),o().createElement(r.DropdownItem,{key:"showAll",component:"button",onClick:function(){return x("template_weigh_in",void 0)}},"Display all template rows"),o().createElement(r.DropdownItem,{key:"hideHiddenTemplates",component:"button",onClick:function(){return x("template_weigh_in",!0)}},"Display only shown template rows"),o().createElement(r.DropdownItem,{key:"showHiddenTemplates",component:"button",onClick:function(){return x("template_weigh_in",!1)}},"Display only hidden template rows")];return o().createElement(E.TableComposable,{"data-cy":"table","aria-label":"ROI Table",variant:E.TableVariant.compact},o().createElement(E.Thead,null,o().createElement(E.Tr,null,o().createElement(E.Th,null),o().createElement(E.Th,null,"Name"),l&&o().createElement(E.Th,He({},g(),{tooltip:null}),l.value),o().createElement(E.Th,null,"Manual time"),o().createElement(E.Th,null,"Savings"),o().createElement(E.Th,{style:{float:"right",overflow:"visible",zIndex:1}},o().createElement(r.Dropdown,{onSelect:function(){w(!0)},toggle:o().createElement(r.KebabToggle,{style:{paddingBottom:"0px"},id:"table-kebab",onToggle:function(){return w(!k)}}),isOpen:k,isPlain:!0,dropdownItems:C,position:"right"})))),o().createElement(E.Tbody,null,n.map((function(e){return o().createElement(Ze,{key:e.id,template:e,variableRow:l,setDataRunTime:c,navigateToJobExplorer:p,setEnabled:d(e.id),readOnly:h,isMoney:_})}))))};var Ne=n(27443),qe=n(28216),Ue=n(83215),Ve=n(39677),Je=n(10001),Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ke.apply(this,arguments)},We=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function l(e){try{s(a.next(e))}catch(e){r(e)}}function i(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((a=a.apply(e,t||[])).next())}))},Ye=function(e,t){var n,a,o,r,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(r){return function(i){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,a=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){l=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){l.label=r[1];break}if(6===r[0]&&l.label<o[1]){l.label=o[1],o=r;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(r);break}o[2]&&l.ops.pop(),l.trys.pop();continue}r=t.call(e,l)}catch(e){r=[6,e],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,i])}}},$e=function(e,t,n){if(n||2===arguments.length)for(var a,o=0,r=t.length;o<r;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))},Xe=P.default.div(at||(at=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"],["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"]))),Qe=$e($e([],_e.zT,!0),[{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],!1),et=function(e){return e.filter((function(e){return e.enabled}))},tt=function(e,t,n){return e.map((function(e){var a=(0,w.B3)(e.avgRunTime)*e.successful_hosts_total*parseFloat(n),o=(0,w.B3)(e.successful_elapsed_total)*parseFloat(t),r=(0,w.YD)(o,a);return Ke(Ke({},e),{delta:r,manualCost:a,automatedCost:o})}))};const nt=function(e){var t,n,c=e.slug,u=e.name,d=e.description,p=e.dataEndpoint,g=e.optionsEndpoint,v=e.schema,h=e.fullCard,_=void 0===h||h,b=(0,ue.Bt)(p),E=(0,ue.Bt)(g),k=(0,y.Me)(c),x=(0,B.useNavigate)(),C=(0,a.useState)(""),S=C[0],D=C[1],O=(0,a.useState)(""),P=O[0],R=O[1],F=(0,a.useState)(!0),I=F[0],L=F[1],j=(0,i.Kx)(k),G=j.queryParams,A=j.setFromToolbar,M=j.setFromPagination,Z=function(e){var t=e.legend;return(void 0===t?[]:t).map((function(e){return Ke(Ke({},e),{delta:0,avgRunTime:60*e.manual_effort_minutes||3600,manualCost:0,automatedCost:0,enabled:e.template_weigh_in})}))},H=(0,s.ZP)(E,{sort_options:I?[{key:k.sort_options,value:k.sort_options}]:[{key:"successful_saved_hours",value:"successful_saved_hours"}]}),z=H.result,N=H.request,q=(0,s.ZP)((function(e){return We(void 0,void 0,void 0,(function(){var t;return Ye(this,(function(n){switch(n.label){case 0:return[4,b(e)];case 1:return t=n.sent(),[2,Ke(Ke({},t),{items:tt(Z(t.meta),t.cost.hourly_manual_labor_cost,t.cost.hourly_automation_cost)})]}}))}))}),{items:[],meta:{count:0}}),U=q.request,V=q.setValue,J=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(q,["request","setValue"]),K=function(e){V(Ke(Ke({},J.result),{items:e}))},W=function(e,t,n){return void 0===t&&(t=S),void 0===n&&(n=P),{currency:"USD",hourly_manual_labor_cost:t,hourly_automation_cost:n,templates_manual_equivalent:e.map((function(e){return{template_id:e.id,effort_minutes:e.avgRunTime/60,template_weigh_in:e.enabled}}))}},Y=(0,qe.I0)(),$=function(){return We(void 0,void 0,void 0,(function(){var e;return Ye(this,(function(t){switch(t.label){case 0:return[4,b(G)];case 1:return e=t.sent(),J.result.monetary_gain_current_page=e.monetary_gain_current_page,J.result.monetary_gain_other_pages=e.monetary_gain_other_pages,J.result.successful_hosts_saved_hours_current_page=e.successful_hosts_saved_hours_current_page,J.result.successful_hosts_saved_hours_other_pages=e.successful_hosts_saved_hours_other_pages,K(Z(e.meta)),[2,e]}}))}))},X=function(e,t){return We(void 0,void 0,void 0,(function(){var n,a,o;return Ye(this,(function(r){switch(r.label){case 0:n="automation_cost"===e?t:P,a="manual_cost"===e?t:S,o="automation_cost"===e?"Automation cost":"Manual cost",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,ue.mN)(W(J.result.items,a,n))];case 2:return r.sent(),[3,4];case 3:return r.sent(),Y((0,Ue.wN)({title:"Unable to save changes to ".concat(o,"."),description:"Unable to save changes ".concat(o,". Please try again."),variant:Ve.k.danger,autoDismiss:!1})),[2];case 4:return[4,$()];case 5:return r.sent(),"manual_cost"===e?D(t):R(t),[2]}}))}))},Q=function(){var e,t,n,a;return I?(null===(e=J.result)||void 0===e?void 0:e.monetary_gain_other_pages)+(null===(t=J.result)||void 0===t?void 0:t.monetary_gain_current_page):(null===(n=J.result)||void 0===n?void 0:n.successful_hosts_saved_hours_current_page)+(null===(a=J.result)||void 0===a?void 0:a.successful_hosts_saved_hours_other_pages)},ee=function(){var e,t;return I?null===(e=J.result)||void 0===e?void 0:e.monetary_gain_current_page:null===(t=J.result)||void 0===t?void 0:t.successful_hosts_saved_hours_current_page};(0,a.useEffect)((function(){var e;!(null===(e=J.result)||void 0===e?void 0:e.cost)||P||S||(D(J.result.cost.hourly_manual_labor_cost),R(J.result.cost.hourly_automation_cost))}),[J]),(0,a.useEffect)((function(){K(tt(J.result.items,P,S))}),[P,S]),(0,a.useEffect)((function(){N(G),U(G)}),[G]);var te={y:G.sort_options,tooltip:"Savings for",field:G.sort_options,label:(null===(n=null===(t=z.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===G.sort_options})))||void 0===n?void 0:n.value)||"Label Y",themeColor:I?"green":"blue",xTickFormat:(0,w.MA)(G.granularity)},ne=function(e){var t=e.datum;return te.label+" for "+t.name+": "+function(e,t){var n;switch(e){case"elapsed":n=t.toFixed(2)+" seconds";break;case"template_automation_percentage":n=t.toFixed(2)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;case"successful_hosts_saved_hours":case"successful_hosts_saved_hours_current_page":case"successful_hosts_saved_hours_other_pages":n=(0,Te.Z)(t);break;default:n=t.toFixed(2)}return n}(G.sort_options,t.y)},ae=function(e){var t,n,a,o;return!(null===(n=null===(t=e.result.rbac)||void 0===t?void 0:t.perms)||void 0===n?void 0:n.all)&&!(null===(o=null===(a=e.result.rbac)||void 0===a?void 0:a.perms)||void 0===o?void 0:o.write)},oe=function(){var e;return o().createElement(r.Card,{isPlain:!0},_&&o().createElement(r.CardHeader,null,o().createElement(r.CardTitle,null,"Automation savings"),o().createElement(r.CardActions,null,o().createElement(r.ToggleGroup,{"aria-label":"toggleButton"},o().createElement(r.ToggleGroupItem,{id:"toggleIsMoneyTrue",text:"Money",buttonId:"money",isSelected:I,onChange:function(){L(!0),A("sort_options","successful_hosts_savings")}}),o().createElement(r.ToggleGroupItem,{id:"toggleIsMoneyFalse",text:"Time",buttonId:"time",isSelected:!I,onChange:function(){L(!1),A("sort_options","successful_hosts_saved_hours")}})))),J.isLoading?o().createElement(Xe,null,o().createElement(r.Spinner,{"data-cy":"spinner",isSVG:!0})):et(null===(e=null==J?void 0:J.result)||void 0===e?void 0:e.items).length>0?o().createElement(f.Z,{schema:be(v)({themeColor:te.themeColor,label:te.label,tooltip:te.tooltip,field:te.field,yAxis:te.yAxis}),data:{items:et(J.result.items)},specificFunctions:{labelFormat:{customTooltipFormatting:ne}}}):o().createElement(Je.Z,{title:"No results found",message:"No results match the filter criteria. Clear all filters and try again.",showButton:!0,label:"Clear all filters",onButtonClick:function(){return A(void 0,void 0)}}))},re=function(){return o().createElement(r.Stack,null,o().createElement(r.StackItem,null,o().createElement(Ce,{isMoney:I,totalSavings:Q(),currentPageSavings:ee(),isLoading:J.isLoading})),o().createElement(r.StackItem,null,o().createElement(r.Stack,null,o().createElement(r.StackItem,null,o().createElement(Re,{costManual:S,setFromCalculation:X,costAutomation:P,readOnly:ae(J)})),o().createElement(r.StackItem,null,o().createElement(Be,null)))))};return o().createElement(m,{api:J,customLoading:!0,customEmptyState:!0},_?o().createElement(r.Card,null,o().createElement(r.CardBody,null,o().createElement(we.Z,{categories:z,filters:G,setFilters:A,pagination:o().createElement(l.Z,{count:J.result.meta.count,perPageOptions:Qe,params:{limit:+G.limit,offset:+G.offset},setPagination:M,isCompact:!0}),additionalControls:[o().createElement(ye,{key:"download-button",slug:c,isMoney:I,name:u,description:d,endpointUrl:p,queryParams:G,selectOptions:z,y:te.y,label:te.label,xTickFormat:te.xTickFormat,totalPages:Math.ceil(J.result.meta.count/G.limit),pageLimit:G.limit,sortOptions:te.y,sortOrder:G.sort_order,startDate:G.start_date,endDate:G.end_date,dateRange:G.quick_date_range,inputs:{costManual:S,costAutomation:P,totalSavings:Q(),currentPageSavings:ee()}})]}),o().createElement(r.Grid,{hasGutter:!0},o().createElement(r.GridItem,{span:9},oe()),o().createElement(r.GridItem,{span:3},re()),o().createElement(r.GridItem,{span:12},o().createElement("p",null,"Enter the time it takes to run the following templates manually."),J.isLoading?o().createElement(r.Spinner,{"data-cy":"spinner",isSVG:!0}):o().createElement(ze,{navigateToJobExplorer:function(e){var t,n=((t={})[i.zG]=Ke(Ke({},y.cY.defaultParams),{quick_date_range:"last_30_days",template_id:[e]}),t.isMoney=!0,t);x((0,i.uJ)(Ne.n.jobExplorer,!0,n))},data:J.result.items,variableRow:z.sort_options.find((function(e){return e.key===G.sort_options})),setDataRunTime:function(e,t){return We(void 0,void 0,void 0,(function(){var n;return Ye(this,(function(a){switch(a.label){case 0:n=J.result.items.map((function(n){return n.id===t?(n.avgRunTime=e,tt([n],P,S)[0]):n})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,ue.mN)(W(n),Y)];case 2:return a.sent(),[3,4];case 3:return a.sent(),Y((0,Ue.wN)({title:"Unable to save changes to Manual time",description:"Unable to save changes to Manual time. Please try again.",variant:Ve.k.danger,autoDismiss:!1})),[2];case 4:return[4,$()];case 5:return a.sent(),[2]}}))}))},setEnabled:function(e){return function(t){return We(void 0,void 0,void 0,(function(){var n;return Ye(this,(function(a){switch(a.label){case 0:n=e?J.result.items.map((function(n){return n.id===e?Ke(Ke({},n),{enabled:t}):n})):J.result.items.map((function(e){return Ke(Ke({},e),{enabled:t})})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,ue.mN)(W(n))];case 2:return a.sent(),[3,4];case 3:return a.sent(),Y((0,Ue.wN)({title:"Unable to save changes to visibility",description:"Unable to save changes to visibility. Please try again.",variant:Ve.k.danger,autoDismiss:!1})),[2];case 4:return[4,$()];case 5:return a.sent(),K(n),[2]}}))}))}},getSortParams:function(){return{sort:{sortBy:{index:2,direction:G.sort_order||"none"},onSort:function(e,t,n){A("sort_order",n)},columnIndex:2}}},readOnly:ae(J),isMoney:I})))),o().createElement(r.CardFooter,null,o().createElement(l.Z,{count:J.result.meta.count,perPageOptions:Qe,params:{limit:+G.limit,offset:+G.offset},setPagination:M,variant:r.PaginationVariant.bottom}))):o().createElement(o().Fragment,null,o().createElement(we.Z,{categories:z,filters:G,setFilters:A}),o().createElement(r.Grid,{hasGutter:!0},o().createElement(r.GridItem,{span:9},oe()),o().createElement(r.GridItem,{span:3},re()))))};var at,ot=function(){return ot=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ot.apply(this,arguments)};const rt=function(e,t){switch(e.layoutComponent){case"standard":return!0===t?o().createElement(ke,ot({},e.layoutProps)):o().createElement(ke,ot({},e.layoutProps,{fullCard:!1}));case"automationCalculator":return!0===t?o().createElement(nt,ot({},e.layoutProps)):o().createElement(nt,ot({},e.layoutProps,{fullCard:!1}));default:return o().createElement(o().Fragment,null)}}},74221:(e,t,n)=>{var a;n.d(t,{DX:()=>o,zT:()=>r}),function(e){e.operations="Operations",e.executive="Executive",e.subscription="Subscription",e.migration="Migration",e.controller="Controller",e.catalog="Catalog",e.automationHub="Automation Hub",e.modules="Modules",e.hosts="Hosts",e.tasks="Tasks",e.organization="Organization",e.jobTemplate="Job template",e.jobRuns="Job runs",e.timeSeries="Time series",e.performanceAnomalyDetection="Performance anomaly detection",e.savings="Savings"}(a||(a={}));var o=[{key:a.operations,name:"Operations",description:"This report is useful to the engineers who manage day-to-day Ansible operations.  In other words, team members who write playbooks, do administration tasks within Controller, etc."},{key:a.executive,name:"Executive",description:"This report is useful to executives who want to monitor and learn about the Ansible operations happening across the company."},{key:a.subscription,name:"Subscription",description:"This report provides useful information around subscription data, helping you make decisions around compliance."},{key:a.migration,name:"Migration",description:"This report provides useful information around migrations, such as helping to identify what could be necessary to move to newer versions of the Ansible Automation Platform."},{key:a.controller,name:"Controller",description:"This report provides information gathered from Controller."},{key:a.catalog,name:"Catalog",description:"This report provides information gathered from Automation Services Catalog."},{key:a.automationHub,name:"Automation Hub",description:"This report provides information gathered from Automation Hub."},{key:a.modules,name:"Modules",description:"This report groups information by Ansible modules, the specific executable code ran in individual playbook or job template tasks."},{key:a.hosts,name:"Hosts",description:"This report groups information by the hosts within the Ansible inventories that are executed by playbooks or job templates."},{key:a.tasks,name:"Tasks",description:"This report groups information by the individual tasks that make up a playbook or job template."},{key:a.organization,name:"Organization",description:"This report groups information by the organizations set up within the company’s Ansible Controller instances."},{key:a.jobTemplate,name:"Job template",description:"This report groups information by the job templates set up within the company’s Ansible Controller instances."},{key:a.jobRuns,name:"Job runs",description:"This report groups information by the individual runs of playbooks or job templates."},{key:a.timeSeries,name:"Time series",description:"This report groups information for a specified time range and granularity, such as weekly (e.g., from the past 12 weeks) or monthly (e.g., between August and November)."},{key:a.performanceAnomalyDetection,name:"Performance anomaly detection",description:"This report provides the ability to detect anomalies in Ansible performance, such as identifying slow tasks or hosts, or tasks with high error rates."},{key:a.savings,name:"Savings",description:"This report is useful for showing potential or actual savings based on Ansible usage."}],r=[{title:"4",value:4},{title:"6",value:6},{title:"8",value:8},{title:"10",value:10}]},22030:(e,t,n)=>{n.d(t,{Z:()=>a});const a={getDetails:function(e){return"".concat(e)}}},91354:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}},70682:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return e?"".concat((+e.toFixed(0)).toLocaleString()," hours"):"0 hours"}}}]);
//# sourceMappingURL=../sourcemaps/4903.e6bb80c64df8d49dca5b9b0b731f50bb.js.map