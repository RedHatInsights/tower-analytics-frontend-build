"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[295],{95295:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var r=n(15861),a=n(70885),l=n(4942),o=n(87757),u=n.n(o),c=n(92950),i=n.n(c),s=n(86350),m=n(48716),p=n(39173),d=n(1085),E=n(48236),f=n(83061),b=n(9771),v=n(83474),T=n(44633),h=n(64631),g=n(13784),y=n(53345),C=n(77388),x=n(91738);const D=[{id:1,kind:x.$v.wrapper,type:x.yD.chart,parent:null,props:{height:400,padding:{top:40,bottom:150,right:0,left:90},domainPadding:{y:25,x:85}},xAxis:{label:"Templates",style:{axisLabel:{padding:130}},labelProps:{angle:-45,textAnchor:"end",dx:0,dy:0},fixLabelOverlap:!1},yAxis:{tickFormat:"formatNumberAsK",showGrid:!0,label:"Savings per template",style:{axisLabel:{padding:60}}},api:{url:"",params:{}}},{id:2,kind:x.$v.group,parent:1,template:{id:0,kind:x.$v.simple,type:x.oX.bar,parent:0,props:{x:"name",y:"delta"},tooltip:{standalone:!0,labelName:"Saving"}}}];var k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},k.apply(this,arguments)},S=function(e){return k(k({},x.wk),{fetchFnc:function(){return new Promise((function(t){t(e)}))}})};const w=function(e){var t=e.data;return i().createElement(x.ZP,{schema:D,functions:S({items:t,type:x.Ii.nonGrouped,response_type:""})})};var L=n(91354);const O=function(e){var t=e.totalSavings,n=void 0===t?0:t;return i().createElement(d.Card,{isPlain:!0,isCompact:!0},i().createElement(d.CardTitle,null,"Total savings"),i().createElement(d.CardBody,null,i().createElement(d.Title,{headingLevel:"h3",size:"4xl",style:{color:"var(--pf-global--success-color--200)"}},(0,L.Z)(n))))};var G,_,P=n(97960),I=(0,n(29163).ZP)(d.InputGroup)(A||(G=["\n  width: 170px;\n"],_=["\n  width: 170px;\n"],Object.defineProperty?Object.defineProperty(G,"raw",{value:_}):G.raw=_,A=G)),j=function(e){return+e&&+e<0?NaN:e};const Z=function(e){var t=e.costManual,n=void 0===t?0:t,r=e.setCostManual,a=void 0===r?function(){return{}}:r,l=e.costAutomation,o=void 0===l?0:l,u=e.setCostAutomation,c=void 0===u?function(){return{}}:u;return i().createElement(d.Card,{isPlain:!0,isCompact:!0},i().createElement(d.CardBody,null,i().createElement("p",null,"Manual cost of automation",i().createElement("span",{style:{color:"var(--pf-global--Color--dark-200)",fontSize:"0.8em",display:"block"}},"(e.g. average salary of mid-level Software Engineer)")),i().createElement(I,null,i().createElement(d.InputGroupText,null,i().createElement(P.bk,null)),i().createElement(d.TextInput,{id:"manual-cost",type:"number","aria-label":"manual-cost",value:isNaN(n)?"":n.toString(),onChange:function(e){return a(j(+e))}}),i().createElement(d.InputGroupText,null,"/hr")),i().createElement("p",{style:{paddingTop:"10px"}},"Automated process cost"),i().createElement(I,null,i().createElement(d.InputGroupText,null,i().createElement(P.bk,null)),i().createElement(d.TextInput,{id:"automation-cost",type:"number","aria-label":"automation-cost",value:isNaN(o)?"":o.toString(),onChange:function(e){return c(j(+e))}}),i().createElement(d.InputGroupText,null,"/hr"))))};var A,B=n(53688);const R=function(){var e=(0,c.useState)(!1),t=e[0],n=e[1];return i().createElement(i().Fragment,null,i().createElement(d.Button,{variant:d.ButtonVariant.link,onClick:function(){return n(!0)},icon:i().createElement(B.uM,null)},"Automation formula"),i().createElement(d.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:d.ModalVariant.medium,actions:[i().createElement(d.Button,{key:"cancel",variant:d.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},i().createElement("p",null,i().createElement("b",null,"Manual cost for template X"),i().createElement("br",null),"(time for a manual run on one host in hours * (sum of all hosts across all job runs) ) * cost per hour"),i().createElement("br",null),i().createElement("p",null,i().createElement("b",null,"Automation cost for template X"),i().createElement("br",null),"cost of automation per hour * sum of total elapsed hours for a template"),i().createElement("br",null),i().createElement("p",null,i().createElement("b",null,"Savings"),i().createElement("br",null),"Sum of (manual cost - automation cost) across all templates")))};var F=n(48607),M=n(91573);const N=function(e){var t=e.template;return i().createElement(F.Td,{colSpan:5},i().createElement(F.ExpandableRowContent,null,i().createElement(d.DescriptionList,{columnModifier:{default:"3Col"}},i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,"ID"),i().createElement(d.DescriptionListDescription,null,t.id)),i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,"Elapsed"),i().createElement(d.DescriptionListDescription,null,t.elapsed)),i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,"Host count"),i().createElement(d.DescriptionListDescription,null,t.host_count)),i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,"Total count"),i().createElement(d.DescriptionListDescription,null,t.total_count)),i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,"Total org count"),i().createElement(d.DescriptionListDescription,null,t.total_org_count)),i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,"Total cluster count"),i().createElement(d.DescriptionListDescription,null,t.total_cluster_count)),i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,"Total inventory count"),i().createElement(d.DescriptionListDescription,null,t.total_inventory_count)))))},V=function(e){var t=e.template,n=e.setDataRunTime,r=e.setEnabled,a=e.redirectToJobExplorer,l=(0,c.useState)(!1),o=l[0],u=l[1];return i().createElement(i().Fragment,null,i().createElement(F.Tr,null,i().createElement(F.Td,{expand:{rowIndex:t.id,isExpanded:o,onToggle:function(){return u(!o)}}}),i().createElement(F.Td,null,i().createElement(d.Tooltip,{content:"List of jobs for this template for past 30 days"},i().createElement(d.Button,{onClick:function(){return a(t.id)},variant:d.ButtonVariant.link},t.name))),i().createElement(F.Td,null,i().createElement(d.InputGroup,null,i().createElement(d.TextInput,{style:{maxWidth:"150px"},type:"number","aria-label":"time run manually",value:t.avgRunTime/60,onChange:function(e){return n(60*+e,t.id)}}),i().createElement(d.InputGroupText,null,"min"),i().createElement(d.InputGroupText,{variant:d.InputGroupTextVariant.plain},"x ",t.successful_hosts_total," host runs"))),i().createElement(F.Td,{style:{color:M.global_success_color_200.value}},(0,L.Z)(+t.delta)),i().createElement(F.Td,null,i().createElement(d.Switch,{label:"Show",labelOff:"Hide",isChecked:t.enabled,onChange:function(e){return r(e)}}))),i().createElement(F.Tr,{isExpanded:o},i().createElement(N,{template:t})))},J=function(e){var t=e.data,n=void 0===t?[]:t,r=e.setDataRunTime,a=void 0===r?function(){return{}}:r,l=e.setEnabled,o=void 0===l?function(){return function(){return{}}}:l,u=e.redirectToJobExplorer,c=void 0===u?function(){return{}}:u;return i().createElement(d.Card,null,i().createElement(d.CardBody,null,i().createElement("p",null,"Enter the time it takes to run the following templates manually."),i().createElement(F.TableComposable,{"aria-label":"ROI Table",variant:F.TableVariant.compact},i().createElement(F.Thead,null,i().createElement(F.Tr,null,i().createElement(F.Th,null),i().createElement(F.Th,null,"Name"),i().createElement(F.Th,null,"Time"),i().createElement(F.Th,null,"Savings"),i().createElement(F.Th,null,i().createElement(d.Switch,{label:"Show all",labelOff:"Show all",isChecked:!n.find((function(e){return!e.enabled})),onChange:function(e){return o(void 0)(e)}})))),i().createElement(F.Tbody,null,n.map((function(e){return i().createElement(V,{key:e.id,template:e,setDataRunTime:a,redirectToJobExplorer:c,setEnabled:o(e.id)})}))))))};var q=n(20806);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){return e.filter((function(e){return e.enabled}))},Y=function(e,t,n){return e.map((function(e){var r=(0,y.B3)(e.avgRunTime)*e.successful_hosts_total*parseFloat(n),a=(0,y.B3)(e.successful_elapsed_total)*parseFloat(t),l=(0,y.YD)(a,r);return H(H({},e),{},{delta:l,manualCost:r,automatedCost:a})}))};const $=function(){var e=(0,c.useState)("50"),t=(0,a.Z)(e,2),n=t[0],o=t[1],y=(0,c.useState)("20"),x=(0,a.Z)(y,2),D=x[0],k=x[1],S=(0,h.eR)(),L=(0,h.Kx)(g.GL.defaultParams),G=L.queryParams,_=L.setFromToolbar,P=(0,C.ZP)((0,c.useCallback)((function(){return(0,T.Yn)(G)}),[G]),{}),I=P.result,j=P.request,A=(0,C.ZP)((0,c.useCallback)((0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.QJ)(G);case 2:return t=e.sent,e.abrupt("return",Y((void 0,(void 0===(r=t.items)?[]:r).map((function(e){return H(H({},e),{},{delta:0,avgRunTime:3600,manualCost:0,automatedCost:0,enabled:!0})}))),D,n));case 4:case"end":return e.stop()}var r}),e)}))),[G]),[]),B=A.result,F=A.error,M=A.isLoading,N=A.isSuccess,V=A.request,z=A.setValue;(0,c.useEffect)((function(){z(Y(B,D,n))}),[D,n]),(0,c.useEffect)((function(){j(),V()}),[G]);var $;return i().createElement(i().Fragment,null,i().createElement(m.Z,null,i().createElement(p.Z,{title:"Automation Calculator"}),i().createElement(v.Z,{categories:I,filters:G,setFilters:_})),i().createElement(s.Z,null,M?i().createElement(E.Z,null):F?i().createElement(b.Z,{message:F.error}):N&&B.length<=0?i().createElement(f.Z,null):N&&B.length>0?i().createElement(d.Card,null,i().createElement(d.Grid,{hasGutter:!0,className:"automation-wrapper"},i().createElement(d.GridItem,{span:9},i().createElement(d.Card,{isPlain:!0},i().createElement(d.CardHeader,null,i().createElement(d.CardTitle,null,"Automation savings")),i().createElement(d.CardBody,null,i().createElement(w,{data:X(B)})))),i().createElement(d.GridItem,{span:3},i().createElement(d.Stack,null,i().createElement(d.StackItem,null,i().createElement(O,{totalSavings:($=X(B),$.reduce((function(e,t){return e+t.delta}),0))})),i().createElement(d.StackItem,null,i().createElement(d.Stack,null,i().createElement(d.StackItem,null,i().createElement(Z,{costManual:n,setCostManual:o,costAutomation:D,setCostAutomation:k})),i().createElement(d.StackItem,null,i().createElement(R,null)))))),i().createElement(d.GridItem,{span:12},i().createElement(J,{redirectToJobExplorer:function(e){var t=(0,l.Z)({},h.zG,H(H({},g.cY.defaultParams),{},{quick_date_range:"last_30_days",template_id:[e]}));S(q.n.jobExplorer,t)},data:B,setDataRunTime:function(e,t){var r=B.map((function(r){return r.id===t?(r.avgRunTime=e,Y([r],D,n)[0]):r}));z(r)},setEnabled:function(e){return function(t){z(e?B.map((function(n){return n.id===e?H(H({},n),{},{enabled:t}):n})):B.map((function(e){return H(H({},e),{},{enabled:t})})))}}})))):i().createElement(i().Fragment,null)))}}}]);
//# sourceMappingURL=../sourcemaps/295.1d0b7525214a79fe029569b70b0bb93a.js.map