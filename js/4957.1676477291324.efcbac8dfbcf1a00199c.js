"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[4957],{81672:(e,t,n)=>{n.d(t,{Z:()=>C});var r,a,l,o,i,c,u=n(87462),s=n(45987),m=n(30168),d=n(92950),p=n.n(d),f=n(45697),g=n.n(f),v=n(1085),E=n(35451),b=n(84564),y=n(19694),h=n(31369),k=n(77669),Z=n(29163),O=["isOpen","title","label","variant","children"],w=(0,Z.default)(b.ZP)(r||(r=(0,m.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),P=(0,Z.default)(k.ZP)(a||(a=(0,m.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),x=(0,Z.default)(h.ZP)(l||(l=(0,m.Z)(["\n  color: var(--pf-global--info-color--100);\n"]))),S=(0,Z.default)(E.ZP)(o||(o=(0,m.Z)(["\n  color: var(--pf-global--success-color--100);\n"]))),_=(0,Z.default)(y.ZP)(i||(i=(0,m.Z)(["\n  color: var(--pf-global--warning-color--100);\n"]))),j=Z.default.div(c||(c=(0,m.Z)(["\n  display: flex;\n  svg {\n    margin-right: 16px;\n  }\n"]))),D=function(e){var t=e.isOpen,n=e.title,r=e.label,a=void 0===r?"Alert modal":r,l=e.variant,o=void 0===l?"warning":l,i=e.children,c=(0,s.Z)(e,O),m={danger:p().createElement(w,{size:"lg"}),error:p().createElement(P,{size:"lg"}),info:p().createElement(x,{size:"lg"}),success:p().createElement(S,{size:"lg"}),warning:p().createElement(_,{size:"lg"})},d=p().createElement(j,null,o?m[o]:null,p().createElement(v.Title,{id:"alert-modal-header-label",size:"2xl",headingLevel:"h2"},n));return p().createElement(v.Modal,(0,u.Z)({header:d,"aria-label":a,"aria-labelledby":"alert-modal-header-label",isOpen:!!t,variant:"small",title:n},c),i)};D.propTypes={isOpen:g().bool.isRequired,title:g().string.isRequired,label:g().string,variant:g().string,children:g().node};const C=D},55411:(e,t,n)=>{n.d(t,{Z:()=>r.Z});var r=n(81672)},62923:(e,t,n)=>{n.d(t,{Z:()=>b});var r,a,l,o=n(70885),i=n(30168),c=n(92950),u=n.n(c),s=n(45697),m=n.n(s),d=n(29163),p=n(1085),f=(0,d.default)(p.Card)(r||(r=(0,i.Z)(["\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n"]))),g=(0,d.default)(p.CardBody)(a||(a=(0,i.Z)(["\n  max-height: 200px;\n  overflow: scroll;\n"]))),v=(0,d.default)(p.ExpandableSection)(l||(l=(0,i.Z)(["\n  text-align: left;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n"])));function E(e){var t=e.error,n=(0,c.useState)(!1),r=(0,o.Z)(n,2),a=r[0],l=r[1];return u().createElement(u().Fragment,null,Array.isArray(t)&&t.length&&u().createElement(v,{toggleText:"Details",onToggle:function(){l(!a)},isExpanded:a},u().createElement(f,null,u().createElement(g,null,u().createElement("ul",null,t.map((function(e){return"string"==typeof e?u().createElement("li",{key:e},e):null})))))))}E.propTypes={error:m().arrayOf(m().string)};const b=E},23071:(e,t,n)=>{n.d(t,{Z:()=>r.Z});var r=n(62923)},35079:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var r,a,l,o,i,c=n(42982),u=n(15861),s=n(4942),m=n(30168),d=n(64687),p=n.n(d),f=n(92950),g=n.n(f),v=n(29163),E=n(81163),b=n(83913),y=n(39173),h=n(1085),k=n(59698),Z=n(49148),O=n(83474),w=n(9771),P=n(48236),x=n(10001),S=n(12613),_=n(70885),j=n(45697),D=n.n(j),C=n(84564),T=n(27443),q=n(77685),R=n(35993),I=n(91354),L=n(53345),B=n(62455);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=(0,v.default)(h.CardTitle)(r||(r=(0,m.Z)(["\n  word-break: break-word;\n"]))),F=v.default.span(a||(a=(0,m.Z)(["\n  margin-right: 5px;\n  font-weight: bold;\n"]))),M=v.default.small(l||(l=(0,m.Z)(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n"]))),U=(0,v.default)(h.Checkbox)(o||(o=(0,m.Z)(["\n  &.pf-c-check.pf-m-standalone {\n    margin-top: -3px;\n  }\n"]))),W=v.default.div(i||(i=(0,m.Z)(["\n  display: flex;\n  min-height: 30px;\n  align-items: center;\n"]))),V=function(e){var t,n=e.isSuccess,r=e.plan,a=e.selected,l=void 0===a?[]:a,o=e.handleSelect,i=void 0===o?function(){}:o,c=e.canWrite,u=e.options,m=r.id,d=r.automation_status,p=r.category,v=r.description,b=r.frequency_period,y=r.modified,k=r.name,Z=r.template_details,O=r.projections,w=(0,E.useNavigate)(),P=null==O?void 0:O.series_stats[O.series_stats.length-1].cumulative_net_benefits,x=(0,f.useState)(!1),S=(0,_.Z)(x,2),j=S[0],D=S[1],A=function(e,t){return u[e]?u[e].find((function(e){return e.key===t})).value:t},V=[g().createElement(g().Fragment,{key:m},g().createElement(h.DropdownItem,{key:"edit",onClick:function(){return w("".concat(m,"/edit"))},position:"right"},"Edit"),g().createElement(h.DropdownItem,{key:"link",onClick:function(){return w("".concat(m,"/edit#tasks"))},position:"right"},"Manage tasks"),g().createElement(h.DropdownItem,{key:"link",onClick:function(){return w("".concat(m,"/edit#link_template"))},position:"right"},"Link template"))];return g().createElement(h.Card,null,g().createElement(h.CardHeader,null,g().createElement(h.CardHeaderMain,null,g().createElement(z,null,g().createElement(E.Link,{to:"".concat(m)},k))),c&&g().createElement(h.CardActions,null,g().createElement(h.Dropdown,{onSelect:function(){},toggle:g().createElement(h.KebabToggle,{onToggle:function(){return D(!j)}}),isOpen:j,isPlain:!0,dropdownItems:V,position:"right"}),g().createElement(U,{onChange:function(){return i(r.id)},isChecked:l.includes(r.id),"aria-label":"card checkbox",id:"check-1",name:"check1"}))),g().createElement(h.CardBody,null,v?g().createElement(M,null,v):null,g().createElement(W,null,g().createElement(F,null,"Frequency")," ",b?A("frequency_period",b):g().createElement("span",null,"None")),g().createElement(W,null,g().createElement(F,null,"Template")," ",0!==Object.keys(Z||{}).length?(t=Z)&&n?g().createElement("a",{onClick:function(){return e=t.id,n=(0,s.Z)({},q.zG,N(N({},R.cY.defaultParams),{},{quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]})),void w((0,q.uJ)(T.n.jobExplorer,!0,n));var e,n}},t.name):null:g().createElement("span",null,"None - ",g().createElement(E.Link,{to:"".concat(m,"/edit#link_template")},"Link template"))),g().createElement(W,null,g().createElement(h.Tooltip,{key:"last_job_status_tooltip",position:h.TooltipPosition.top,content:d.last_known_day?"Status last reported on: ".concat(d.last_known_day):d.last_known_month?"Status last reported on: ".concat(d.last_known_month):d.last_known_year?"Status last reported on: ".concat(d.last_known_year):"Status last reported on: ".concat(d.last_known_date)},g().createElement(F,null,"Last job status")),Array.isArray(d.status)?d.status.map((function(e){return"None"!==e?g().createElement(B.Z,{status:e}):g().createElement(h.Label,{variant:"outline",color:"red",icon:g().createElement(C.ZP,null),style:{marginRight:"0.5rem",marginBottom:"0.5rem"}},"Not Running")})):"None"!==d.status?g().createElement(B.Z,{status:d.status}):g().createElement(h.Label,{variant:"outline",color:"red",icon:g().createElement(C.ZP,null),style:{marginRight:"0.5rem",marginBottom:"0.5rem"}},"Not Running")),P&&g().createElement(W,null,g().createElement(F,null,"Projected savings"),g().createElement(E.Link,{to:"".concat(m,"/statistics")},(0,I.Z)(+P))),g().createElement(W,null,g().createElement(F,null,"Last updated")," ",g().createElement("span",null,(0,L.o0)(y)))),g().createElement(h.CardFooter,null,g().createElement(h.Label,null,A("category",p))))};V.propTypes={isSuccess:D().bool.isRequired,canWrite:D().bool.isRequired,selected:D().array,handleSelect:D().func,plan:D().object,options:D().object};const G=V;var J=n(55411),H=n(96183),K=n(23071),Y=function(e){var t=e.name,n=e.username,r=e.image;return t||n||r?(t&&D().checkPropTypes({name:D().string},{name:e.name},"prop","ItemToDelete"),n&&D().checkPropTypes({username:D().string},{username:e.username},"prop","ItemToDelete"),r&&D().checkPropTypes({image:D().string},{image:e.image},"prop","ItemToDelete"),null):new Error("One of 'name', 'username' or 'image' is required by ItemToDelete component.")},$=function(e){var t,n=e.itemsToDelete,r=e.pluralizedItemName,a=void 0===r?"Items":r,l=e.onDelete,o=e.errorMessage,i=void 0===o?"Error while deleting":o,c=e.deleteDetailsRequests,s=void 0===c?[]:c,m=e.cannotDelete,d=void 0===m?function(e){return!e}:m,v=(0,f.useState)(!1),E=(0,_.Z)(v,2),b=E[0],y=E[1],k=(0,f.useState)(null),Z=(0,_.Z)(k,2),O=Z[0],w=Z[1],P=(0,f.useState)(!1),x=(0,_.Z)(P,2),S=x[0],j=x[1],D=(0,f.useState)(""),C=(0,_.Z)(D,2),T=C[0],q=C[1],R=function(){var e=(0,u.Z)(p().mark((function e(t){var r,a,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),w(null),!(t&&1===n.length&&(null==s?void 0:s.length)>0)){e.next=9;break}return e.next=5,(0,H.U)(s);case 5:r=e.sent,a=r.results,(l=r.error)?q(l):w(a);case 9:j(!1),y(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I="Delete ".concat(a,"?"),L=0===n.length||n.some(d);return T?g().createElement(J.Z,{isOpen:!!T,title:"Error!",onClose:function(){R(!1),q()}},g().createElement(K.Z,{error:T.detail})):g().createElement(g().Fragment,null,g().createElement(h.Tooltip,{content:(t=n.filter(d).map((function(e){return e.name||e.username})).join(", "),n.some(d)?g().createElement("div",null,i?g().createElement(g().Fragment,null,g().createElement("span",null,i),g().createElement("span",null,": ".concat(t))):"You do not have permission to delete ".concat(a,": ").concat(t)):n.length?"Delete":"Select a plan to delete"),position:"top"},g().createElement("div",null,g().createElement(h.Button,{variant:"secondary",ouiaId:"delete-button",spinnerAriaValueText:S?"Loading":void 0,"aria-label":"Delete",onClick:function(){return R(!0)},isDisabled:L},"Delete"))),b&&g().createElement(J.Z,{variant:"danger",title:I,isOpen:b,onClose:function(){return R(!1)},actions:[g().createElement(h.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"confirm delete",isDisabled:Boolean(O),onClick:function(){l(),R()}},"Delete"),g().createElement(h.Button,{key:"cancel",variant:"link","aria-label":"cancel delete",onClick:function(){return R(!1)}},"Cancel")]},g().createElement("div",null,"This action will delete the following:"),n.map((function(e){return g().createElement("span",{key:e.id},g().createElement("strong",null,e.name||e.username||e.image),g().createElement("br",null))}))))};$.propTypes={itemsToDelete:D().arrayOf(D().shape({id:D().number.isRequired,name:Y,username:Y,image:Y})).isRequired,pluralizedItemName:D().string,onDelete:D().func.isRequired,errorMessage:D().string,warningMessage:D().node,deleteDetailsRequests:D().array,cannotDelete:D().func,deleteMessage:D().string};const Q=$;var X=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};var ee,te,ne=n(77388);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=(0,v.default)(h.PageSection)(ee||(ee=(0,m.Z)(["\n  height: calc(100vh - 303px);\n"]))),oe=v.default.div(te||(te=(0,m.Z)(["\n  flex-shrink: 0;\n"])));const ie=function(){var e,t,n=(0,E.useNavigate)(),r=(0,E.useLocation)().pathname,a=(0,q.Kx)(R.bE.defaultParams),l=a.queryParams,o=a.setFromPagination,i=a.setFromToolbar,s=(0,ne.ZP)(Z.nE,{}),m=s.result,d=s.isSuccess,v=s.request,_=(0,ne.ZP)(Z.Wu,{items:[],rbac:{perms:{}},meta:{count:0}}),j=_.result,D=j.items,C=j.rbac,T=j.meta,I=_.isLoading,L=_.isSuccess,B=_.error,A=_.request,N=ae(ae({},m),{},{name:[{key:"name",value:null}]});(0,f.useEffect)((function(){v({})}),[]),(0,f.useEffect)((function(){A(l)}),[l]);var z=L&&(!0===(null===(e=C.perms)||void 0===e?void 0:e.write)||!0===(null===(t=C.perms)||void 0===t?void 0:t.all)),F=function(e){void 0===e&&(e=[]);var t=(0,f.useState)([]),n=t[0],r=t[1],a=n.length>0&&n.length===e.length;return{selected:n,isAllSelected:a,handleSelect:function(e){n.some((function(t){return t===e}))?r((function(t){return X([],t.filter((function(t){return t!==e})),!0)})):r((function(t){return X(X([],t,!0),[e],!1)}))},setSelected:r}}(D.map((function(e){return e.id}))),M=F.selected,U=F.handleSelect,W=F.setSelected,V=(0,ne.px)(Z.z2,null),H=V.isLoading,Y=V.deletionError,$=V.deleteItems,ee=V.clearDeletionError,te=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(M);case 2:W([]),A(l);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g().createElement(k.PageLayout,null,g().createElement(b.Z,null,g().createElement(y.Z,{title:"Savings Planner"}),g().createElement(O.Z,{categories:N,filters:l,setFilters:i,additionalControls:[].concat((0,c.Z)(z?[g().createElement(h.Button,{key:"add-plan-button","data-cy":"add-plan-button",variant:"primary","aria-label":"Add plan",onClick:function(){n((0,q.uJ)("".concat(r,"/add")))}},"Add plan")]:[]),[z&&d&&D.length>0&&g().createElement(Q,{key:"delete-plan-button","data-cy":"delete-plan-button",onDelete:te,itemsToDelete:D.filter((function(e){return M.includes(e.id)})),pluralizedItemName:"Savings plan"})]),pagination:L&&D.length>0?g().createElement(S.Z,{count:T.count,params:{limit:+l.limit,offset:+l.offset},setPagination:o,isCompact:!0}):null})),g().createElement(le,{hasOverflowScroll:!0},B?g().createElement(w.Z,{message:B.error.error}):I||H?g().createElement(P.Z,null):!L||0!==D.length||I||H?!L||I||H?null:g().createElement(h.Gallery,{hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},D.map((function(e){return g().createElement(G,{key:e.id,isSuccess:L,selected:M,plan:e,handleSelect:U,canWrite:z,options:m})}))):g().createElement(x.Z,{label:"Add plan",title:"No plans found",message:z?"Update the applied filters or add a new plan.":"Update the applied filters.",canAdd:z,path:"".concat(r,"/add")})),D.length>0&&!(I||H)&&g().createElement(oe,null,g().createElement(S.Z,{count:T.count,params:{limit:+l.limit,offset:+l.offset},setPagination:o,variant:h.PaginationVariant.bottom})),Y&&g().createElement(J.Z,{"aria-label":"Deletion error",isOpen:Y,onClose:ee,title:"Error",variant:"error"},"Failed to delete one or more plans.",g().createElement(K.Z,{error:Y.detail})))}},96183:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(15861),a=n(64687),l=n.n(a);function o(e){return i.apply(this,arguments)}function i(){return i=(0,r.Z)(l().mark((function e(t){var n,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=null,o=!1,e.prev=3,e.next=6,Promise.all(t.map(function(){var e=(0,r.Z)(l().mark((function e(t){var r,a,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.request,a=t.label,e.next=3,r();case 3:i=e.sent,(c=i.items.count)>0&&(n[a]=c,o=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a=e.t0;case 11:return e.abrupt("return",{results:o&&n,error:a});case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))),i.apply(this,arguments)}},10001:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(92950),a=n.n(r),l=n(1085),o=n(60433),i=n(80810),c=n(77685),u=n(81163);const s=function(e){var t=e.label,n=void 0===t?"":t,r=e.title,s=void 0===r?"No items found.":r,m=e.message,d=void 0===m?"":m,p=e.canAdd,f=void 0!==p&&p,g=e.showButton,v=void 0!==g&&g,E=e.path,b=void 0===E?void 0:E,y=e.onButtonClick,h=void 0===y?void 0:y,k=(0,u.useNavigate)();return a().createElement(l.EmptyState,{variant:l.EmptyStateVariant.full},a().createElement(l.EmptyStateIcon,{icon:f?o.Mh:i.W1}),a().createElement(l.Title,{size:"lg",headingLevel:"h3"},s),a().createElement(l.EmptyStateBody,null,d),(f||v)&&a().createElement(l.Button,{key:"add-item-button",variant:l.ButtonVariant.primary,"aria-label":n,onClick:function(){b&&k((0,c.uJ)(b)),h&&h()}},n))}},62455:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(92950),a=n.n(r),l=n(1085),o=n(68778),i=n(43047),c=n(66395),u=n(69957),s=n(93279),m=n(53345);const d=function(e){var t=e.status;return a().createElement(l.Label,{variant:"outline",color:function(){switch(t){case"successful":return"green";case"failed":case"error":return"red";case"running":case"pending":return"blue";case"canceled":return"orange";default:return"grey"}}(),icon:function(){switch(t){case"successful":return a().createElement(o.rE,null);case"failed":case"error":return a().createElement(i.$O,null);case"running":return a().createElement(c.ew,null);case"canceled":return a().createElement(u.LP,null);default:return a().createElement(s.T3,null)}}(),style:{marginRight:"0.5rem",marginBottom:"0.5rem"}},(0,m.kC)(t))}},12613:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(92950),a=n.n(r),l=n(45697),o=n.n(l),i=n(1085),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},u=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],s=function(e){var t=e.count,n=void 0===t?0:t,r=e.perPageOptions,l=void 0===r?null:r,o=e.params,s=e.setPagination,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["count","perPageOptions","params","setPagination"]),d=o.offset,p=o.limit,f=Math.floor(d/p+1),g=function(e){return(e-1)*p};return a().createElement(i.Pagination,c({"data-cy":m.isCompact?"pagination_top":"pagination_bottom",itemCount:n,widgetId:"aa-pagination",perPageOptions:null!=l?l:u,perPage:p,page:f,onPerPageSelect:function(e,t,n){s(g(n),t)},onSetPage:function(e,t){s(g(t))}},m))};s.propTypes={count:o().number,params:o().exact({offset:o().number.isRequired,limit:o().number.isRequired}).isRequired,setPagination:o().func.isRequired,perPageOptions:o().arrayOf(o().exact({title:o().string.isRequired,value:o().number.isRequired}).isRequired)};const m=s},91354:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}}}]);
//# sourceMappingURL=../sourcemaps/4957.3e872fcddcb2b7c4e2002d803026ea80.js.map