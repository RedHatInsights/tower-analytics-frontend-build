"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[8],{31008:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var l=n(15861),r=n(70885),a=n(4942),o=n(87757),u=n.n(o),c=n(92950),i=n.n(c),s=n(86350),m=n(48716),p=n(39173),E=n(1085),d=n(48236),f=n(83061),b=n(9771),v=n(83474),T=n(44633),h=n(64631),g=n(13784),C=n(53345),y=n(77388),D=n(53235),x=n(91354);const k=function(e){var t=e.totalSavings,n=void 0===t?0:t;return i().createElement(E.Card,{isPlain:!0,isCompact:!0},i().createElement(E.CardTitle,null,"Total savings"),i().createElement(E.CardBody,null,i().createElement(E.Title,{headingLevel:"h3",size:"4xl",style:{color:"var(--pf-global--success-color--200)"}},(0,x.Z)(n))))};var S,L,w=n(97960),_=(0,n(29163).ZP)(E.InputGroup)(I||(S=["\n  width: 170px;\n"],L=["\n  width: 170px;\n"],Object.defineProperty?Object.defineProperty(S,"raw",{value:L}):S.raw=L,I=S)),G=function(e){return+e&&+e<0?NaN:e};const O=function(e){var t=e.costManual,n=void 0===t?0:t,l=e.setCostManual,r=void 0===l?function(){return{}}:l,a=e.costAutomation,o=void 0===a?0:a,u=e.setCostAutomation,c=void 0===u?function(){return{}}:u;return i().createElement(E.Card,{isPlain:!0,isCompact:!0},i().createElement(E.CardBody,null,i().createElement("p",null,"Manual cost of automation",i().createElement("span",{style:{color:"var(--pf-global--Color--dark-200)",fontSize:"0.8em",display:"block"}},"(e.g. average salary of mid-level Software Engineer)")),i().createElement(_,null,i().createElement(E.InputGroupText,null,i().createElement(w.bk,null)),i().createElement(E.TextInput,{id:"manual-cost",type:"number","aria-label":"manual-cost",value:isNaN(n)?"":n.toString(),onChange:function(e){return r(G(+e))}}),i().createElement(E.InputGroupText,null,"/hr")),i().createElement("p",{style:{paddingTop:"10px"}},"Automated process cost"),i().createElement(_,null,i().createElement(E.InputGroupText,null,i().createElement(w.bk,null)),i().createElement(E.TextInput,{id:"automation-cost",type:"number","aria-label":"automation-cost",value:isNaN(o)?"":o.toString(),onChange:function(e){return c(G(+e))}}),i().createElement(E.InputGroupText,null,"/hr"))))};var I,P=n(53688);const Z=function(){var e=(0,c.useState)(!1),t=e[0],n=e[1];return i().createElement(i().Fragment,null,i().createElement(E.Button,{variant:E.ButtonVariant.link,onClick:function(){return n(!0)},icon:i().createElement(P.uM,null)},"Automation formula"),i().createElement(E.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:E.ModalVariant.medium,actions:[i().createElement(E.Button,{key:"cancel",variant:E.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},i().createElement("p",null,i().createElement("b",null,"Manual cost for template X"),i().createElement("br",null),"(time for a manual run on one host in hours * (sum of all hosts across all job runs) ) * cost per hour"),i().createElement("br",null),i().createElement("p",null,i().createElement("b",null,"Automation cost for template X"),i().createElement("br",null),"cost of automation per hour * sum of total elapsed hours for a template"),i().createElement("br",null),i().createElement("p",null,i().createElement("b",null,"Savings"),i().createElement("br",null),"Sum of (manual cost - automation cost) across all templates")))};var j=n(48607),B=n(91573);const A=function(e){var t=e.template;return i().createElement(j.Td,{colSpan:5},i().createElement(j.ExpandableRowContent,null,i().createElement(E.DescriptionList,{columnModifier:{default:"3Col"}},i().createElement(E.DescriptionListGroup,null,i().createElement(E.DescriptionListTerm,null,"ID"),i().createElement(E.DescriptionListDescription,null,t.id)),i().createElement(E.DescriptionListGroup,null,i().createElement(E.DescriptionListTerm,null,"Elapsed"),i().createElement(E.DescriptionListDescription,null,t.elapsed)),i().createElement(E.DescriptionListGroup,null,i().createElement(E.DescriptionListTerm,null,"Host count"),i().createElement(E.DescriptionListDescription,null,t.host_count)),i().createElement(E.DescriptionListGroup,null,i().createElement(E.DescriptionListTerm,null,"Total count"),i().createElement(E.DescriptionListDescription,null,t.total_count)),i().createElement(E.DescriptionListGroup,null,i().createElement(E.DescriptionListTerm,null,"Total org count"),i().createElement(E.DescriptionListDescription,null,t.total_org_count)),i().createElement(E.DescriptionListGroup,null,i().createElement(E.DescriptionListTerm,null,"Total cluster count"),i().createElement(E.DescriptionListDescription,null,t.total_cluster_count)),i().createElement(E.DescriptionListGroup,null,i().createElement(E.DescriptionListTerm,null,"Total inventory count"),i().createElement(E.DescriptionListDescription,null,t.total_inventory_count)))))},R=function(e){var t=e.template,n=e.setDataRunTime,l=e.setEnabled,r=e.redirectToJobExplorer,a=(0,c.useState)(!1),o=a[0],u=a[1];return i().createElement(i().Fragment,null,i().createElement(j.Tr,null,i().createElement(j.Td,{expand:{rowIndex:t.id,isExpanded:o,onToggle:function(){return u(!o)}}}),i().createElement(j.Td,null,i().createElement(E.Tooltip,{content:"List of jobs for this template for past 30 days"},i().createElement(E.Button,{onClick:function(){return r(t.id)},variant:E.ButtonVariant.link},t.name))),i().createElement(j.Td,null,i().createElement(E.InputGroup,null,i().createElement(E.TextInput,{style:{maxWidth:"150px"},type:"number","aria-label":"time run manually",value:t.avgRunTime/60,onChange:function(e){return n(60*+e,t.id)}}),i().createElement(E.InputGroupText,null,"min"),i().createElement(E.InputGroupText,{variant:E.InputGroupTextVariant.plain},"x ",t.successful_hosts_total," host runs"))),i().createElement(j.Td,{style:{color:B.global_success_color_200.value}},(0,x.Z)(+t.delta)),i().createElement(j.Td,null,i().createElement(E.Switch,{label:"Show",labelOff:"Hide",isChecked:t.enabled,onChange:function(e){return l(e)}}))),i().createElement(j.Tr,{isExpanded:o},i().createElement(A,{template:t})))},M=function(e){var t=e.data,n=void 0===t?[]:t,l=e.setDataRunTime,r=void 0===l?function(){return{}}:l,a=e.setEnabled,o=void 0===a?function(){return function(){return{}}}:a,u=e.redirectToJobExplorer,c=void 0===u?function(){return{}}:u;return i().createElement(E.Card,null,i().createElement(E.CardBody,null,i().createElement("p",null,"Enter the time it takes to run the following templates manually."),i().createElement(j.TableComposable,{"aria-label":"ROI Table",variant:j.TableVariant.compact},i().createElement(j.Thead,null,i().createElement(j.Tr,null,i().createElement(j.Th,null),i().createElement(j.Th,null,"Name"),i().createElement(j.Th,null,"Time"),i().createElement(j.Th,null,"Savings"),i().createElement(j.Th,null,i().createElement(E.Switch,{label:"Show all",labelOff:"Show all",isChecked:!n.find((function(e){return!e.enabled})),onChange:function(e){return o(void 0)(e)}})))),i().createElement(j.Tbody,null,n.map((function(e){return i().createElement(R,{key:e.id,template:e,setDataRunTime:r,redirectToJobExplorer:c,setEnabled:o(e.id)})}))))))};var F=n(20806);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=function(e){return e.filter((function(e){return e.enabled}))},q=function(e,t,n){return e.map((function(e){var l=(0,C.B3)(e.avgRunTime)*e.successful_hosts_total*parseFloat(n),r=(0,C.B3)(e.successful_elapsed_total)*parseFloat(t),a=(0,C.YD)(r,l);return V(V({},e),{},{delta:a,manualCost:l,automatedCost:r})}))};const z=function(){var e=(0,c.useState)("50"),t=(0,r.Z)(e,2),n=t[0],o=t[1],C=(0,c.useState)("20"),x=(0,r.Z)(C,2),S=x[0],L=x[1],w=(0,h.eR)(),_=(0,h.Kx)(g.GL.defaultParams),G=_.queryParams,I=_.setFromToolbar,P=(0,y.ZP)((0,c.useCallback)((function(){return(0,T.Yn)(G)}),[G]),{}),j=P.result,B=P.request,A=(0,y.ZP)((0,c.useCallback)((0,l.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.QJ)(G);case 2:return t=e.sent,e.abrupt("return",q((void 0,(void 0===(l=t.items)?[]:l).map((function(e){return V(V({},e),{},{delta:0,avgRunTime:3600,manualCost:0,automatedCost:0,enabled:!0})}))),S,n));case 4:case"end":return e.stop()}var l}),e)}))),[G]),[]),R=A.result,N=A.error,z=A.isLoading,H=A.isSuccess,Y=A.request,X=A.setValue;(0,c.useEffect)((function(){X(q(R,S,n))}),[S,n]),(0,c.useEffect)((function(){B(),Y()}),[G]);var K;return i().createElement(i().Fragment,null,i().createElement(m.Z,null,i().createElement(p.Z,{title:"Automation Calculator"}),i().createElement(v.Z,{categories:j,filters:G,setFilters:I})),i().createElement(s.Z,null,z?i().createElement(d.Z,null):N?i().createElement(b.Z,{message:N.error}):H&&R.length<=0?i().createElement(f.Z,null):H&&R.length>0?i().createElement(E.Card,null,i().createElement(E.Grid,{hasGutter:!0,className:"automation-wrapper"},i().createElement(E.GridItem,{span:9},i().createElement(E.Card,{isPlain:!0},i().createElement(E.CardHeader,null,i().createElement(E.CardTitle,null,"Automation savings")),i().createElement(E.CardBody,null,i().createElement(D.Z,{margin:{top:20,right:20,bottom:20,left:70},id:"d3-roi-chart-root",data:J(R)}),i().createElement("p",{style:{textAlign:"center"}},"Templates")))),i().createElement(E.GridItem,{span:3},i().createElement(E.Stack,null,i().createElement(E.StackItem,null,i().createElement(k,{totalSavings:(K=J(R),K.reduce((function(e,t){return e+t.delta}),0))})),i().createElement(E.StackItem,null,i().createElement(E.Stack,null,i().createElement(E.StackItem,null,i().createElement(O,{costManual:n,setCostManual:o,costAutomation:S,setCostAutomation:L})),i().createElement(E.StackItem,null,i().createElement(Z,null)))))),i().createElement(E.GridItem,{span:12},i().createElement(M,{redirectToJobExplorer:function(e){var t=(0,a.Z)({},h.zG,V(V({},g.cY.defaultParams),{},{quick_date_range:"last_30_days",template_id:[e]}));w(F.n.jobExplorer,t)},data:R,setDataRunTime:function(e,t){var l=R.map((function(l){return l.id===t?(l.avgRunTime=e,q([l],S,n)[0]):l}));X(l)},setEnabled:function(e){return function(t){X(e?R.map((function(n){return n.id===e?V(V({},n),{},{enabled:t}):n})):R.map((function(e){return V(V({},e),{},{enabled:t})})))}}})))):i().createElement(i().Fragment,null)))}}}]);
//# sourceMappingURL=../sourcemaps/8.d152a604a0de643bbe7704e893b1f644.js.map