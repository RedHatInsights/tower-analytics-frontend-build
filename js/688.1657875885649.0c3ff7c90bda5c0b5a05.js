"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[688],{94592:(e,t,n)=>{n.d(t,{Z:()=>_});var a,r,o,l,i,s=n(30168),u=n(92950),c=n.n(u),m=n(29163),d=n(45697),p=n.n(d),f=m.ZP.div(a||(a=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 100%;\n  max-width: 100%;\n  height: 1rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n"]))),g=m.ZP.div(r||(r=(0,s.Z)(["\n  height: 100%;\n"]))),v=m.ZP.div(o||(o=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n"]))),h=m.ZP.div(l||(l=(0,s.Z)(["\n  padding-left: 2rem;\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n"]))),E=m.ZP.div(i||(i=(0,s.Z)(["\n  width: 0.75rem;\n  height: 0.75rem;\n  margin-right: 0.5rem;\n"])));function y(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}var b=function(e){var t=e.categoryCount,n=e.categoryColor,a=e.showPercent,r=void 0!==a&&a,o=Object.values(t).reduce((function(e,t){return e+t})),l=Object.keys(t).filter((function(e){return t[e]>0})).sort((function(e,n){return t[e]<t[n]?1:t[e]>t[n]?-1:0})).map((function(e){return{name:e,barSpacing:t[e]/o,color:n[e]}})),i=1-.15*(l.length-1)/100;return c().createElement(c().Fragment,null,c().createElement(f,null,l.map((function(e,t){var n=e.barSpacing,a=e.color;return t<l.length-1?c().createElement(c().Fragment,{key:t},c().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}),c().createElement(g,{style:{backgroundColor:"transparent",width:"".concat(.15,"%")}})):c().createElement(c().Fragment,{key:t},c().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}))}))),c().createElement(v,null,l.map((function(e){var t=e.name,n=e.barSpacing,a=e.color;return c().createElement(h,{key:"label-".concat(t)},c().createElement(E,{style:{backgroundColor:a}}),r?c().createElement("p",null,y(t)," ",Math.round(100*n),"%"):c().createElement("p",null,y(t)))}))))};b.propTypes={categoryColor:p().object.isRequired,categoryCount:p().object.isRequired,showPercent:p().bool};const _=b},69595:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(92950),r=n.n(a),o=n(45697),l=n.n(o),i=n(86235),s=n(1085),u=function(e){var t=e.items,n=void 0===t?[]:t,a=e.current,o=void 0===a?null:a;return r().createElement(s.Breadcrumb,null,n.map((function(e){var t=e.title,n=e.navigate;return r().createElement(s.BreadcrumbItem,{key:t},r().createElement(i.Link,{to:n},t))})),o&&r().createElement(s.BreadcrumbHeading,null,o))};u.propTypes={items:l().arrayOf(l().shape({navigate:l().any,title:l().node})),current:l().node};const c=u},83061:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(92950),r=n.n(a),o=n(1085),l=n(76473);const i=function(){return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full,style:{minHeight:"400px"}},r().createElement(o.EmptyStateIcon,{icon:l.TF}),r().createElement(o.Title,{headingLevel:"h5",size:"lg"},"No Data"))}},86552:(e,t,n)=>{n.d(t,{Z:()=>d});var a,r=n(92950),o=n.n(r),l=n(99704),i=n(16559),s=n(44586);!function(e){e.nonGrouped="nonGrouped",e.grouped="grouped"}(a||(a={}));var u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.apply(this,arguments)},c=function(){return c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)},m=function(e){return c(c({},l.wk),{axisFormat:c(c(c({},l.wk.axisFormat),{formatAsYear:function(e){return Intl.DateTimeFormat("en",{year:"numeric"}).format(new Date(e))},formatAsMonth:function(e){return Intl.DateTimeFormat("en",{month:"long"}).format(new Date(e))}}),null==e?void 0:e.axisFormat),labelFormat:c(c({},l.wk.labelFormat),null==e?void 0:e.labelFormat)})};const d=function(e){var t=e.schema,n=e.data,d=e.specificFunctions,p=e.namespace,f=void 0===p?"settings":p,g=(0,i.Kx)({chartSeriesHiddenProps:[]},f),v=g.queryParams.chartSeriesHiddenProps,h=g.dispatch,E=(0,r.useState)({series:[],legend:[]}),y=E[0],b=E[1];return(0,r.useEffect)((function(){b(function(e,t){return void 0===t&&(t=[]),c(c({},e),{series:e.series.map((function(e){return c(c({},e),{hidden:!!e.serie[0].id&&!!t.includes(e.serie[0].id.toString())})}))})}(function(e){var t,n={series:[],legend:[]};switch(e.type="dates"in e?a.grouped:a.nonGrouped,e.type){case a.grouped:n.series=function(e){var t=e.dates,n=[];return t.forEach((function(e){e.items.forEach((function(t,a){n[a]||(n[a]={serie:[],hidden:!1,name:(0,s.Z)()}),n[a].serie.push(u({created_date:e.date},t))}))})),n}(e);break;case a.nonGrouped:n.series=[{serie:e.items||e.meta.legend,hidden:!1,name:(0,s.Z)()}]}return(null===(t=e.meta)||void 0===t?void 0:t.legend)&&(n.legend=e.meta.legend.map((function(e){var t=n.series.find((function(t){return t.serie.find((function(t){return t.id===e.id}))}));return u(u({},e),{childName:t&&t.name?t.name:""})}))),n}(n),v))}),[n]),o().createElement(l.ZP,{schema:t,functions:m(d),dataState:[y,function(e){h({type:"SET_CHART_SERIES_HIDDEN_PROPS",value:e.series.map((function(e){return[e.serie[0].id,e.hidden]}))}),b(e)}]})}},10001:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(92950),r=n.n(a),o=n(1085),l=n(60433),i=n(80810),s=n(16559);const u=function(e){var t=e.label,n=void 0===t?"":t,a=e.title,u=void 0===a?"No items found.":a,c=e.message,m=void 0===c?"":c,d=e.canAdd,p=void 0!==d&&d,f=e.showButton,g=void 0!==f&&f,v=e.path,h=void 0===v?void 0:v,E=e.onButtonClick,y=void 0===E?void 0:E,b=(0,s.eR)();return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},r().createElement(o.EmptyStateIcon,{icon:p?l.Mh:i.W1}),r().createElement(o.Title,{size:"lg",headingLevel:"h3"},u),r().createElement(o.EmptyStateBody,null,m),(p||g)&&r().createElement(o.Button,{key:"add-item-button",variant:o.ButtonVariant.primary,"aria-label":n,onClick:function(){h&&b(h),y&&y()}},n))}},12613:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(92950),r=n.n(a),o=n(45697),l=n.n(o),i=n(1085),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},u=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],c=function(e){var t=e.count,n=void 0===t?0:t,a=e.perPageOptions,o=void 0===a?null:a,l=e.params,c=e.setPagination,m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["count","perPageOptions","params","setPagination"]),d=l.offset,p=l.limit,f=Math.floor(d/p+1),g=function(e){return(e-1)*p};return r().createElement(i.Pagination,s({itemCount:n,widgetId:"aa-pagination",perPageOptions:null!=o?o:u,perPage:p,page:f,onPerPageSelect:function(e,t,n){c(g(n),t)},onSetPage:function(e,t){c(g(t))}},m))};c.propTypes={count:l().number,params:l().exact({offset:l().number.isRequired,limit:l().number.isRequired}).isRequired,setPagination:l().func.isRequired,perPageOptions:l().arrayOf(l().exact({title:l().string.isRequired,value:l().number.isRequired}).isRequired)};const m=c},85150:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Tt});var a=n(92950),r=n.n(a),o=n(86235),l=n(29163),i=n(86350),s=n(46336),u=n(48716),c=n(39173),m=n(69595),d=n(1085),p=n(12613),f=n(16559),g=n(77388),v=n(9771),h=n(48236),E=n(83061);const y=function(e){var t=e.api,n=e.children,a=e.customLoading,o=void 0!==a&&a,l=e.customEmptyState,i=void 0!==l&&l;return o&&t.isLoading?r().createElement(r().Fragment,null,n):!t||t.isLoading?r().createElement(h.Z,null):t.error?r().createElement(v.Z,{message:t.error.error.error}):t.isSuccess?0!==t.result.meta.count||i?r().createElement(r().Fragment,null,n):r().createElement(E.Z,null):null};var b=n(68936),_=n(86552),w=n(48607),k=n(91573),x=n(53345),T=n(91354);const C=function(e){return new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(e)},S=function(e){var t=e.isExpanded,n=e.item;return r().createElement(w.Tr,{isExpanded:t},r().createElement(w.Td,{colSpan:6},r().createElement(w.ExpandableRowContent,null,r().createElement(d.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n,a,r;return[{label:"Slow Hosts Count",value:null!==(t=e.slow_hosts_count)&&void 0!==t?t:0},{label:"Host Task Count",value:null!==(n=e.host_task_count)&&void 0!==n?n:0},{label:"Slow Hosts Percentage",value:null!==(a=C(e.slow_hosts_percentage)+"%")&&void 0!==a?a:0},{label:"Template Success Rate",value:null!==(r=C(e.template_success_rate)+"%")&&void 0!==r?r:0}]}(n).map((function(e){var t=e.label,n=e.value;return r().createElement(d.DescriptionListGroup,{key:t},r().createElement(d.DescriptionListTerm,null,t),r().createElement(d.DescriptionListDescription,null,n))}))))))};var P,O,R=n(94592),D=n(35993),F=(0,l.ZP)(d.DescriptionList)(L||(P=["\n  row-gap: 16px;\n"],O=["\n  row-gap: 16px;\n"],Object.defineProperty?Object.defineProperty(P,"raw",{value:O}):P.raw=O,L=P));const I=function(e){var t,n,a,o,l,i,s,u,c,m,p,f,g,v,h,E,y,b=e.isExpanded,_=e.item,k=_?{ok:null!==(t=null==_?void 0:_.successful_count)&&void 0!==t?t:0,skipped:null!==(n=null==_?void 0:_.skipped_count)&&void 0!==n?n:0,failed:null!==(a=null==_?void 0:_.failed_count)&&void 0!==a?a:0,error:null!==(o=null==_?void 0:_.error_count)&&void 0!==o?o:0}:null,x=_?{ok:null!==(l=null==_?void 0:_.average_host_task_ok_count_per_host)&&void 0!==l?l:0,skipped:null!==(i=null==_?void 0:_.average_host_task_skipped_count_per_host)&&void 0!==i?i:0,changed:null!==(s=null==_?void 0:_.average_host_task_changed_count_per_host)&&void 0!==s?s:0,failed:null!==(u=null==_?void 0:_.average_host_task_failed_count_per_host)&&void 0!==u?u:0,unreachable:null!==(c=null==_?void 0:_.average_host_task_unreachable_count_per_host)&&void 0!==c?c:0}:null,T=_?{ok:null!==(m=null==_?void 0:_.ok_host_count)&&void 0!==m?m:0,skipped:null!==(p=null==_?void 0:_.skipped_host_count)&&void 0!==p?p:0,changed:null!==(f=null==_?void 0:_.changed_host_count)&&void 0!==f?f:0,failed:null!==(g=null==_?void 0:_.failed_host_count)&&void 0!==g?g:0,unreachable:null!==(v=null==_?void 0:_.unreachable_host_count)&&void 0!==v?v:0}:null;return r().createElement(w.Tr,{isExpanded:b},r().createElement(w.Td,{colSpan:6},r().createElement(w.ExpandableRowContent,null,r().createElement(d.Flex,null,r().createElement(d.FlexItem,null,r().createElement("strong",null,"Job status")),r().createElement(d.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Jobs"),"  ",null!==(h=null==_?void 0:_.total_count)&&void 0!==h?h:0)),r().createElement(R.Z,{categoryCount:k,categoryColor:D.ss,showPercent:!0}),r().createElement(d.Flex,null,r().createElement(d.FlexItem,null,r().createElement("strong",null,"All Host status")),r().createElement(d.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Hosts"),"  ",null!==(E=null==_?void 0:_.host_count)&&void 0!==E?E:0)),r().createElement(R.Z,{categoryCount:T,categoryColor:D.ss,showPercent:!0}),r().createElement(d.Flex,null,r().createElement(d.FlexItem,null,r().createElement("strong",null,"All Task status")),r().createElement(d.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",null!==(y=null==_?void 0:_.host_task_count)&&void 0!==y?y:0)),r().createElement(R.Z,{categoryCount:x,categoryColor:D.ss,showPercent:!0}),r().createElement(d.Divider,{component:"div",style:{marginTop:"2rem",marginBottom:"1.5rem"}}),function(e){var t=e.most_failed_tasks;if(null!=t)return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Most failed tasks")),r().createElement("br",null),r().createElement(d.Grid,{hasGutter:!0},t.slice(0,t.length).map((function(e,t){var n,a,o,l,i,s,u={passed:null!==(n=null==e?void 0:e.passed_host_count)&&void 0!==n?n:0,failed:null!==(a=null==e?void 0:e.failed_host_count)&&void 0!==a?a:0,unreachable:null!==(o=null==e?void 0:e.unreachable_host_count)&&void 0!==o?o:0},c={passed:null!==(l=null==e?void 0:e.successful_count)&&void 0!==l?l:0,failed:null!==(i=null==e?void 0:e.failed_count)&&void 0!==i?i:0,unfinished:null!==(s=null==e?void 0:e.unfinished_count)&&void 0!==s?s:0};return r().createElement(r().Fragment,null,r().createElement(d.GridItem,null,r().createElement(F,{isHorizontal:!0},function(e){return[{label:"Task name",value:e.task_name},{label:"Module name",value:e.module_name}]}(e).map((function(e){var t=e.label,n=e.value;return r().createElement(d.DescriptionListGroup,{key:t},r().createElement(d.DescriptionListTerm,null,t),r().createElement(d.DescriptionListDescription,null,n))})))),r().createElement(d.GridItem,{lg:6,md:12,key:"hosts-"+t},r().createElement(d.Flex,null,r().createElement(d.FlexItem,null,r().createElement("strong",null,"Host status")),r().createElement(d.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Hosts"),"  ",function(e){return parseInt(e.passed_host_count)+parseInt(e.failed_host_count)+parseInt(e.unreachable_host_count)}(e))),r().createElement(R.Z,{categoryCount:u,categoryColor:D.ss,showPercent:!0})),r().createElement(d.GridItem,{lg:6,md:12,key:"tasks-"+t},r().createElement(d.Flex,null,r().createElement(d.FlexItem,null,r().createElement("strong",null,"Task status")),r().createElement(d.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",function(e){return parseInt(e.successful_count)+parseInt(e.failed_count)+parseInt(e.unfinished_count)}(e))),r().createElement(R.Z,{categoryCount:c,categoryColor:D.ss,showPercent:!0})))}))))}(_),r().createElement(d.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n;return[{label:"Clusters",value:null!==(t=e.total_cluster_count)&&void 0!==t?t:0},{label:"Organizations",value:null!==(n=e.total_org_count)&&void 0!==n?n:0}]}(_).map((function(e){var t=e.label,n=e.value;return r().createElement(d.DescriptionListGroup,{key:t},r().createElement(d.DescriptionListTerm,null,t),r().createElement(d.DescriptionListDescription,null,n))}))))))};var L;const Z=function(e){var t,n,a,o,l,i,s=e.isExpanded,u=e.item,c=u?{ok:null!==(t=null==u?void 0:u.host_task_ok_count)&&void 0!==t?t:0,changed:null!==(n=null==u?void 0:u.host_task_changed_count)&&void 0!==n?n:0,failed:null!==(a=null==u?void 0:u.host_task_failed_count)&&void 0!==a?a:0,skipped:null!==(o=null==u?void 0:u.host_task_skipped_count)&&void 0!==o?o:0,unreachable:null!==(l=null==u?void 0:u.host_task_unreachable_count)&&void 0!==l?l:0}:null;return r().createElement(w.Tr,{isExpanded:s},r().createElement(w.Td,{colSpan:10},r().createElement(w.ExpandableRowContent,null,r().createElement(d.Flex,null,r().createElement(d.FlexItem,null,r().createElement("strong",null,"All Task status")),r().createElement(d.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",null!==(i=null==u?void 0:u.host_task_count)&&void 0!==i?i:0)),r().createElement(R.Z,{categoryCount:c,categoryColor:D.ss,showPercent:!0}))))};var G;!function(e){e.templatesExplorer="templatesExplorer",e.hostAnomalies="hostAnomalies",e.mostUsedModules="mostUsedModules"}(G||(G={}));var j=n(22030),B=function(){return B=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},B.apply(this,arguments)},A=["elapsed"],M=[],H=function(e,t){return"id"===t&&-1===e[t]},N=function(e,t){return"id"===t&&-2===e[t]};const q=function(e){var t,n,o=e.legendEntry,l=e.headers,i=e.expandedRowName,s=e.clickableLinking,u=(0,a.useState)(!1),c=u[0],m=u[1],p=(0,f.eR)();return r().createElement(r().Fragment,null,r().createElement(w.Tr,{style:(n=o,"id",H(n,"id")?{backgroundColor:k.global_disabled_color_300.value}:{})},i&&r().createElement(w.Td,{expand:{rowIndex:+o.id,isExpanded:c,onToggle:function(){return m(!c)}}}),l.map((function(e){var t=e.key;return r().createElement(w.Td,{key:o.id+"-"+t},s?function(e,t){var n={host_task_count:"module_usage_by_task",total_org_count:"module_usage_by_organization",total_template_count:"module_usage_by_job_template"};return N(e,t)||H(e,t)?"-":A.includes(t)?(0,x.yH)(+e[t]):M.includes(t)?(0,T.Z)(+e[t]):Object.keys(n).includes(t)&&-1!=e.id?r().createElement(d.Tooltip,{content:"View "+e.name+" usage"},r().createElement("a",{onClick:function(){return function(e,t){var n,a=((n={})[f.zG]=B(B({},(0,D.gb)(e)),{task_action_id:[t]}),n);p(j.Z.getDetails(e),a)}(n[t],e.id)}},""+e[t])):""+e[t]}(o,t):function(e,t){return N(e,t)||H(e,t)?"-":A.includes(t)?(0,x.yH)(+e[t]):M.includes(t)?(0,T.Z)(+e[t]):""+e[t]}(o,t))}))),(t=function(e){switch(e){case"templatesExplorer":return I;case"hostAnomalies":return S;case"mostUsedModules":return Z;default:return null}}(i))?r().createElement(t,{item:o,isExpanded:c}):null)};var V=function(){return V=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},V.apply(this,arguments)};const U=function(e){var t=e.legend,n=e.headers,a=e.getSortParams,o=void 0===a?function(){return{}}:a,l=e.expandedRowName,i=e.clickableLinking;return r().createElement(w.TableComposable,{"aria-label":"Report Table",variant:w.TableVariant.compact},r().createElement(w.Thead,null,r().createElement(w.Tr,null,l&&r().createElement(w.Th,null),n.map((function(e){var t=e.key,n=e.value;return r().createElement(w.Th,V({key:t},o(t),{"data-cy":t}),n)})))),r().createElement(w.Tbody,null,t.map((function(e){return r().createElement(q,{key:e.id,legendEntry:e,headers:n,expandedRowName:l,clickableLinking:i})}))))};var z=n(43047),J=n(40400);const W=(0,J.IU)({name:"DownloadIcon",height:512,width:512,svgPath:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",yOffset:0,xOffset:0});var K,Y=n(16659),$=n(28527),X="RESET_DATA",Q="SET_DOWNLOAD_TYPE",ee="SET_SHOW_EXTRA_ROWS",te="SET_SELECTED_RBAC_GROUPS",ne="SET_USERS",ae="SET_ADDITIONAL_RECIPIENTS",re="SET_EMAIL_EXTRA_ROWS",oe="SET_SUBJECT",le="SET_BODY",ie="SET_SELECTED_EXPIRY";!function(e){e.moduleReports="moduleReports",e.newAutomationCalculator="newAutomationCalculator",e.onboardingReports="aa21Onboarding",e.sendEmail="sendEmail"}(K||(K={}));var se=n(63746);const ue=function(e){var t,n,a,o,l,i=e.formData,s=e.dispatchReducer,u=i.downloadType;return r().createElement(r().Fragment,null,r().createElement(d.Title,{size:"md",headingLevel:"h4"},"Select export format:"),r().createElement(d.Grid,{sm:2},r().createElement(d.GridItem,null,r().createElement(d.Radio,{onChange:function(){return s({type:Q,value:"pdf"})},isChecked:"pdf"===u,name:"optionSelected",label:"PDF",id:"pdf-radio","aria-label":"pdf-radio"})),(t=K.sendEmail,n="beta_"+t,a=(0,se.useFlagsStatus)().flagsReady,o="beta"===window.location.pathname.split("/")[1]?n:t,l=(0,se.useFlag)(o),(!("localhost"!==window.location.hostname&&!window.location.hostname.includes("ephemeral"))||!!a&&l)&&r().createElement(d.GridItem,null,r().createElement(d.Radio,{onChange:function(){return s({type:Q,value:"email"})},isChecked:"email"===u,name:"optionSelected",label:"E-mail",id:"email-radio","aria-label":"email-radio"})))))},ce=function(e){var t=e.options,n=e.formData,a=e.dispatchReducer,o=n.showExtraRows,l=t.totalPages,i=t.pageLimit,s=l<=Math.ceil(100/i)?"All "+l.toString()+" pages":"Top "+Math.ceil(100/i)+" of "+l.toString()+" pages";return r().createElement(r().Fragment,null,r().createElement(d.Title,{size:"md",headingLevel:"h4"},"Select details:"),r().createElement(d.Grid,{md:4},r().createElement(d.GridItem,null,r().createElement(d.Radio,{onChange:function(){return a({type:ee,value:!1})},isChecked:!o,name:"showExtraRows",label:"Current page",id:"current-radio","aria-label":"current-radio"})),r().createElement(d.GridItem,null,r().createElement(d.Radio,{onChange:function(){return a({type:ee,value:!0})},isChecked:o,name:"showExtraRows",label:s,id:"extra-radio","aria-label":"extra-radio"}))))};var me=n(49148),de=n(13704);const pe=function(e){var t=e.options,n=e.formData,o=e.dispatchReducer,l=n.body,i=n.selectedRbacGroups,s=n.users,u=n.subject,c=n.additionalRecipients,m=n.emailExtraRows,p=n.expiry,f=(0,g.ZP)((function(){return(0,me.kL)()}),{data:[],meta:{count:0}}),v=f.result.data,h=f.request,E=window.location.href;(0,a.useEffect)((function(){h()}),[]);var y=(0,g.ZP)((function(){return(0,me.Vk)(i.at(-1))}),{data:[]}),b=y.result.data,_=y.request;(0,a.useEffect)((function(){i.length>0&&_()}),[i]);var w=function(e){var t;return null===(t=v.find((function(t){return t.uuid===e})))||void 0===t?void 0:t.name},k=function(){var e=b.map((function(e){return e.email})),t=b.map((function(e){return e.username})),n=i.at(-1),a={uuid:n,name:w(n),usernames:t,emails:e};-1===s.findIndex((function(e){return e.uuid===a.uuid}))&&s.push(a),o({type:ne,value:s})};(0,a.useEffect)((function(){i.length>0&&k()}),[b]);var T=t.totalPages,C=t.pageLimit,S=c.length>0,P=T<=Math.ceil(100/C)?"All "+T+" pages":"Top "+Math.ceil(100/C)+" of "+T+" pages",O=(0,a.useState)(!1),R=O[0],D=O[1],F=function(e){for(var t=e.target.value.split(","),n=0;n<t.length;n++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(t[n]))return void D(!0);D(!1)},I=(0,a.useState)(!1),L=I[0],Z=I[1];return r().createElement(d.Form,null,T>1&&r().createElement(d.FormGroup,{label:"Select details:",fieldId:"details-field"},r().createElement(d.Grid,{md:4},r().createElement(d.GridItem,null,r().createElement(d.Radio,{onChange:function(){return o({type:re,value:!1})},isChecked:!m,name:"emailExtraRows",label:"Current page",id:"email-current-radio","aria-label":"email-current-radio"})),r().createElement(d.GridItem,null,r().createElement(d.Radio,{onChange:function(){return o({type:re,value:!0})},isChecked:m,name:"emailExtraRows",label:P,id:"email-extra-radio","aria-label":"email-extra-radio"})))),r().createElement(d.FormGroup,{label:"Recipient(s)",isRequired:!0,fieldId:"selectedRbacGroups-field"},r().createElement(d.Select,{variant:d.SelectVariant.checkbox,"aria-label":"Recipient",isOpen:L,onClear:function(){return o({type:te,value:[]}),void o({type:ne,value:[]})},onToggle:function(){return Z(!L)},onSelect:function(e,t){!function(e,t){var n,a=[t];if(i.indexOf(t)>-1){a=i.filter((function(e){return e!==t}));var r=s.findIndex((function(e){return e.uuid===t}));r>=0&&s.splice(r,1),n=a}else n=i.concat(a);o({type:te,value:n})}(0,"string"!=typeof t?t.toString():t),Z(!1)},hasInlineFilter:!0,selections:i,placeholderText:"Select Recipients"},v.map((function(e,t){var n=e.uuid,a=e.name;return r().createElement(d.SelectOption,{key:t,value:n},a)})))),s.length>0&&r().createElement(d.FormGroup,{label:"User emails",fieldId:"emails-field"},s.map((function(e,t){var n=e.name,a=e.emails;return r().createElement("p",{key:t},r().createElement("b",null,n),":"," ",a.length>0?a.join(", "):r().createElement("i",null,"No emails associated with this group"))}))),r().createElement(d.FormGroup,{label:"External recipient(s)",fieldId:"additionalRecipients-field"},r().createElement(d.TextInput,{placeholder:"Comma separated emails",type:"email",id:"additionalRecipients",name:"additionalRecipients",value:c,onBlur:function(e){return F(e)},onFocus:function(e){return F(e)},onChange:function(e){return o({type:ae,value:e})}}),c&&R&&r().createElement(d.FormHelperText,{isError:!0,icon:r().createElement(z.$O,null),isHidden:!R},"The email format must be valid and comma separated.")),r().createElement(d.FormGroup,{label:"Subject",fieldId:"subject-field"},r().createElement(d.TextInput,{placeholder:"Report is ready to be downloaded",type:"text",id:"subject",name:"subject",value:u,onChange:function(e){return o({type:oe,value:e})}})),r().createElement(d.FormGroup,{label:"Body",fieldId:"body-field"},r().createElement(d.TextArea,{rows:10,autoResize:!0,placeholder:"",type:"text",id:"body",name:"body",value:l,onChange:function(e){return o({type:le,value:e})}})),S&&r().createElement(r().Fragment,null,r().createElement(d.FormGroup,{label:"Link expires on",fieldId:"expiry-field"},r().createElement(de.Z,{categoryKey:"start_date",value:p,setValue:function(e){return o({type:ie,value:e}),void k()},validators:[function(e){return e<(0,x.Lg)()?"Must not be before today":""}]})),r().createElement(d.FormHelperText,{isError:!0,icon:r().createElement(z.$O,null),isHidden:!S},"Link expiry date only applies to external users")),r().createElement(d.FormGroup,{label:"Report link",fieldId:"link-field"},E))};var fe=n(37347),ge=function(){return ge=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ge.apply(this,arguments)};var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ve.apply(this,arguments)};var he=function(e,t,n,a,r){var o="slug="+r+"&token="+n;return location.protocol+"//"+location.host+"/api/tower-analytics/v1/generate_pdf/"+(""===new URL(t).search?"?"+o:location.search+"&"+o)};var Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ee.apply(this,arguments)};const ye=function(e){var t=e.settingsNamespace,n=void 0===t?"settings":t,o=e.slug,l=e.name,i=e.description,s=e.endpointUrl,u=e.queryParams,c=e.selectOptions,m=e.y,p=e.label,g=e.xTickFormat,v=e.chartType,h=e.totalPages,E=e.pageLimit,y=e.sortOptions,b=e.sortOrder,_=e.dateGranularity,w=e.startDate,k=e.endDate,T=e.dateRange,C=e.inputs,S=(0,a.useState)(!1),P=S[0],O=S[1],R=(0,$.TL)(),D=(0,$.CG)((function(e){return null==e?void 0:e.pdfDownloadButton[o]})),F=D===Y.r.pending,I=D===Y.r.rejected,L=(0,f.cm)({chartSeriesHiddenProps:[]},n).chartSeriesHiddenProps,Z=(0,a.useState)(1),G=Z[0],j=Z[1],B=function(e,t,n){var r,o={downloadType:(null==e?void 0:e.downloadType)||"pdf",showExtraRows:(null==e?void 0:e.showExtraRows)||!1,additionalRecipients:(null==e?void 0:e.additionalRecipients)||"",eula:(null==e?void 0:e.eula)||!1,emailExtraRows:(null==e?void 0:e.emailExtraRows)||!1,subject:(null==e?void 0:e.subject)||"The Ansible report, "+t+", is available for view",body:(null==e?void 0:e.body)||"<b>"+t+"</b>\nThis report shows "+n[0].toLowerCase()+n.substring(1),selectedRbacGroups:(null==e?void 0:e.selectedRbacGroups)||[],users:(null==e?void 0:e.users)||[],expiry:(null==e?void 0:e.expiry)||(r=new Date,r.setMonth(r.getMonth()+3),(0,x.p6)(r))},l=(0,a.useReducer)((function(e,t){switch(t.type){case Q:return ve(ve({},e),{downloadType:t.value});case ee:return ve(ve({},e),{showExtraRows:t.value});case te:return ve(ve({},e),{selectedRbacGroups:t.value});case ae:return ve(ve({},e),{additionalRecipients:t.value});case"SET_EULA":return ve(ve({},e),{eula:t.value});case re:return ve(ve({},e),{emailExtraRows:t.value});case oe:return ve(ve({},e),{subject:t.value});case le:return ve(ve({},e),{body:t.value});case ne:return ve(ve({},e),{users:t.value});case ie:return ve(ve({},e),{expiry:t.value});case X:return o;default:throw new Error("useOptionsData reducer action type "+t.type+" was not found.")}}),o);return{formData:l[0],dispatchReducer:l[1]}}({},l,i),A=B.formData,M=B.dispatchReducer,H=A.users,N=A.additionalRecipients,q=A.subject,V=A.body,U=A.emailExtraRows,J=A.showExtraRows,K=A.downloadType,se=A.expiry,me=function(){if("pdf"===K&&function(e){var t=e.slug,n=e.endpointUrl,a=e.queryParams,r=e.selectOptions,o=e.y,l=e.label,i=e.xTickFormat,s=e.chartType,u=e.totalPages,c=e.pageLimit,m=e.sortOptions,d=e.sortOrder,p=e.dateGranularity,f=e.startDate,g=e.endDate,v=e.dateRange,h=e.dispatch,E=e.chartSeriesHiddenProps,y=e.showExtraRows,b=e.inputs,_=b?ge(ge({},a),{inputs:b}):a;E||(E=[]),h((0,fe.jG)({slug:t,schemaParams:{y:o,label:l,xTickFormat:i,chartType:s},dataFetchingParams:{showExtraRows:y,endpointUrl:n,queryParams:_,selectOptions:r,chartSeriesHiddenProps:E,totalPages:u,pageLimit:c,sortOptions:m,sortOrder:d,dateGranularity:p,startDate:f,endDate:g,dateRange:v}},h,t,""))}({slug:o,endpointUrl:s,queryParams:u,selectOptions:c,y:m,label:p,xTickFormat:g,chartType:v,totalPages:h,pageLimit:E,sortOptions:y,sortOrder:b,dateGranularity:_,startDate:w,endDate:k,dateRange:T,dispatch:R,chartSeriesHiddenProps:L,showExtraRows:J,inputs:C}),"email"===K){var e={y:u.sort_options,label:u.sort_options,xTickFormat:(0,x.MA)(u.granularity),chartType:v},t=C?Ee(Ee({},u),{inputs:C}):u,n={slug:o,schemaParams:{y:e.y,label:e.label,xTickFormat:e.xTickFormat,chartType:e.chartType},dataFetchingParams:{expiry:se,showExtraRows:J,endpointUrl:s,queryParams:t,chartSeriesHiddenProps:L||[],totalPages:h,pageLimit:E,sortOptions:u.sort_options,sortOrder:"desc"===u.sort_order?"desc":"asc",dateGranularity:u.granularity,startDate:u.start_date,endDate:u.end_date,dateRange:u.quick_date_range}};!function(e){var t=e.slug,n=e.users,a=e.additionalRecipients,r=e.subject,o=e.body,l=e.dispatch,i=e.emailExtraRows,s=e.expiry,u=e.pdfPostBody,c=n.map((function(e){return e.usernames}));u.dataFetchingParams.showExtraRows=i,""!==a&&c.push(a.split(","));var m=Math.random().toString(36).substring(2,16),d=window.location.href;l((0,fe.Do)({recipient:c.flat(),subject:""===r?"Report is ready to be viewed":r,body:o.toString().replace(/(?:\r\n|\r|\n)/g,"<br>"),reportUrl:he(0,d,m,0,t),expiry:s,slug:t,token:m,payload:"Download",pdfPostBody:u},l,t,m))}({slug:o,users:H,additionalRecipients:N,subject:q,body:V,dispatch:R,emailExtraRows:U,expiry:se,pdfPostBody:n})}M({type:X}),O(!1)},de=function(){var e=A.additionalRecipients,t=A.selectedRbacGroups,n=A.users;if(""!==e){for(var a=e.split(","),r=0;r<a.length;r++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(a[r]))return!0;return!1}return 0===t.length&&""===e||(0===n.length||1===n.length&&n[0].emails.length<=0)&&""===e||void 0},ye=[{id:1,name:"Export format",component:r().createElement(ue,{formData:A,dispatchReducer:M})},{id:2,name:"Configure details",nextButtonText:"pdf"===K?"Export":"Send e-mail",component:"pdf"===K?r().createElement(ce,{options:{settingsNamespace:"settings",slug:o,name:l,description:i,endpointUrl:s,queryParams:u,selectOptions:c,y:m,label:p,xTickFormat:g,chartType:v,totalPages:h,pageLimit:E,sortOptions:y,sortOrder:b,dateGranularity:_,startDate:w,endDate:k,dateRange:T},formData:A,dispatchReducer:M}):r().createElement(pe,{options:{totalPages:h,pageLimit:E},formData:A,dispatchReducer:M})}],be=function(e){j(G<(null==e?void 0:e.id)?e.id:G)},_e=function(){M({type:X}),O(!1)},we=r().createElement(d.WizardFooter,null,r().createElement(d.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack;return 2!==t.id?r().createElement(r().Fragment,null,r().createElement(d.Button,{variant:d.ButtonVariant.primary,type:"submit",onClick:"pdf"===K&&h<=1?me:n,isDisabled:!K},"pdf"===K&&h<=1?"Export":"Next"),1!==t.id&&r().createElement(d.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(d.Button,{variant:"link",onClick:_e},"Cancel")):r().createElement(r().Fragment,null,r().createElement(d.Button,{variant:d.ButtonVariant.primary,type:"submit",onClick:me,isDisabled:"email"===K&&de()},"email"===K?"Send e-mail":"Export"),r().createElement(d.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(d.Button,{variant:"link",onClick:_e},"Cancel"))})));return r().createElement(r().Fragment,null,r().createElement(d.Tooltip,{position:d.TooltipPosition.top,content:"Export report"},r().createElement(d.Button,{variant:I?d.ButtonVariant.link:d.ButtonVariant.plain,"aria-label":"Export report",onClick:function(){return O(!0)},isDanger:I,"data-cy":"download-button"},F&&r().createElement(d.Spinner,{"data-cy":"download-button-loading",isSVG:!0,size:"md"}),!F&&I&&r().createElement(z.$O,{"data-cy":"download-button-error"}),!F&&!I&&r().createElement(W,{"data-cy":"download-button-icon"}))),P&&r().createElement(d.Wizard,{title:"Export report",description:l+" | "+("pdf"===K?"PDF":"E-mail"),steps:ye,hideClose:!0,onNext:function(){return be},onBack:function(){return be},onSave:me,onClose:function(){_e()},footer:we,isOpen:P}))};var be;!function(e){e.operations="Operations",e.executive="Executive",e.subscription="Subscription",e.migration="Migration",e.controller="Controller",e.catalog="Catalog",e.automationHub="Automation Hub",e.modules="Modules",e.hosts="Hosts",e.tasks="Tasks",e.organization="Organization",e.jobTemplate="Job template",e.jobRuns="Job runs",e.timeSeries="Time series",e.performanceAnomalyDetection="Performance anomaly detection",e.savings="Savings"}(be||(be={}));var _e=[{key:be.operations,name:"Operations",description:"This report is useful to the engineers who manage day-to-day Ansible operations.  In other words, team members who write playbooks, do administration tasks within Controller, etc."},{key:be.executive,name:"Executive",description:"This report is useful to executives who want to monitor and learn about the Ansible operations happening across the company."},{key:be.subscription,name:"Subscription",description:"This report provides useful information around subscription data, helping you make decisions around compliance."},{key:be.migration,name:"Migration",description:"This report provides useful information around migrations, such as helping to identify what could be necessary to move to newer versions of the Ansible Automation Platform."},{key:be.controller,name:"Controller",description:"This report provides information gathered from Controller."},{key:be.catalog,name:"Catalog",description:"This report provides information gathered from Automation Services Catalog."},{key:be.automationHub,name:"Automation Hub",description:"This report provides information gathered from Automation Hub."},{key:be.modules,name:"Modules",description:"This report groups information by Ansible modules, the specific executable code ran in individual playbook or job template tasks."},{key:be.hosts,name:"Hosts",description:"This report groups information by the hosts within the Ansible inventories that are executed by playbooks or job templates."},{key:be.tasks,name:"Tasks",description:"This report groups information by the individual tasks that make up a playbook or job template."},{key:be.organization,name:"Organization",description:"This report groups information by the organizations set up within the company’s Ansible Controller instances."},{key:be.jobTemplate,name:"Job template",description:"This report groups information by the job templates set up within the company’s Ansible Controller instances."},{key:be.jobRuns,name:"Job runs",description:"This report groups information by the individual runs of playbooks or job templates."},{key:be.timeSeries,name:"Time series",description:"This report groups information for a specified time range and granularity, such as weekly (e.g., from the past 12 weeks) or monthly (e.g., between August and November)."},{key:be.performanceAnomalyDetection,name:"Performance anomaly detection",description:"This report provides the ability to detect anomalies in Ansible performance, such as identifying slow tasks or hosts, or tasks with high error rates."},{key:be.savings,name:"Savings",description:"This report is useful for showing potential or actual savings based on Ansible usage."}],we=[{title:"4",value:4},{title:"6",value:6},{title:"8",value:8},{title:"10",value:10}];const ke=function(e){return function(t){if(!t)return e;var n=JSON.stringify(e);return Object.entries(t).forEach((function(e){var t=new RegExp("VAR_"+e[0],"g");n=n.replace(t,""+e[1])})),JSON.parse(n)}};const xe=function(e){var t,n,o=e.slug,l=e.name,i=e.description,s=e.tableHeaders,u=e.expandedTableRowName,c=e.clickableLinking,m=e.defaultSelectedToolbarCategory,v=void 0===m?"":m,h=e.availableChartTypes,E=e.dataEndpoint,w=e.optionsEndpoint,k=e.schema,T=e.fullCard,S=void 0===T||T,P=(0,me.Bt)(E),O=(0,me.Bt)(w),R=(0,D.Me)(o),F=(0,f.Kx)(R),I=F.queryParams,L=F.setFromPagination,Z=F.setFromToolbar,G=(0,f.Kx)({chartType:h[0]},"settings"),j=G.queryParams,B=G.dispatch,A=(0,g.ZP)(O,{sort_options:[]}),M=A.result,H=A.request,N=(0,g.ZP)(P,{meta:{count:0,legend:[]}}),q=N.request,V=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(N,["request"]);(0,a.useEffect)((function(){q(I),H(I)}),[I]),(0,a.useEffect)((function(){q(function(e){if(e.task_action_name&&0===e.task_action_id.length&&(null==M?void 0:M.task_action_id)&&Array.isArray(e.task_action_name)){var t=e.task_action_name,n=M.task_action_id.filter((function(e){return t.includes(e.value)}));e.task_action_id=n.map((function(e){var t;return null===(t=e.key)||void 0===t?void 0:t.toString()}))}return e}(I))}),[null==M?void 0:M.task_action_id]);var z={y:I.sort_options,label:(null===(n=null===(t=M.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===I.sort_options})))||void 0===n?void 0:n.value)||"Label Y",xTickFormat:(0,x.MA)(I.granularity),chartType:j.chartType||h[0]},J=[h.length>1&&r().createElement(d.ToggleGroup,{"aria-label":"Chart type toggle",key:"chart-toggle"},h.map((function(e){return r().createElement(d.ToggleGroupItem,{key:e,"data-cy":"chart_type",text:(0,x.kC)(e)+" Chart",buttonId:e,isSelected:e===z.chartType,onChange:function(){B({type:"SET_CHART_TYPE",value:e})}})}))),r().createElement(ye,{key:"download-button",slug:o,name:l,description:i,endpointUrl:E,queryParams:I,selectOptions:M,y:z.y,label:z.label,xTickFormat:z.xTickFormat,totalPages:Math.ceil(V.result.meta.count/I.limit),pageLimit:I.limit,chartType:z.chartType,sortOptions:z.y,sortOrder:I.sort_order,dateGranularity:I.granularity,startDate:I.start_date,endDate:I.end_date,dateRange:I.quick_date_range})];return S?r().createElement(d.Card,null,r().createElement(d.CardBody,null,r().createElement(b.Z,{categories:M,defaultSelected:v,filters:I,setFilters:Z,pagination:r().createElement(p.Z,{count:V.result.meta.count,perPageOptions:we,params:{limit:+I.limit,offset:+I.offset},setPagination:L,isCompact:!0}),additionalControls:J}),s&&r().createElement(y,{api:V},r().createElement(_.Z,{schema:ke(k)({label:z.label,y:z.y,xTickFormat:z.xTickFormat,chartType:z.chartType}),data:V.result,specificFunctions:{labelFormat:{customTooltipFormatting:function(e){var t=e.datum;return z.label+" for "+t.name+": "+function(e,t){var n;switch(e){case"average_duration_per_task":n=t.toFixed(2)+" seconds";break;case"slow_hosts_percentage":case"template_success_rate":n=C(t)+"%";break;default:n=t.toFixed(2)}return n}(I.sort_options,t.y)}}}}),r().createElement(U,{legend:V.result.meta.legend,headers:s,getSortParams:function(e){var t,n=null===(t=null==M?void 0:M.sort_options)||void 0===t?void 0:t.map((function(e){return e.key}));return(null==n?void 0:n.includes(e))?{sort:{sortBy:{index:s.findIndex((function(e){return e.key===I.sort_options}))||0,direction:I.sort_order||"none"},onSort:function(e,t,n){var a;Z("sort_order",n),Z("sort_options",null===(a=s[t])||void 0===a?void 0:a.key)},columnIndex:s.findIndex((function(t){return t.key===e}))}}:{}},expandedRowName:u,clickableLinking:c}))),r().createElement(d.CardFooter,null,r().createElement(p.Z,{count:V.result.meta.count,perPageOptions:we,params:{limit:+I.limit,offset:+I.offset},setPagination:L,variant:d.PaginationVariant.bottom}))):r().createElement(r().Fragment,null,r().createElement(b.Z,{categories:M,defaultSelected:v,filters:I,setFilters:Z}),s&&r().createElement(y,{api:V},r().createElement(_.Z,{schema:ke(k)({label:z.label,y:z.y,xTickFormat:z.xTickFormat,chartType:z.chartType}),data:V.result})))};var Te=n(83474),Ce=l.ZP.div(Pe||(Pe=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 46.8px;\n  padding-left: 100px;\n"],["\n  height: 46.8px;\n  padding-left: 100px;\n"])));const Se=function(e){var t=e.totalSavings,n=void 0===t?0:t,a=e.currentPageSavings,o=void 0===a?0:a,l=e.isLoading,i=void 0!==l&&l;return r().createElement(r().Fragment,null,["Total savings","Current page savings"].map((function(e,t){return r().createElement(d.Card,{isPlain:!0,isCompact:!0,key:e},r().createElement(d.CardTitle,null,e),r().createElement(d.CardBody,null,r().createElement(d.Title,{headingLevel:"h3",size:0===t?"4xl":"xl",style:{color:"var(--pf-global--success-color--200)"}},i?r().createElement(Ce,null,r().createElement(d.Spinner,{isSVG:!0,size:"lg"})):(0,T.Z)(0===t?n:o))))})))};var Pe;const Oe=(0,J.IU)({name:"DollarSignIcon",height:512,width:288,svgPath:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z",yOffset:0,xOffset:0});var Re=(0,l.ZP)(d.InputGroup)(Ie||(Ie=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  width: 170px;\n"],["\n  width: 170px;\n"]))),De=function(e){return+e&&+e<0?NaN:e};const Fe=function(e){var t=e.costManual,n=void 0===t?0:t,a=e.setFromCalculation,o=void 0===a?function(){return{}}:a,l=e.costAutomation,i=void 0===l?0:l,s=e.readOnly,u=void 0===s||s;return r().createElement(d.Card,{isPlain:!0,isCompact:!0},r().createElement(d.CardBody,null,r().createElement("p",null,"Manual cost of automation",r().createElement("span",{style:{color:"var(--pf-global--Color--dark-200)",fontSize:"0.8em",display:"block"}},"(e.g. average salary of mid-level Software Engineer)")),r().createElement(Re,null,r().createElement(d.InputGroupText,null,r().createElement(Oe,null)),r().createElement(d.TextInput,{id:"manual-cost",key:"manual-cost",type:"number","aria-label":"manual-cost",value:isNaN(n)?"":n.toString(),onChange:function(e){return o("manual_cost",De(+e))},isDisabled:u}),r().createElement(d.InputGroupText,null,"/hr")),r().createElement("p",{style:{paddingTop:"10px"}},"Automated process cost"),r().createElement(Re,null,r().createElement(d.InputGroupText,null,r().createElement(Oe,null)),r().createElement(d.TextInput,{id:"automation-cost",key:"automation-cost",type:"number","aria-label":"automation-cost",value:isNaN(i)?"":i.toString(),onChange:function(e){return o("automation_cost",De(+e))},isDisabled:u}),r().createElement(d.InputGroupText,null,"/hr"))))};var Ie,Le=n(53688),Ze=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Savings per template")),r().createElement("p",null,"Savings per template is the difference between the manual cost and automation cost of successfully running templates across hosts. Manual cost is calculated by multiplying the number of hours spent manually running templates across hosts by the average hourly wages per engineer. Automation cost is the total amount of time, in seconds, spent running templates automatically multiplied by the average monthly cost for automated processes."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate manual cost:"),r().createElement(d.CodeBlock,null,r().createElement(d.CodeBlockCode,null,"manual time  = configurable time (in minutes) to manually complete the task on one host * number of host runs \nmanual cost = manual time * configurable manual cost of automation (e.g. average salary of mid-level Software Engineer)")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate automation cost:"),r().createElement(d.CodeBlock,null,r().createElement(d.CodeBlockCode,null,"automation time = successful elapsed total / 3600\nautomation cost = automation time * configurable automated process cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate automation cost:"),r().createElement(d.CodeBlock,null,r().createElement(d.CodeBlockCode,null,"savings per template = manual cost - automation cost")),r().createElement("br",null))},Ge=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Failed hosts cost per template")),r().createElement("p",null,"Failed hosts cost per template is the total amount of time spent on failed automated job runs multiplied by the configured automated process cost."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate failed host cost per template:"),r().createElement(d.CodeBlock,null,r().createElement(d.CodeBlockCode,null,"failed cost per template = (failed elapsed total / 3600) * configurable automated process cost")),r().createElement("br",null))},je=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Monetary gain per template")),r().createElement("p",null,"Monetary gain per template is the difference between total savings per template and failed hosts cost per template."),r().createElement("br",null),r().createElement("p",null,"The formula for monetary gain per template:"),r().createElement(d.CodeBlock,null,r().createElement(d.CodeBlockCode,null,"monetary gain per template = savings per template - failed host cost per template")),r().createElement("br",null))};const Be=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return r().createElement(r().Fragment,null,r().createElement(d.Button,{variant:d.ButtonVariant.link,onClick:function(){return n(!0)},icon:r().createElement(Le.uM,null)},"Automation formula"),r().createElement(d.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:d.ModalVariant.medium,actions:[r().createElement(d.Button,{key:"cancel",variant:d.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},r().createElement("p",null,"We use manual effort versus time spent on automation as factors to create formulas for cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),r().createElement("br",null),r().createElement(Ze,null),r().createElement("br",null),r().createElement(Ge,null),r().createElement("br",null),r().createElement(je,null)))},Ae=function(e){var t=e.template;return r().createElement(w.Td,{colSpan:5},r().createElement(w.ExpandableRowContent,null,r().createElement(d.DescriptionList,{columnModifier:{default:"3Col"}},r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Elapsed"),r().createElement(d.DescriptionListDescription,null,t.elapsed," seconds")),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Host count"),r().createElement(d.DescriptionListDescription,null,t.host_count)),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Total count"),r().createElement(d.DescriptionListDescription,null,t.total_count)),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Total org count"),r().createElement(d.DescriptionListDescription,null,t.total_org_count)),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Total cluster count"),r().createElement(d.DescriptionListDescription,null,t.total_cluster_count)),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Total inventory count"),r().createElement(d.DescriptionListDescription,null,t.total_inventory_count)),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Template success rate"),r().createElement(d.DescriptionListDescription,null,t.template_success_rate.toFixed(2))),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Savings from successful hosts"),r().createElement(d.DescriptionListDescription,null,(0,T.Z)(t.successful_hosts_savings))),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Costs from failed hosts"),r().createElement(d.DescriptionListDescription,null,(0,T.Z)(t.failed_hosts_costs))),r().createElement(d.DescriptionListGroup,null,r().createElement(d.DescriptionListTerm,null,"Monetary gain"),r().createElement(d.DescriptionListDescription,null,(0,T.Z)(t.monetary_gain))))))},Me=function(e){var t=e.template,n=e.variableRow,o=e.setDataRunTime,l=e.setEnabled,i=e.redirectToJobExplorer,s=e.readOnly,u=void 0===s||s,c=(0,a.useState)("true"===window.localStorage.getItem(t.id.toString())||!1),m=c[0],p=c[1];return r().createElement(r().Fragment,null,r().createElement(w.Tr,null,r().createElement(w.Td,{expand:{rowIndex:t.id,isExpanded:m,onToggle:function(){return e=!m,n=t.id,window.localStorage.setItem(n.toString(),e?"true":"false"),void p(e);var e,n}}}),r().createElement(w.Td,null,r().createElement(d.Tooltip,{content:"List of jobs for this template for past 30 days"},r().createElement(d.Button,{onClick:function(){return i(t.id)},variant:d.ButtonVariant.link,style:{padding:"0px"}},t.name))),n&&r().createElement(w.Td,null,function(e,t){var n,a;switch(e){case"elapsed":a=t,n=new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(a)+" seconds";break;case"template_automation_percentage":n=C(t)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;default:n=(+t).toFixed(2)}return n}(n.key,+t[n.key])),r().createElement(w.Td,null,r().createElement(d.InputGroup,null,r().createElement(d.TextInput,{autoFocus:window.localStorage.getItem("focused")==="manual-time-"+t.id.toString(),id:"manual-time-"+t.id.toString(),style:{maxWidth:"150px"},type:"number","aria-label":"time run manually",value:t.avgRunTime/60,onBlur:function(){return window.localStorage.setItem("focused","")},onChange:function(e){window.localStorage.setItem("focused","manual-time-"+t.id.toString()),o(60*+e,t.id)},isDisabled:u}),r().createElement(d.InputGroupText,null,"min"),r().createElement(d.InputGroupText,{variant:d.InputGroupTextVariant.plain},"x ",t.successful_hosts_total," host runs"))),r().createElement(w.Td,{style:{color:t.enabled?k.global_success_color_200.value:k.global_disabled_color_200.value}},(0,T.Z)(+t.monetary_gain)),r().createElement(w.Td,null,r().createElement(d.Switch,{label:"Show",labelOff:"Hide",isChecked:t.enabled,onChange:function(e){return l(e)},isDisabled:u}))),r().createElement(w.Tr,{isExpanded:m},r().createElement(Ae,{template:t})))};var He=function(){return He=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},He.apply(this,arguments)};const Ne=function(e){var t=e.data,n=void 0===t?[]:t,o=e.variableRow,l=e.setDataRunTime,i=void 0===l?function(){return{}}:l,s=e.setEnabled,u=void 0===s?function(){return function(){return{}}}:s,c=e.redirectToJobExplorer,m=void 0===c?function(){return{}}:c,p=e.getSortParams,g=void 0===p?function(){return{}}:p,v=e.readOnly,h=void 0===v||v,E=(0,a.useState)(!1),y=E[0],b=E[1],_=(0,D.Me)("automation_calculator"),k=(0,f.Kx)(_).setFromToolbar,x=[r().createElement(d.DropdownItem,{key:"showAll",component:"button",onClick:function(){return u(void 0)(!0)}},"Show all"),r().createElement(d.DropdownItem,{key:"hideAll",component:"button",onClick:function(){return u(void 0)(!1)}},"Hide all"),r().createElement(d.DropdownItem,{key:"showAll",component:"button",onClick:function(){return k("template_weigh_in",void 0)}},"Display all template rows"),r().createElement(d.DropdownItem,{key:"hideHiddenTemplates",component:"button",onClick:function(){return k("template_weigh_in",!0)}},"Display only shown template rows"),r().createElement(d.DropdownItem,{key:"showHiddenTemplates",component:"button",onClick:function(){return k("template_weigh_in",!1)}},"Display only hidden template rows")];return r().createElement(w.TableComposable,{"aria-label":"ROI Table",variant:w.TableVariant.compact},r().createElement(w.Thead,null,r().createElement(w.Tr,null,r().createElement(w.Th,null),r().createElement(w.Th,null,"Name"),o&&r().createElement(w.Th,He({},g()),o.value),r().createElement(w.Th,null,"Manual time"),r().createElement(w.Th,null,"Savings"),r().createElement(w.Th,{style:{float:"right",overflow:"visible",zIndex:1}},r().createElement(d.Dropdown,{onSelect:function(){b(!0)},toggle:r().createElement(d.KebabToggle,{style:{paddingBottom:"0px"},id:"table-kebab",onToggle:function(){return b(!y)}}),isOpen:y,isPlain:!0,dropdownItems:x,position:"right"})))),r().createElement(w.Tbody,null,n.map((function(e){return r().createElement(Me,{key:e.id,template:e,variableRow:o,setDataRunTime:i,redirectToJobExplorer:m,setEnabled:u(e.id),readOnly:h})}))))};var qe=n(27443),Ve=n(28216),Ue=n(83215),ze=n(39677),Je=n(10001),We=function(){return We=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},We.apply(this,arguments)},Ke=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((a=a.apply(e,t||[])).next())}))},Ye=function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},$e=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Xe=l.ZP.div(at||(at=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"],["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"]))),Qe=$e($e([],we,!0),[{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],!1),et=function(e){return e.filter((function(e){return e.enabled}))},tt=function(e,t,n){return e.map((function(e){var a=(0,x.B3)(e.avgRunTime)*e.successful_hosts_total*parseFloat(n),r=(0,x.B3)(e.successful_elapsed_total)*parseFloat(t),o=(0,x.YD)(r,a);return We(We({},e),{delta:o,manualCost:a,automatedCost:r})}))};const nt=function(e){var t,n,o=e.slug,l=e.name,i=e.description,s=e.dataEndpoint,u=e.optionsEndpoint,c=e.schema,m=e.fullCard,v=void 0===m||m,h=(0,me.Bt)(s),E=(0,me.Bt)(u),b=(0,D.Me)(o),w=(0,f.eR)(),k=(0,f.Kx)(b),x=k.queryParams,C=k.setFromToolbar,S=k.setFromPagination,P=(0,a.useState)(""),O=P[0],R=P[1],F=(0,a.useState)(""),I=F[0],L=F[1],Z=function(e){var t=e.legend;return(void 0===t?[]:t).map((function(e){return We(We({},e),{delta:0,avgRunTime:60*e.manual_effort_minutes||3600,manualCost:0,automatedCost:0,enabled:e.template_weigh_in})}))},G=(0,g.ZP)(E,{sort_options:[{key:b.sort_options,value:b.sort_options}]}),j=G.result,B=G.request,A=(0,g.ZP)((function(e){return Ke(void 0,void 0,void 0,(function(){var t;return Ye(this,(function(n){switch(n.label){case 0:return[4,h(e)];case 1:return t=n.sent(),[2,We(We({},t),{items:tt(Z(t.meta),t.cost.hourly_manual_labor_cost,t.cost.hourly_automation_cost)})]}}))}))}),{items:[],meta:{count:0}}),M=A.request,H=A.setValue,N=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(A,["request","setValue"]),q=function(e){H(We(We({},N.result),{items:e}))},V=function(e,t,n){return void 0===t&&(t=O),void 0===n&&(n=I),{currency:"USD",hourly_manual_labor_cost:t,hourly_automation_cost:n,templates_manual_equivalent:e.map((function(e){return{template_id:e.id,effort_minutes:e.avgRunTime/60,template_weigh_in:e.enabled}}))}},U=(0,Ve.I0)(),z=function(){return Ke(void 0,void 0,void 0,(function(){var e;return Ye(this,(function(t){switch(t.label){case 0:return[4,h(x)];case 1:return e=t.sent(),N.result.monetary_gain_current_page=e.monetary_gain_current_page,N.result.monetary_gain_other_pages=e.monetary_gain_other_pages,[2,e]}}))}))},J=function(e,t){return Ke(void 0,void 0,void 0,(function(){var n,a,r;return Ye(this,(function(o){switch(o.label){case 0:n="automation_cost"===e?t:I,a="manual_cost"===e?t:O,r="automation_cost"===e?"Automation cost":"Manual cost",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,me.mN)(V(N.result.items,a,n))];case 2:return o.sent(),[3,4];case 3:return o.sent(),U((0,Ue.wN)({title:"Unable to save changes to "+r+".",description:"Unable to save changes "+r+". Please try again.",variant:ze.k.danger,autoDismiss:!1})),[2];case 4:return[4,z()];case 5:return o.sent(),"manual_cost"===e?R(t):L(t),[2]}}))}))},W=function(e,t){return Ke(void 0,void 0,void 0,(function(){var n;return Ye(this,(function(a){switch(a.label){case 0:n=N.result.items.map((function(n){return n.id===t?(n.avgRunTime=e,tt([n],I,O)[0]):n})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,me.mN)(V(n),U)];case 2:return a.sent(),[3,4];case 3:return a.sent(),U((0,Ue.wN)({title:"Unable to save changes to Manual time",description:"Unable to save changes to Manual time. Please try again.",variant:ze.k.danger,autoDismiss:!1})),[2];case 4:return[4,z()];case 5:return a.sent(),q(n),[2]}}))}))},K=function(e){return function(t){return Ke(void 0,void 0,void 0,(function(){var n;return Ye(this,(function(a){switch(a.label){case 0:n=e?N.result.items.map((function(n){return n.id===e?We(We({},n),{enabled:t}):n})):N.result.items.map((function(e){return We(We({},e),{enabled:t})})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,me.mN)(V(n))];case 2:return a.sent(),[3,4];case 3:return a.sent(),U((0,Ue.wN)({title:"Unable to save changes to visibility",description:"Unable to save changes to visibility. Please try again.",variant:ze.k.danger,autoDismiss:!1})),[2];case 4:return[4,z()];case 5:return a.sent(),q(n),[2]}}))}))}},Y=function(){return{sort:{sortBy:{index:2,direction:x.sort_order||"none"},onSort:function(e,t,n){C("sort_order",n)},columnIndex:2}}};(0,a.useEffect)((function(){var e;!(null===(e=N.result)||void 0===e?void 0:e.cost)||I||O||(R(N.result.cost.hourly_manual_labor_cost),L(N.result.cost.hourly_automation_cost))}),[N]),(0,a.useEffect)((function(){q(tt(N.result.items,I,O))}),[I,O]),(0,a.useEffect)((function(){B(x),M(x)}),[x]);var $=function(e){var t,n=((t={})[f.zG]=We(We({},D.cY.defaultParams),{quick_date_range:"last_30_days",template_id:[e]}),t);w(qe.n.jobExplorer,n)},X={y:x.sort_options,tooltip:"Savings for",field:x.sort_options,label:(null===(n=null===(t=j.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===x.sort_options})))||void 0===n?void 0:n.value)||"Label Y"},Q=function(e){var t=e.datum;return X.label+" for "+t.name+": "+function(e,t){var n;switch(e){case"elapsed":n=t.toFixed(2)+" seconds";break;case"template_automation_percentage":n=t.toFixed(2)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;default:n=t.toFixed(2)}return n}(x.sort_options,t.y)},ee=function(e){var t,n,a,r;return!(null===(n=null===(t=e.result.rbac)||void 0===t?void 0:t.perms)||void 0===n?void 0:n.all)&&!(null===(r=null===(a=e.result.rbac)||void 0===a?void 0:a.perms)||void 0===r?void 0:r.write)},te=function(){var e;return r().createElement(d.Card,{isPlain:!0},v&&r().createElement(d.CardHeader,null,r().createElement(d.CardTitle,null,"Automation savings")),N.isLoading?r().createElement(Xe,null,r().createElement(d.Spinner,{isSVG:!0})):et(null===(e=null==N?void 0:N.result)||void 0===e?void 0:e.items).length>0?r().createElement(_.Z,{schema:ke(c)({label:X.label,tooltip:X.tooltip,field:X.field}),data:{items:et(N.result.items)},specificFunctions:{labelFormat:{customTooltipFormatting:Q}}}):r().createElement(Je.Z,{title:"No results found",message:"No results match the filter criteria. Clear all filters and try again.",showButton:!0,label:"Clear all filters",onButtonClick:function(){return C(void 0,void 0)}}))},ne=function(){var e,t,n;return r().createElement(d.Stack,null,r().createElement(d.StackItem,null,r().createElement(Se,{totalSavings:(null===(e=N.result)||void 0===e?void 0:e.monetary_gain_other_pages)+(null===(t=N.result)||void 0===t?void 0:t.monetary_gain_current_page),currentPageSavings:null===(n=N.result)||void 0===n?void 0:n.monetary_gain_current_page,isLoading:N.isLoading})),r().createElement(d.StackItem,null,r().createElement(d.Stack,null,r().createElement(d.StackItem,null,r().createElement(Fe,{costManual:O,setFromCalculation:J,costAutomation:I,readOnly:ee(N)})),r().createElement(d.StackItem,null,r().createElement(Be,null)))))};return r().createElement(y,{api:N,customLoading:!0,customEmptyState:!0},function(){var e,t,n;return v?r().createElement(d.Card,null,r().createElement(d.CardBody,null,r().createElement(Te.Z,{categories:j,filters:x,setFilters:C,pagination:r().createElement(p.Z,{count:N.result.meta.count,perPageOptions:Qe,params:{limit:+x.limit,offset:+x.offset},setPagination:S,isCompact:!0}),additionalControls:[r().createElement(ye,{key:"download-button",slug:o,name:l,description:i,endpointUrl:s,queryParams:x,selectOptions:j,y:"",label:"",xTickFormat:"",totalPages:Math.ceil(N.result.meta.count/x.limit),pageLimit:x.limit,sortOptions:X.y,sortOrder:x.sort_order,startDate:x.start_date,endDate:x.end_date,dateRange:x.quick_date_range,inputs:{costManual:O,costAutomation:I,totalSavings:(null===(e=N.result)||void 0===e?void 0:e.monetary_gain_other_pages)+(null===(t=N.result)||void 0===t?void 0:t.monetary_gain_current_page),currentPageSavings:null===(n=N.result)||void 0===n?void 0:n.monetary_gain_current_page}})]}),r().createElement(d.Grid,{hasGutter:!0},r().createElement(d.GridItem,{span:9},te()),r().createElement(d.GridItem,{span:3},ne()),r().createElement(d.GridItem,{span:12},r().createElement("p",null,"Enter the time it takes to run the following templates manually."),N.isLoading?r().createElement(d.Spinner,{isSVG:!0}):r().createElement(Ne,{redirectToJobExplorer:$,data:N.result.items,variableRow:j.sort_options.find((function(e){return e.key===x.sort_options})),setDataRunTime:W,setEnabled:K,getSortParams:Y,readOnly:ee(N)})))),r().createElement(d.CardFooter,null,r().createElement(p.Z,{count:N.result.meta.count,perPageOptions:Qe,params:{limit:+x.limit,offset:+x.offset},setPagination:S,variant:d.PaginationVariant.bottom}))):r().createElement(r().Fragment,null,r().createElement(Te.Z,{categories:j,filters:x,setFilters:C}),r().createElement(d.Grid,{hasGutter:!0},r().createElement(d.GridItem,{span:9},te()),r().createElement(d.GridItem,{span:3},ne())))}())};var at,rt=function(){return rt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},rt.apply(this,arguments)};const ot=function(e,t){switch(e.layoutComponent){case"standard":return!0===t?r().createElement(xe,rt({},e.layoutProps)):r().createElement(xe,rt({},e.layoutProps,{fullCard:!1}));case"automationCalculator":return!0===t?r().createElement(nt,rt({},e.layoutProps)):r().createElement(nt,rt({},e.layoutProps,{fullCard:!1}));default:return r().createElement(r().Fragment,null)}};var lt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},it=l.ZP.p(ct||(ct=lt(["\n  max-width: 70em;\n  padding-top: 8px;\n"],["\n  max-width: 70em;\n  padding-top: 8px;\n"]))),st=(0,l.ZP)(d.Label)(mt||(mt=lt(["\n  margin-top: 16px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n"],["\n  margin-top: 16px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n"])));const ut=function(){var e=location.pathname.split("/").pop(),t=(0,g.ZP)((function(){return t=void 0,n=void 0,r=function(){return function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(t){switch(t.label){case 0:return[4,(0,me.T5)(e)];case 1:return[2,t.sent().report]}}))},new((a=void 0)||(a=Promise))((function(e,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(l,i)}s((r=r.apply(t,n||[])).next())}));var t,n,a,r}),{}),n=t.result,o=t.request,l=t.isSuccess,p=t.isLoading,f=t.error;(0,a.useEffect)((function(){o()}),[e]);var v=[{title:"Reports",navigate:j.Z.get}];return function(){if(l){var t=n.layoutProps,a=t.name,o=t.description,g=t.tags;return r().createElement(r().Fragment,null,r().createElement(u.Z,{"data-cy":"header-"+e},r().createElement(m.Z,{items:v}),r().createElement(c.Z,{title:a}),r().createElement(it,null,o),g.map((function(e,t){var n=_e.find((function(t){return t.key===e}));if(n)return r().createElement(d.Tooltip,{key:"tooltip_"+t,position:d.TooltipPosition.bottom,content:n.description},r().createElement(st,{key:t},n.name))}))),r().createElement(i.Z,null,ot(n,!0)))}return p?r().createElement(r().Fragment,null):f?r().createElement(s.Z,{title:"404: Page does not exist.",body:"The report you are looking for does not exist.",buttonText:"Return to Reports page",link:j.Z.get}):r().createElement(r().Fragment,null)}()};var ct,mt,dt=n(71973),pt=n(5964),ft=n(93174),gt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},vt=(0,l.ZP)(d.CardTitle)(bt||(bt=gt(["\n  word-break: break-word;\n"],["\n  word-break: break-word;\n"]))),ht=l.ZP.small(_t||(_t=gt(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n  white-space: pre-line;\n"],["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n  white-space: pre-line;\n"]))),Et=(0,l.ZP)(d.Label)(wt||(wt=gt(["\n  margin-right: 10px;\n  margin-bottom: 10px;\n"],["\n  margin-right: 10px;\n  margin-bottom: 10px;\n"])));const yt=function(e){var t=e.report,n=t.slug,a=t.description,l=t.name,i=t.tags,s=e.selected,u=e.setSelected,c=e.history;return r().createElement(d.Card,{"data-cy":n,onClick:function(){c.replace({search:kt()}),u(n)},isSelectableRaised:!0,isSelected:s===n},r().createElement(d.CardHeader,null,r().createElement(d.CardHeaderMain,null,r().createElement(vt,null,r().createElement(o.Link,{to:j.Z.getDetails(n)},l)))),r().createElement(d.CardBody,null,a?r().createElement(ht,null,a):null),r().createElement(d.CardFooter,null,i.map((function(e,t){var n=_e.find((function(t){return t.key===e}));if(n)return r().createElement(d.Tooltip,{key:"tooltip_"+t,position:d.TooltipPosition.top,content:n.description},r().createElement(Et,{key:t},n.name))}))))};var bt,_t,wt,kt=function(){var e=window.location.href,t="";return e.includes("default.attributes[]")?t=e.substring(e.indexOf("?")+1,e.indexOf("default.attributes[]")-1):e.includes("?")&&!1===e.includes("default.attributes[]")&&(t=e.substring(e.indexOf("?")+1)),t};const xt=function(){var e=(0,a.useState)(""),t=e[0],n=e[1],l=(0,a.useState)(!1),s=l[0],m=l[1],p=(0,o.useHistory)(),v=0,h="",E="",y=(0,f.Kx)((0,D.Me)("reports"),"allReports").queryParams,_=(0,f.Kx)((0,D.Me)("reports"),"allReports").setFromToolbar,w=(0,g.ZP)(me.Pu,{reports:[]}),k=w.result.reports,x=w.isSuccess,T=w.request,C=(0,f.Kx)((0,D.Me)("reports")),S=(0,g.ZP)(me.c$,{}),P=S.result,O=S.request;(0,a.useEffect)((function(){T(y),O(C.queryParams)}),[y]);var R=k,F=(0,g.ZP)((function(){return e=void 0,n=void 0,r=function(){return function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(e){switch(e.label){case 0:return[4,(0,me.T5)(t)];case 1:return[2,e.sent().report]}}))},new((a=void 0)||(a=Promise))((function(t,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(e){e(n)}))).then(l,i)}s((r=r.apply(e,n||[])).next())}));var e,n,a,r}),{}),I=F.result,L=F.request,Z=F.isSuccess;(0,a.useEffect)((function(){if(x&&R.length>0){var e=R.filter((function(e){var n=e.slug;return t===n}));""!==t&&0!==e.length||n(R[0].slug),L()}}),[R,t]);var G=[x&&R.length>0&&Z&&R.map((function(e){return r().createElement(d.Button,{key:e.slug,variant:d.ButtonVariant.plain,"aria-label":"Report list item",onClick:function(){return n(e.slug)}},r().createElement(d.DropdownItem,{key:e.slug},e.name))}))];return r().createElement(r().Fragment,null,r().createElement(u.Z,{"data-cy":"header-all_reports"},r().createElement(c.Z,{title:"Reports"}),r().createElement(b.Z,{categories:P,filters:y,setFilters:_})),x&&R.length>0&&Z&&r().createElement(i.Z,null,R.filter((function(e){return e.slug===t})).map((function(e){return v=R.indexOf(e),R.indexOf(e)<R.length-1&&(h=R[v+1].slug),R.indexOf(e)>0&&(E=R[v-1].slug),r().createElement(r().Fragment,null,r().createElement(d.Card,{key:e.slug,style:{maxWidth:"100%",marginBottom:"25px"},isCompact:!0},r().createElement(d.CardHeader,{style:{paddingTop:"16px",paddingBottom:"16px",paddingRight:"0px"}},r().createElement(d.CardTitle,null,r().createElement(o.Link,{to:j.Z.getDetails(e.slug)},e.name)),r().createElement(d.CardActions,{style:{marginLeft:"15px",marginTop:"-2px"}},e.tags.map((function(e,t){var n=_e.find((function(t){return t.key===e}));if(n)return r().createElement(d.Tooltip,{key:"tooltip_"+t,position:d.TooltipPosition.top,content:n.description},r().createElement(d.Label,{key:t},n.name))}))),r().createElement(d.CardActions,null,r().createElement(d.Button,{variant:d.ButtonVariant.plain,"aria-label":"Previous report",isDisabled:0===R.indexOf(e),onClick:function(){p.replace({search:kt()}),n(E)}},r().createElement(dt.fP,null)),r().createElement(d.Dropdown,{isPlain:!0,onSelect:function(){m(!s),p.replace({search:kt()})},toggle:r().createElement(d.DropdownToggle,{onToggle:function(e){return m(e)},toggleIndicator:pt.VA,id:"report_list",style:{color:"#151515"}},e.name),isOpen:s,dropdownItems:G}),r().createElement(d.Button,{variant:d.ButtonVariant.plain,"aria-label":"Next report",isDisabled:R.indexOf(e)>=R.length-1,onClick:function(){p.replace({search:kt()}),n(h)}},r().createElement(ft.oR,null)))),r().createElement(d.Divider,null),ot(I,!1),r().createElement(d.CardFooter,{style:{paddingBottom:"16px"}},r().createElement(o.Link,{to:j.Z.getDetails(e.slug),style:{float:"right"}},"View full report"))))})),r().createElement(d.Gallery,{"data-cy":"all_reports",hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},R.map((function(e){return r().createElement(yt,{key:e.slug,report:e,selected:t,setSelected:n,history:p})})))),x&&0===R.length&&r().createElement(Je.Z,{label:"Clear all filters",title:"No results found",message:"No results match the filter criteria. Clear all filters and try again.",showButton:!0,path:"/reports"}))},Tt=function(){return r().createElement(o.Switch,null,r().createElement(o.Route,{exact:!0,path:j.Z.get},r().createElement(xt,null)),r().createElement(o.Route,{path:j.Z.details},r().createElement(ut,null)))}},22030:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(27443);const r={get:""+a.n.reports,details:[a.n.reports+"/:slug","/automation_calculator"],getDetails:function(e){return a.n.reports+"/"+e}}},91354:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}}}]);
//# sourceMappingURL=../sourcemaps/688.39c7d8964646f902e19fb6ba6501e64f.js.map