"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[363],{5363:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Gt,paths:()=>Nt});var a=n(92950),r=n.n(a),l=n(86235),i=n(20806),o=n(58788),c=n(86350),s=n(48716),u=n(39173),m=n(69595),d=n(44633),p=n(4942),f=n(15861),E=n(70885),v=n(87757),y=n.n(v),g=n(45697),b=n.n(g),h=n(77388),k="SET_NAME",C="SET_CATEGORY",P="SET_DESCRIPTION",Z="SET_MANUAL_TIME",_="SET_HOSTS",D="SET_FREQUENCY_PERIOD",S="SET_TASKS",O="SET_TEMPLATE_ID";function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null!=e&&e.length)return e.sort((function(e,t){return e.task_order-t.task_order})).map((function(e){return e.task}))};var j=n(81672),q=n(62923),I=n(84564),B=n(53345),L=function(e){var t=e.options,n=e.formData,l=e.dispatch,i=n.name,c=n.category,s=n.description,u=n.manual_time,m=n.hosts,d=n.frequency_period,p=(0,a.useState)(!1),f=(0,E.Z)(p,2),v=f[0],y=f[1],g=(0,a.useState)(!1),b=(0,E.Z)(g,2),h=b[0],S=b[1],O=(0,a.useState)(!1),T=(0,E.Z)(O,2),w=T[0],x=T[1],j=(0,a.useState)(!1),q=(0,E.Z)(j,2),L=q[0],F=q[1];return r().createElement(o.Form,null,t&&r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What do you want to automate?",isRequired:!0,fieldId:"name-field"},r().createElement(o.TextInput,{isRequired:!0,placeholder:"Example: Provision NGINX server",type:"text",id:"name-field",name:"name",value:i,onChange:function(e){return l({type:k,value:e})},onFocus:function(){return F(!i)},onBlur:function(){return F(!i)}}),!n.name&&L&&r().createElement(o.FormHelperText,{isError:!0,icon:r().createElement(I.ZP,null),isHidden:!L},"Name is required")),r().createElement(o.FormGroup,{label:"What type of task is it?",fieldId:"category-field"},r().createElement(o.Select,{id:"category-field",isOpen:v,variant:"single","aria-label":"Plan category selector",maxHeight:390,onToggle:function(){return y(!v)},onSelect:function(e,t){l({type:C,value:t}),y(!1)},selections:c},((null==t?void 0:t.category)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"Enter a description of your automation plan",fieldId:"description-field"},r().createElement(o.TextInput,{type:"text",placeholder:"Place description here",id:"description-field",name:"description",value:s,onChange:function(e){return l({type:P,value:e})}})),r().createElement(o.FormGroup,{label:"How long does it take to do this manually?",fieldId:"manual-time-field"},r().createElement(o.Select,{id:"manual-time-field",isOpen:h,variant:"single",placeholderText:"Select amount","aria-label":"Plan time selector",onToggle:function(){return S(!h)},onSelect:function(e,t){l({type:Z,value:t}),S(!1)},selections:u},((null==t?void 0:t.manual_time)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"How many hosts do you plan to run this on?",fieldId:"hosts-field"},r().createElement(o.NumberInput,{inputAriaLabel:"Number of hosts",widthChars:8,onChange:function(e){((0,B.i_)(e.target.value)||0===e.target.value.length)&&l({type:_,value:parseInt(e.target.value)})},onMinus:function(){return l({type:_,value:(0,B.i_)(m)?m-1:0})},onPlus:function(){return l({type:_,value:(0,B.i_)(m)?m+1:1})},id:"hosts-field",name:"hosts",value:m,min:0})),r().createElement(o.FormGroup,{label:"How often do you do this?",fieldId:"frequency-period-field"},r().createElement(o.Select,{id:"frequency-period-field",isOpen:w,variant:"single",placeholderText:"Select frequency period","aria-label":"Plan frequency period selector",onToggle:function(){x(!w)},onSelect:function(e,t){l({type:D,value:t}),x(!1)},selections:d},((null==t?void 0:t.frequency_period)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)}))))))};L.propTypes={options:b().object.isRequired,formData:b().object.isRequired,dispatch:b().func.isRequired};const F=L;var R,A,N,G,M,W=n(42982),H=n(30168),z=n(29163),U=n(12294),V=n(33606),K=z.ZP.div(R||(R=(0,H.Z)(["\n  margin-top: 20px;\n"]))),Y=(0,z.ZP)(o.Title)(A||(A=(0,H.Z)(["\n  margin-bottom: 10px;\n"]))),$=(0,z.ZP)(o.Button)(N||(N=(0,H.Z)(["\n  padding: 0 16px;\n"]))),X=(0,z.ZP)(o.DataListAction)(G||(G=(0,H.Z)(["\n  padding: 6px 0;\n"]))),J=(0,z.ZP)(o.DataListItemRow)(M||(M=(0,H.Z)(["\n  align-items: center;\n"]))),Q=function(e){var t=e.tasks,n=e.dispatch,l=function(e){n({type:S,value:e})},i=(0,a.useState)(""),c=(0,E.Z)(i,2),s=c[0],u=c[1],m=(0,a.useState)(""),d=(0,E.Z)(m,2),p=d[0],f=d[1],v=(0,a.useState)(""),y=(0,E.Z)(v,2),g=y[0],b=y[1],h=function(){var e=s.trim();""!==e&&(l([].concat((0,W.Z)(t),[e])),u(""))};return r().createElement(r().Fragment,null,r().createElement(o.Form,null,r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What tasks do you need to accomplish this plan?",fieldId:"task-field"},r().createElement(o.InputGroup,null,r().createElement(o.TextInput,{placeholder:"Enter a description of each task",type:"text",id:"task-field",name:"task",value:s,onChange:function(e){return u(e)},onKeyDown:function(e){e.key&&"Enter"===e.key&&(e.preventDefault(),h())}}),r().createElement(o.Button,{onClick:h,isDisabled:""===s.trim(),variant:"control","aria-label":"Add task"},r().createElement(U.ZP,null)))))),t.length>0&&r().createElement(K,null,r().createElement(Y,{headingLevel:"h4",size:"xl"},"Tasks"),r().createElement(o.DataList,{"aria-label":"Draggable list to reorder and remove tasks.",isCompact:!0,onDragFinish:function(e){f("Dragging finished"),l(e.map((function(e){return e.split("-").slice(0,-1).join("-")})))},onDragStart:function(e){b(e),f("Dragging started for task ".concat(e,"."))},onDragMove:function(e,t){f("Dragging task ".concat(g,".  Task ").concat(e," is now task ").concat(t,"."))},onDragCancel:function(){f("Dragging cancelled. Tasks list order is unchanged.")},itemOrder:t.map((function(e,t){return"".concat(e,"-").concat(t)}))},t.map((function(e,n){return r().createElement(o.DataListItem,{"aria-labelledby":"cell-".concat(n+1),id:"".concat(e,"-").concat(n),key:n+1},r().createElement(J,null,r().createElement(o.DataListControl,null,r().createElement(o.DataListDragButton,{"aria-label":"Reorder","aria-labelledby":"cell-".concat(n+1),"aria-describedby":"Press space or enter to begin dragging, and use the arrow keys to navigate up or down. Press enter to confirm the drag, or any other key to cancel the drag operation.","aria-pressed":"false"})),r().createElement(o.DataListItemCells,{dataListCells:[r().createElement(o.DataListCell,{key:n+1},r().createElement("span",{id:"cell-".concat(n+1)},"".concat(n+1,". ").concat(e)))]}),r().createElement(X,{"aria-label":"Actions"},r().createElement($,{onClick:function(){return function(e){l(t.filter((function(t,n){return n!==e})))}(n)},variant:"plain","aria-label":"Delete"},r().createElement(V.ZP,null)))))})))),r().createElement("div",{className:"pf-screen-reader","aria-live":"assertive"},p))};Q.propTypes={tasks:b().array.isRequired,dispatch:b().func.isRequired};const ee=Q;var te,ne=n(45987),ae=n(86445),re=n(48236),le=n(37384),ie=n(9771),oe=n(12613),ce=n(64631),se=n(83474),ue=["quick_date_range","sort_options"],me=z.ZP.div(te||(te=(0,H.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),de={group_by:"template",limit:10,group_by_time:!1,offset:0,sort_options:"name",sort_order:"asc",cluster_id:[],inventory_id:[],job_type:[],org_id:[],status:[],template_id:[]},pe=function(e){var t=e.template_id,n=e.dispatch,l=(0,ce.Kx)(de),i=l.queryParams,c=l.setFromPagination,s=l.setFromToolbar,u=l.dispatch,m=(0,h.ZP)((0,f.Z)(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.ZW)();case 2:return(t=e.sent).quick_date_range,t.sort_options,n=(0,ne.Z)(t,ue),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),{}),p=m.result,E=m.error,v=m.isSuccess,g=m.request,b=(0,h.ZP)((function(e){return(0,d.Ij)(e)}),{items:[],meta:{count:0}}),k=b.result,C=k.items,P=k.meta,Z=b.isLoading,_=b.isSuccess,D=b.request,S={sort:{sortBy:{direction:i.sort_order},onSort:function(e,t,n){u({type:"SET_SORT_ORDER",value:{sort_order:n}})}}};return(0,a.useEffect)((function(){g(),D(i)}),[i]),v?r().createElement(o.Form,null,r().createElement(o.FormGroup,{label:"Link a template to this plan:",fieldId:"template-link-field"},r().createElement(se.Z,{categories:p,filters:i,setFilters:s,pagination:r().createElement(oe.Z,{count:P.count,params:{limit:+i.limit,offset:+i.offset},setPagination:c,isCompact:!0})}),E&&r().createElement(ie.Z,{message:E.error}),Z&&r().createElement(re.Z,null),_&&C.length<=0&&r().createElement(le.Z,null),_&&C.length>0&&r().createElement(ae.TableComposable,{"aria-label":"Template link table",variant:"compact"},r().createElement(ae.Thead,null,r().createElement(ae.Tr,null,r().createElement(ae.Th,null),r().createElement(ae.Th,S,"Name"))),r().createElement(ae.Tbody,null,C.map((function(e){var a=e.id,l=e.name;return r().createElement(ae.Tr,{key:"template-detail-".concat(a)},r().createElement(ae.Td,{"data-testid":"radio-".concat(a),key:"template-detail-".concat(a,"-radio-td"),select:{rowIndex:a,onSelect:function(e,t,a){return n({type:O,value:a})},isSelected:t===a,variant:"radio"}}),r().createElement(ae.Td,null,l))})))),r().createElement(me,null,r().createElement("div",null,-2!==t&&r().createElement(o.Button,{key:"clear-selection-button",variant:"link","aria-label":"Clear selection",onClick:function(){n({type:O,value:-2})}},"Clear selection")),r().createElement(oe.Z,{count:P.count,params:{limit:+i.limit,offset:+i.offset},setPagination:c,variant:o.PaginationVariant.bottom})))):null};pe.propTypes={template_id:b().number.isRequired,dispatch:b().func.isRequired};const fe=pe;function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t,n=e.title,i=e.options,c=e.data,s=void 0===c?{}:c,u=(0,l.useHistory)(),m=(0,l.useLocation)(),p=m.hash,v=m.pathname,g=(0,a.useState)(null),b=(0,E.Z)(g,2),T=b[0],I=b[1],B=(0,h.ZP)((0,a.useCallback)(function(){var e=(0,f.Z)(y().mark((function e(t,n){var a,r,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}if(!n){e.next=7;break}return e.next=4,(0,d.Vs)(n,t);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,(0,d.he)(t);case 9:return a=e.sent,r=a.id,l=a.plan_created,e.abrupt("return",{plan_created:ve({id:r},l)});case 13:return e.abrupt("return",{plan_created:{id:0}});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),{plan_created:{id:0}}),L=B.result,R=B.isSuccess,A=B.error,N=B.request,G=function(e){var t,n=(0,a.useReducer)((function(e,t){var n=t.type,a=t.value;switch(n){case k:return w(w({},e),{},{name:a});case C:return w(w({},e),{},{category:a});case P:return w(w({},e),{},{description:a});case Z:return w(w({},e),{},{manual_time:a});case _:return w(w({},e),{},{hosts:a});case D:return w(w({},e),{},{frequency_period:a});case S:return w(w({},e),{},{tasks:a});case O:return w(w({},e),{},{template_id:a});default:throw new Error("usePlanData reducer action type ".concat(n," was not found."))}}),{name:(null==e?void 0:e.name)||"",category:(null==e?void 0:e.category)||"system",description:(null==e?void 0:e.description)||"",manual_time:(null==e?void 0:e.manual_time)||240,hosts:(null==e?void 0:e.hosts)||1,frequency_period:(null==e?void 0:e.frequency_period)||"weekly",tasks:x(null==e?void 0:e.tasks)||[],template_id:(null==e?void 0:e.template_id)||-2}),r=(0,E.Z)(n,2),l=r[0],i=r[1];return{formData:l,requestPayload:(t=w({},l),t.tasks=t.tasks.map((function(e,t){return{task:e,task_order:t+1}})),t.hosts&&""!==t.hosts||(t.hosts=1),t.hourly_rate=50,t.frequency_per_period=1,t),dispatch:i}}(s),M=G.formData,W=G.requestPayload,H=G.dispatch,z=[{step_number:1,id:"details",name:"Details",component:r().createElement(F,{options:i,formData:M,dispatch:H})},{step_number:2,id:"tasks",name:"Tasks",component:r().createElement(ee,{tasks:M.tasks,dispatch:H}),canJumpTo:!!M.name},{step_number:3,id:"link_template",name:"Link template",component:r().createElement(fe,{template_id:M.template_id,dispatch:H}),canJumpTo:!!M.name,nextButtonText:"Save"}],U=function(e){u.replace({hash:e.id})},V=function(){N(W,null==s?void 0:s.id)},K=r().createElement(o.WizardFooter,null,r().createElement(o.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack,l=e.onClose;return 3!==t.step_number?r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:n,isDisabled:!M.name},"Next"),1!==t.step_number&&r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel")):r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:V,isDisabled:!M.name},"Save"),r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel"))})));return(0,a.useEffect)((function(){-1===v.indexOf("/add")&&p?I(z.find((function(e){return"#".concat(e.id)===p})).step_number):(u.replace({hash:"details"}),I(1))}),[]),r().createElement(r().Fragment,null,R&&r().createElement(l.Redirect,{to:{pathname:Nt.getDetails(L.plan_created.id),state:{reload:!0}}}),T&&r().createElement(o.Wizard,{navAriaLabel:"".concat(n," steps"),mainAriaLabel:"".concat(n," content"),steps:z,onGoToStep:U,onNext:U,onBack:U,onSave:V,onClose:function(){-1!==location.pathname.indexOf("/edit")?u.push(Nt.getDetails(null==s?void 0:s.id)):u.push(Nt.get)},footer:K,startAtStep:T,height:"calc(100vh - 240px)"}),A&&r().createElement(j.Z,{isOpen:!!A,onClose:function(){N()},title:"Error",variant:"error"},"There was an error saving the plan.",r().createElement(q.Z,{error:null==A||null===(t=A.error)||void 0===t?void 0:t.detail.name})))};ye.propTypes={title:b().string.isRequired,options:b().object.isRequired,data:b().object};const ge=ye,be=function(){var e,t,n,p,f,E,v=(0,h.ZP)((0,a.useCallback)((function(){return(0,d.nE)()}),[]),{}),y=v.result,g=v.isSuccess,b=v.request;(0,a.useEffect)((function(){b()}),[]);var k=g&&(!0===(null===(e=y.meta)||void 0===e||null===(t=e.rbac)||void 0===t||null===(n=t.perms)||void 0===n?void 0:n.write)||!0===(null===(p=y.meta)||void 0===p||null===(f=p.rbac)||void 0===f||null===(E=f.perms)||void 0===E?void 0:E.all)),C="Create new plan";return g?k?r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:[{title:"Savings Planner",navigate:"/savings-planner"}]}),r().createElement(u.Z,{title:C})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(o.CardBody,null,r().createElement(ge,{title:C,options:y}))))):r().createElement(l.Redirect,{to:i.n.savingsPlanner}):null};var he,ke,Ce=n(83264),Pe=z.ZP.div(_e||(he=["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"],ke=["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"],Object.defineProperty?Object.defineProperty(he,"raw",{value:ke}):he.raw=ke,_e=he));const Ze=function(e){var t=e.children;return r().createElement(Pe,null,r().createElement(o.CardActions,null,t))};var _e,De=n(55411);function Se(e){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,f.Z)(y().mark((function e(t){var n,a,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=null,r=!1,e.prev=3,e.next=6,Promise.all(t.map(function(){var e=(0,f.Z)(y().mark((function e(t){var a,l,i,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.request,l=t.label,e.next=3,a();case 3:i=e.sent,(o=i.items.count)>0&&(n[l]=o,r=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a=e.t0;case 11:return e.abrupt("return",{results:r&&n,error:a});case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))),Oe.apply(this,arguments)}var Te,we,xe=n(23071),je=(0,z.ZP)(o.Alert)(Te||(Te=(0,H.Z)(["\n  margin-top: 10px;\n"]))),qe=z.ZP.span(we||(we=(0,H.Z)(["\n  && {\n    margin-right: 10px;\n  }\n"]))),Ie=function(e){var t=e.onConfirm,n=e.modalTitle,l=void 0===n?"Delete":n,i=e.name,c=void 0===i?"":i,s=e.variant,u=void 0===s?"secondary":s,m=e.isDisabled,d=void 0!==m&&m,p=e.ouiaId,v=void 0===p?null:p,g=e.deleteMessage,b=void 0===g?"Delete?":g,h=e.deleteDetailsRequests,k=void 0===h?[]:h,C=e.disabledTooltip,P=void 0===C?"This item cannot be deleted":C,Z=e.children,_=(0,a.useState)(!1),D=(0,E.Z)(_,2),S=D[0],O=D[1],T=(0,a.useState)(),w=(0,E.Z)(T,2),x=w[0],j=w[1],q=(0,a.useState)({}),I=(0,E.Z)(q,2),B=I[0],L=I[1],F=(0,a.useState)(!1),R=(0,E.Z)(F,2),A=R[0],N=R[1],G=function(){var e=(0,f.Z)(y().mark((function e(t){var n,a,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),!(k.length>0&&t)){e.next=8;break}return e.next=4,Se(k);case 4:n=e.sent,a=n.results,(r=n.error)?j(r):L(a);case 8:N(!1),O(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x?r().createElement(De.Z,{isOpen:!!x,variant:"error",title:"Error!",onClose:function(){G(!1),j()}},r().createElement(xe.Z,{error:x.detail})):r().createElement(r().Fragment,null,P?r().createElement(o.Tooltip,{content:P,position:"top"},r().createElement("div",null,r().createElement(o.Button,{spinnerAriaValueText:A?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return G(!0)},ouiaId:v},Z||"Delete"))):r().createElement(o.Button,{ouiaId:v,spinnerAriaValueText:A?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return G(!0)}},Z||"Delete"),r().createElement(De.Z,{isOpen:S,title:l,variant:"danger",onClose:function(){return G(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"Confirm Delete",isDisabled:d,onClick:function(){t(),G(!1)}},"Delete"),r().createElement(o.Button,{ouiaId:"delete-modal-cancel",key:"cancel",variant:"link","aria-label":"Cancel",onClick:function(){return G(!1)}},"Cancel")]},"Are you sure you want to delete:",r().createElement("br",null),r().createElement("strong",null,c),Object.values(B).length>0&&r().createElement(je,{variant:"warning",isInline:!0,title:r().createElement("div",null,r().createElement("div",{"aria-label":b},b),r().createElement("br",null),Object.entries(B).map((function(e){var t=(0,E.Z)(e,2),n=t[0],a=t[1];return r().createElement("div",{"aria-label":"".concat(n,": ").concat(a),key:n},r().createElement(qe,null,n)," ",r().createElement(o.Badge,null,a))})))})))};Ie.propTypes={onConfirm:b().func.isRequired,modalTitle:b().string,name:b().string,variant:b().object,isDisabled:b().bool,ouiaId:b().string,deleteMessage:b().string,deleteDetailsRequests:b().array,disabledTooltip:b().bool,children:b().node};const Be=Ie;var Le=function(e){var t=e.tabsArray,n=e.defaultTabId,a=(0,l.useHistory)(),i=(0,l.useLocation)();return r().createElement(o.Tabs,{activeKey:function(e){var n;return(null===(n=t.find((function(e){return e.link===i.pathname})))||void 0===n?void 0:n.id)||e}(n),onSelect:function(e,n){var r=t.find((function(e){return e.id===n}));r&&a.push(r.link)}},t.map((function(e){return r().createElement(o.Tab,{"aria-label":"string"==typeof e.name?e.name:"".concat(e.id," tab"),eventKey:e.id,key:e.id,link:e.link,title:r().createElement(o.TabTitleText,null,e.name),role:"tab"})})))};Le.propTypes={defaultTabId:b().number,tabsArray:(0,g.arrayOf)((0,g.shape)({id:g.number.isRequired,link:g.string.isRequired,name:(0,g.oneOfType)([g.string.isRequired,g.node.isRequired])})).isRequired},Le.defaultProps={defaultTabId:1};const Fe=Le;var Re,Ae,Ne=n(62455),Ge=n(13784);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=(0,z.ZP)(o.CardBody)(Re||(Re=(0,H.Z)(["\n  min-height: 500px;\n  padding: 0;\n  padding-bottom: 20px;\n\n  &:first-child {\n    padding-top: 0;\n  }\n"]))),ze=(0,z.ZP)(o.Divider)(Ae||(Ae=(0,H.Z)(["\n  padding-top: 24px;\n"]))),Ue=function(e){var t=e.tabsArray,n=e.plan,c=e.canWrite,s=(0,l.useLocation)().pathname,u=(0,ce.eR)(),m=n.id,E=n.automation_status,v=n.category,g=n.description,b=n.frequency_period,k=n.hosts,C=n.manual_time,P=n.modified,Z=n.name,_=n.tasks,D=n.template_details,S=n.template_id,O=(0,h.ZP)((function(){return(0,d.nE)()}),{}),T=O.result,w=O.isSuccess,x=O.request;(0,a.useEffect)((function(){x()}),[]);var L=function(e,t){var n;if(!w||!T[e])return"";var a=T[e].find((function(e){return e.key===t}));return null!==(n=null==a?void 0:a.value)&&void 0!==n?n:""},F={Name:Z||void 0,"Automation type":v?L("category",v):void 0,Description:g||void 0,"Manual time":C?L("manual_time",C):void 0,"Run on hosts":k||void 0,Frequency:b?L("frequency_period",b):void 0,Template:S?function(e){if(e.id)return r().createElement("a",{onClick:function(){return function(e){var t=(0,p.Z)({},ce.zG,We(We({},Ge.cY.defaultParams),{},{quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]}));u(i.n.jobExplorer,t)}(e.id)}},e.name)}(D):void 0,"Last job status":E.status&&"None"!==E.status?r().createElement(Ne.Z,{status:E.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(I.ZP,null)},"Not Running"),"Last updated":P?r().createElement("span",null,(0,B.o0)(P)):void 0},R=(0,h.ZP)((0,a.useCallback)((0,f.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Kh)(m);case 2:u(i.n.savingsPlanner);case 3:case"end":return e.stop()}}),e)}))),[m,history])),A=R.request,N=R.error,G=(0,h.pF)(N),M=G.error,W=G.dismissError;return r().createElement(r().Fragment,null,n&&r().createElement(r().Fragment,null,r().createElement(He,null,r().createElement(Fe,{tabsArray:t}),r().createElement("div",{style:{padding:"1rem"}},r().createElement(o.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},Object.keys(F).map((function(e,t){return void 0!==F[e]&&r().createElement(o.DescriptionListGroup,{key:t},r().createElement(o.DescriptionListTerm,null,e),r().createElement(o.DescriptionListDescription,null,F[e]))}))),_.length>0&&r().createElement(o.DescriptionList,null,r().createElement(ze,{component:"div"}),r().createElement(o.DescriptionListGroup,{key:_},r().createElement(o.DescriptionListTerm,null,"Tasks"),r().createElement(o.DescriptionListDescription,null,r().createElement(o.List,{component:"ol",type:"1"},_.map((function(e){var t=e.id,n=e.task;return r().createElement(o.ListItem,{key:t},n)})))))))),c&&r().createElement(o.CardFooter,null,r().createElement(Ze,null,r().createElement(o.Button,{key:"edit-plan-button",variant:"primary","aria-label":"Edit plan",onClick:function(){u("".concat(s.split("/details")[0],"/edit"))}},"Edit"),r().createElement(Be,{key:"delete-plan-button",name:Z,modalTitle:"Delete Plan",onConfirm:A},"Delete")),M&&r().createElement(j.Z,{isOpen:!!M,onClose:W,title:"Error",variant:"error"},r().createElement(q.Z,{error:M.detail})))))};Ue.propTypes={plan:b().object,tabsArray:b().array,canWrite:b().bool.isRequired};const Ve=Ue;var Ke=n(90952),Ye=n(91738),$e=n(91354);const Xe=function(e){return(+e.toFixed(0)).toLocaleString()+" hours"};var Je=function(e){var t=e.value,n=void 0===t?0:t,a=e.isMoney,l=void 0===a||a;return r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),r().createElement(o.CardBody,null,r().createElement(o.Title,{headingLevel:"h3",size:"4xl",style:{color:l?"#81C46B":"#0063CF"}},l?""+(0,$e.Z)(n):""+Xe(n))))};Je.propTypes={value:b().number,isMoney:b().bool};const Qe=Je;var et=n(53688),tt=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Cost")),r().createElement("p",null,"The cost includes the hours spent in implementation, deployment, training and other expenditures for creating, maintaining and running the automation. These hours (cost of investment) are usually higher at the onset, and will be greatly reduced once the automation has been created and only maintenance is required."),r().createElement("br",null),r().createElement("p",null,"For the initial period and the first year, we assume approximately 10 hours spent on each host, as well as some buffer time and a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"For the next two years after the first year, we assume 4 hours spent on each host, as well as a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for the initial period and year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 10) + buffer time\nC2 = C1 * 40% risk adjustment\ninitial cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 1 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for years 2 and 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 4)\nC2 = C1 * 40% risk adjustment\nyear 2 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 3 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")))},nt=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Savings")),r().createElement("p",null,"The savings indicates the time and money saved as a result of automating the plan."),r().createElement("br",null),r().createElement("p",null,"We assume 50% productivity recapture to account for the productivity that is usually gained by repeated manual implementation of a task over a period of time. We also add a -5% risk adjustment for unforeseen situations that might arise and need to be handled. We also assume a 15% year over year growth in savings."),r().createElement("br",null),r().createElement("p",null,"Money savings for the initial period is 0, so there is no formula necessary."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 0:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"initial period savings = 0 - initial cost")),r().createElement("br",null),r().createElement("p",null,"The formula used for savings for year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = (number of hosts * (manual time in minutes / 60) * yearly frequency of automation)\nS2 = S1 * 50% productivity recapture\nS3 = S2 * 5% risk adjustment * (cost per hour in USD if applicable, based on display)\nyear 1 savings = S2 - S3 - year 1 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 2:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = year 1 savings * 15% growth\nyear 2 savings = year 1 savings + S1 - year 2 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S2 = year 2 savings * 15% growth\nyear 3 savings = year 2 savings + S2 - year 3 cost")))};const at=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:"link",onClick:function(){return n(!0)},icon:r().createElement(et.uM,null)},"Automation formula"),r().createElement(o.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:o.ModalVariant.medium,actions:[r().createElement(o.Button,{key:"cancel",variant:o.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},r().createElement("p",null,"We use risk-adjusted factors to create the 3-year projection of cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the risk-adjustment factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),r().createElement("br",null),r().createElement(tt,null),r().createElement("br",null),r().createElement(nt,null)))};var rt=function(){return rt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},rt.apply(this,arguments)},lt=function(e){return{cost:{key:e?"total_costs":"total_hours_spent_risk_adjusted",color:"#8B8D8F"},benefit:{key:e?"total_benefits":"total_hours_saved",color:e?"#81C46B":"#0063CF"},net:{key:e?"cumulative_net_benefits":"cumulative_time_net_benefits",color:"#EE7A00"}}};const it=function(e){var t,n,l,i,c=e.tabsArray,s=e.plan,u=(n={initial:"Initial",year1:"Year 1",year2:"Year 2",year3:"Year 3"},l=(t=s).projections.series_stats.map((function(e){return rt(rt({},e),{year:n[e.year],total_costs:-1*e.total_costs,total_hours_spent_risk_adjusted:-1*e.total_hours_spent_risk_adjusted})})),rt(rt({},t),{projections:rt(rt({},t.projections),{series_stats:l})})),m=(0,a.useState)(!0),d=m[0],p=m[1],f={charts:[{id:1e3,kind:Ye.$v.wrapper,type:Ye.yD.chart,parent:null,props:{height:600,domainPadding:{x:100},padding:{bottom:60,left:80},themeColor:Ye.nz.gray},tooltip:{cursor:!0,stickToAxis:"x",mouseFollow:!0,legendTooltip:{legendData:[{childName:lt(d).benefit.key,name:"Savings",symbol:{fill:lt(d).benefit.color}},{childName:lt(d).cost.key,name:"Costs",symbol:{fill:lt(d).cost.color}},{childName:lt(d).net.key,name:"Cumulative savings",symbol:{fill:lt(d).net.color}}],titleProperyForLegend:"year"},customFnc:function(e){return d?(0,$e.Z)(+e.y):Xe(+e.y)}},xAxis:{label:"Time"},yAxis:{label:d?"Money Saved":"Hours Saved",tickFormat:"formatNumberAsK",style:{grid:{stroke:"#D2D2D2"},axisLabel:{padding:60}}}},{id:1001,kind:Ye.$v.stack,parent:1e3,props:{}},{id:1102,kind:Ye.$v.simple,type:Ye.oX.bar,name:lt(d).benefit.key,parent:1001,props:{x:"year",y:lt(d).benefit.key,barRatio:.8,barWidth:0,style:{data:{fill:lt(d).benefit.color,width:120}}},tooltip:{labelName:""}},{id:1101,kind:Ye.$v.simple,type:Ye.oX.bar,name:lt(d).cost.key,parent:1001,props:{x:"year",y:lt(d).cost.key,barRatio:.8,barWidth:0,style:{data:{fill:lt(d).cost.color,width:120}}},tooltip:{labelName:""}},{id:1002,kind:Ye.$v.simple,type:Ye.oX.line,name:lt(d).net.key,parent:1e3,props:{x:"year",y:lt(d).net.key,style:{data:{stroke:lt(d).net.color,strokeWidth:5}}},tooltip:{labelName:""}}],functions:rt(rt({},Ye.wk),{fetchFnc:function(){return new Promise((function(e){e(function(e){return{items:e.projections.series_stats,type:Ye.Ii.nonGrouped,response_type:""}}(u))}))}})};return r().createElement(o.Card,null,r().createElement(Fe,{tabsArray:c}),r().createElement(o.Grid,null,r().createElement(o.GridItem,{span:9},r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardHeader,null,r().createElement(o.CardActions,null,r().createElement(o.ToggleGroup,{"aria-label":"toggleButton"},r().createElement(o.ToggleGroupItem,{text:"Money",buttonId:"money",isSelected:d,onChange:function(){return p(!0)}}),r().createElement(o.ToggleGroupItem,{text:"Time",buttonId:"time",isSelected:!d,onChange:function(){return p(!1)}}))),r().createElement(o.CardTitle,null,u.name)),r().createElement(o.CardBody,null,r().createElement(Ye.ZP,{schema:f.charts,functions:f.functions})))),r().createElement(o.GridItem,{span:3},r().createElement(r().Fragment,null,r().createElement(Qe,{value:(i=u,d?i.projections.series_stats[3].cumulative_net_benefits:i.projections.series_stats[3].cumulative_time_net_benefits),isMoney:d}),r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardBody,null,r().createElement(o.List,{isPlain:!0},r().createElement(o.ListItem,{icon:r().createElement(Ke.fU,{color:lt(d).benefit.color})},"Savings from automating this plan"),r().createElement(o.ListItem,{icon:r().createElement(Ke.fU,{color:lt(d).cost.color})},"Costs from creating, maintaining and running the automation"),r().createElement(o.ListItem,{icon:r().createElement(Ke.fU,{color:lt(d).net.color})},"Cumulative savings over time")))),r().createElement(at,null)))))};var ot=n(47217),ct=function(e){var t,n,i=e.data,o=(0,l.useParams)().id,c=(0,h.ZP)((function(){return(0,d.nE)()}),{meta:{rbac:{perms:{}}}}),s=c.result,u=c.isSuccess,m=c.request,p=!0===(null===(t=s.meta.rbac.perms)||void 0===t?void 0:t.write)||!0===(null===(n=s.meta.rbac.perms)||void 0===n?void 0:n.all);return(0,a.useEffect)((function(){m()}),[]),(0,a.useEffect)((function(){u&&!p&&(0,ot.Z)(Nt.getDetails(o))}),[p]),u?r().createElement(ge,{title:"Edit plan",options:s,data:i}):null};ct.propTypes={data:b().object.isRequired};const st=ct,ut=function(){var e,t,n=(0,l.useParams)().id,i=(0,l.useLocation)(),p=(0,l.useHistory)(),f={id:[n]},E="Details";-1!==i.pathname.indexOf("/statistics")?E="Statistics":-1!==i.pathname.indexOf("/edit")&&(E="Edit plan");var v=(0,h.ZP)((0,a.useCallback)((function(){return(0,d.wD)(n)}),[n]),{plan:{},rbac:{perms:{}}}),y=v.result,g=y.rbac,b=y.plan,k=v.isSuccess,C=v.error,P=v.request;(0,a.useEffect)((function(){return p.listen((function(e){e.pathname.includes("/edit")||P()}))}),[]),(0,a.useEffect)((function(){P()}),[n]);var Z=k&&(!0===(null===(e=g.perms)||void 0===e?void 0:e.write)||!0===(null===(t=g.perms)||void 0===t?void 0:t.all)),_=[{id:0,name:r().createElement(r().Fragment,null,r().createElement(Ce.ZP,null),"Back to Plans"),link:Nt.get},{id:1,name:"Details",link:Nt.getDetails(n)},{id:2,name:"Statistics",link:"".concat(Nt.getDetails(n),"/statistics")}],D=k?[{title:"Savings Planner",navigate:Nt.get},{title:b.name,navigate:Nt.getDetails(n)}]:[];return r().createElement(r().Fragment,null,C&&r().createElement(ie.Z,{message:C.error}),k&&r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:D}),r().createElement(u.Z,{title:E})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/edit"},r().createElement(st,{data:b})),r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/statistics"},r().createElement(it,{tabsArray:_,plan:b,queryParams:f})),r().createElement(l.Route,{exact:!0,path:Nt.details},r().createElement(Ve,{plan:b,tabsArray:_,canWrite:Z})))))))};var mt=n(60433),dt=n(80810);const pt=function(e){var t=e.label,n=void 0===t?"":t,a=e.title,l=void 0===a?"No items found.":a,i=e.message,c=void 0===i?"":i,s=e.canAdd,u=void 0!==s&&s,m=e.path,d=void 0===m?void 0:m,p=(0,ce.eR)();return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},r().createElement(o.EmptyStateIcon,{icon:u?mt.Mh:dt.W1}),r().createElement(o.Title,{size:"lg",headingLevel:"h3"},l),r().createElement(o.EmptyStateBody,null,c),u&&r().createElement(o.Button,{key:"add-item-button",variant:o.ButtonVariant.primary,"aria-label":n,onClick:function(){d&&p(d)}},n))};var ft,Et,vt,yt,gt;function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=(0,z.ZP)(o.CardTitle)(ft||(ft=(0,H.Z)(["\n  word-break: break-word;\n"]))),Ct=z.ZP.span(Et||(Et=(0,H.Z)(["\n  margin-right: 5px;\n  font-weight: bold;\n"]))),Pt=z.ZP.small(vt||(vt=(0,H.Z)(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n"]))),Zt=(0,z.ZP)(o.Checkbox)(yt||(yt=(0,H.Z)(["\n  &.pf-c-check.pf-m-standalone {\n    margin-top: -3px;\n  }\n"]))),_t=z.ZP.div(gt||(gt=(0,H.Z)(["\n  display: flex;\n  min-height: 30px;\n  align-items: center;\n"]))),Dt=function(e){var t,n=e.isSuccess,c=e.plan,s=e.selected,u=void 0===s?[]:s,m=e.handleSelect,d=void 0===m?function(){}:m,f=e.canWrite,v=e.options,y=c.id,g=c.automation_status,b=c.category,h=c.description,k=c.frequency_period,C=c.modified,P=c.name,Z=c.template_details,_=c.projections,D=(0,ce.eR)(),S=null==_?void 0:_.series_stats[_.series_stats.length-1].cumulative_net_benefits,O=(0,a.useState)(!1),T=(0,E.Z)(O,2),w=T[0],x=T[1],j=(0,l.useRouteMatch)(),q=function(e,t){return v[e]?v[e].find((function(e){return e.key===t})).value:t},L=[r().createElement(r().Fragment,{key:y},r().createElement(o.DropdownItem,{key:"edit",onClick:function(){return D("".concat(j.url,"/").concat(y,"/edit"))},position:"right"},"Edit"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return D("".concat(j.url,"/").concat(y,"/edit#tasks"))},position:"right"},"Manage tasks"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return D("".concat(j.url,"/").concat(y,"/edit#link_template"))},position:"right"},"Link template"))];return r().createElement(o.Card,null,r().createElement(o.CardHeader,null,r().createElement(o.CardHeaderMain,null,r().createElement(kt,null,r().createElement(l.Link,{to:"".concat(j.url,"/").concat(y)},P))),f&&r().createElement(o.CardActions,null,r().createElement(o.Dropdown,{onSelect:function(){},toggle:r().createElement(o.KebabToggle,{onToggle:function(){return x(!w)}}),isOpen:w,isPlain:!0,dropdownItems:L,position:"right"}),r().createElement(Zt,{onChange:function(){return d(c)},isChecked:u.some((function(e){return e.id===c.id})),"aria-label":"card checkbox",id:"check-1",name:"check1"}))),r().createElement(o.CardBody,null,h?r().createElement(Pt,null,h):null,r().createElement(_t,null,r().createElement(Ct,null,"Frequency")," ",k?q("frequency_period",k):r().createElement("span",null,"None")),r().createElement(_t,null,r().createElement(Ct,null,"Template")," ",0!==Object.keys(Z||{}).length?(t=Z)&&n?r().createElement("a",{onClick:function(){return function(e){var t=(0,p.Z)({},ce.zG,ht(ht({},Ge.cY.defaultParams),{},{quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]}));D(i.n.jobExplorer,t)}(t.id)}},t.name):null:r().createElement("span",null,"None -"," ",r().createElement("a",{onClick:function(){return D("".concat(j.url,"/").concat(y,"/edit#link_template"))}},"Link template"))),r().createElement(_t,null,r().createElement(Ct,null,"Last job status"),"None"!==g.status?r().createElement(Ne.Z,{status:g.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(I.ZP,null)},"Not Running")),S&&r().createElement(_t,null,r().createElement(Ct,null,"Projected savings"),r().createElement("a",{onClick:function(){return D("".concat(j.url,"/").concat(y,"/statistics"))}},(0,$e.Z)(+S))),r().createElement(_t,null,r().createElement(Ct,null,"Last updated")," ",r().createElement("span",null,(0,B.o0)(C)))),r().createElement(o.CardFooter,null,r().createElement(o.Label,null,q("category",b))))};Dt.propTypes={isSuccess:b().bool.isRequired,canWrite:b().bool.isRequired,selected:b().array,handleSelect:b().func,plan:b().object,options:b().object};const St=Dt;var Ot=function(e){var t=e.name,n=e.username,a=e.image;return t||n||a?(t&&b().checkPropTypes({name:b().string},{name:e.name},"prop","ItemToDelete"),n&&b().checkPropTypes({username:b().string},{username:e.username},"prop","ItemToDelete"),a&&b().checkPropTypes({image:b().string},{image:e.image},"prop","ItemToDelete"),null):new Error("One of 'name', 'username' or 'image' is required by ItemToDelete component.")},Tt=function(e){var t,n=e.itemsToDelete,l=e.pluralizedItemName,i=void 0===l?"Items":l,c=e.onDelete,s=e.errorMessage,u=void 0===s?"Error while deleting":s,m=e.deleteDetailsRequests,d=void 0===m?[]:m,p=e.cannotDelete,v=void 0===p?function(e){return!e}:p,g=(0,a.useState)(!1),b=(0,E.Z)(g,2),h=b[0],k=b[1],C=(0,a.useState)(null),P=(0,E.Z)(C,2),Z=P[0],_=P[1],D=(0,a.useState)(!1),S=(0,E.Z)(D,2),O=S[0],T=S[1],w=(0,a.useState)(""),x=(0,E.Z)(w,2),j=x[0],q=x[1],I=function(){var e=(0,f.Z)(y().mark((function e(t){var a,r,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),_(null),!(t&&1===n.length&&(null==d?void 0:d.length)>0)){e.next=9;break}return e.next=5,Se(d);case 5:a=e.sent,r=a.results,(l=a.error)?q(l):_(r);case 9:T(!1),k(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B="Delete ".concat(i,"?"),L=0===n.length||n.some(v);return j?r().createElement(De.Z,{isOpen:!!j,title:"Error!",onClose:function(){I(!1),q()}},r().createElement(xe.Z,{error:j.detail})):r().createElement(r().Fragment,null,r().createElement(o.Tooltip,{content:(t=n.filter(v).map((function(e){return e.name||e.username})).join(", "),n.some(v)?r().createElement("div",null,u?r().createElement(r().Fragment,null,r().createElement("span",null,u),r().createElement("span",null,": ".concat(t))):"You do not have permission to delete ".concat(i,": ").concat(t)):n.length?"Delete":"Select a plan to delete"),position:"top"},r().createElement("div",null,r().createElement(o.Button,{variant:"secondary",ouiaId:"delete-button",spinnerAriaValueText:O?"Loading":void 0,"aria-label":"Delete",onClick:function(){return I(!0)},isDisabled:L},"Delete"))),h&&r().createElement(De.Z,{variant:"danger",title:B,isOpen:h,onClose:function(){return I(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"confirm delete",isDisabled:Boolean(Z),onClick:function(){c(),I()}},"Delete"),r().createElement(o.Button,{key:"cancel",variant:"link","aria-label":"cancel delete",onClick:function(){return I(!1)}},"Cancel")]},r().createElement("div",null,"This action will delete the following:"),n.map((function(e){return r().createElement("span",{key:e.id},r().createElement("strong",null,e.name||e.username||e.image),r().createElement("br",null))}))))};Tt.propTypes={itemsToDelete:b().arrayOf(b().shape({id:b().number.isRequired,name:Ot,username:Ot,image:Ot})).isRequired,pluralizedItemName:b().string,onDelete:b().func.isRequired,errorMessage:b().string,warningMessage:b().node,deleteDetailsRequests:b().array,cannotDelete:b().func,deleteMessage:b().string};const wt=Tt;var xt,jt,qt;function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lt=z.ZP.div(xt||(xt=(0,H.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 76px);\n"]))),Ft=z.ZP.div(jt||(jt=(0,H.Z)(["\n  flex-shrink: 0;\n"]))),Rt=(0,z.ZP)(c.Z)(qt||(qt=(0,H.Z)(["\n  flex-grow: 1;\n"])));const At=function(){var e,t,n=(0,ce.eR)(),i=(0,l.useLocation)().pathname,c=(0,ce.Kx)(Ge.bE.defaultParams),m=c.queryParams,p=c.setFromPagination,v=c.setFromToolbar,g=(0,h.ZP)((function(){return(0,d.nE)()}),{}),b=g.result,k=g.isSuccess,C=g.request,P=(0,h.ZP)((0,a.useCallback)((function(){return(0,d.Wu)(m)}),[m]),{items:[],rbac:{perms:{}},meta:{count:0}}),Z=P.result,_=Z.items,D=Z.rbac,S=Z.meta,O=P.isLoading,T=P.isSuccess,w=P.error,x=P.request,j=Bt(Bt({},b),{},{name:[{key:"name",value:null}]});(0,a.useEffect)((function(){C(),x()}),[m]);var q=T&&(!0===(null===(e=D.perms)||void 0===e?void 0:e.write)||!0===(null===(t=D.perms)||void 0===t?void 0:t.all)),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,a.useState)([]),n=(0,E.Z)(t,2),r=n[0],l=n[1],i=r.length>0&&r.length===e.length,o=function(e){r.some((function(t){return t.id===e.id}))?l((function(t){return(0,W.Z)(t.filter((function(t){return t.id!==e.id})))})):l((function(t){return[].concat((0,W.Z)(t),[e])}))};return{selected:r,isAllSelected:i,handleSelect:o,setSelected:l}}(_),B=I.selected,L=I.handleSelect,F=I.setSelected,R=(0,h.px)(d.z2,null),A=R.isLoading,N=R.deletionError,G=R.deleteItems,M=R.clearDeletionError,H=function(){var e=(0,f.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(B.map((function(e){return e.id})));case 2:F([]),x();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r().createElement(Lt,null,r().createElement(s.Z,null,r().createElement(u.Z,{title:"Savings Planner"}),r().createElement(se.Z,{categories:j,filters:m,setFilters:v,additionalControls:[].concat((0,W.Z)(q?[r().createElement(o.Button,{key:"add-plan-button",variant:"primary","aria-label":"Add plan",onClick:function(){n("".concat(i,"/add"))}},"Add plan")]:[]),[q&&k&&_.length>0&&r().createElement(wt,{key:"delete-plan-button",onDelete:H,itemsToDelete:B,pluralizedItemName:"Savings plan"})]),pagination:T&&_.length>0?r().createElement(oe.Z,{count:S.count,params:{limit:+m.limit,offset:+m.offset},setPagination:p,isCompact:!0}):null})),r().createElement(Rt,null,w?r().createElement(ie.Z,{message:w.error}):O||A?r().createElement(re.Z,null):!T||0!==_.length||O||A?!T||O||A?null:r().createElement(o.Gallery,{hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},_.map((function(e){return r().createElement(St,{key:e.id,isSuccess:T,selected:B,plan:e,handleSelect:L,canWrite:q,options:b})}))):r().createElement(pt,{label:"Add plan",title:"No plans found",message:q?"Update the applied filters or add a new plan.":"Update the applied filters.",canAdd:q,path:"".concat(i,"/add")})),_.length>0&&!(O||A)&&r().createElement(Ft,null,r().createElement(oe.Z,{count:S.count,params:{limit:+m.limit,offset:+m.offset},setPagination:p,variant:o.PaginationVariant.bottom})),N&&r().createElement(De.Z,{"aria-label":"Deletion error",isOpen:N,onClose:M,title:"Error",variant:"error"},"Failed to delete one or more plans.",r().createElement(xe.Z,{error:N.detail})))};var Nt={get:""+i.n.savingsPlanner,add:i.n.savingsPlanner+"/add",edit:i.n.savingsPlanner+"/:id/edit",getEdit:function(e){return i.n.savingsPlanner+"/"+e+"/edit"},details:i.n.savingsPlanner+"/:id",getDetails:function(e){return i.n.savingsPlanner+"/"+e}};const Gt=function(){return r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:Nt.get},r().createElement(At,null)),r().createElement(l.Route,{exact:!0,path:Nt.add},r().createElement(be,null)),r().createElement(l.Route,{path:[Nt.edit,Nt.details]},r().createElement(ut,null)))}}}]);
//# sourceMappingURL=../sourcemaps/363.9b5cfb284d2a9e95aeb22ba5922fe538.js.map