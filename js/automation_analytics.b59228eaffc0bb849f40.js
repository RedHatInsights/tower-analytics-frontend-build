(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{315:function(t,e,a){var n={"./af":154,"./af.js":154,"./ar":155,"./ar-dz":156,"./ar-dz.js":156,"./ar-kw":157,"./ar-kw.js":157,"./ar-ly":158,"./ar-ly.js":158,"./ar-ma":159,"./ar-ma.js":159,"./ar-sa":160,"./ar-sa.js":160,"./ar-tn":161,"./ar-tn.js":161,"./ar.js":155,"./az":162,"./az.js":162,"./be":163,"./be.js":163,"./bg":164,"./bg.js":164,"./bm":165,"./bm.js":165,"./bn":166,"./bn.js":166,"./bo":167,"./bo.js":167,"./br":168,"./br.js":168,"./bs":169,"./bs.js":169,"./ca":170,"./ca.js":170,"./cs":171,"./cs.js":171,"./cv":172,"./cv.js":172,"./cy":173,"./cy.js":173,"./da":174,"./da.js":174,"./de":175,"./de-at":176,"./de-at.js":176,"./de-ch":177,"./de-ch.js":177,"./de.js":175,"./dv":178,"./dv.js":178,"./el":179,"./el.js":179,"./en-SG":180,"./en-SG.js":180,"./en-au":181,"./en-au.js":181,"./en-ca":182,"./en-ca.js":182,"./en-gb":183,"./en-gb.js":183,"./en-ie":184,"./en-ie.js":184,"./en-il":185,"./en-il.js":185,"./en-nz":186,"./en-nz.js":186,"./eo":187,"./eo.js":187,"./es":188,"./es-do":189,"./es-do.js":189,"./es-us":190,"./es-us.js":190,"./es.js":188,"./et":191,"./et.js":191,"./eu":192,"./eu.js":192,"./fa":193,"./fa.js":193,"./fi":194,"./fi.js":194,"./fo":195,"./fo.js":195,"./fr":196,"./fr-ca":197,"./fr-ca.js":197,"./fr-ch":198,"./fr-ch.js":198,"./fr.js":196,"./fy":199,"./fy.js":199,"./ga":200,"./ga.js":200,"./gd":201,"./gd.js":201,"./gl":202,"./gl.js":202,"./gom-latn":203,"./gom-latn.js":203,"./gu":204,"./gu.js":204,"./he":205,"./he.js":205,"./hi":206,"./hi.js":206,"./hr":207,"./hr.js":207,"./hu":208,"./hu.js":208,"./hy-am":209,"./hy-am.js":209,"./id":210,"./id.js":210,"./is":211,"./is.js":211,"./it":212,"./it-ch":213,"./it-ch.js":213,"./it.js":212,"./ja":214,"./ja.js":214,"./jv":215,"./jv.js":215,"./ka":216,"./ka.js":216,"./kk":217,"./kk.js":217,"./km":218,"./km.js":218,"./kn":219,"./kn.js":219,"./ko":220,"./ko.js":220,"./ku":221,"./ku.js":221,"./ky":222,"./ky.js":222,"./lb":223,"./lb.js":223,"./lo":224,"./lo.js":224,"./lt":225,"./lt.js":225,"./lv":226,"./lv.js":226,"./me":227,"./me.js":227,"./mi":228,"./mi.js":228,"./mk":229,"./mk.js":229,"./ml":230,"./ml.js":230,"./mn":231,"./mn.js":231,"./mr":232,"./mr.js":232,"./ms":233,"./ms-my":234,"./ms-my.js":234,"./ms.js":233,"./mt":235,"./mt.js":235,"./my":236,"./my.js":236,"./nb":237,"./nb.js":237,"./ne":238,"./ne.js":238,"./nl":239,"./nl-be":240,"./nl-be.js":240,"./nl.js":239,"./nn":241,"./nn.js":241,"./pa-in":242,"./pa-in.js":242,"./pl":243,"./pl.js":243,"./pt":244,"./pt-br":245,"./pt-br.js":245,"./pt.js":244,"./ro":246,"./ro.js":246,"./ru":247,"./ru.js":247,"./sd":248,"./sd.js":248,"./se":249,"./se.js":249,"./si":250,"./si.js":250,"./sk":251,"./sk.js":251,"./sl":252,"./sl.js":252,"./sq":253,"./sq.js":253,"./sr":254,"./sr-cyrl":255,"./sr-cyrl.js":255,"./sr.js":254,"./ss":256,"./ss.js":256,"./sv":257,"./sv.js":257,"./sw":258,"./sw.js":258,"./ta":259,"./ta.js":259,"./te":260,"./te.js":260,"./tet":261,"./tet.js":261,"./tg":262,"./tg.js":262,"./th":263,"./th.js":263,"./tl-ph":264,"./tl-ph.js":264,"./tlh":265,"./tlh.js":265,"./tr":266,"./tr.js":266,"./tzl":267,"./tzl.js":267,"./tzm":268,"./tzm-latn":269,"./tzm-latn.js":269,"./tzm.js":268,"./ug-cn":270,"./ug-cn.js":270,"./uk":271,"./uk.js":271,"./ur":272,"./ur.js":272,"./uz":273,"./uz-latn":274,"./uz-latn.js":274,"./uz.js":273,"./vi":275,"./vi.js":275,"./x-pseudo":276,"./x-pseudo.js":276,"./yo":277,"./yo.js":277,"./zh-cn":278,"./zh-cn.js":278,"./zh-hk":279,"./zh-hk.js":279,"./zh-tw":280,"./zh-tw.js":280};function r(t){var e=i(t);return a(e)}function i(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id=315},452:function(t,e,a){"use strict";a.r(e);var n=a(79),r=a.n(n),i=a(13),o=a.n(i),l=a(23),s=a.n(l),c=a(85),u=a.n(c),d=a(74),p=a.n(d),m=a(113),f=a.n(m),h=a(69),g=a.n(h),b=a(1),y=a.n(b),v=a(0),E=a.n(v),x=a(89),j=a(81),T=a(70),w=a(75),_=a(91),k=a(62),O=a(72),S=a(90),C=a(101),D=a(425),A=a.n(D),B=function(){return y.a.createElement(O.EmptyState,{variant:O.EmptyStateVariant.full},y.a.createElement(S.EmptyStateIcon,{icon:A.a}),y.a.createElement(k.Title,{size:"lg",headingLevel:"h4"},"No results found"),y.a.createElement(C.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."))},I=a(145),R=a.n(I),L=a(451),z=function(t){var e=t.message;return y.a.createElement(O.EmptyState,{variant:O.EmptyStateVariant.small},y.a.createElement(S.EmptyStateIcon,{icon:R.a,color:L.a.value}),y.a.createElement(k.Title,{headingLevel:"h2",size:"lg"},"Error"),y.a.createElement(C.EmptyStateBody,null,e))};z.propTypes={message:E.a.string};var F=z,M=a(86),P={attributes:["id","status","job_type","started","finished","elapsed","created","cluster_name","org_name","most_failed_tasks"],defaultParams:{status:["successful","failed"],job_type:["workflowjob","job"],quick_date_range:"last_30_days",limit:5,only_root_workflows_and_standalone_jobs:!1,sort_by:"created:desc"}},W=[{name:"Status",id:1},{name:"Date",id:2},{name:"Job",id:3},{name:"Organization",id:4},{name:"Cluster",id:5},{name:"Template",id:6},{name:"Sort by",id:7}],Y=a(5),U=a(63),N=a(61),q=a(97),J=a(100),V=a(445),H=a(111),G=a(119),$=a(432),Q=a(104),K=a(121),X=a(430),Z=a(429),tt=a(431),et=a(87),at=a(428),nt=a.n(at),rt=a(71),it=a(290),ot=a(294),lt=a.n(ot),st=a(427),ct=a.n(st),ut=a(426),dt=a.n(ut),pt=a(295),mt=a.n(pt),ft=function(t){var e=t.status;return y.a.createElement(it.Label,{variant:"outline",color:function(){switch(e){case"successful":return"green";case"failed":case"error":return"red";case"running":case"pending":return"blue";case"canceled":return"orange";default:return"grey"}}(),icon:function(){switch(e){case"successful":return y.a.createElement(lt.a,null);case"failed":case"error":return y.a.createElement(R.a,null);case"running":return y.a.createElement(dt.a,null);case"canceled":return y.a.createElement(mt.a,null);default:return y.a.createElement(ct.a,null)}}()},function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e))};ft.propTypes={status:E.a.oneOf(["successful","failed","error","running","new","waiting","pending","canceled"])};var ht=ft;function gt(){var t=g()(["\nalign-items: center; \n"]);return gt=function(){return t},t}function bt(){var t=g()(["\nalign-items: center;\nmargin-top: 5px;\n"]);return bt=function(){return t},t}function yt(){var t=g()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n"]);return yt=function(){return t},t}function vt(){var t=g()(["\n  margin-left: 7px;\n  color: var(--pf-global--Color--400);\n"]);return vt=function(){return t},t}var Et=["Id/Name","Status","Cluster","Organization","Type"],xt=Object(T.a)(nt.a)(vt()),jt=Object(T.a)(G.DataListCell)(yt()),Tt=Object(T.a)(Z.DataListItemCells)(bt()),wt=Object(T.a)(X.DataListItemRow)(gt()),_t=function(t,e,a,n){var r=Object(b.useState)([]),i=p()(r,2),o=i[0],l=i[1];return y.a.createElement(Q.DataList,{"aria-label":e,isCompact:!0},t.map(function(t,e){return y.a.createElement(K.DataListItem,{key:t.id.id,"aria-labelledby":a,isExpanded:o.includes("".concat(t.id.id,"-toggle"))},y.a.createElement(wt,{key:t.id.id},y.a.createElement(tt.DataListToggle,{id:"".concat(t.id.id,"-toggle"),"aria-controls":"".concat(t.id.id,"-expand"),onClick:function(){return function(t){var e=o,a=e.indexOf(t),n=a>=0?[].concat(u()(e.slice(0,a)),u()(e.slice(a+1,e.length))):[].concat(u()(e),[t]);l(n)}("".concat(t.id.id,"-toggle"))},isExpanded:o.includes("".concat(t.id.id,"-toggle"))}),y.a.createElement(Tt,{dataListCells:[y.a.createElement(jt,{key:e++},y.a.createElement("a",{href:t.id.tower_link,target:"_blank",rel:"noopener noreferrer"},n<765&&y.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Id/Name",y.a.createElement(xt,null),":")," ","".concat(t.id.id," - ").concat(t.id.template_name))),y.a.createElement(jt,{key:e++},n<=765&&y.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Status:")," ",y.a.createElement(ht,{status:t.status})),y.a.createElement(et.Tooltip,{key:e++,content:y.a.createElement("p",null,t.cluster_name)},y.a.createElement(jt,null,n<=765&&y.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Cluster:")," ",t.cluster_name)),y.a.createElement(jt,{key:e++},n<=765&&y.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Organization:")," ",t.org_name),y.a.createElement(jt,{key:e++},n<=765&&y.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Type:")," ",Object(rt.i)(t.job_type))]})),y.a.createElement($.DataListContent,{"aria-label":"".concat(t.id.id,"-details"),id:"${item.id.id}",isHidden:!o.includes("".concat(t.id.id,"-toggle"))},y.a.createElement(Tt,{dataListCells:[y.a.createElement(jt,{key:e++},"Created: ",Object(rt.h)(t.created)),y.a.createElement(jt,{key:e++},"Started: ",Object(rt.h)(t.started)),y.a.createElement(jt,{key:e++},"Finished: ",Object(rt.h)(t.finished))]})))}))},kt=function(t){var e=t.jobs,a=Object(b.useState)(window.innerWidth),n=p()(a,2),r=n[0],i=n[1],o=function(){return i(window.innerWidth)};return Object(b.useEffect)(function(){return window.addEventListener("resize",o),function(){return window.removeEventListener("resize",o)}},[]),_t(e,"All jobs view","all-jobs",r)},Ot=function(t){var e=t.jobs,a=Object(b.useState)(window.innerWidth),n=p()(a,2),r=n[0],i=n[1],o=function(){return i(window.innerWidth)};return Object(b.useEffect)(function(){return window.addEventListener("resize",o),function(){return window.removeEventListener("resize",o)}},[]),y.a.createElement(y.a.Fragment,null,e.length<=0&&y.a.createElement(w.a,null),y.a.createElement(y.a.Fragment,null,r>=765&&function(t){return y.a.createElement(wt,{style:{paddingLeft:"80px",fontWeight:"800"}},t.map(function(t){return y.a.createElement(jt,{key:t},t,"Id/Name"===t&&y.a.createElement(xt,null))}))}(Et),y.a.createElement(kt,{jobs:e,windowWidth:r})))};Ot.propTypes={jobs:E.a.array,windowWidth:E.a.number},kt.propTypes={jobs:E.a.array,windowWidth:E.a.number};var St=Ot,Ct=a(301),Dt=a(307),At=a(304),Bt=a(308),It=a(310),Rt=a(151),Lt=a(440),zt=a(434),Ft=a(439),Mt=a(442),Pt=a(112),Wt=a(152),Yt=a(282),Ut=a(106),Nt=a(291),qt=a(110),Jt=a.n(qt),Vt=a(443),Ht=a.n(Vt),Gt=a(444),$t=a.n(Gt);function Qt(){var t=g()(["\n    .pf-c-select__menu {\n        max-height: 500px;\n        overflow: auto;\n    }\n"]);return Qt=function(){return t},t}function Kt(){var t=g()(["\n    &&& {\n        margin: 0 15px;\n    }\n"]);return Kt=function(){return t},t}function Xt(){var t=g()(["\n  .pf-c-toolbar__content-section {\n    justify-content: space-between;\n  }\n"]);return Xt=function(){return t},t}function Zt(){var t=g()(["\n  button {\n    .pf-c-select__toggle-wrapper {\n      flex-wrap: nowrap;\n    }\n  }\n"]);return Zt=function(){return t},t}var te=Object(T.a)(Wt.ToolbarGroup)(Zt()),ee=Object(T.a)(zt.ToolbarContent)(Xt()),ae=Object(T.a)(Nt.Switch)(Kt()),ne=Object(T.a)(Yt.Select)(Qt()),re=function(t,e){return t&&e?t.reduce(function(t,a){return Number.isInteger(parseInt(a))&&(a=parseInt(a)),e.forEach(function(e){e.key===a&&t.push(e.value)}),t},[]):[]},ie=function(t,e){var a;if(t&&"string"==typeof t&&e&&(e.forEach(function(e){e.key===t&&(a=e.value)}),void 0!==a))return[a];return[]},oe=function(t){var e=t.orgs,a=t.statuses,n=t.types,i=t.clusters,o=t.templates,l=t.sortables,s=t.dateRanges,c=t.onDelete,d=t.passedFilters,m=t.handleFilters,h=Object(b.useState)(!1),g=p()(h,2),v=g[0],E=g[1],x=Object(b.useState)(!1),j=p()(x,2),T=j[0],w=j[1],_=Object(b.useState)(!1),k=p()(_,2),O=k[0],S=k[1],C=Object(b.useState)(!1),D=p()(C,2),A=D[0],B=D[1],I=Object(b.useState)(!1),R=p()(I,2),L=R[0],z=R[1],F=Object(b.useState)(!1),M=p()(F,2),P=M[0],Y=M[1],U=Object(b.useState)(!1),N=p()(U,2),q=N[0],J=N[1],V=Object(b.useState)(!1),H=p()(V,2),G=H[0],$=H[1],Q=Object(b.useState)("Status"),K=p()(Q,2),X=K[0],Z=K[1];return y.a.createElement(Lt.Toolbar,{id:"filterable-toolbar-with-chip-groups",clearAllFilters:c,collapseListedFiltersBreakpoint:"xl"},y.a.createElement(ee,null,y.a.createElement(Mt.ToolbarToggleGroup,{toggleIcon:y.a.createElement(Jt.a,null),breakpoint:"xl"},y.a.createElement(te,{variant:"filter-group"},function(t){return y.a.createElement(Pt.ToolbarItem,null,y.a.createElement(Ct.Dropdown,{onSelect:function(t){Z(t.target.innerText),z(!L)},position:"left",toggle:y.a.createElement(Dt.DropdownToggle,{onToggle:function(){z(!L)},style:{width:"100%"}},y.a.createElement(Jt.a,null)," ",X),isOpen:L,dropdownItems:t.map(function(t){return y.a.createElement(At.DropdownItem,{key:t.id},t.name)}),style:{width:"100%"}}))}(W),function(){var t=e.map(function(t){var e=t.key,a=t.value;return y.a.createElement(Ut.SelectOption,{key:e,value:"".concat(e)},a)}),p=a.map(function(t){var e=t.key,a=t.value;return y.a.createElement(Ut.SelectOption,{key:e,value:e},a)}),h=n.map(function(t){var e=t.key,a=t.value;return y.a.createElement(Ut.SelectOption,{key:e,value:e},a)}),g=i.map(function(t){var e=t.key,a=t.value;return y.a.createElement(Ut.SelectOption,{key:e,value:"".concat(e)},a)}),b=o.map(function(t){var e=t.key,a=t.value;return y.a.createElement(Ut.SelectOption,{key:e,value:"".concat(e)},a)}),x=[];Array.isArray(l)&&(x=l.map(function(t){var e=t.key,a=t.value;return y.a.createElement(Ut.SelectOption,{key:e,value:e},a)}));var j=s.map(function(t){var e=t.key,a=t.value;return y.a.createElement(Ut.SelectOption,{key:e,value:e},a)}),_=function(t,e,a){var n=e.target.checked;m(f()({},d,r()({},t,n?[].concat(u()(d[t]),[a]):d[t].filter(function(t){return t!==a}))))};return y.a.createElement(y.a.Fragment,null,y.a.createElement(Ft.ToolbarFilter,{showToolbarItem:"Status"===X,chips:re(d.status,a),categoryName:"Status",deleteChip:c},y.a.createElement(ne,{isOpen:v,variant:"checkbox","aria-label":"Status",onToggle:function(){E(!v)},onSelect:function(t,e){_("status",t,e)},selections:d.status,isExpanded:v,placeholderText:"Filter by job status"},p)),y.a.createElement(Ft.ToolbarFilter,{showToolbarItem:"Date"===X,categoryName:"Date",chips:ie(d.date,s),deleteChip:c},y.a.createElement(ne,{isOpen:T,variant:"single","aria-label":"Date",onToggle:function(){w(!T)},onSelect:function(t,e){!function(t,e){m(f()({},d,{date:e})),w(!T)}(0,e)},selections:d.date,isExpanded:T,placeholderText:"Filter by date range"},j)),y.a.createElement(Ft.ToolbarFilter,{showToolbarItem:"Job"===X,categoryName:"Type",chips:re(d.type,n),deleteChip:c},y.a.createElement(ne,{isOpen:O,"aria-label":"Type",variant:"checkbox",onToggle:function(){S(!O)},onSelect:function(t,e){_("type",t,e)},selections:d.type,isExpanded:O,placeholderText:"Filter by job type"},h)),y.a.createElement(Ft.ToolbarFilter,{showToolbarItem:"Organization"===X,categoryName:"Org",chips:re(d.org,e),deleteChip:c},y.a.createElement(ne,{isOpen:A,"aria-label":"Filter by Org",variant:"checkbox",onToggle:function(){B(!A)},onSelect:function(t,e){_("org",t,e)},selections:d.org,isExpanded:A,placeholderText:"Filter by organization"},t)),y.a.createElement(Ft.ToolbarFilter,{showToolbarItem:"Cluster"===X,categoryName:"Cluster",chips:re(d.cluster,i),deleteChip:c},y.a.createElement(ne,{isOpen:P,"aria-label":"Filter by Cluster",variant:"checkbox",onToggle:function(){Y(!P)},onSelect:function(t,e){_("cluster",t,e)},selections:d.cluster,isExpanded:P,placeholderText:"Filter by cluster"},g)),y.a.createElement(Ft.ToolbarFilter,{showToolbarItem:"Template"===X,categoryName:"Template",chips:re(d.template,o),deleteChip:c},y.a.createElement(ne,{isOpen:q,"aria-label":"Filter by template",variant:"checkbox",onToggle:function(){return J(!q)},onSelect:function(t,e){_("template",t,e)},selections:d.template,isExpanded:q,placeholderText:"Filter by template"},b)),y.a.createElement(Ft.ToolbarFilter,{showToolbarItem:"Sort by"===X,categoryName:"SortBy",chips:ie(d.sortby,l),deleteChip:c},y.a.createElement(Yt.Select,{isOpen:G,"aria-label":"Sort by",variant:"single",onToggle:function(){$(!G)},onSelect:function(t,e){!function(t,e){m(f()({},d,{sortby:e})),$(!G)}(0,e)},selections:d.sortby,isExpanded:G,placeholderText:"Sort by attribute"},x)))}(),"Date"===X&&"custom"===d.date&&y.a.createElement(y.a.Fragment,null,y.a.createElement(Bt.InputGroup,null,y.a.createElement(It.InputGroupText,{component:"label",htmlFor:"startDate"},y.a.createElement(Ht.a,null)),y.a.createElement(Rt.TextInput,{name:"startDate",id:"startDate",type:"date","aria-label":"Start Date",value:d.startDate||"",onChange:function(t){return function(t){m(f()({},d,{startDate:t}))}(t)}})),y.a.createElement(Bt.InputGroup,null,y.a.createElement(It.InputGroupText,{component:"label",htmlFor:"endDate"},y.a.createElement(Ht.a,null)),y.a.createElement(Rt.TextInput,{name:"endDate",id:"endDate",type:"date","aria-label":"End Date",value:d.endDate||"",onChange:function(t){return function(t){m(f()({},d,{endDate:t}))}(t)}}))))),y.a.createElement("div",null,y.a.createElement(ae,{id:"showRootWorkflowJobs",label:"Ignore nested workflows and jobs",labelOff:"Ignore nested workflows and jobs",isChecked:d.showRootWorkflows,onChange:function(t){m(f()({},d,{showRootWorkflows:t}))}}),y.a.createElement(et.Tooltip,{position:et.TooltipPosition.top,content:y.a.createElement("div",null," ","If enabled, nested workflows and jobs will not be included in the overall totals. Enable this option to filter out duplicate entries.")},y.a.createElement($t.a,null)))))};oe.propTypes={orgs:E.a.array,statuses:E.a.array,types:E.a.array,clusters:E.a.array,templates:E.a.array,sortables:E.a.array,dateRanges:E.a.array,onDelete:E.a.func,passedFilters:E.a.object,handleFilters:E.a.func};var le=oe;function se(){var t=g()(["\n  margin-top: 20px;\n"]);return se=function(){return t},t}function ce(){var t=g()(["\n  display: flex;\n  align-items: flex-start;\n  margin: 0;\n"]);return ce=function(){return t},t}function ue(){var t=g()(["\n  display: flex;\n  justify-content: space-between;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n"]);return ue=function(){return t},t}var de=Object(T.a)(V.CardHeader)(ue()),pe=Object(T.a)(H.Pagination)(ce()),me=Object(T.a)(H.Pagination)(se()),fe=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],he=f()({},P.defaultParams,{attributes:P.attributes}),ge={attributes:P.attributes},be=function(t){var e=Object(b.useState)(null),a=p()(e,2),n=a[0],i=a[1],l=Object(b.useState)(null),c=p()(l,2),d=c[0],m=c[1],h=Object(b.useState)([]),g=p()(h,2),v=g[0],E=g[1],T=Object(b.useState)(!0),k=p()(T,2),O=k[0],S=k[1],C=Object(b.useState)(!0),D=p()(C,2),A=D[0],I=D[1],R=Object(b.useState)({}),L=p()(R,2),z=L[0],P=L[1],W=Object(b.useState)(1),V=p()(W,2),G=V[0],$=V[1],Q=Object(b.useState)([]),K=p()(Q,2),X=K[0],Z=K[1],tt=Object(b.useState)([]),et=p()(tt,2),at=et[0],nt=et[1],rt=Object(b.useState)([]),it=p()(rt,2),ot=it[0],lt=it[1],st=Object(b.useState)(null),ct=p()(st,2),ut=ct[0],dt=ct[1],pt=Object(b.useState)([]),mt=p()(pt,2),ft=mt[0],ht=mt[1],gt=Object(b.useState)([]),bt=p()(gt,2),yt=bt[0],vt=bt[1],Et=Object(b.useState)([]),xt=p()(Et,2),jt=xt[0],Tt=xt[1],wt=(0,Object(j.a)({}).parse)(t.location.search,{arrayFormat:"bracket"}),_t=f()({},he,wt),kt=Object(x.a)(_t),Ot=kt.queryParams,Ct=kt.setLimit,Dt=kt.setOffset,At=kt.setJobType,Bt=kt.setOrg,It=kt.setStatus,Rt=kt.setCluster,Lt=kt.setTemplate,zt=kt.setSortBy2,Ft=kt.setQuickDateRange,Mt=kt.setRootWorkflowsAndJobs,Pt=kt.setStart_Date,Wt=kt.setEnd_Date,Yt=Object(x.a)(ge).queryParams,Ut=function(t){return Array.isArray(t)?u()(t):t.split()},Nt=Object(b.useState)({status:Ot.status?Ut(Ot.status):["successful","failed"],type:Ot.job_type?Ut(Ot.job_type):["job","workflowjob"],org:Ot.org_id?Ut(Ot.org_id):[],cluster:Ot.cluster_id?Ut(Ot.cluster_id):[],template:Ot.template_id?Ut(Ot.template_id):[],sortby:Ot.sort_by?Ot.sort_by:null,startDate:Ot.start_date?Ot.start_date:null,endDate:Ot.end_date?Ot.end_date:null,date:Ot.quick_date_range?Ot.quick_date_range:"last_30_days",showRootWorkflows:"true"===Ot.only_root_workflows_and_standalone_jobs}),qt=p()(Nt,2),Jt=qt[0],Vt=qt[1],Ht=function(){var e=Y.a.jobExplorer,a=Object(j.a)(Ot),n=a.strings,r=(0,a.stringify)(n);t.history.push({pathname:e,search:r})};Object(b.useEffect)(function(){insights.chrome.appNavClick({id:"job-explorer",secondaryNav:!0}),Ht()},[]),Object(b.useEffect)(function(){if(!O){(function(){var t=s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return m(null),I(!0),t.next=4,window.insights.chrome.auth.getUser();case 4:Promise.all([Object(M.e)({params:Ot})]).then(function(t){var e=p()(t,1)[0],a=e.items,n=void 0===a?[]:a,r=e.meta;E(n),P(r)}).catch(function(t){return m(t.error)}).finally(function(){return I(!1)});case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()(),Ht()}},[Ot]),Object(b.useEffect)(function(){O||(Jt.type&&At(Jt.type),Jt.status&&It(Jt.status),Jt.org&&Bt(Jt.org),Jt.cluster&&Rt(Jt.cluster),Jt.template&&Lt(Jt.template),zt(Jt.sortby),Mt(Jt.showRootWorkflows),Ft(Jt.date),"custom"!==Jt.date?(Pt(null),Wt(null)):(Pt(Jt.startDate),Wt(Jt.endDate)))},[Jt]),Object(b.useEffect)(function(){var t=!1,e=function(){return Promise.all([Object(M.e)({params:Ot}),Object(M.f)({params:Yt})].map(function(t){return t.catch(function(){return[]})}))};function a(){return(a=s()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return I(!0),a.next=3,window.insights.chrome.auth.getUser();case 3:return a.next=5,Object(M.a)().catch(function(t){i({preflightError:t})});case 5:e().then(function(e){var a=p()(e,2),n=a[0],r=n.items,i=void 0===r?[]:r,o=n.meta,l=a[1],s=l.cluster_id,c=l.org_id,u=l.job_type,d=l.status,m=l.template_id,f=l.quick_date_range,h=l.sort_by;t||(E(i),P(o),nt(s),Z(c),lt(m),dt(h),ht(d),vt(u),Tt(f),S(!1),I(!1))});case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),Ht(),function(){return t=!0}},[]);var Gt=function(t){return(t-1)*Ot.limit},$t=y.a.createElement("span",null,"Automation Analytics",y.a.createElement("span",{style:{fontSize:"16px"}}," ",y.a.createElement("span",{style:{margin:"0 10px"}},"|")," Jobs explorer")),Qt=function(t){var e=Gt(t);Dt(e),$(t)},Kt=function(t,e){Ct(t);var a=Gt(e);Dt(a),$(e)};return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.PageHeader,null,y.a.createElement(N.PageHeaderTitle,{title:$t})),n&&y.a.createElement(U.Main,null,y.a.createElement(_.a,n)),!n&&y.a.createElement(y.a.Fragment,null,y.a.createElement(U.Main,null,y.a.createElement(q.Card,null,y.a.createElement(de,null),y.a.createElement(J.CardBody,null,y.a.createElement(le,{orgs:X,statuses:ft,clusters:at,templates:ot,types:yt,sortables:ut,dateRanges:jt,onDelete:function(t,e){var a;Number.isInteger(e)&&(e=parseInt(e)),"Status"===t&&(a=ft.filter(function(t){return t.value===e})),"Type"===t&&(a=yt.filter(function(t){return t.value===e})),"Org"===t&&(a=X.filter(function(t){return t.value===e})),"Cluster"===t&&(a=at.filter(function(t){return t.value===e})),"Template"===t&&(a=ot.filter(function(t){return t.value===e})),Vt(t?"Date"===t?f()({},Jt,{date:null,startDate:null,endDate:null}):"SortBy"===t?f()({},Jt,{sortby:null}):f()({},Jt,r()({},t.toLowerCase(),Jt[t.toLowerCase()].filter(function(t){return t!==a[0].key.toString()}))):{status:[],type:[],org:[],cluster:[],template:[],sortby:null,date:null,startDate:null,endDate:null,showRootWorkflows:!1})},passedFilters:Jt,handleFilters:Vt}),y.a.createElement(pe,{itemCount:z.count?z.count:0,widgetId:"pagination-options-menu-top",perPageOptions:fe,perPage:Ot.limit,page:G,variant:H.PaginationVariant.bottom,dropDirection:"up",onPerPageSelect:function(t,e,a){Kt(e,a)},onSetPage:function(t,e){Qt(e)},isCompact:!0}),d&&y.a.createElement(F,{message:d}),!d&&A&&y.a.createElement(w.a,null),!d&&!A&&v.length<=0&&y.a.createElement(B,null),!d&&!A&&v.length>0&&y.a.createElement(y.a.Fragment,null,y.a.createElement(St,{jobs:v}),y.a.createElement(me,{itemCount:z.count?z.count:0,widgetId:"pagination-options-menu-bottom",perPageOptions:fe,perPage:Ot.limit,page:G,variant:H.PaginationVariant.bottom,dropDirection:"up",onPerPageSelect:function(t,e,a){Kt(e,a)},onSetPage:function(t,e){Qt(e)},style:{marginTop:"20px"}})))))))};be.propTypes={location:E.a.object,history:E.a.object};e.default=be},453:function(t,e,a){"use strict";a.r(e);var n=a(74),r=a.n(n),i=a(69),o=a.n(i),l=a(1),s=a.n(l),c=a(64),u=a.n(c),d=a(89),p=a(70),m=a(75),f=a(91),h=a(86),g=a(63),b=a(61),y=a(97),v=a(100),E=a(108),x=a(98),j=a(99),T=a(110),w=a.n(T),_=a(18),k=a.n(_),O=a(19),S=a.n(O),C=a(20),D=a.n(C),A=a(21),B=a.n(A),I=a(39),R=a.n(I),L=a(22),z=a.n(L),F=a(458),M=a(92),P=a(84),W=a(0),Y=a.n(W),U=a(79),N=a.n(U),q=function(){function t(e){var a=this;k()(this,t),N()(this,"handleMouseOver",function(t){var e=0,n=0,r=0,i=P.g.pageX-P.s(a.svg).node().getBoundingClientRect().x+10,o=P.g.pageY-P.s(a.svg).node().getBoundingClientRect().y-10,l=P.x("%m/%d");if(t){var s=a.toolTipBase.node().getBoundingClientRect().width,c=P.s(a.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<i/c*100;t&&(e=t.RAN||0,n=t.FAIL||0,r=t.TOTAL||0,a.date.text(l(t.DATE||null))),t&&t.data&&(e=t.data.RAN||0,n=t.data.FAIL||0,r=t.data.TOTAL||0,a.date.text(l(t.data.DATE||null))),a.jobs.text(r+" jobs"),a.jobsWidth=a.jobs.node().getComputedTextLength(),a.failed.text(""+n),a.successful.text(""+e),a.successTextWidth=a.successful.node().getComputedTextLength(),a.failTextWidth=a.failed.node().getComputedTextLength();var d,p=a.jobsWidth/a.boxWidth*100,m=p/40;d=p>40?a.boxWidth*m:a.boxWidth,a.boundingBox.attr("width",d),a.toolTipBase.attr("transform","translate("+i+","+o+")"),u?(a.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),a.boundingBox.attr("x",-d-20),a.circleGreen.attr("cx",-d),a.circleRed.attr("cx",-d),a.icon.attr("x",-d-2),a.successText.attr("x",17-d),a.failText.attr("x",17-d),a.successful.attr("x",-a.successTextWidth-20-12),a.failed.attr("x",-a.failTextWidth-20-12),a.date.attr("x",-d-5),a.jobs.attr("x",-a.jobsWidth/2-7),a.clickMore.attr("x",-d)):(a.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),a.boundingBox.attr("x",10),a.circleGreen.attr("cx",26),a.circleRed.attr("cx",26),a.icon.attr("x",24),a.successText.attr("x",43),a.failText.attr("x",43),a.successful.attr("x",d-a.successTextWidth),a.failed.attr("x",d-a.failTextWidth),a.date.attr("x",20),a.jobs.attr("x",d),a.clickMore.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),N()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.colors=e.colors,this.draw()}return S()(t,[{key:"draw",value:function(){this.toolTipBase=P.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=145,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-41).attr("rx",2).attr("height",110).attr("width",this.boxWidth).attr("fill","#393f44"),this.circleGreen=this.toolTipBase.append("circle").attr("cx",26).attr("cy",0).attr("r",7).attr("stroke","white").attr("fill",this.colors(1)),this.circleRed=this.toolTipBase.append("circle").attr("cx",26).attr("cy",26).attr("r",7).attr("stroke","white").attr("fill",this.colors(0)),this.successText=this.toolTipBase.append("text").attr("x",43).attr("y",4).attr("font-size",12).attr("fill","white").text("Successful"),this.failText=this.toolTipBase.append("text").attr("x",43).attr("y",28).attr("font-size",12).attr("fill","white").text("Failed"),this.icon=this.toolTipBase.append("text").attr("fill","white").attr("stroke","white").attr("x",24).attr("y",30).attr("font-size",12).text("!"),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("x",137).attr("y",-21).attr("font-size",12).attr("text-anchor","end").text("No jobs"),this.successful=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",4).text("0"),this.failed=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",28).text("0"),this.date=this.toolTipBase.append("text").attr("fill","white").attr("stroke","white").attr("x",20).attr("y",-21).attr("font-size",12).text("Never"),this.clickMore=this.toolTipBase.append("text").attr("fill","white").attr("x",20).attr("y",55).attr("font-size",12).text("Click for details")}}]),t}(),J=a(81),V=a(5),H=a(71),G=function(t){function e(t){var a;return k()(this,e),(a=D()(this,B()(e).call(this,t))).draw=a.draw.bind(R()(a)),a.init=a.init.bind(R()(a)),a.resize=a.resize.bind(R()(a)),a.redirectToJobExplorer=a.redirectToJobExplorer.bind(R()(a)),a.state={formattedData:[],timeout:null},a}return z()(e,t),S()(e,[{key:"redirectToJobExplorer",value:function(t){var e=t.data.DATE,a=V.a.jobExplorer,n=Object(H.g)(e),r={start_date:n,end_date:n,quick_date_range:"custom",status:["failed","successful"]},i=Object(J.a)(r),o=i.strings,l=(0,i.stringify)(o);this.props.history.push({pathname:a,search:l})}},{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){P.t("#"+this.props.id+" > *").remove();var t,e=P.y("%Y-%m-%d"),a=this.props,n=a.data,r=a.value,i=n.reduce(function(t,a){var n=a.created,r=a.successful,i=a.failed,o=e(n)||new Date,l=+r||0,s=+i||0,c=+r+i||0;return t.concat({DATE:o,RAN:l,FAIL:s,TOTAL:c})},[]),o=this.props.getWidth(),l=this.props.getHeight(),s=P.o().rangeRound([0,o]).padding(.35),c=P.p().range([l,0]),u=P.s("#"+this.props.id).append("svg").attr("width",o+this.props.margin.left+this.props.margin.right).attr("height",l+this.props.margin.top+this.props.margin.bottom).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),d=P.q(["#6EC664","#A30000"]),p=new q({svg:"#"+this.props.id,colors:d}),m=P.u().keys(["FAIL","RAN"]).order(P.w).offset(P.v)(i);s.domain(m[0].map(function(t){return t.data.DATE})),c.domain([0,P.l(m[m.length-1],function(t){return 1.15*t[1]})||8]),u.append("g").attr("class","y-axis").call(P.c(c).tickSize(-o,0,0)).selectAll("line").attr("stroke","#d7d7d7"),u.selectAll(".y-axis .tick text").attr("x",-5),u.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-l/2).attr("dy","1em").style("text-anchor","middle").text("Jobs across all clusters");var f=Math.round(i.length/(r/2));t=i.map(function(t){return t.DATE}),31===r&&(t=i.map(function(t,e){return e%f==0?t.DATE:void 0}).filter(function(t){return t})),u.append("g").attr("class","x-axis").attr("transform","translate(0,"+l+")").call(P.b(s).tickValues(t).tickFormat(P.x("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),u.selectAll(".x-axis .tick text").attr("y",10),u.append("text").attr("transform","translate("+o/2+" ,"+(l+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var h=u.selectAll("layer").data(m).enter().append("g").attr("class","layer").style("fill",function(t,e){return d(e)});h.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t){return s(t.data.DATE)}).attr("y",function(t){return c(t[0])}).attr("height",0).attr("width",s.bandwidth()-1).transition().duration(550).ease(P.f).attr("y",function(t){return c(t[1])}).attr("height",function(t){return c(t[0])-c(t[1])}),h.selectAll("rect").on("mouseover",p.handleMouseOver).on("mousemove",p.handleMouseOver).on("mouseout",p.handleMouseOut).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.value!==this.props.value&&this.init()}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id})}}]),e}(l.Component);G.propTypes={id:Y.a.string,data:Y.a.array,value:Y.a.number,margin:Y.a.object,getHeight:Y.a.func,getWidth:Y.a.func,history:Y.a.object};var $=Object(M.a)(Object(F.a)(G)),Q=function(t){function e(t){var a;return k()(this,e),(a=D()(this,B()(e).call(this,t))).init=a.init.bind(R()(a)),a.draw=a.draw.bind(R()(a)),a.resize=a.resize.bind(R()(a)),a.updateCluster=a.updateCluster.bind(R()(a)),a.redirectToJobExplorer=a.redirectToJobExplorer.bind(R()(a)),a.state={formattedData:[],timeout:null},a}return z()(e,t),S()(e,[{key:"redirectToJobExplorer",value:function(t){var e=t.DATE,a=V.a.jobExplorer,n=Object(H.g)(e),r={start_date:n,end_date:n,quick_date_range:"custom",status:["failed","successful"],cluster_id:this.props.clusterId},i=Object(J.a)(r),o=i.strings,l=(0,i.stringify)(o);this.props.history.push({pathname:a,search:l})}},{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"getTickCount",value:function(){var t=this.props.value;return t>20?t/2:t}},{key:"updateCluster",value:function(){this.init()}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){P.t("#"+this.props.id+" > *").remove();var t=this.props.getWidth(),e=this.props.getHeight();function a(t){t.transition().duration(1e3).attrTween("stroke-dasharray",n)}function n(){var t=this.getTotalLength(),e=P.j("0,"+t,t+","+t);return function(t){return e(t)}}var r=P.r().rangeRound([0,t]),i=P.p().range([e,0]),o=P.q(["#6EC664","#A30000","#06C"]),l=P.s("#"+this.props.id).append("svg").attr("width",t+this.props.margin.left+this.props.margin.right).attr("height",e+this.props.margin.top+this.props.margin.bottom).attr("z",100).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),s=new q({svg:"#"+this.props.id,colors:o}),c=this.props,u=c.data,d=c.value,p=P.y("%Y-%m-%d"),m=u.reduce(function(t,e){var a=e.created,n=e.successful,r=e.failed,i=p(a)||new Date,o=+n||0,l=+r||0,s=+n+r||0;return t.concat({DATE:i,RAN:o,FAIL:l,TOTAL:s})},[]);r.domain(P.h(m,function(t){return t.DATE})),i.domain([0,P.l(m,function(t){return 1.15*t.TOTAL||8})]);var f,h=P.k().curve(P.d).x(function(t){return r(t.DATE)}).y(function(t){return i(t.RAN)}),g=P.k().defined(function(t){return!isNaN(t.FAIL)}).curve(P.d).x(function(t){return r(t.DATE)}).y(function(t){return i(t.FAIL)});l.append("g").attr("class","y-axis").call(P.c(i).ticks(10).tickSize(-t)).selectAll("line").attr("stroke","#d7d7d7"),l.selectAll(".y-axis .tick text").attr("x",-5),l.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-e/2).attr("dy","1em").style("text-anchor","middle").text("Job runs");var b=Math.round(m.length/(d/2));f=m.map(function(t){return t.DATE}),31===d&&(f=m.map(function(t,e){return e%b==0?t.DATE:void 0}).filter(function(t){return t})),l.append("g").attr("class","x-axis").attr("transform","translate(0,"+e+")").call(P.b(r).tickValues(f).tickSize(-e).tickFormat(P.x("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),l.selectAll(".x-axis .tick text").attr("y",10),l.append("text").attr("transform","translate("+t/2+" ,"+(e+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var y=l.append("path").attr("class","mouse-line").style("stroke","black").style("stroke-width","3px").style("stroke-dasharray","3, 3").style("opacity","0"),v=function(t){s.handleMouseOver(t),y.transition().style("opacity","1")},E=function(){var t=this.cx.baseVal.value;y.attr("d",function(){var a="M"+t+","+e;return a+=" "+t+",0"})},x=function(){s.handleMouseOut(),y.transition().style("opacity",0)};l.append("path").data([m]).attr("class","line").style("fill","none").style("stroke",function(){return o(1)}).attr("stroke-width",2).attr("d",h).call(a),l.append("path").data([m]).attr("class","line").style("fill","none").style("stroke",function(){return o(0)}).attr("stroke-width",2).attr("d",g).call(a),l.selectAll("dot").data(m).enter().append("circle").attr("r",3).style("stroke",function(){return o(1)}).style("fill",function(){return o(1)}).attr("cx",function(t){return r(t.DATE)}).attr("cy",function(t){return i(t.RAN)}).on("mouseover",v).on("mousemove",E).on("mouseout",x).on("click",this.redirectToJobExplorer),l.selectAll("dot").data(m).enter().append("circle").attr("r",3).style("stroke",function(){return o(0)}).style("fill",function(){return o(0)}).attr("cx",function(t){return r(t.DATE)}).attr("cy",function(t){return i(t.FAIL)}).on("mouseover",v).on("mousemove",E).on("mouseout",x).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.updateCluster(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.value!==this.props.value&&this.updateCluster()}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id})}}]),e}(l.Component);Q.propTypes={id:Y.a.string,data:Y.a.array,value:Y.a.number,margin:Y.a.object,getHeight:Y.a.func,getWidth:Y.a.func,history:Y.a.object,clusterId:Y.a.number};var K=Object(M.a)(Object(F.a)(Q)),X=a(93),Z=a(136),tt=a(104),et=a(121),at=a(119);function nt(){var t=o()(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]);return nt=function(){return t},t}function rt(){var t=o()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n"]);return rt=function(){return t},t}function it(){var t=o()(["\n    --pf-c-data-list__cell-cell--MarginRight: 0;\n"]);return it=function(){return t},t}var ot=Object(p.a)(at.DataListCell)(it()),lt=Object(p.a)(et.DataListItem)(rt()),st=Object(p.a)(ot)(nt()),ct=function(t){var e=t.modules,a=t.isLoading;return s.a.createElement(tt.DataList,{"aria-label":"Top Modules",style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},s.a.createElement(lt,{"aria-labelledby":"top-modules-header"},s.a.createElement(ot,null,s.a.createElement("h3",null,"Top modules")),s.a.createElement(st,null,s.a.createElement("h3",null,"Usage"))),a&&s.a.createElement(et.DataListItem,{"aria-labelledby":"modules-loading",key:a,style:{border:"none"}},s.a.createElement(at.DataListCell,null,s.a.createElement(m.a,null))),!a&&e.length<=0&&s.a.createElement(et.DataListItem,{"aria-labelledby":"modules-no-data",key:a,style:{border:"none"}},s.a.createElement(at.DataListCell,null,s.a.createElement(X.a,null))),!a&&e.filter(function(t){return null!==t.module}).map(function(t,e){var a=t.module,n=t.count;return s.a.createElement(lt,{"aria-labelledby":"top-modules-detail",key:e},s.a.createElement(ot,null,s.a.createElement("span",null,Object(H.m)(a))),s.a.createElement(st,null,s.a.createElement(Z.Badge,{isRead:!0},n)))}))};ct.propTypes={modules:Y.a.array,isLoading:Y.a.bool};var ut=ct,dt=a(13),pt=a.n(dt),mt=a(23),ft=a.n(mt),ht=a(102),gt=a(370),bt=a(290),yt=a(369),vt=a.n(yt);function Et(){var t=o()(["\n    padding: 7px !important;\n"]);return Et=function(){return t},t}function xt(){var t=o()(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]);return xt=function(){return t},t}function jt(){var t=o()(["\n    display: grid;\n    grid-template-columns: repeat(3, auto);\n    grid-gap: 10px;\n    padding: var(--pf-global--spacer--lg);\n    background: #ebebeb;\n    border: 1px solid #ccc;\n    border-top: none;\n    margin-bottom: 20px;\n"]);return jt=function(){return t},t}function Tt(){var t=o()(["\n    padding: 7px;\n"]);return Tt=function(){return t},t}function wt(){var t=o()(["\n  padding: 0;\n  > .pf-c-data-list__cell {\n    font-weight: 600;\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n"]);return wt=function(){return t},t}function _t(){var t=o()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n  justify-content: center;\n  align-items: center;\n"]);return _t=function(){return t},t}function kt(){var t=o()(["\n    border-bottom: none;\n    margin-bottom: -20px;\n"]);return kt=function(){return t},t}function Ot(){var t=o()(["\n  --pf-c-data-list__cell-cell--MarginRight: 0;\n"]);return Ot=function(){return t},t}var St=s.a.createElement(vt.a,{size:"sm",key:"5",style:{color:"rgb(110, 198, 100)",marginRight:"5px"}}),Ct=s.a.createElement(s.a.Fragment,null,s.a.createElement(vt.a,{size:"sm",key:"5",style:{color:"rgb(163, 0, 0)",marginRight:"5px"}}),s.a.createElement("span",{id:"fail-icon"},"!")),Dt=Object(p.a)(at.DataListCell)(Ot()),At=Object(p.a)(et.DataListItem)(kt()),Bt=Object(p.a)(et.DataListItem)(_t()),It=Object(p.a)(Bt)(wt()),Rt=Object(p.a)(Dt)(Tt()),Lt=p.a.div(jt()),zt=Object(p.a)(Dt)(xt()),Ft=Object(p.a)(zt)(Et()),Mt=function(t){var e=t.history,a=t.clusterId,n=t.templates,i=t.isLoading,o=t.queryParams,c=Object(l.useState)(!1),u=r()(c,2),d=u[0],p=u[1],f=Object(l.useState)(null),g=r()(f,2),b=g[0],y=g[1],v=Object(l.useState)([]),E=r()(v,2),x=E[0],j=E[1],T=Object(l.useState)([]),w=r()(T,2),_=w[0],k=w[1];Object(l.useEffect)(function(){b&&function(){var t=ft()(pt.a.mark(function t(){return pt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.insights.chrome.auth.getUser();case 2:Object(h.l)(b,{params:o}).then(function(t){j(t),k(t.related_jobs)});case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[b]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(tt.DataList,{"aria-label":"Top Templates",style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},s.a.createElement(Bt,{"aria-labelledby":"top-templates-header"},s.a.createElement(Dt,null,s.a.createElement("h3",null,"Top templates")),s.a.createElement(zt,null,s.a.createElement("h3",null,"Usage"))),i&&s.a.createElement(et.DataListItem,{"aria-labelledby":"templates-loading",key:i,style:{border:"none"}},s.a.createElement(at.DataListCell,null,s.a.createElement(m.a,null))),!i&&n.length<=0&&s.a.createElement(et.DataListItem,{"aria-labelledby":"templates-no-data",key:i,style:{border:"none"}},s.a.createElement(at.DataListCell,null,s.a.createElement(X.a,null))),!i&&n.map(function(t,e){var a=t.name,n=t.count,r=t.id;return s.a.createElement(Bt,{"aria-labelledby":"top-templates-detail",key:e},s.a.createElement(Dt,null,s.a.createElement("a",{onClick:function(){p(!0),y(r)}},a)),s.a.createElement(zt,null,s.a.createElement(Z.Badge,{isRead:!0},n)))})),x&&x!==[]&&s.a.createElement(gt.Modal,{width:"80%",title:x.name?x.name:"no-template-name",isOpen:d,onClose:function(){p(!1),j([]),k([]),y(null)},actions:[s.a.createElement(ht.Button,{key:"cancel",variant:"secondary",onClick:function(){p(!1),j([]),k([]),y(null)}},"Close")]},s.a.createElement(tt.DataList,{"aria-label":"Selected Template Details"},s.a.createElement(At,{"aria-labelledby":"Selected Template Statistics"},s.a.createElement(Lt,null,s.a.createElement("div",{"aria-labelledby":"job runs"},s.a.createElement("b",{style:{marginRight:"10px"}},"Number of runs"),x.total_run_count?x.total_run_count:"Unavailable"),s.a.createElement("div",{"aria-labelledby":"total time"},s.a.createElement("b",{style:{marginRight:"10px"}},"Total time"),x.total_run?x.total_run:"Unavailable"),s.a.createElement("div",{"aria-labelledby":"Avg Time"},s.a.createElement("b",{style:{marginRight:"10px"}},"Avg time"),x.average_run?x.average_run:"Unavailable"),s.a.createElement("div",{"aria-labelledby":"success rate"},s.a.createElement("b",{style:{marginRight:"10px"}},"Success rate"),isNaN(x.success_rate)?"Unavailable":Object(H.j)(x.success_rate)),s.a.createElement("div",{"aria-labelledby":"most failed task"},s.a.createElement("b",{style:{marginRight:"10px"}},"Most failed task"),x.most_failed_tasks?function(t){if(t){if(t&&t[0]){var e=Object(H.j)(t[0].fail_rate);return"".concat(t[0].task_name," ").concat(e)}return"Unavailable"}}(x.most_failed_tasks):"Unavailable"))),s.a.createElement(It,null,s.a.createElement(Rt,{key:"last5jobs"},s.a.createElement(bt.Label,{variant:"outline"},"Last 5 jobs")),",",s.a.createElement(Ft,null,s.a.createElement(ht.Button,{component:"a",onClick:function(){var t=V.a.jobExplorer,n={template_id:b,status:["successful","failed","new","pending","waiting","error","canceled","running"],job_type:["job"],start_date:o.startDate,end_date:o.endDate,quick_date_range:"custom",cluster_id:a},r=Object(J.a)(n),i=r.strings,l=(0,r.stringify)(i);e.push({pathname:t,search:l})},variant:"link"},"View all jobs"))),s.a.createElement(It,{"aria-labelledby":"datalist header"},s.a.createElement(at.DataListCell,{key:"job heading"},"Id/Name"),s.a.createElement(at.DataListCell,{key:"cluster heading"},"Cluster"),s.a.createElement(at.DataListCell,{key:"start time heading"},"Start Time"),s.a.createElement(at.DataListCell,{key:"total time heading"},"Total Time")),_.length<=0&&s.a.createElement(m.a,null),_.length>0&&_.map(function(t,e){return s.a.createElement(Bt,{style:{padding:"10px 0"},key:"job-details-".concat(e),"aria-labelledby":"job details"},s.a.createElement(at.DataListCell,{key:"job name"},"successful"===t.status?St:Ct," ",t.job_id," - ",t.job_name),s.a.createElement(at.DataListCell,{key:"job cluster"},t.cluster_label||t.install_uuid),s.a.createElement(at.DataListCell,{key:"start time"},Object(H.h)(t.start_time)),s.a.createElement(at.DataListCell,{key:"total time"},Object(H.k)(t.total_time)))}))))};Mt.propTypes={templates:Y.a.array,isLoading:Y.a.bool,queryParams:Y.a.object};var Pt=Mt;function Wt(){var t=o()(["\n  border-bottom: 2px solid #ebebeb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  &&& {\n    min-height: 60px;\n    --pf-c-card--first-child--PaddingTop: 10px;\n    --pf-c-card__header--not-last-child--PaddingBottom: 10px;\n\n    h3 {\n      font-size: 0.875em;\n    }\n  }\n"]);return Wt=function(){return t},t}var Yt=Object(p.a)(E.CardTitle)(Wt()),Ut=s.a.createElement("span",{style:{fontWeight:400}},"Automation Analytics",s.a.createElement("span",{style:{fontSize:"16px",fontWeight:400}}," ",s.a.createElement("span",{style:{margin:"0 10px"}},"|")," Clusters")),Nt=[{value:"please choose",label:"Select date range",disabled:!0},{value:7,label:"Past week",disabled:!1},{value:14,label:"Past 2 weeks",disabled:!1},{value:31,label:"Past month",disabled:!1}];var qt={startDate:u()().subtract(1,"month").format("YYYY-MM-DD"),endDate:u()().format("YYYY-MM-DD")};e.default=function(t){var e=t.history,a=Object(l.useState)(null),n=r()(a,2),i=n[0],o=n[1],c=Object(l.useState)([]),u=r()(c,2),p=u[0],T=u[1],_=Object(l.useState)([]),k=r()(_,2),O=k[0],S=k[1],C=Object(l.useState)([]),D=r()(C,2),A=D[0],B=D[1],I=Object(l.useState)([]),R=r()(I,2),L=R[0],z=R[1],F=Object(l.useState)([]),M=r()(F,2),P=M[0],W=M[1],Y=Object(l.useState)(31),U=r()(Y,2),N=U[0],q=U[1],J=Object(l.useState)("all"),V=r()(J,2),H=V[0],G=V[1],Q=Object(l.useState)(!0),X=r()(Q,2),Z=X[0],tt=X[1],et=Object(d.a)(qt),at=et.queryParams,nt=et.setEndDate,rt=et.setStartDate,it=et.setId;return Object(l.useEffect)(function(){tt(!0),window.insights.chrome.auth.getUser().then(function(){return Object(h.a)().then(function(){return Object(h.c)().then(function(t){var e=t.templates,a=function(t){return t.reduce(function(t,e){var a=e.label,n=e.cluster_id,r=e.install_uuid;return 0===a.length?t.push({value:n,label:r,disabled:!1}):t.push({value:n,label:a,disabled:!1}),t},[{value:"please choose",label:"Select cluster",disabled:!0},{value:"all",label:"All clusters",disabled:!1}])}(void 0===e?[]:e);W(a),tt(!1)})}).catch(function(t){o({preflightError:t})})})},[]),Object(l.useEffect)(function(){tt(!0),window.insights.chrome.auth.getUser().then(function(){return Promise.all([Object(h.b)({params:at}),Object(h.i)({params:at}),Object(h.m)({params:at})]).then(function(t){var e=r()(t,3),a=e[0].data,n=void 0===a?[]:a,i=e[1].modules,o=void 0===i?[]:i,l=e[2].templates,s=void 0===l?[]:l;at.id?S(n):T(n),z(o),B(s),tt(!1)}).catch(function(){return[]})})},[at]),s.a.createElement(s.a.Fragment,null,s.a.createElement(b.PageHeader,null,s.a.createElement(b.PageHeaderTitle,{title:Ut})),i&&s.a.createElement(g.Main,null,s.a.createElement(f.a,i)),!i&&s.a.createElement(s.a.Fragment,null,s.a.createElement(g.Main,{style:{paddingBottom:"0"}},s.a.createElement(y.Card,null,s.a.createElement(Yt,{style:{paddingBottom:"0",paddingTop:"0"}},s.a.createElement("h2",null,s.a.createElement(w.a,{style:{marginRight:"10px"}}),"Filter"),s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},s.a.createElement(x.FormSelect,{name:"selectedCluster",value:H,onChange:function(t){G(t),it(t)},"aria-label":"Select Cluster",style:{margin:"2px 10px"}},P.map(function(t,e){var a=t.value,n=t.label,r=t.disabled;return s.a.createElement(j.FormSelectOption,{isDisabled:r,key:e,value:a,label:n})})),s.a.createElement(x.FormSelect,{name:"clusterTimeFrame",value:N,onChange:function(t){q(+t),nt(),rt(+t)},"aria-label":"Select Date Range",style:{margin:"2px 10px"}},Nt.map(function(t,e){return s.a.createElement(j.FormSelectOption,{isDisabled:t.disabled,key:e,value:t.value,label:t.label})})))))),s.a.createElement(g.Main,null,s.a.createElement(y.Card,null,s.a.createElement(E.CardTitle,null,s.a.createElement("h2",null,"Job status")),s.a.createElement(v.CardBody,null,Z&&!i&&s.a.createElement(m.a,null),"all"===H&&p.length>0&&!Z&&s.a.createElement($,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-bar-chart-root",data:p,value:N}),"all"!==H&&O.length>0&&!Z&&s.a.createElement(K,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-line-chart-root",data:O,value:N,clusterId:at.id}))),s.a.createElement("div",{className:"dataCard",style:{display:"flex",marginTop:"20px"}},s.a.createElement(Pt,{history:e,queryParams:at,clusterId:at.id,templates:A.slice(0,10),isLoading:Z}),s.a.createElement(ut,{modules:L.slice(0,10),isLoading:Z})))))}},454:function(t,e,a){"use strict";a.r(e);var n=a(13),r=a.n(n),i=a(23),o=a.n(i),l=a(74),s=a.n(l),c=a(69),u=a.n(c),d=a(1),p=a.n(d),m=a(70),f=a(64),h=a.n(f),g=a(89),b=a(75),y=a(93),v=a(91),E=a(86),x=a(63),j=a(61),T=a(97),w=a(100),_=a(108),k=a(98),O=a(99),S=a(110),C=a.n(S),D=a(85),A=a.n(D),B=a(20),I=a.n(B),R=a(21),L=a.n(R),z=a(39),F=a.n(z),M=a(22),P=a.n(M),W=a(18),Y=a.n(W),U=a(19),N=a.n(U),q=a(79),J=a.n(q),V=a(0),H=a.n(V),G=a(458),$=a(92),Q=a(84),K=a(291);function X(){var t=u()(["\n  margin-left: 20px;\n\n  svg {\n    display: none;\n  }\n"]);return X=function(){return t},t}function Z(){var t=u()(["\n    font-size: 12px;\n    margin-left: 20px;\n"]);return Z=function(){return t},t}function tt(){var t=u()(["\n  font-size: 12px;\n  display: inline-block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: left;\n"]);return tt=function(){return t},t}function et(){var t=u()(["\n  min-width: 12px;\n  height: 12px;\n  background: ",";\n  margin-right: 20px;\n"]);return et=function(){return t},t}function at(){var t=u()(["\n  display: flex;\n  align-items: center;\n  overflow: auto;\n"]);return at=function(){return t},t}function nt(){var t=u()(["\n  display: flex;\n  padding: 5px 10px;\n  align-items: center;\n  justify-content: space-between;\n"]);return nt=function(){return t},t}function rt(){var t=u()(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n  overflow: auto;\n  width: 100%;\n  height: ",";\n"]);return rt=function(){return t},t}var it=m.a.div(rt(),function(t){return t.height}),ot=m.a.div(nt()),lt=m.a.div(at()),st=m.a.div.attrs(function(t){return{color:t.color||"black"}})(et(),function(t){return t.color}),ct=m.a.span(tt()),ut=m.a.span(Z()),dt=Object(m.a)(K.Switch)(X()),pt=function(t){function e(t){var a;return Y()(this,e),(a=I()(this,L()(e).call(this,t))).handleChange=a.handleChange.bind(F()(a)),a}return P()(e,t),N()(e,[{key:"handleChange",value:function(t,e){var a=e.target.value;(0,this.props.onToggle)(parseFloat(a))}},{key:"render",value:function(){var t=this,e=this.props,a=e.data,n=e.selected,r=e.height;return p.a.createElement(it,{height:r},a.map(function(e,a){var r=e.name,i=e.value,o=e.id,l=e.count;return p.a.createElement(ot,{key:a},p.a.createElement(lt,null,p.a.createElement(st,{color:i}),p.a.createElement(ct,null,r)),l&&p.a.createElement(ut,null,l),n&&p.a.createElement(dt,{isChecked:n.some(function(t){return t===o}),onChange:t.handleChange,"aria-label":r,value:o,id:"".concat(r,"-").concat(o)}))}))}}]),e}(d.Component);pt.propTypes={data:H.a.array,selected:H.a.array,onToggle:H.a.func,height:H.a.string};var mt=pt,ft=a(5),ht=a(71),gt=a(81),bt=["#06C","#4CB140","#009596","#5752D1","#F4C145","#EC7A08","#8BC1F7","#23511E","#A2D9D9","#2A265F","#F9E0A2","#8F4700","#002F5D"];function yt(){var t=u()(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n"]);return yt=function(){return t},t}var vt=m.a.div(yt()),Et=Q.q(bt),xt=function(){function t(e){var a=this;Y()(this,t),J()(this,"handleMouseOver",function(t){var e,n,r,i=Q.g.pageX-Q.s(a.svg).node().getBoundingClientRect().x+10,o=Q.g.pageY-Q.s(a.svg).node().getBoundingClientRect().y-10;if(t){e=t.date,n=t.org_name,r=t.value,t.org_name.length>16&&(n=t.org_name.slice(0,16).concat("..."));var l=Q.x("%m/%d"),s=a.toolTipBase.node().getBoundingClientRect().width,c=Q.s(a.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<i/c*100;a.date.text(""+l(e)),a.orgName.text(""+n),a.jobs.text(r+" Jobs"),a.jobsWidth=a.jobs.node().getComputedTextLength();var d,p=a.jobsWidth/a.boxWidth*100,m=p/45;d=p>45?a.boxWidth*m:a.boxWidth,a.boundingBox.attr("width",d),a.toolTipBase.attr("transform","translate("+i+","+o+")"),u?(a.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),a.boundingBox.attr("x",-d-20),a.jobs.attr("x",-a.jobsWidth-20-7),a.orgName.attr("x",-d-7),a.clickMore.attr("x",-d-7),a.date.attr("x",-d-7)):(a.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),a.boundingBox.attr("x",10),a.orgName.attr("x",20),a.clickMore.attr("x",20),a.jobs.attr("x",d/2),a.date.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),J()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.draw()}return N()(t,[{key:"draw",value:function(){this.width=125,this.toolTipBase=Q.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=125,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",68).attr("width",this.boxWidth).attr("fill","#393f44"),this.date=this.toolTipBase.append("text").attr("x",20).attr("y",14).attr("font-size",12).attr("fill","white").text("Date"),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",72).attr("y",14).text("0 Jobs"),this.orgName=this.toolTipBase.append("text").attr("fill","white").attr("font-weight",800).attr("x",20).attr("y",-1).attr("font-size",12).text("Org"),this.clickMore=this.toolTipBase.append("text").attr("fill","white").attr("x",20).attr("y",30).attr("font-size",12).text("Click for details")}}]),t}(),jt=function(t){function e(t){var a;return Y()(this,e),(a=I()(this,L()(e).call(this,t))).init=a.init.bind(F()(a)),a.handleToggle=a.handleToggle.bind(F()(a)),a.draw=a.draw.bind(F()(a)),a.resize=a.resize.bind(F()(a)),a.redirectToJobExplorer=a.redirectToJobExplorer.bind(F()(a)),a.orgsList=t.data[0].orgs,a.selection=[],a.state={colors:[],selected:[],formattedData:[],timeout:null},a}return P()(e,t),N()(e,[{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"redirectToJobExplorer",value:function(t){var e,a=t.date,n=t.id;if(-1!==n){e=n;var r=ft.a.jobExplorer,i=Object(ht.g)(a),o={start_date:i,end_date:i,status:["successful","failed","new","pending","waiting","error","canceled","running"],quick_date_range:"custom",org_id:e},l=Object(gt.a)(o),s=l.strings,c=(0,l.stringify)(s);this.props.history.push({pathname:r,search:c})}}},{key:"handleToggle",value:function(t){-1===this.selection.indexOf(t)?this.selection=[].concat(A()(this.selection),[t]):this.selection.includes(t)&&(this.selection=A()(this.selection).filter(function(e){return e!==t})),this.setState({selected:this.selection}),this.draw()}},{key:"init",value:function(){var t=this;0===this.selection.length&&this.orgsList.forEach(function(e,a){a<=7&&t.handleToggle(e.id)});var e=this.orgsList.reduce(function(t,e){return t.push({name:e.org_name,value:Et(e.org_name),id:e.id}),t},[]);this.setState({colors:e}),this.draw()}},{key:"draw",value:function(){Q.t("#"+this.props.id+" > *").remove();var t,e=this.props,a=e.data,n=e.timeFrame,r=this.selection,i=Q.y("%Y-%m-%d"),o=a.reduce(function(t,e){var a=e.date,n=e.orgs;a=i(a);var o=n.filter(function(t){var e=t.id;return r.includes(e)});return o.map(function(t){t.date=a}),t.concat({date:a,selectedOrgs:o})},[]),l=this.props.getWidth(),s=this.props.getHeight(),c=Q.o().range([0,l]).padding(.35),u=Q.o(),d=Q.p().range([s,0]),p=Math.round(o.length/(n/2));t=o.map(function(t){return t.date}),31===n&&(t=o.map(function(t,e){return e%p==0?t.date:void 0}).filter(function(t){return t}));var m=Q.b(c).tickValues(t).tickFormat(Q.x("%-m/%-d")),f=Q.c(d).ticks(8).tickSize(-l,0,0),h=Q.s("#"+this.props.id).append("svg").attr("width",l+this.props.margin.left+this.props.margin.right).attr("height",s+this.props.margin.bottom+this.props.margin.top).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),g=o.map(function(t){return t.date}),b=o[0].selectedOrgs.map(function(t){return t.org_name}),y=new xt({svg:"#"+this.props.id});c.domain(g),u.domain(b).range([0,c.bandwidth()]),d.domain([0,Q.l(o,function(t){return Q.l(t.selectedOrgs,function(t){return 1.15*t.value})})||8]),h.append("g").attr("class","y axis").call(f).selectAll("line").attr("stroke","#d7d7d7").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-weight","bold").text("Value"),h.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-s/2).attr("dy","1em").style("text-anchor","middle").text("Jobs across orgs"),h.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(m).selectAll("line").attr("stroke","#d7d7d7"),h.append("text").attr("transform","translate("+l/2+" ,"+(s+this.props.margin.top+25)+")").style("text-anchor","middle").text("Date");var v=h.selectAll(".slice").data(o);v.exit().remove();var E=v.enter().append("g").attr("class","g foo").attr("transform",function(t){return"translate("+c(t.date)+",0)"}),x=(v=v.merge(E)).selectAll("rect").data(function(t){return t.selectedOrgs});x.exit().remove();var j=x.enter().append("rect").attr("width",u.bandwidth()).attr("x",function(t){return u(t.org_name)}).style("fill",function(t){return Et(t.org_name)}).attr("y",function(t){return d(t.value)}).attr("height",function(t){return s-d(t.value)}).on("mouseover",function(t){Q.s(this).style("fill",Q.n(Et(t.org_name)).darker(1)),y.handleMouseOver()}).on("mousemove",y.handleMouseOver).on("mouseout",function(t){Q.s(this).style("fill",Et(t.org_name)),y.handleMouseOut()}).on("click",this.redirectToJobExplorer);x=x.merge(j)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var t=this.state,e=t.colors,a=t.selected;return p.a.createElement(vt,null,p.a.createElement("div",{id:this.props.id}),e.length>0&&p.a.createElement(mt,{id:"d3-grouped-bar-legend",data:e,selected:a,onToggle:this.handleToggle,height:"350px"}))}}]),e}(d.Component);jt.propTypes={id:H.a.string,isAccessible:H.a.bool,data:H.a.array,value:H.a.array,margin:H.a.object,getHeight:H.a.func,getWidth:H.a.func,timeFrame:H.a.number,history:H.a.object};var Tt=Object($.a)(Object(G.a)(jt));function wt(){var t=u()(["\n  display: flex;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n"]);return wt=function(){return t},t}var _t=m.a.div(wt()),kt=function(){function t(e){var a=this;Y()(this,t),J()(this,"handleMouseOver",function(t){var e,n,r;!0!==a.drawn&&(a.draw(t),a.drawn=!0);var i=Q.g.pageX-Q.s(a.svg).node().getBoundingClientRect().x+10,o=Q.g.pageY-Q.s(a.svg).node().getBoundingClientRect().y-10;if(t){if(t&&t.data){e=t.data.percent,n=t.data.success_rate,r=t.data.name,t.data.name.length>16&&(r=t.data.name.slice(0,13).concat("..."))}var l=a.toolTipBase.node().getBoundingClientRect().width,s=Q.s(a.svg+"> svg").node().getBoundingClientRect().width,c=100-l/s*100<i/s*100;a.percentageTotal.text(e+"%"),n&&a.percentageSuccess&&a.percentageSuccess.text("("+n+"% successful)"),a.orgName.text(" "+r),a.toolTipBase.attr("transform","translate("+i+","+o+")"),c?(a.toolTipPoint.attr("transform","translate(-20, -10) rotate(45)"),a.boundingBOx.attr("x",-125),a.orgName.attr("x",-112),a.percentageTotal.attr("x",-112),a.showSuccess&&a.percentageSuccess.attr("x",-112)):(a.toolTipPoint.attr("transform","translate(10, -10) rotate(45)"),a.boundingBOx.attr("x",10),a.orgName.attr("x",20),a.percentageTotal.attr("x",20),a.showSuccess&&a.percentageSuccess.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),J()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.drawn=!1,this.showSuccess=!1}return N()(t,[{key:"draw",value:function(t){this.showSuccess=!!(t&&t.data&&"success_rate"in t.data);var e=this.showSuccess?70:52,a=this.showSuccess?120:108;this.toolTipBase=Q.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBOx=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",e).attr("width",a).attr("fill","#393f44"),this.orgName=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",0).text("Organization"),this.percentageTotal=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",16).text("0"),this.percentageSuccess=null,this.showSuccess&&(this.percentageSuccess=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",30).text(""))}}]),t}(),Ot=function(t){function e(t){var a;return Y()(this,e),(a=I()(this,L()(e).call(this,t))).state={colors:[],timeout:null},a.draw=a.draw.bind(F()(a)),a.init=a.init.bind(F()(a)),a.resize=a.resize.bind(F()(a)),a}return P()(e,t),N()(e,[{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"sortDescending",value:function(t){t.sort(function(t,e){return Q.e(parseFloat(t.count),parseFloat(e.count))})}},{key:"init",value:function(){var t=this.props.data,e=Q.q(bt),a=t.reduce(function(t,a){return-1===a.id?t.push({name:"Others",value:e(a.name),count:Math.round(a.count)}):t.push({name:a.name,value:e(a.name),count:Math.round(a.count)}),t},[]);this.setState({colors:a}),this.draw()}},{key:"draw",value:function(){var t=Q.q(bt);Q.t("#"+this.props.id+" > *").remove();var e=this.props.getWidth(),a=this.props.getHeight(),n=Q.s("#"+this.props.id).append("svg").attr("width",e+this.props.margin.left+this.props.margin.right).attr("height",a+this.props.margin.bottom).append("g");n.append("g").attr("class","slices"),n.append("g").attr("class","labels"),n.append("g").attr("class","lines");var r=Math.min(e,a)/2,i=this.props.data.filter(function(t){return-1!==t.id}),o=Object(ht.l)(i);i.forEach(function(t){t.count=+t.count,t.percent=+Math.round(t.count/o*100)});var l=new kt({svg:"#"+this.props.id}),s=Q.m().sort(null).value(function(t){return t.count}),c=Q.a().outerRadius(r-10).innerRadius(0);n.attr("transform","translate("+(e+this.props.margin.left+this.props.margin.right)/2+","+(a+this.props.margin.top+this.props.margin.bottom)/2+")"),n.selectAll("path").data(s(i)).enter().append("path").attr("d",c).attr("fill",function(e,a){return t(a)}),n.selectAll("path").on("mouseover",function(e,a){Q.s(this).style("fill",Q.n(t(a)).darker(1)),l.handleMouseOver(e)}).on("mouseout",function(e,a){Q.s(this).style("fill",t(a)),l.handleMouseOut()}).on("mousemove",l.handleMouseOver),n.append("g").classed("labels",!0),n.append("g").classed("lines",!0)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.data!==this.props.data&&this.init()}},{key:"render",value:function(){var t=this.state.colors;return p.a.createElement(_t,null,p.a.createElement("div",{id:this.props.id}),t.length>0&&p.a.createElement(mt,{id:"d3-grouped-bar-legend",data:t,selected:null,onToggle:null,height:"300px"}))}}]),e}(d.Component);Ot.propTypes={id:H.a.string,isAccessible:H.a.bool,data:H.a.array,margin:H.a.object,getHeight:H.a.func,getWidth:H.a.func,timeFrame:H.a.number};var St=Object($.a)(Ot);function Ct(){var t=u()(["\n  min-height: 500px;\n"]);return Ct=function(){return t},t}function Dt(){var t=u()(["\n  display: flex;\n  overflow: hidden;\n\n  .pf-c-card {\n    width: 50%;\n    margin-top: 20px;\n    overflow: auto;\n  }\n\n  .pf-c-card:first-of-type {\n    margin-right: 20px;\n  }\n"]);return Dt=function(){return t},t}function At(){var t=u()(["\n  border-bottom: 2px solid #ebebeb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  &&& {\n    min-height: 60px;\n    --pf-c-card--first-child--PaddingTop: 10px;\n    --pf-c-card__header--not-last-child--PaddingBottom: 10px;\n\n    h3 {\n      font-size: 0.875em;\n    }\n  }\n"]);return At=function(){return t},t}var Bt=Object(m.a)(_.CardTitle)(At()),It=m.a.div(Dt()),Rt=Object(m.a)(T.Card)(Ct()),Lt=p.a.createElement("span",{style:{fontWeight:400}},"Automation Analytics",p.a.createElement("span",{style:{fontSize:"16px",fontWeight:400}}," ",p.a.createElement("span",{style:{margin:"0 10px"}},"|")," Organization Statistics")),zt=[{value:"please choose",label:"Select Date Range",disabled:!0},{value:7,label:"Past Week",disabled:!1},{value:14,label:"Past 2 Weeks",disabled:!1},{value:31,label:"Past Month",disabled:!1}],Ft=[{value:"please choose",label:"Order By",disabled:!0},{value:"count:desc",label:"Top 5 Orgs",disabled:!1},{value:"count:asc",label:"Bottom 5 Orgs",disabled:!1},{value:"all",label:"All Orgs",disabled:!1}],Mt={startDate:h()().subtract(1,"month").format("YYYY-MM-DD"),endDate:h()().format("YYYY-MM-DD"),sort_by:"count:desc",limit:5};e.default=function(){var t=Object(d.useState)(null),e=s()(t,2),a=e[0],n=e[1],i=Object(d.useState)([]),l=s()(i,2),c=l[0],u=l[1],m=Object(d.useState)([]),f=s()(m,2),h=f[0],_=f[1],S=Object(d.useState)([]),D=s()(S,2),A=D[0],B=D[1],I=Object(d.useState)(31),R=s()(I,2),L=R[0],z=R[1],F=Object(d.useState)("count:desc"),M=s()(F,2),P=M[0],W=M[1],Y=Object(d.useState)(!0),U=s()(Y,2),N=U[0],q=U[1],J=Object(d.useState)(!0),V=s()(J,2),H=V[0],G=V[1],$=Object(g.a)(Mt),Q=$.queryParams,K=$.setEndDate,X=$.setStartDate,Z=$.setSortBy,tt=$.setLimit;return Object(d.useEffect)(function(){var t=!1,e=function(){return Promise.all([Object(E.h)({params:Q}),Object(E.g)({params:Q}),Object(E.d)({params:Q})].map(function(t){return t.catch(function(){return[]})}))},a=function(){var t=o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return G(!0),t.next=3,window.insights.chrome.auth.getUser();case 3:e().then(function(t){var e=s()(t,3),a=e[0].dates,n=void 0===a?[]:a,r=e[1].usages,i=void 0===r?[]:r,o=e[2].usages,l=void 0===o?[]:o;B(n),u(i),_(l),G(!1)});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();function i(){return(i=o()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return G(!0),a.next=3,window.insights.chrome.auth.getUser();case 3:return a.next=5,Object(E.a)().catch(function(t){n({preflightError:t})});case 5:e().then(function(e){var a=s()(e,3),n=a[0].dates,r=void 0===n?[]:n,i=a[1].usages,o=void 0===i?[]:i,l=a[2].usages,c=void 0===l?[]:l;t||(B(r),u(o),_(c),q(!1),G(!1))});case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}if(N)return function(){i.apply(this,arguments)}(),function(){return t=!0};a()},[Q]),p.a.createElement(p.a.Fragment,null,p.a.createElement(j.PageHeader,null,p.a.createElement(j.PageHeaderTitle,{title:Lt})),a&&p.a.createElement(x.Main,null,p.a.createElement(v.a,a)),!a&&p.a.createElement(p.a.Fragment,null,p.a.createElement(x.Main,{style:{paddingBottom:"0"}},p.a.createElement(T.Card,null,p.a.createElement(Bt,{style:{paddingBottom:"0",paddingTop:"0"}},p.a.createElement("h2",null,p.a.createElement(C.a,{style:{marginRight:"10px"}}),"Filter"),p.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},p.a.createElement(k.FormSelect,{name:"sortOrder",value:P,onChange:function(t){W(t),Z(t),function(t){tt("count:asc"===t||"count:desc"===t?5:200)}(t)},"aria-label":"Select Cluster",style:{margin:"2px 10px"}},Ft.map(function(t,e){var a=t.value,n=t.label,r=t.disabled;return p.a.createElement(O.FormSelectOption,{isDisabled:r,key:e,value:a,label:n})})),p.a.createElement(k.FormSelect,{name:"timeframe",value:L,onChange:function(t){z(+t),K(),X(+t)},"aria-label":"Select Date Range",style:{margin:"2px 10px"}},zt.map(function(t,e){return p.a.createElement(O.FormSelectOption,{isDisabled:t.disabled,key:e,value:t.value,label:t.label})})))))),p.a.createElement(x.Main,null,p.a.createElement(Rt,null,p.a.createElement(Bt,null,p.a.createElement("h2",null,"Organization Status")),p.a.createElement(w.CardBody,null,H&&p.a.createElement(b.a,null),!H&&A.length<=0&&p.a.createElement(y.a,null),!H&&A.length>0&&p.a.createElement(Tt,{margin:{top:20,right:20,bottom:50,left:50},id:"d3-grouped-bar-chart-root",data:A,timeFrame:L}))),p.a.createElement(It,null,p.a.createElement(T.Card,null,p.a.createElement(w.CardBody,{style:{padding:0}},p.a.createElement(Bt,{style:{padding:0}},p.a.createElement("h2",{style:{marginLeft:"20px"}},"Job Runs by Organization")),H&&p.a.createElement(b.a,null),!H&&c.length<=0&&p.a.createElement(y.a,null),!H&&c.length>0&&p.a.createElement(St,{margin:{top:20,right:20,bottom:0,left:20},id:"d3-donut-1-chart-root",data:c,timeFrame:L}))),p.a.createElement(T.Card,null,p.a.createElement(w.CardBody,{style:{padding:0}},p.a.createElement(Bt,{style:{padding:0}},p.a.createElement("h2",{style:{marginLeft:"20px"}},"Usage by Organization (Tasks)")),H&&p.a.createElement(b.a,null),!H&&h.length<=0&&p.a.createElement(y.a,null),!H&&h.length>0&&p.a.createElement(St,{margin:{top:20,right:20,bottom:0,left:20},id:"d3-donut-2-chart-root",data:h,timeFrame:L})))))))}},457:function(t,e,a){"use strict";a.r(e);var n=a(13),r=a.n(n),i=a(23),o=a.n(i),l=a(74),s=a.n(l),c=a(85),u=a.n(c),d=a(69),p=a.n(d),m=a(1),f=a.n(m),h=a(64),g=a.n(h),b=a(70),y=a(89),v=a(75),E=a(93),x=a(91),j=a(86),T=a(5),w=a(81),_=a(63),k=a(61),O=a(102),S=a(97),C=a(100),D=a(108),A=a(98),B=a(99),I=a(308),R=a(310),L=a(151),z=a(62),F=a(87),M=a(422),P=a.n(M),W=a(110),Y=a.n(W),U=a(296),N=a.n(U),q=a(423),J=a.n(q),V=a(424),H=a.n(V),G=a(20),$=a.n(G),Q=a(21),K=a.n(Q),X=a(39),Z=a.n(X),tt=a(22),et=a.n(tt),at=a(18),nt=a.n(at),rt=a(19),it=a.n(rt),ot=a(79),lt=a.n(ot),st=a(0),ct=a.n(st),ut=a(84),dt=a(92),pt=function(){function t(e){var a=this;nt()(this,t),lt()(this,"handleMouseOver",function(t){var e,n,r,i,o=ut.s("#d3-roi-chart-root").node().scrollLeft,l=ut.g.pageX-ut.s(a.svg).node().getBoundingClientRect().x+10+o,s=ut.g.pageY-ut.s(a.svg).node().getBoundingClientRect().y-30;if(t){n=a.formatDollars(t.delta),e=t.name,r=a.formatDollars(t.calculations[0].cost),i=a.formatDollars(t.calculations[1].cost);var c=a.toolTipBase.node().getBoundingClientRect().width,u=ut.s(a.svg+"> svg").node().getBoundingClientRect().width,d=100-c/u*100<l/u*100;a.name.text(""+e),a.savings.text("Total savings $"+n),a.manualCost.text("Manual Cost $"+r),a.automationCost.text("Automation Cost $"+i),a.nameWidth=a.name.node().getComputedTextLength(),a.savingsWidth=a.savings.node().getComputedTextLength(),a.manualCostWidth=a.manualCost.node().getComputedTextLength(),a.automationCostWidth=a.automationCost.node().getComputedTextLength(),a.widestTextElem=ut.l([a.nameWidth,a.savingsWidth,a.automationCostWidth,a.manualCostWidth]);var p,m=a.widestTextElem/a.boxWidth*100,f=m/85;p=m>85?a.boxWidth*f:a.boxWidth,a.boundingBox.attr("width",p),a.toolTipBase.attr("transform","translate("+l+","+s+")"),d?(a.toolTipPoint.attr("transform","translate(-20, 15) rotate(45)"),a.boundingBox.attr("x",-p-20),a.name.attr("x",-(c-7)),a.savings.attr("x",-(c-7)),a.manualCost.attr("x",-(c-7)),a.automationCost.attr("x",-(c-7))):(a.toolTipPoint.attr("transform","translate(10, 15) rotate(45)"),a.boundingBox.attr("x",10),a.name.attr("x",20),a.savings.attr("x",20),a.manualCost.attr("x",20),a.automationCost.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),lt()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.draw()}return it()(t,[{key:"formatDollars",value:function(t){return parseFloat(t).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"draw",value:function(){this.width=125,this.toolTipBase=ut.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=125,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, 0) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",92).attr("width",this.boxWidth).attr("fill","#393f44"),this.name=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",-2).text("Template name"),this.savings=this.toolTipBase.append("text").attr("x",20).attr("y",52).attr("font-size",12).attr("font-weight","bold").attr("fill","white").text("Total savings $0"),this.manualCost=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",16).text("Manual cost $0"),this.automationCost=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",34).text("Automation cost $0")}}]),t}(),mt=function(t){function e(t){var a;return nt()(this,e),(a=$()(this,K()(e).call(this,t))).init=a.init.bind(Z()(a)),a.draw=a.draw.bind(Z()(a)),a.resize=a.resize.bind(Z()(a)),a.state={timeout:null},a}return et()(e,t),it()(e,[{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){var t=ut.q(["#0066CC"]);ut.t("#"+this.props.id+" > *").remove();var e,a=this.props,n=a.data,r=a.selected,i=n.filter(function(t){var e=t.id;return!r.includes(e)});(i.forEach(function(t){t.calculations.forEach(function(e){e.name=t.name})}),i.length>=15)?e=ut.s(".automation-wrapper").node().getBoundingClientRect().width-this.props.margin.left-this.props.margin.right:e=this.props.getWidth();var o,l=this.props.getHeight(),s=ut.o().rangeRound([0,e]).padding(.45),c=ut.p().range([l,0]);o=i.map(function(t){return t.name});var u=ut.i(".2s"),d=ut.b(s).tickValues(o),p=ut.c(c).ticks(8).tickFormat(function(t){return u(t).replace("G","B")}).tickSize(-e,0,0),m=ut.s("#"+this.props.id).append("svg").attr("width",e+this.props.margin.left+this.props.margin.right).attr("height",l+this.props.margin.bottom+this.props.margin.top).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),f=i.map(function(t){return t.name}),h=new pt({svg:"#"+this.props.id});s.domain(f),c.domain([0,ut.l(i,function(t){return 1.15*t.delta})||8]),m.append("g").attr("class","y axis").call(p).selectAll("line").attr("stroke","#d7d7d7").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-weight","bold").text("Value"),m.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-l/2).attr("dy","1em").style("text-anchor","middle").text("Savings per template ($)"),m.append("g").attr("class","x-axis").attr("transform","translate(0,"+l+")").call(d).selectAll("text").style("text-anchor","start").attr("dx","0.75em").attr("dy",-s.bandwidth()/1.45-5).attr("transform","rotate(-90)"),m.selectAll(".x-axis line").attr("stroke","transparent"),m.selectAll(".bar").data(i).enter().append("rect").attr("x",function(t){return s(t.name)}).attr("width",s.bandwidth()).attr("y",function(t){return c(t.delta)}).style("fill",function(e){return t(e.type)}).attr("height",function(t){return l-c(t.delta)}).on("mouseover",function(e){ut.s(this).style("fill",ut.n(t(e.type)).darker(1)),h.handleMouseOver(e)}).on("mousemove",h.handleMouseOver).on("mouseout",function(e){ut.s(this).style("fill",t(e.type)),h.handleMouseOut()})}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"render",value:function(){return f.a.createElement("div",{id:this.props.id})}}]),e}(m.Component);mt.propTypes={id:ct.a.string,data:ct.a.array,selected:ct.a.array,margin:ct.a.object,getHeight:ct.a.func,getWidth:ct.a.func};var ft=Object(dt.a)(mt),ht=a(71);function gt(){var t=p()(["\n  flex: 2;\n  display: flex;\n  flex-direction: column;\n"]);return gt=function(){return t},t}function bt(){var t=p()(["\n  flex: 5;\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]);return bt=function(){return t},t}function yt(){var t=p()(["\n  display: grid;\n  grid-template-columns: 5fr 2fr;\n  height: 100%;\n"]);return yt=function(){return t},t}function vt(){var t=p()(["\n  & svg {\n    fill: var(--pf-global--Color--dark-200);\n\n    :hover {\n      cursor: pointer;\n    }\n\n    :first-of-type {\n      margin-right: 10px;\n      margin-left: 10px;\n\n      @media (max-width: 1350px) {\n        margin-left: 0;\n      }\n    }\n  }\n"]);return vt=function(){return t},t}function Et(){var t=p()(["\n  p {\n    text-align: left;\n  }\n"]);return Et=function(){return t},t}function xt(){var t=p()(["\n  color: var(--pf-global--Color--dark-200);\n"]);return xt=function(){return t},t}function jt(){var t=p()(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  div,\n  em {\n    padding-right: 5px;\n  }\n\n  @media (max-width: 1490px) {\n    display: block;\n\n    em {\n      padding: 10px 0;\n      display: block;\n    }\n  }\n"]);return jt=function(){return t},t}function Tt(){var t=p()(["\n  flex: 1;\n"]);return Tt=function(){return t},t}function wt(){var t=p()(["\n  border-bottom: 2px solid #ebebeb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  &&& {\n    min-height: 60px;\n    --pf-c-card--first-child--PaddingTop: 10px;\n    --pf-c-card__header--not-last-child--PaddingBottom: 10px;\n\n    h3 {\n      font-size: 0.875em;\n    }\n  }\n"]);return wt=function(){return t},t}a.d(e,"formatData",function(){return qt}),a.d(e,"updateData",function(){return Jt}),a.d(e,"handleManualTimeChange",function(){return Vt}),a.d(e,"formatSelectedIds",function(){return Ht}),a.d(e,"handleToggle",function(){return Gt}),a.d(e,"computeTotalSavings",function(){return $t}),a.d(e,"floatToStringWithCommas",function(){return Qt}),a.d(e,"filterDataBySelectedIds",function(){return Kt}),a.d(e,"setTemplatesIsActive",function(){return Xt});var _t=Object(b.a)(D.CardTitle)(wt()),kt=3600,Ot=20,St=50,Ct=b.a.div(Tt()),Dt=b.a.div(jt()),At=b.a.em(xt()),Bt=b.a.div(Et()),It=b.a.div(vt()),Rt=b.a.div(yt()),Lt=b.a.div(bt()),zt=b.a.div(gt()),Ft=f.a.createElement("span",{style:{fontWeight:400}},"Automation Analytics",f.a.createElement("span",{style:{fontSize:"16px",fontWeight:400}}," ",f.a.createElement("span",{style:{margin:"0 10px"}},"|")," Automation calculator")),Mt=g()().subtract(1,"year"),Pt=g()().startOf("year"),Wt=g()().startOf("quarter"),Yt=g()().subtract(1,"month"),Ut=[{value:"please choose",label:"Select date range",disabled:!0},{value:Mt.format("YYYY-MM-DD"),label:"Past year",disabled:!1},{value:Pt.format("YYYY-MM-DD"),label:"Past year to date",disabled:!1},{value:Wt.format("YYYY-MM-DD"),label:"Past quarter",disabled:!1},{value:Yt.format("YYYY-MM-DD"),label:"Past month",disabled:!1}],Nt={startDate:Mt.format("YYYY-MM-DD"),endDate:g()().format("YYYY-MM-DD")},qt=function(t,e){return t.reduce(function(t,a){var n=a.name,r=a.template_id,i=a.successful_run_count,o=a.successful_elapsed_sum,l=a.successful_host_run_count_avg,s=a.successful_host_run_count,c=a.elapsed_sum,u=a.failed_elapsed_sum,d=a.orgs,p=a.clusters,m=a.template_automation_percentage;return t.push({name:n,id:r,run_count:i,host_count:l||0,successful_host_run_count:s,delta:0,isActive:!0,calculations:[{type:"Manual",avg_run:e.defaultAvgRunVal,cost:0},{type:"Automated",avg_run:o||0,cost:0}],orgs:d,clusters:p,elapsed_sum:c,failed_elapsed_sum:u,successful_elapsed_sum:o,template_automation_percentage:m}),t},[])},Jt=function(t,e,a){var n=u()(a);return n.map(function(a){a.id===e&&(a.calculations[0].avg_run=t,a.calculations[0].total=t*a.successful_host_run_count)}),n},Vt=function(t){return Object(ht.c)(t)},Ht=function(t,e){return t.includes(e)?u()(t).filter(function(t){return t!==e}):[].concat(u()(t),[e])},Gt=function(t,e){var a=u()(e);return Ht(a,t)},$t=function(t,e,a){var n,r,i=0;return u()(t).forEach(function(t){n=Object(ht.d)(t.successful_elapsed_sum)*e,r=Object(ht.d)(t.calculations[0].avg_run)*t.successful_host_run_count*a,i+=Object(ht.a)(n,r),t.delta=Object(ht.a)(n,r),t.calculations[0].cost=r,t.calculations[1].cost=n}),i},Qt=function(t){return t.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},Kt=function(t,e){return t.filter(function(t){var a=t.id;return!e.includes(a)})},Xt=function(t,e){return t.map(function(t){e.includes(t.id)?t.isActive=!1:t.isActive=!0}),t};e.default=function(t){var e=t.history,a=Object(m.useState)(!0),n=s()(a,2),i=n[0],l=n[1],c=Object(m.useState)(St),u=s()(c,2),d=u[0],p=u[1],h=Object(m.useState)(Ot),g=s()(h,2),b=g[0],M=g[1],W=Object(m.useState)(0),U=s()(W,2),q=U[0],V=U[1],G=Object(m.useState)([]),$=s()(G,2),Q=$[0],K=$[1],X=Object(m.useState)([]),Z=s()(X,2),tt=Z[0],et=Z[1],at=Object(m.useState)([]),nt=s()(at,2),rt=nt[0],it=nt[1],ot=Object(m.useState)([]),lt=s()(ot,2),st=lt[0],ct=lt[1],ut=Object(m.useState)(null),dt=s()(ut,2),pt=dt[0],mt=dt[1],gt=Object(m.useState)(Ut[1].value),bt=s()(gt,2),yt=bt[0],vt=bt[1],Et=Object(y.a)(Nt),xt=Et.queryParams,jt=Et.setStartDateAsString;Object(m.useEffect)(function(){var t=$t(tt,b,d),e=Qt(t);V("$"+e)},[tt,b,d]),Object(m.useEffect)(function(){var t=Kt(Q,st);Xt(rt,st),et(t)},[st]),Object(m.useEffect)(function(){var t=!1,e=function(){return Object(j.k)({params:xt}).catch(function(){return[]})};function a(){return(a=o()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l(!0),a.next=3,window.insights.chrome.auth.getUser();case 3:return a.next=5,Object(j.a)().catch(function(t){mt({preflightError:t})});case 5:e().then(function(e){var a=e.templates;if(!t){var n=qt(void 0===a?[]:a,{defaultAvgRunVal:kt,defaultCostAutomation:Ot,defaultCostManual:St});K(n),et(n),it(n),l(!1)}});case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return t=!0}},[xt]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(k.PageHeader,{style:{flex:"0"}},f.a.createElement(k.PageHeaderTitle,{title:Ft})),pt&&f.a.createElement(_.Main,null,f.a.createElement(S.Card,null,f.a.createElement(C.CardBody,null,f.a.createElement(x.a,pt)))),!pt&&f.a.createElement(f.a.Fragment,null,f.a.createElement(_.Main,{style:{paddingBottom:"0"}},f.a.createElement(S.Card,null,f.a.createElement(_t,{style:{paddingBottom:"0",paddingTop:"0"}},f.a.createElement("h2",null,f.a.createElement(Y.a,{style:{marginRight:"10px"}}),"Filter"),f.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},f.a.createElement(A.FormSelect,{name:"roiTimeFrame",value:yt,onChange:function(t){jt(t),vt(t)},"aria-label":"Select Date Range",style:{margin:"2px 10px"}},Ut.map(function(t,e){return f.a.createElement(B.FormSelectOption,{isDisabled:t.disabled,key:e,value:t.value,label:t.label})})))))),f.a.createElement(Rt,{className:"automation-wrapper"},f.a.createElement(Lt,null,f.a.createElement(_.Main,{style:{paddingBottom:"0"}},f.a.createElement(S.Card,null,f.a.createElement(D.CardTitle,null,"Automation savings"),f.a.createElement(C.CardBody,null,i&&!pt&&f.a.createElement(v.a,null),!i&&tt.length<=0&&f.a.createElement(E.a,null),tt.length>0&&!i&&f.a.createElement(f.a.Fragment,null,f.a.createElement(ft,{margin:{top:20,right:20,bottom:20,left:70},id:"d3-roi-chart-root",data:tt,selected:st}),f.a.createElement("p",{style:{textAlign:"center"}},"Templates"))))),f.a.createElement(_.Main,null,f.a.createElement(S.Card,{style:{height:"100%"}},f.a.createElement(D.CardTitle,null,"Automation formula"),f.a.createElement(C.CardBody,null,f.a.createElement("p",null,f.a.createElement("b",null,"Manual cost for template x")," =",f.a.createElement("em",null,"(time for a manual run on one host * (sum of all hosts across all job runs) ) * cost per hour")),f.a.createElement("p",null,f.a.createElement("b",null,"Automation cost for template x")," =",f.a.createElement("em",null,"cost of automation per hour * sum of total elapsed hours for a template")),f.a.createElement("p",null,f.a.createElement("b",null,"Savings")," =",f.a.createElement("em",null,"Sum of (manual cost - automation cost) across all templates")))))),f.a.createElement(zt,null,f.a.createElement(_.Main,{style:{paddingBottom:"0",paddingLeft:"0"}},f.a.createElement(S.Card,null,f.a.createElement(D.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),f.a.createElement(C.CardBody,null,f.a.createElement(z.Title,{headingLevel:"h3",size:"3xl",style:{color:"var(--pf-global--success-color--200)"}},q)))),f.a.createElement(_.Main,{style:{paddingBottom:"0",paddingLeft:"0"}},f.a.createElement(S.Card,null,f.a.createElement(D.CardTitle,{style:{paddingBottom:"10px"}},"Calculate your automation"),f.a.createElement(C.CardBody,null,f.a.createElement(Ct,null,f.a.createElement("p",null,"Manual cost of automation"),f.a.createElement("em",{style:{color:"var(--pf-global--Color--dark-200)"}},"(e.g. average salary of mid-level SE)"),f.a.createElement(I.InputGroup,{style:{width:"50%"}},f.a.createElement(R.InputGroupText,null,f.a.createElement(P.a,null)),f.a.createElement(L.TextInput,{id:"manual-cost",type:"number",step:"any",min:"0","aria-label":"manual-cost",value:parseFloat(d),onChange:function(t){return p(t)}}),f.a.createElement(R.InputGroupText,null,"/hr"))),f.a.createElement(Ct,{style:{paddingTop:"10px"}},f.a.createElement("p",null,"Automated process cost"),f.a.createElement(I.InputGroup,{style:{width:"50%"}},f.a.createElement(R.InputGroupText,null,f.a.createElement(P.a,null)),f.a.createElement(L.TextInput,{id:"automation-cost",type:"number",step:"any",min:"0","aria-label":"automation-cost",value:parseFloat(b),onChange:function(t){return M(t)}}),f.a.createElement(R.InputGroupText,null,"/hr")))))),f.a.createElement(_.Main,{style:{display:"flex",flexDirection:"column",flex:"1 1 0",paddingLeft:"0"}},f.a.createElement(S.Card,{style:{overflow:"auto",flex:"1 1 0"}},f.a.createElement(D.CardTitle,null,"Top templates"),f.a.createElement(C.CardBody,null,f.a.createElement("p",null,"Enter the time it takes to manually perform the tasks that the following templates automate."),rt.map(function(t){return f.a.createElement("div",{key:t.id},f.a.createElement(F.Tooltip,{content:"Click for list of jobs in the past month"},f.a.createElement(O.Button,{style:{padding:"15px 0 10px"},component:"a",onClick:function(){return function(t){var a=T.a.jobExplorer,n={template_id:t,status:["successful"],job_type:["job"],quick_date_range:"last_30_days"},r=Object(w.a)(n),i=r.strings,o=(0,r.stringify)(i);e.push({pathname:a,search:o})}(t.id)},variant:"link"},t.name)),f.a.createElement(Dt,null,f.a.createElement(Ct,{key:t.id},f.a.createElement(I.InputGroup,null,f.a.createElement(L.TextInput,{id:t.id,type:"number","aria-label":"time run manually",value:Object(ht.e)(t.calculations[0].avg_run),onChange:function(e){var a=Vt(e),n=Jt(a,t.id,tt);et(n)},isDisabled:!t.isActive}),f.a.createElement(R.InputGroupText,null,"min"))),f.a.createElement(At,null,"x ",t.run_count," runs, ",t.host_count," hosts"),f.a.createElement(It,null,f.a.createElement(F.Tooltip,{position:F.TooltipPosition.top,entryDelay:50,exitDelay:50,content:f.a.createElement(Bt,null,f.a.createElement("p",null,f.a.createElement("b",null,"Total elapsed sum"),":"," ",t.elapsed_sum.toFixed(2),"s"),f.a.createElement("p",null,f.a.createElement("b",null,"Success elapsed sum"),":"," ",t.successful_elapsed_sum.toFixed(2),"s"),f.a.createElement("p",null,f.a.createElement("b",null,"Failed elapsed sum"),":"," ",t.failed_elapsed_sum.toFixed(2),"s"),f.a.createElement("p",null,f.a.createElement("b",null,"Automation percentage"),":"," ",Object(ht.j)(t.template_automation_percentage.toFixed(2))),f.a.createElement("p",null,f.a.createElement("b",null,"Associated organizations"),":"," ",f.a.createElement("span",{key:t.id},Object(ht.f)(t.orgs,"org_name"))),f.a.createElement("p",null,f.a.createElement("b",null,"Associated clusters"),":"," ",f.a.createElement("span",{key:t.id},Object(ht.f)(t.clusters,"cluster_name"))))},f.a.createElement(N.a,null)),!0===t.isActive&&f.a.createElement(J.a,{onClick:function(){var e=Gt(t.id,st);ct(e)}}),!1===t.isActive&&f.a.createElement(H.a,{onClick:function(){var e=Gt(t.id,st);ct(e)}}))),f.a.createElement("p",{style:{color:"#486B00"}},"$",t.delta.toFixed(2)))}))))))))}},459:function(t,e,a){"use strict";a.r(e);var n=a(13),r=a.n(n),i=a(23),o=a.n(i),l=a(74),s=a.n(l),c=a(69),u=a.n(c),d=a(1),p=a.n(d),m=a(89),f=a(70),h=a(75),g=a(91),b=a(93),y=a(86),v=a(63),E=a(61),x=a(97),j=a(100),T=a(108),w=a(98),_=a(99),k=a(136),O=a(111),S=a(0),C=a.n(S),D=a(292),A=a(395),B=a(388),I=a.n(B),R=a(71);function L(){var t=u()(["\n  margin-left: 7px;\n"]);return L=function(){return t},t}var z=Object(f.a)(I.a)(L()),F=function(t){return t.notifications.map(function(t){var e=t.date,a=t.message,n=t.label,r=t.notification_id,i=t.tower_url;return""===n||"notice"===n?p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.default,isInline:!0,key:e+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},a," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(z,null)):null):"error"===n?p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.danger,isInline:!0,key:e+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},a," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(z,null)):null):"warning"===n?p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.warning,isInline:!0,key:e+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},a," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(z,null)):null):void 0})},M=function(t){return t.notifications.filter(function(t){return"error"===t.label}).map(function(t){var e=t.message,a=t.date,n=t.label,r=t.notification_id,i=t.tower_url;return p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.danger,isInline:!0,key:a+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},e," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(z,null)):null)})},P=function(t){return t.notifications.filter(function(t){return"notice"===t.label}).map(function(t){var e=t.message,a=t.date,n=t.label,r=t.notification_id,i=t.tower_url;return p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.default,isInline:!0,key:a+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},e," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(z,null)):null)})},W=function(t){return t.notifications.filter(function(t){return"warning"===t.label}).map(function(t){var e=t.message,a=t.date,n=t.label,r=t.notification_id,i=t.tower_url;return p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.warning,isInline:!0,key:a+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},e," ",p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(z,null)))})},Y=function(t){var e=t.filterBy,a=t.notifications;return p.a.createElement(p.a.Fragment,null,p.a.createElement(A.AlertGroup,null,a.length<=0&&p.a.createElement(h.a,null),""===e&&p.a.createElement(F,{notifications:a}),"notice"===e&&p.a.createElement(P,{notifications:a}),"error"===e&&p.a.createElement(M,{notifications:a}),"warning"===e&&p.a.createElement(W,{notifications:a})))};F.propTypes={notifications:C.a.array},M.propTypes={notifications:C.a.array},W.propTypes={notifications:C.a.array},Y.propTypes={notifications:C.a.array,filterBy:C.a.string};var U=Y;function N(){var t=u()(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n\n  select {\n    margin: 0 10px;\n    width: 150px;\n\n    @media screen and (max-width: 1035px) {\n      margin: 10px 10px 0 0;\n    }\n\n    @media screen and (max-width: 865px) {\n      width: 100%;\n    }\n  }\n"]);return N=function(){return t},t}function q(){var t=u()(["\n  display: flex;\n  align-items: center;\n\n  h2 {\n    margin-right: 10px;\n  }\n"]);return q=function(){return t},t}function J(){var t=u()(["\n  display: flex;\n  justify-content: space-between;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n"]);return J=function(){return t},t}var V=Object(f.a)(T.CardTitle)(J()),H=f.a.div(q()),G=f.a.div(N()),$=p.a.createElement("span",{style:{fontWeight:400}},"Automation Analytics",p.a.createElement("span",{style:{fontSize:"16px",fontWeight:400}}," ",p.a.createElement("span",{style:{margin:"0 10px"}},"|")," Notifications")),Q=[{value:"please choose",label:"Select Notification Severity",disabled:!0},{value:"error",label:"View Critical",disabled:!1},{value:"warning",label:"View Warning",disabled:!1},{value:"notice",label:"View Notice",disabled:!1},{value:"",label:"View All",disabled:!1}],K=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}];function X(t){return t.reduce(function(t,e){var a=e.label,n=e.cluster_id,r=e.install_uuid;return 0===a.length?t.push({value:n,label:r,disabled:!1}):t.push({value:n,label:a,disabled:!1}),t},[{value:"please choose",label:"Select cluster",disabled:!0},{value:"",label:"All Clusters",disabled:!1},{value:-1,label:"Unassociated",disabled:!1}])}var Z={limit:5,offset:0};e.default=function(){var t=Object(d.useState)(null),e=s()(t,2),a=e[0],n=e[1],i=Object(d.useState)([]),l=s()(i,2),c=l[0],u=l[1],f=Object(d.useState)([]),T=s()(f,2),S=T[0],C=T[1],D=Object(d.useState)(""),A=s()(D,2),B=A[0],I=A[1],R=Object(d.useState)(!0),L=s()(R,2),z=L[0],F=L[1],M=Object(d.useState)(!0),P=s()(M,2),W=P[0],Y=P[1],N=Object(d.useState)({}),q=s()(N,2),J=q[0],tt=q[1],et=Object(d.useState)(1),at=s()(et,2),nt=at[0],rt=at[1],it=Object(m.a)(Z),ot=it.queryParams,lt=it.setId,st=it.setLimit,ct=it.setOffset,ut=it.setSeverity;Object(d.useEffect)(function(){z||function(){var t=o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Y(!0),t.next=3,window.insights.chrome.auth.getUser();case 3:Object(y.j)({params:ot}).then(function(t){var e=t.notifications,a=void 0===e?[]:e,n=t.meta;u(a),tt(n),Y(!1)});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[ot]),Object(d.useEffect)(function(){var t=!1,e=function(){return Promise.all([Object(y.c)(),Object(y.j)({params:ot})].map(function(t){return t.catch(function(){return[]})}))};function a(){return(a=o()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Y(!0),a.next=3,window.insights.chrome.auth.getUser();case 3:return a.next=5,Object(y.a)().catch(function(t){n({preflightError:t})});case 5:e().then(function(e){var a=s()(e,2),n=a[0].templates,r=void 0===n?[]:n,i=a[1],o=i.notifications,l=void 0===o?[]:o,c=i.meta;if(!t){var d=X(r);C(d),u(l),tt(c),F(!1),Y(!1)}});case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return t=!0}},[]);var dt=function(t){return(t-1)*ot.limit};return p.a.createElement(p.a.Fragment,null,p.a.createElement(E.PageHeader,null,p.a.createElement(E.PageHeaderTitle,{title:$})),a&&p.a.createElement(v.Main,null,p.a.createElement(g.a,a)),!a&&p.a.createElement(p.a.Fragment,null,p.a.createElement(v.Main,null,p.a.createElement(x.Card,null,p.a.createElement(V,null,p.a.createElement(H,null,p.a.createElement("h2",null,p.a.createElement("strong",null,"Notifications")),p.a.createElement(k.Badge,{isRead:!0},J.count?J.count:0)),p.a.createElement(G,null,p.a.createElement(w.FormSelect,{name:"selectedCluster",value:B,onChange:function(t){I(t),lt(t),ct(0),rt(1)},"aria-label":"Select Cluster"},S.map(function(t,e){var a=t.value,n=t.label,r=t.disabled;return p.a.createElement(_.FormSelectOption,{isDisabled:r,key:e,value:a,label:n})})),p.a.createElement(w.FormSelect,{name:"selectedNotification",value:ot.severity||"",onChange:function(t){ut(t),ct(0),rt(1)},"aria-label":"Select Notification Type"},Q.map(function(t,e){var a=t.disabled,n=t.value,r=t.label;return p.a.createElement(_.FormSelectOption,{isDisabled:a,key:e,value:n,label:r})})))),p.a.createElement(j.CardBody,null,W&&p.a.createElement(h.a,null),!W&&c.length<=0&&p.a.createElement(b.a,null),!W&&c.length>0&&p.a.createElement(p.a.Fragment,null,p.a.createElement(U,{filterBy:ot.severity||"",options:Q,notifications:c}),p.a.createElement(O.Pagination,{itemCount:J.count?J.count:0,widgetId:"pagination-options-menu-bottom",perPageOptions:K,perPage:ot.limit,page:nt,variant:O.PaginationVariant.bottom,dropDirection:"up",onPerPageSelect:function(t,e,a){!function(t,e){st(t);var a=dt(e);ct(a),rt(e)}(e,a)},onSetPage:function(t,e){!function(t){var e=dt(t);ct(e),rt(t)}(e)},style:{marginTop:"20px"}})))))))}},71:function(t,e,a){"use strict";a.d(e,"m",function(){return i}),a.d(e,"h",function(){return o}),a.d(e,"g",function(){return l}),a.d(e,"k",function(){return s}),a.d(e,"l",function(){return c}),a.d(e,"j",function(){return u}),a.d(e,"b",function(){return d}),a.d(e,"a",function(){return p}),a.d(e,"e",function(){return m}),a.d(e,"c",function(){return f}),a.d(e,"d",function(){return h}),a.d(e,"f",function(){return g}),a.d(e,"i",function(){return b});var n=a(64),r=a.n(n);function i(t){return t.toString().replace(/['"]+/g,"")}function o(t){return r()(new Date(t).toISOString()).format("M/D/YYYY h:mm:ssa")}function l(t){return r()(t).format("YYYY-MM-DD")}function s(t){return r.a.startOf("day").seconds(t).format("H:mm:ss")}function c(t){if(t){var e=0;return t.forEach(function(t){e+=parseInt(t.count)}),e}}function u(t){if(!isNaN(t))return"".concat(t,"%")}var d=function(t){return"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)};function p(t,e){return parseInt(e)?e-t:0}function m(t){return t/60}function f(t){return!parseInt(t)||parseInt(t)<0?0:60*+parseInt(t)}function h(t){return t/3600}function g(t,e){return t.reduce(function(t,a){return t.push(a[e]),t},[]).join(", ")}function b(t){return"job"===t?"Playbook run":"Workflow job"}},75:function(t,e,a){"use strict";var n=a(1),r=a.n(n),i=a(62),o=a(72),l=a(90),s=a(101),c=a(281),u=a.n(c);e.a=function(){return r.a.createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},r.a.createElement(l.EmptyStateIcon,{icon:u.a}),r.a.createElement(i.Title,{headingLevel:"h5",size:"lg"},"Loading..."),r.a.createElement(s.EmptyStateBody,null,"Please wait."))}},81:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var n=a(331),r=function(t){var e=t.attributes,a=t.end_date,r=t.start_date,i=t.limit,o=t.offset,l=t.job_type,s=t.status,c=t.org_id,u=t.cluster_id,d=t.template_id,p=t.sort_by,m=t.only_root_workflows_and_standalone_jobs,f=t.quick_date_range,h={},g=function(t){return Array.isArray(t)?t.map(function(t){return"attributes[]=".concat(encodeURIComponent(t))}).join("&"):"attributes[]=".concat(encodeURIComponent(t))},b=function(t){return Array.isArray(t)?t.map(function(t){return"status[]=".concat(encodeURIComponent(t))}).join("&"):"status[]=".concat(encodeURIComponent(t))},y=function(t){return Array.isArray(t)?t.map(function(t){return"job_type[]=".concat(encodeURIComponent(t))}).join("&"):"job_type[]=".concat(encodeURIComponent(t))},v=function(t){return Array.isArray(t)?t.map(function(t){return"org_id[]=".concat(encodeURIComponent(t))}).join("&"):"org_id[]=".concat(encodeURIComponent(t))},E=function(t){return Array.isArray(t)?t.map(function(t){return"cluster_id[]=".concat(encodeURIComponent(t))}).join("&"):"cluster_id[]=".concat(encodeURIComponent(t))},x=function(t){return Array.isArray(t)?t.map(function(t){return"template_id[]=".concat(encodeURIComponent(t))}).join("&"):"template_id[]=".concat(encodeURIComponent(t))},j=function(t){return Array.isArray(t)?t.map(function(t){return"sort_by=".concat(encodeURIComponent(t))}).join("&"):"sort_by=".concat(encodeURIComponent(t))},T=function(t){return"start_date=".concat(encodeURIComponent(t))},w=function(t){return"end_date=".concat(encodeURIComponent(t))},_=function(t){return"limit=".concat(encodeURIComponent(t))},k=function(t){return"offset=".concat(encodeURIComponent(t))},O=function(t){return"only_root_workflows_and_standalone_jobs=".concat(encodeURIComponent(t))},S=function(t){return"quick_date_range=".concat(encodeURIComponent(t))};return e&&(h.attributes=g(e)),r&&(h.start_date=T(r)),a&&(h.end_date=w(a)),i&&(h.limit=_(i)),o>=0&&(h.offset=k(o)),l&&(h.job_type=y(l)),s&&(h.status=b(s)),c&&(h.org_id=v(c)),u&&(h.cluster_id=E(u)),d&&(h.template_id=x(d)),p&&(h.sort_by=j(p)),void 0!==m&&(h.only_root_workflows_and_standalone_jobs=O(m)),f&&(h.quick_date_range=S(f)),{strings:h,stringify:function(t){return Object.keys(t).map(function(e){return t[e]}).join("&")},parse:n.parse,parseStatuses:b,parseJobType:y,parseOrganization:v,parseCluster:E,parseTemplate:x,parseEndDate:w,parseStartDate:T,parseQuickDateRange:S,parseSortBy:j,parseAttrs:g,parseLimit:_,parseOffset:k,parseRootWorkflowsAndJobs:O}}},86:function(t,e,a){"use strict";a.d(e,"l",function(){return b}),a.d(e,"a",function(){return y}),a.d(e,"c",function(){return v}),a.d(e,"b",function(){return E}),a.d(e,"h",function(){return x}),a.d(e,"i",function(){return j}),a.d(e,"m",function(){return T}),a.d(e,"j",function(){return w}),a.d(e,"f",function(){return _}),a.d(e,"e",function(){return k}),a.d(e,"g",function(){return O}),a.d(e,"d",function(){return S}),a.d(e,"k",function(){return C});var n=a(81),r="/api/tower-analytics/".concat("v0","/chart30/"),i="/api/tower-analytics/".concat("v0","/clusters/"),o="/api/tower-analytics/".concat("v0","/jobs_by_date_and_org_30/"),l="/api/tower-analytics/".concat("v0","/modules/"),s="/api/tower-analytics/".concat("v0","/notifications/"),c="/api/tower-analytics/".concat("v0","/job_runs_by_org_30/"),u="/api/tower-analytics/".concat("v0","/job_events_by_org_30/"),d="/api/tower-analytics/".concat("v0","/authorized/"),p="/api/tower-analytics/".concat("v0","/template_jobs/"),m="/api/tower-analytics/".concat("v0","/templates/"),f="/api/tower-analytics/".concat("v0","/roi_templates/");function h(){var t=window.location.href.split("/");return t.pop(),t.join("/")}function g(t){return t.json().then(function(e){return t.ok?e:404===t.status||401===t.status?Promise.reject({status:t.status,message:e}):Promise.reject(e)})}var b=function(t,e){var a=e.params,n=void 0===a?{}:a;if(t){var r=h(),i=new URL(p+t+"/",r);return Object.keys(n).forEach(function(t){return i.searchParams.append(t,n[t])}),fetch(i).then(g)}},y=function(){return fetch(d).then(g)},v=function(){return fetch(i).then(g)},E=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),i=new URL(r,n);return Object.keys(a).forEach(function(t){return i.searchParams.append(t,a[t])}),fetch(i).then(g)},x=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(o,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},j=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(l,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},T=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(m,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},w=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(s,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},_=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL("/api/tower-analytics/v1/job_explorer_options/",n);return fetch(r,{method:"POST",body:JSON.stringify(a)}).then(g)},k=function(t){var e=t.params,a=void 0===e?{}:e,r={limit:a.limit,offset:a.offset,sort_by:a.sort_by},i=Object(n.a)(r),o=i.strings,l=(0,i.stringify)(o),s=h(),c=new URL("/api/tower-analytics/v1/job_explorer/",s);return c.search=l,fetch(c,{method:"POST",body:JSON.stringify(a)}).then(g)},O=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(c,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},S=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(u,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},C=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(f,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)}},89:function(t,e,a){"use strict";a.d(e,"a",function(){return h});var n=a(74),r=a.n(n),i=a(85),o=a.n(i),l=a(28),s=a.n(l),c=a(113),u=a.n(c),d=a(1),p=a(64),m=a.n(p),f=a(71),h=function(t){var e=Object(d.useReducer)(function(t,e){switch(e.type){case"SET_STARTDATE":return u()({},t,{startDate:e.startDate});case"SET_ENDDATE":return u()({},t,{endDate:e.endDate});case"SET_ID":return parseInt(e.id)?u()({},t,{id:parseInt(e.id)}):(t.id,s()(t,["id"]));case"SET_SORT_BY":return"count:asc"===e.sort||"count:desc"===e.sort?u()({},t,{sort_by:e.sort}):(t.sort_by,s()(t,["sort_by"]));case"SET_LIMIT":return parseInt(e.limit)?u()({},t,{limit:parseInt(e.limit)}):(t.limit,s()(t,["limit"]));case"SET_OFFSET":return u()({},t,{offset:e.offset});case"SET_SEVERITY":return e.severity.length<=0?(t.severity,s()(t,["severity"])):u()({},t,{severity:e.severity});case"SET_ATTRIBUTES":return u()({},t,{attributes:o()(e.attributes)});case"SET_JOB_TYPE":return e.jobType.length<=0?(t.job_type,s()(t,["job_type"])):u()({},t,{job_type:o()(e.jobType)});case"SET_STATUS":return e.status.length<=0?(t.status,s()(t,["status"])):u()({},t,{status:o()(e.status)});case"SET_ORG":return e.org.length<=0?(t.org_id,s()(t,["org_id"])):u()({},t,{org_id:o()(e.org)});case"SET_CLUSTER":return e.cluster.length<=0?(t.cluster_id,s()(t,["cluster_id"])):u()({},t,{cluster_id:o()(e.cluster)});case"SET_TEMPLATE":return e.template.length<=0?(t.template_id,s()(t,["template_id"])):u()({},t,{template_id:o()(e.template)});case"SET_SORTBY":return null===e.sortBy?(t.sort_by,s()(t,["sort_by"])):u()({},t,{sort_by:e.sortBy});case"SET_ROOT_WORKFLOWS_AND_JOBS":return u()({},t,{only_root_workflows_and_standalone_jobs:e.bool});case"SET_QUICK_DATE_RANGE":return null===e.quickDate?(t.quick_date_range,s()(t,["quick_date_range"])):u()({},t,{quick_date_range:e.quickDate});case"SET_START_DATE":return null===e.date?(t.start_date,s()(t,["start_date"])):u()({},t,{start_date:Object(f.g)(e.date)});case"SET_END_DATE":return null===e.date?(t.end_date,s()(t,["end_date"])):u()({},t,{end_date:Object(f.g)(e.date)});default:throw new Error}},u()({},t)),a=r()(e,2),n=a[0],i=a[1];return{queryParams:n,dispatch:i,setEndDate:function(){var t=m()().format("YYYY-MM-DD");i({type:"SET_ENDDATE",endDate:t})},setId:function(t){return i({type:"SET_ID",id:t})},setStartDate:function(t){var e;7===t&&(e=m()().subtract(1,"week").format("YYYY-MM-DD")),14===t&&(e=m()().subtract(2,"weeks").format("YYYY-MM-DD")),e=31===t?m()().subtract(1,"month").format("YYYY-MM-DD"):m()().subtract(t,"days").format("YYYY-MM-DD"),i({type:"SET_STARTDATE",startDate:e})},setStartDateAsString:function(t){return i({type:"SET_STARTDATE",startDate:t})},setSortBy:function(t){return i({type:"SET_SORT_BY",sort:t})},setLimit:function(t){return i({type:"SET_LIMIT",limit:t})},setOffset:function(t){return i({type:"SET_OFFSET",offset:t})},setSeverity:function(t){return i({type:"SET_SEVERITY",severity:t})},setAttributes:function(t){return i({type:"SET_ATTRIBUTES",attributes:t})},setJobType:function(t){return i({type:"SET_JOB_TYPE",jobType:t})},setStatus:function(t){return i({type:"SET_STATUS",status:t})},setOrg:function(t){return i({type:"SET_ORG",org:t})},setCluster:function(t){return i({type:"SET_CLUSTER",cluster:t})},setTemplate:function(t){return i({type:"SET_TEMPLATE",template:t})},setSortBy2:function(t){return i({type:"SET_SORTBY",sortBy:t})},setRootWorkflowsAndJobs:function(t){return i({type:"SET_ROOT_WORKFLOWS_AND_JOBS",bool:t})},setQuickDateRange:function(t){return i({type:"SET_QUICK_DATE_RANGE",quickDate:t})},setStart_Date:function(t){return i({type:"SET_START_DATE",date:t})},setEnd_Date:function(t){return i({type:"SET_END_DATE",date:t})}}}},91:function(t,e,a){"use strict";var n=a(1),r=a.n(n),i=a(0),o=a.n(i),l=a(102),s=a(62),c=a(72),u=a(90),d=a(101),p=a(323),m=a.n(p),f=function(t){var e=t.preflightError;return r.a.createElement(c.EmptyState,{variant:c.EmptyStateVariant.full},r.a.createElement(u.EmptyStateIcon,{icon:m.a}),404===e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Title,{headingLevel:"h5",size:"lg"},"No data found"),r.a.createElement(d.EmptyStateBody,null,"Please visit ",r.a.createElement("a",{href:"https://docs.ansible.com/ansible-tower/latest/html/administration/usability_data_collection.html#automation-analytics",target:"_blank",rel:"noopener noreferrer"},"here")," to learn how to enable Automation Analytics.")),401===e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Title,{headingLevel:"h5",size:"lg"},"Not authorized"),r.a.createElement(d.EmptyStateBody,null,"You do not have the correct permissions to view this page.")),!e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Title,{headingLevel:"h5",size:"lg"},"Something went wrong, please try reloading the page"),r.a.createElement(l.Button,{variant:"primary",onClick:function(){return window.location.reload()}},"Reload")))};f.propTypes={preflightError:o.a.object},e.a=f},92:function(t,e,a){"use strict";var n=a(27),r=a.n(n),i=a(1),o=a.n(i),l=a(0),s=a.n(l),c=a(84),u=function(t){var e=function(e){var a=e.id,n=e.margin;return o.a.createElement(t,r()({},e,{getWidth:function(){return parseInt(c.s("#"+a).style("width"))-n.left-n.right||700},getHeight:function(){return parseInt(c.s("#"+a).style("height"))-n.top-n.bottom||450}}))};return e.propTypes={id:s.a.string,margin:s.a.object},e};u.propTypes={Chart:s.a.element},e.a=u},93:function(t,e,a){"use strict";var n=a(1),r=a.n(n),i=a(62),o=a(72),l=a(90),s=a(281),c=a.n(s);e.a=function(){return r.a.createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},r.a.createElement(l.EmptyStateIcon,{icon:c.a}),r.a.createElement(i.Title,{headingLevel:"h5",size:"lg"},"No Data"))}}}]);
//# sourceMappingURL=automation_analytics.b59228eaffc0bb849f40.js.map