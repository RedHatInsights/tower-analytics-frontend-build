"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[3688],{94592:(e,t,n)=>{n.d(t,{Z:()=>_});var a,r,o,l,i,s=n(30168),c=n(92950),u=n.n(c),d=n(29163),m=n(45697),p=n.n(m),f=d.ZP.div(a||(a=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 100%;\n  max-width: 100%;\n  height: 1rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n"]))),g=d.ZP.div(r||(r=(0,s.Z)(["\n  height: 100%;\n"]))),h=d.ZP.div(o||(o=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n"]))),v=d.ZP.div(l||(l=(0,s.Z)(["\n  padding-left: 2rem;\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n"]))),y=d.ZP.div(i||(i=(0,s.Z)(["\n  width: 0.75rem;\n  height: 0.75rem;\n  margin-right: 0.5rem;\n"])));function E(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}var b=function(e){var t=e.categoryCount,n=e.categoryColor,a=e.showPercent,r=void 0!==a&&a,o=Object.values(t).reduce((function(e,t){return e+t})),l=Object.keys(t).filter((function(e){return t[e]>0})).sort((function(e,n){return t[e]<t[n]?1:t[e]>t[n]?-1:0})).map((function(e){return{name:e,barSpacing:t[e]/o,color:n[e]}})),i=1-.15*(l.length-1)/100;return u().createElement(u().Fragment,null,u().createElement(f,null,l.map((function(e,t){var n=e.barSpacing,a=e.color;return t<l.length-1?u().createElement(u().Fragment,{key:t},u().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}),u().createElement(g,{style:{backgroundColor:"transparent",width:"".concat(.15,"%")}})):u().createElement(u().Fragment,{key:t},u().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}))}))),u().createElement(h,null,l.map((function(e){var t=e.name,n=e.barSpacing,a=e.color;return u().createElement(v,{key:"label-".concat(t)},u().createElement(y,{style:{backgroundColor:a}}),r?u().createElement("p",null,E(t)," ",Math.round(100*n),"%"):u().createElement("p",null,E(t)))}))))};b.propTypes={categoryColor:p().object.isRequired,categoryCount:p().object.isRequired,showPercent:p().bool};const _=b},69595:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(92950),r=n.n(a),o=n(45697),l=n.n(o),i=n(86235),s=n(1085),c=function(e){var t=e.items,n=void 0===t?[]:t,a=e.current,o=void 0===a?null:a;return r().createElement(s.Breadcrumb,null,n.map((function(e){var t=e.title,n=e.navigate;return r().createElement(s.BreadcrumbItem,{key:t},r().createElement(i.Link,{to:n},t))})),o&&r().createElement(s.BreadcrumbHeading,null,o))};c.propTypes={items:l().arrayOf(l().shape({navigate:l().any,title:l().node})),current:l().node};const u=c},83061:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(92950),r=n.n(a),o=n(1085),l=n(76473);const i=function(){return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full,style:{minHeight:"400px"}},r().createElement(o.EmptyStateIcon,{icon:l.TF}),r().createElement(o.Title,{headingLevel:"h5",size:"lg"},"No Data"))}},86552:(e,t,n)=>{n.d(t,{Z:()=>f});var a,r=n(92950),o=n.n(r),l=n(43047),i=n(50028),s=n(16559),c=n(44586);!function(e){e.nonGrouped="nonGrouped",e.grouped="grouped"}(a||(a={}));var u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.apply(this,arguments)},d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)},m=function(e){var t=e.x,n=e.y,a=(e.disableInlineStyles,function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["x","y","disableInlineStyles"]));return null!=t&&null!=n?o().createElement(l.$O,d({x:t-8,y:n-8},a,a.events)):null},p=function(e){return d(d({},i.wk),{axisFormat:d(d(d({},i.wk.axisFormat),{formatAsYear:function(e){return Intl.DateTimeFormat("en",{year:"numeric"}).format(new Date(e))},formatAsMonth:function(e){return Intl.DateTimeFormat("en",{month:"long"}).format(new Date(e))}}),null==e?void 0:e.axisFormat),labelFormat:d(d({},i.wk.labelFormat),null==e?void 0:e.labelFormat),onClick:d(d({},i.wk.onClick),null==e?void 0:e.onClick),dataComponent:{scatterPlot:m}})};const f=function(e){var t=e.schema,n=e.data,l=e.specificFunctions,m=e.namespace,f=void 0===m?"settings":m,g=(0,s.Kx)({chartSeriesHiddenProps:[]},f),h=g.queryParams.chartSeriesHiddenProps,v=g.dispatch,y=(0,r.useState)({series:[],legend:[]}),E=y[0],b=y[1];return(0,r.useEffect)((function(){b(function(e,t){return void 0===t&&(t=[]),d(d({},e),{series:e.series.map((function(e){return d(d({},e),{hidden:!(!e.serie[0].id&&!e.serie[0].host_id||!t.includes(e.serie[0].hasOwnProperty("host_id").toString()||e.serie[0].hasOwnProperty("id").toString()))})}))})}(function(e){var t,n={series:[],legend:[]};switch(e.type="dates"in e?a.grouped:a.nonGrouped,e.type){case a.grouped:n.series=function(e){var t=e.dates,n=[];return t.forEach((function(e){e.items.forEach((function(t,a){n[a]||(n[a]={serie:[],hidden:!1,name:(0,c.Z)()}),n[a].serie.push(u({created_date:e.date},t))}))})),n}(e);break;case a.nonGrouped:n.series=[{serie:e.items||e.meta.legend,hidden:!1,name:(0,c.Z)()}]}return(null===(t=e.meta)||void 0===t?void 0:t.legend)&&(n.legend=e.meta.legend.map((function(e){var t=n.series.find((function(t){return t.serie.find((function(t){return t.id===e.id}))}));return u(u({},e),{childName:t&&t.name?t.name:""})}))),n}(n),h))}),[n]),o().createElement(i.ZP,{schema:t,functions:d({},p(l)),dataState:[E,function(e){v({type:"SET_CHART_SERIES_HIDDEN_PROPS",value:e.series.map((function(e){return[e.serie[0].id,e.hidden]}))}),b(e)}]})}},10001:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(92950),r=n.n(a),o=n(1085),l=n(60433),i=n(80810),s=n(16559);const c=function(e){var t=e.label,n=void 0===t?"":t,a=e.title,c=void 0===a?"No items found.":a,u=e.message,d=void 0===u?"":u,m=e.canAdd,p=void 0!==m&&m,f=e.showButton,g=void 0!==f&&f,h=e.path,v=void 0===h?void 0:h,y=e.onButtonClick,E=void 0===y?void 0:y,b=(0,s.eR)();return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},r().createElement(o.EmptyStateIcon,{icon:p?l.Mh:i.W1}),r().createElement(o.Title,{size:"lg",headingLevel:"h3"},c),r().createElement(o.EmptyStateBody,null,d),(p||g)&&r().createElement(o.Button,{key:"add-item-button",variant:o.ButtonVariant.primary,"aria-label":n,onClick:function(){v&&b(v),E&&E()}},n))}},12613:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(92950),r=n.n(a),o=n(45697),l=n.n(o),i=n(1085),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},c=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],u=function(e){var t=e.count,n=void 0===t?0:t,a=e.perPageOptions,o=void 0===a?null:a,l=e.params,u=e.setPagination,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["count","perPageOptions","params","setPagination"]),m=l.offset,p=l.limit,f=Math.floor(m/p+1),g=function(e){return(e-1)*p};return r().createElement(i.Pagination,s({"data-cy":d.isCompact?"pagination_top":"pagination_bottom",itemCount:n,widgetId:"aa-pagination",perPageOptions:null!=o?o:c,perPage:p,page:f,onPerPageSelect:function(e,t,n){u(g(n),t)},onSetPage:function(e,t){u(g(t))}},d))};u.propTypes={count:l().number,params:l().exact({offset:l().number.isRequired,limit:l().number.isRequired}).isRequired,setPagination:l().func.isRequired,perPageOptions:l().arrayOf(l().exact({title:l().string.isRequired,value:l().number.isRequired}).isRequired)};const d=u},85150:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ct});var a=n(92950),r=n.n(a),o=n(86235),l=n(29163),i=n(86350),s=n(46336),c=n(48716),u=n(39173),d=n(69595),m=n(1085),p=n(12613),f=n(16559),g=n(77388),h=n(9771),v=n(48236),y=n(83061);const E=function(e){var t=e.api,n=e.children,a=e.customLoading,o=void 0!==a&&a,l=e.customEmptyState,i=void 0!==l&&l;return o&&t.isLoading?r().createElement(r().Fragment,null,n):!t||t.isLoading?r().createElement(v.Z,{"data-cy":"api_loading_state"}):t.error?r().createElement(h.Z,{message:t.error.error.error||t.error.error}):t.isSuccess?0!==t.result.meta.count||i?r().createElement(r().Fragment,null,n):r().createElement(y.Z,null):null};var b=n(68936),_=n(86552),w=n(48607),k=n(91573),x=n(53345),T=n(91354);const C=function(e){return new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(e)},S=function(e){var t=e.isExpanded,n=e.item;return r().createElement(w.Tr,{isExpanded:t},r().createElement(w.Td,{colSpan:6},r().createElement(w.ExpandableRowContent,null,r().createElement(m.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n,a,r;return[{label:"Slow Hosts Count",value:null!==(t=e.slow_hosts_count)&&void 0!==t?t:0},{label:"Host Task Count",value:null!==(n=e.host_task_count)&&void 0!==n?n:0},{label:"Slow Hosts Percentage",value:null!==(a="".concat(C(e.slow_hosts_percentage),"%"))&&void 0!==a?a:0},{label:"Template Success Rate",value:null!==(r="".concat(C(e.template_success_rate),"%"))&&void 0!==r?r:0}]}(n).map((function(e){var t=e.label,n=e.value;return r().createElement(m.DescriptionListGroup,{key:t},r().createElement(m.DescriptionListTerm,null,t),r().createElement(m.DescriptionListDescription,null,n))}))))))};var P,O,D=n(94592),R=n(35993),F=(0,l.ZP)(m.DescriptionList)(L||(P=["\n  row-gap: 16px;\n"],O=["\n  row-gap: 16px;\n"],Object.defineProperty?Object.defineProperty(P,"raw",{value:O}):P.raw=O,L=P));const I=function(e){var t,n,a,o,l,i,s,c,u,d,p,f,g,h,v,y,E,b=e.isExpanded,_=e.item,k=_?{ok:null!==(t=null==_?void 0:_.successful_count)&&void 0!==t?t:0,skipped:null!==(n=null==_?void 0:_.skipped_count)&&void 0!==n?n:0,failed:null!==(a=null==_?void 0:_.failed_count)&&void 0!==a?a:0,error:null!==(o=null==_?void 0:_.error_count)&&void 0!==o?o:0}:null,x=_?{ok:null!==(l=null==_?void 0:_.average_host_task_ok_count_per_host)&&void 0!==l?l:0,skipped:null!==(i=null==_?void 0:_.average_host_task_skipped_count_per_host)&&void 0!==i?i:0,changed:null!==(s=null==_?void 0:_.average_host_task_changed_count_per_host)&&void 0!==s?s:0,failed:null!==(c=null==_?void 0:_.average_host_task_failed_count_per_host)&&void 0!==c?c:0,unreachable:null!==(u=null==_?void 0:_.average_host_task_unreachable_count_per_host)&&void 0!==u?u:0}:null,T=_?{ok:null!==(d=null==_?void 0:_.ok_host_count)&&void 0!==d?d:0,skipped:null!==(p=null==_?void 0:_.skipped_host_count)&&void 0!==p?p:0,changed:null!==(f=null==_?void 0:_.changed_host_count)&&void 0!==f?f:0,failed:null!==(g=null==_?void 0:_.failed_host_count)&&void 0!==g?g:0,unreachable:null!==(h=null==_?void 0:_.unreachable_host_count)&&void 0!==h?h:0}:null;return r().createElement(w.Tr,{isExpanded:b},r().createElement(w.Td,{colSpan:6},r().createElement(w.ExpandableRowContent,null,r().createElement(m.Flex,null,r().createElement(m.FlexItem,null,r().createElement("strong",null,"Job status")),r().createElement(m.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Jobs"),"  ",null!==(v=null==_?void 0:_.total_count)&&void 0!==v?v:0)),r().createElement(D.Z,{categoryCount:k,categoryColor:R.ss,showPercent:!0}),r().createElement(m.Flex,null,r().createElement(m.FlexItem,null,r().createElement("strong",null,"All Host status")),r().createElement(m.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Hosts"),"  ",null!==(y=null==_?void 0:_.host_count)&&void 0!==y?y:0)),r().createElement(D.Z,{categoryCount:T,categoryColor:R.ss,showPercent:!0}),r().createElement(m.Flex,null,r().createElement(m.FlexItem,null,r().createElement("strong",null,"All Task status")),r().createElement(m.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",null!==(E=null==_?void 0:_.host_task_count)&&void 0!==E?E:0)),r().createElement(D.Z,{categoryCount:x,categoryColor:R.ss,showPercent:!0}),r().createElement(m.Divider,{component:"div",style:{marginTop:"2rem",marginBottom:"1.5rem"}}),function(e){var t=e.most_failed_tasks;if(null!=t)return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Most failed tasks")),r().createElement("br",null),r().createElement(m.Grid,{hasGutter:!0},t.slice(0,t.length).map((function(e,t){var n,a,o,l,i,s,c={passed:null!==(n=null==e?void 0:e.passed_host_count)&&void 0!==n?n:0,failed:null!==(a=null==e?void 0:e.failed_host_count)&&void 0!==a?a:0,unreachable:null!==(o=null==e?void 0:e.unreachable_host_count)&&void 0!==o?o:0},u={passed:null!==(l=null==e?void 0:e.successful_count)&&void 0!==l?l:0,failed:null!==(i=null==e?void 0:e.failed_count)&&void 0!==i?i:0,unfinished:null!==(s=null==e?void 0:e.unfinished_count)&&void 0!==s?s:0};return r().createElement(r().Fragment,null,r().createElement(m.GridItem,null,r().createElement(F,{isHorizontal:!0},function(e){return[{label:"Task name",value:e.task_name},{label:"Module name",value:e.module_name}]}(e).map((function(e){var t=e.label,n=e.value;return r().createElement(m.DescriptionListGroup,{key:t},r().createElement(m.DescriptionListTerm,null,t),r().createElement(m.DescriptionListDescription,null,n))})))),r().createElement(m.GridItem,{lg:6,md:12,key:"hosts-".concat(t)},r().createElement(m.Flex,null,r().createElement(m.FlexItem,null,r().createElement("strong",null,"Host status")),r().createElement(m.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Hosts"),"  ",function(e){return parseInt(e.passed_host_count)+parseInt(e.failed_host_count)+parseInt(e.unreachable_host_count)}(e))),r().createElement(D.Z,{categoryCount:c,categoryColor:R.ss,showPercent:!0})),r().createElement(m.GridItem,{lg:6,md:12,key:"tasks-".concat(t)},r().createElement(m.Flex,null,r().createElement(m.FlexItem,null,r().createElement("strong",null,"Task status")),r().createElement(m.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",function(e){return parseInt(e.successful_count)+parseInt(e.failed_count)+parseInt(e.unfinished_count)}(e))),r().createElement(D.Z,{categoryCount:u,categoryColor:R.ss,showPercent:!0})))}))))}(_),r().createElement(m.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n;return[{label:"Clusters",value:null!==(t=e.total_cluster_count)&&void 0!==t?t:0},{label:"Organizations",value:null!==(n=e.total_org_count)&&void 0!==n?n:0}]}(_).map((function(e){var t=e.label,n=e.value;return r().createElement(m.DescriptionListGroup,{key:t},r().createElement(m.DescriptionListTerm,null,t),r().createElement(m.DescriptionListDescription,null,n))}))))))};var L;const Z=function(e){var t,n,a,o,l,i,s=e.isExpanded,c=e.item,u=c?{ok:null!==(t=null==c?void 0:c.host_task_ok_count)&&void 0!==t?t:0,changed:null!==(n=null==c?void 0:c.host_task_changed_count)&&void 0!==n?n:0,failed:null!==(a=null==c?void 0:c.host_task_failed_count)&&void 0!==a?a:0,skipped:null!==(o=null==c?void 0:c.host_task_skipped_count)&&void 0!==o?o:0,unreachable:null!==(l=null==c?void 0:c.host_task_unreachable_count)&&void 0!==l?l:0}:null;return r().createElement(w.Tr,{isExpanded:s},r().createElement(w.Td,{colSpan:10},r().createElement(w.ExpandableRowContent,null,r().createElement(m.Flex,null,r().createElement(m.FlexItem,null,r().createElement("strong",null,"All Task status")),r().createElement(m.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",null!==(i=null==c?void 0:c.host_task_count)&&void 0!==i?i:0)),r().createElement(D.Z,{categoryCount:u,categoryColor:R.ss,showPercent:!0}))))};var j;!function(e){e.templatesExplorer="templatesExplorer",e.hostAnomalies="hostAnomalies",e.mostUsedModules="mostUsedModules"}(j||(j={}));var G=n(22030),B=function(){return B=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},B.apply(this,arguments)},A=["elapsed"],H=[],M=function(e,t){return"id"===t&&-1===e[t]},N=function(e,t){return"id"===t&&-2===e[t]};const q=function(e){var t,n,o=e.legendEntry,l=e.headers,i=e.expandedRowName,s=e.clickableLinking,c=(0,a.useState)(!1),u=c[0],d=c[1],p=(0,f.eR)();return r().createElement(r().Fragment,null,r().createElement(w.Tr,{style:(n=o,"id",M(n,"id")?{backgroundColor:k.global_disabled_color_300.value}:{})},i&&r().createElement(w.Td,{expand:{rowIndex:+o.id,isExpanded:u,onToggle:function(){return d(!u)}}}),l.map((function(e){var t=e.key;return r().createElement(w.Td,{key:"".concat(o.id,"-").concat(t)},s?function(e,t){var n={host_task_count:"module_usage_by_task",total_org_count:"module_usage_by_organization",total_template_count:"module_usage_by_job_template"};return N(e,t)||M(e,t)?"-":A.includes(t)?(0,x.yH)(+e[t]):H.includes(t)?(0,T.Z)(+e[t]):Object.keys(n).includes(t)&&-1!=e.id?r().createElement(m.Tooltip,{content:"View ".concat(e.name," usage")},r().createElement("a",{onClick:function(){return function(e,t){var n,a=((n={})[f.zG]=B(B({},(0,R.gb)(e)),{task_action_id:[t]}),n);p(G.Z.getDetails(e),a)}(n[t],e.id)}},"".concat(e[t]))):"".concat(e[t])}(o,t):function(e,t){return N(e,t)||M(e,t)?"-":A.includes(t)?(0,x.yH)(+e[t]):H.includes(t)?(0,T.Z)(+e[t]):function(e,t){return"average_duration_per_task"===t}(0,t)?(0,x.Xt)(+e[t]):"".concat(e[t])}(o,t))}))),(t=function(e){switch(e){case"templatesExplorer":return I;case"hostAnomalies":return S;case"mostUsedModules":return Z;default:return null}}(i))?r().createElement(t,{item:o,isExpanded:u}):null)};var V=function(){return V=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},V.apply(this,arguments)};const z=function(e){var t=e.legend,n=e.headers,o=e.getSortParams,l=void 0===o?function(){return{}}:o,i=e.expandedRowName,s=e.clickableLinking,c=e.showKebab,u=(0,a.useState)(!1),d=u[0],p=u[1],g=(0,R.Me)("host_anomalies_scatter"),h=(0,f.Kx)(g).setFromToolbar,v=[r().createElement(m.DropdownItem,{key:"showAll",component:"button",onClick:function(){return h("anomaly",void 0)}},"Display all host rows"),r().createElement(m.DropdownItem,{key:"showAnomalousHosts",component:"button",onClick:function(){return h("anomaly",!0)}},"Display only slow host rows"),r().createElement(m.DropdownItem,{key:"showNonAnomalousHosts",component:"button",onClick:function(){return h("anomaly",!1)}},"Display only non-slow host rows")];return r().createElement(w.TableComposable,{"aria-label":"Report Table",variant:w.TableVariant.compact},r().createElement(w.Thead,null,r().createElement(w.Tr,null,i&&r().createElement(w.Th,null),n.map((function(e){var t=e.key,n=e.value;return c&&"anomaly"===t?r().createElement(w.Th,{key:t,style:{overflow:"visible",zIndex:1}},"Slow",r().createElement(m.Dropdown,{onSelect:function(){p(!0)},toggle:r().createElement(m.KebabToggle,{style:{paddingBottom:"0px"},id:"table-kebab",onToggle:function(){return p(!d)}}),isOpen:d,isPlain:!0,dropdownItems:v,position:"right"})):r().createElement(w.Th,V({key:t},l(t),{"data-cy":t}),n)})))),r().createElement(w.Tbody,null,t.map((function(e){return r().createElement(q,{key:e.id,legendEntry:e,headers:n,expandedRowName:i,clickableLinking:s})}))))};var U=n(43047),K=n(40400);const J=(0,K.IU)({name:"DownloadIcon",height:512,width:512,svgPath:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",yOffset:0,xOffset:0});var W,Y=n(16659),$=n(28527),X="RESET_DATA",Q="SET_DOWNLOAD_TYPE",ee="SET_SHOW_EXTRA_ROWS",te="SET_SELECTED_RBAC_GROUPS",ne="SET_USERS",ae="SET_ADDITIONAL_RECIPIENTS",re="SET_EMAIL_EXTRA_ROWS",oe="SET_SUBJECT",le="SET_BODY",ie="SET_SELECTED_EXPIRY";!function(e){e.moduleReports="moduleReports",e.newAutomationCalculator="newAutomationCalculator",e.onboardingReports="aa21Onboarding",e.sendEmail="sendEmail"}(W||(W={}));var se=n(63746);const ce=function(e){var t,n,a,o,l,i=e.formData,s=e.dispatchReducer,c=i.downloadType;return r().createElement(r().Fragment,null,r().createElement(m.Title,{size:"md",headingLevel:"h4"},"Select export format:"),r().createElement(m.Grid,{sm:2},r().createElement(m.GridItem,null,r().createElement(m.Radio,{onChange:function(){return s({type:Q,value:"pdf"})},isChecked:"pdf"===c,name:"optionSelected",label:"PDF",id:"pdf-radio","aria-label":"pdf-radio"})),(t=W.sendEmail,n="beta_".concat(t),a=(0,se.useFlagsStatus)().flagsReady,o="beta"===window.location.pathname.split("/")[1]?n:t,l=(0,se.useFlag)(o),(!("localhost"!==window.location.hostname&&!window.location.hostname.includes("ephemeral"))||!!a&&l)&&r().createElement(m.GridItem,null,r().createElement(m.Radio,{onChange:function(){return s({type:Q,value:"email"})},isChecked:"email"===c,name:"optionSelected",label:"E-mail",id:"email-radio","aria-label":"email-radio"})))))},ue=function(e){var t=e.options,n=e.formData,a=e.dispatchReducer,o=n.showExtraRows,l=t.totalPages,i=t.pageLimit,s=l<=Math.ceil(100/i)?"All ".concat(l.toString()," pages"):"Top ".concat(Math.ceil(100/i)," of ").concat(l.toString()," pages");return r().createElement(r().Fragment,null,r().createElement(m.Title,{size:"md",headingLevel:"h4"},"Select details:"),r().createElement(m.Grid,{md:4},r().createElement(m.GridItem,null,r().createElement(m.Radio,{onChange:function(){return a({type:ee,value:!1})},isChecked:!o,name:"showExtraRows",label:"Current page",id:"current-radio","aria-label":"current-radio"})),r().createElement(m.GridItem,null,r().createElement(m.Radio,{onChange:function(){return a({type:ee,value:!0})},isChecked:o,name:"showExtraRows",label:s,id:"extra-radio","aria-label":"extra-radio"}))))};var de=n(49148),me=n(13704);const pe=function(e){var t=e.options,n=e.formData,o=e.dispatchReducer,l=n.body,i=n.selectedRbacGroups,s=n.users,c=n.subject,u=n.additionalRecipients,d=n.emailExtraRows,p=n.expiry,f=(0,g.ZP)((function(){return(0,de.kL)()}),{data:[],meta:{count:0}}),h=f.result.data,v=f.request,y=window.location.href;(0,a.useEffect)((function(){v()}),[]);var E=(0,g.ZP)((function(){return(0,de.Vk)(i.at(-1))}),{data:[]}),b=E.result.data,_=E.request;(0,a.useEffect)((function(){i.length>0&&_()}),[i]);var w=function(e){var t;return null===(t=h.find((function(t){return t.uuid===e})))||void 0===t?void 0:t.name},k=function(){var e=b.map((function(e){return e.email})),t=b.map((function(e){return e.username})),n=i.at(-1),a={uuid:n,name:w(n),usernames:t,emails:e};-1===s.findIndex((function(e){return e.uuid===a.uuid}))&&s.push(a),o({type:ne,value:s})};(0,a.useEffect)((function(){i.length>0&&k()}),[b]);var T=t.totalPages,C=t.pageLimit,S=u.length>0,P=T<=Math.ceil(100/C)?"All ".concat(T," pages"):"Top ".concat(Math.ceil(100/C)," of ").concat(T," pages"),O=(0,a.useState)(!1),D=O[0],R=O[1],F=function(e){for(var t=e.target.value.split(","),n=0;n<t.length;n++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(t[n]))return void R(!0);R(!1)},I=(0,a.useState)(!1),L=I[0],Z=I[1];return r().createElement(m.Form,null,T>1&&r().createElement(m.FormGroup,{label:"Select details:",fieldId:"details-field"},r().createElement(m.Grid,{md:4},r().createElement(m.GridItem,null,r().createElement(m.Radio,{onChange:function(){return o({type:re,value:!1})},isChecked:!d,name:"emailExtraRows",label:"Current page",id:"email-current-radio","aria-label":"email-current-radio"})),r().createElement(m.GridItem,null,r().createElement(m.Radio,{onChange:function(){return o({type:re,value:!0})},isChecked:d,name:"emailExtraRows",label:P,id:"email-extra-radio","aria-label":"email-extra-radio"})))),r().createElement(m.FormGroup,{label:"Recipient(s)",isRequired:!0,fieldId:"selectedRbacGroups-field"},r().createElement(m.Select,{variant:m.SelectVariant.checkbox,"aria-label":"Recipient",isOpen:L,onClear:function(){return o({type:te,value:[]}),void o({type:ne,value:[]})},onToggle:function(){return Z(!L)},onSelect:function(e,t){!function(e,t){var n,a=[t];if(i.indexOf(t)>-1){a=i.filter((function(e){return e!==t}));var r=s.findIndex((function(e){return e.uuid===t}));r>=0&&s.splice(r,1),n=a}else n=i.concat(a);o({type:te,value:n})}(0,"string"!=typeof t?t.toString():t),Z(!1)},hasInlineFilter:!0,selections:i,placeholderText:"Select Recipients"},h.map((function(e,t){var n=e.uuid,a=e.name;return r().createElement(m.SelectOption,{key:t,value:n},a)})))),s.length>0&&r().createElement(m.FormGroup,{label:"User emails",fieldId:"emails-field"},s.map((function(e,t){var n=e.name,a=e.emails;return r().createElement("p",{key:t},r().createElement("b",null,n),":"," ",a.length>0?a.join(", "):r().createElement("i",null,"No emails associated with this group"))}))),r().createElement(m.FormGroup,{label:"External recipient(s)",fieldId:"additionalRecipients-field"},r().createElement(m.TextInput,{placeholder:"Comma separated emails",type:"email",id:"additionalRecipients",name:"additionalRecipients",value:u,onBlur:function(e){return F(e)},onFocus:function(e){return F(e)},onChange:function(e){return o({type:ae,value:e})}}),u&&D&&r().createElement(m.FormHelperText,{isError:!0,icon:r().createElement(U.$O,null),isHidden:!D},"The email format must be valid and comma separated.")),r().createElement(m.FormGroup,{label:"Subject",fieldId:"subject-field"},r().createElement(m.TextInput,{placeholder:"Report is ready to be downloaded",type:"text",id:"subject",name:"subject",value:c,onChange:function(e){return o({type:oe,value:e})}})),r().createElement(m.FormGroup,{label:"Body",fieldId:"body-field"},r().createElement(m.TextArea,{rows:10,autoResize:!0,placeholder:"",type:"text",id:"body",name:"body",value:l,onChange:function(e){return o({type:le,value:e})}})),S&&r().createElement(r().Fragment,null,r().createElement(m.FormGroup,{label:"Link expires on",fieldId:"expiry-field"},r().createElement(me.Z,{categoryKey:"start_date",value:p,setValue:function(e){return o({type:ie,value:e}),void k()},validators:[function(e){return e<(0,x.Lg)()?"Must not be before today":""}]})),r().createElement(m.FormHelperText,{isError:!0,icon:r().createElement(U.$O,null),isHidden:!S},"Link expiry date only applies to external users")),r().createElement(m.FormGroup,{label:"Report link",fieldId:"link-field"},y))};var fe=n(37347),ge=function(){return ge=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ge.apply(this,arguments)};var he=function(){return he=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},he.apply(this,arguments)};var ve=function(e,t,n,a,r){var o="slug=".concat(r,"&token=").concat(n);return location.protocol+"//"+location.host+"/api/tower-analytics/v1/generate_pdf/"+(""===new URL(t).search?"?"+o:location.search+"&"+o)};var ye=function(){return ye=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ye.apply(this,arguments)};const Ee=function(e){var t=e.settingsNamespace,n=void 0===t?"settings":t,o=e.slug,l=e.name,i=e.description,s=e.endpointUrl,c=e.queryParams,u=e.selectOptions,d=e.y,p=e.label,g=e.xTickFormat,h=e.chartType,v=e.totalPages,y=e.pageLimit,E=e.sortOptions,b=e.sortOrder,_=e.dateGranularity,w=e.startDate,k=e.endDate,T=e.dateRange,C=e.inputs,S=(0,a.useState)(!1),P=S[0],O=S[1],D=(0,$.TL)(),R=(0,$.CG)((function(e){return null==e?void 0:e.pdfDownloadButton[o]})),F=R===Y.r.pending,I=R===Y.r.rejected,L=(0,f.cm)({chartSeriesHiddenProps:[]},n).chartSeriesHiddenProps,Z=(0,a.useState)(1),j=Z[0],G=Z[1],B=function(e,t,n){var r,o={downloadType:(null==e?void 0:e.downloadType)||"pdf",showExtraRows:(null==e?void 0:e.showExtraRows)||!1,additionalRecipients:(null==e?void 0:e.additionalRecipients)||"",eula:(null==e?void 0:e.eula)||!1,emailExtraRows:(null==e?void 0:e.emailExtraRows)||!1,subject:(null==e?void 0:e.subject)||"The Ansible report, ".concat(t,", is available for view"),body:(null==e?void 0:e.body)||"<b>".concat(t,"</b>\nThis report shows ").concat(n[0].toLowerCase()).concat(n.substring(1)),selectedRbacGroups:(null==e?void 0:e.selectedRbacGroups)||[],users:(null==e?void 0:e.users)||[],expiry:(null==e?void 0:e.expiry)||(r=new Date,r.setMonth(r.getMonth()+3),(0,x.p6)(r))},l=(0,a.useReducer)((function(e,t){switch(t.type){case Q:return he(he({},e),{downloadType:t.value});case ee:return he(he({},e),{showExtraRows:t.value});case te:return he(he({},e),{selectedRbacGroups:t.value});case ae:return he(he({},e),{additionalRecipients:t.value});case"SET_EULA":return he(he({},e),{eula:t.value});case re:return he(he({},e),{emailExtraRows:t.value});case oe:return he(he({},e),{subject:t.value});case le:return he(he({},e),{body:t.value});case ne:return he(he({},e),{users:t.value});case ie:return he(he({},e),{expiry:t.value});case X:return o;default:throw new Error("useOptionsData reducer action type ".concat(t.type," was not found."))}}),o);return{formData:l[0],dispatchReducer:l[1]}}({},l,i),A=B.formData,H=B.dispatchReducer,M=A.users,N=A.additionalRecipients,q=A.subject,V=A.body,z=A.emailExtraRows,K=A.showExtraRows,W=A.downloadType,se=A.expiry,de=function(){if("pdf"===W&&function(e){var t=e.slug,n=e.endpointUrl,a=e.queryParams,r=e.selectOptions,o=e.y,l=e.label,i=e.xTickFormat,s=e.chartType,c=e.totalPages,u=e.pageLimit,d=e.sortOptions,m=e.sortOrder,p=e.dateGranularity,f=e.startDate,g=e.endDate,h=e.dateRange,v=e.dispatch,y=e.chartSeriesHiddenProps,E=e.showExtraRows,b=e.inputs,_=b?ge(ge({},a),{inputs:b}):a;y||(y=[]),v((0,fe.jG)({slug:t,schemaParams:{y:o,label:l,xTickFormat:i,chartType:s},dataFetchingParams:{showExtraRows:E,endpointUrl:n,queryParams:_,selectOptions:r,chartSeriesHiddenProps:y,totalPages:c,pageLimit:u,sortOptions:d,sortOrder:m,dateGranularity:p,startDate:f,endDate:g,dateRange:h}},v,t,""))}({slug:o,endpointUrl:s,queryParams:c,selectOptions:u,y:d,label:p,xTickFormat:g,chartType:h,totalPages:v,pageLimit:y,sortOptions:E,sortOrder:b,dateGranularity:_,startDate:w,endDate:k,dateRange:T,dispatch:D,chartSeriesHiddenProps:L,showExtraRows:K,inputs:C}),"email"===W){var e={y:c.sort_options,label:c.sort_options,xTickFormat:(0,x.MA)(c.granularity),chartType:h},t=C?ye(ye({},c),{inputs:C}):c,n={slug:o,schemaParams:{y:e.y,label:e.label,xTickFormat:e.xTickFormat,chartType:e.chartType},dataFetchingParams:{expiry:se,showExtraRows:K,endpointUrl:s,queryParams:t,chartSeriesHiddenProps:L||[],totalPages:v,pageLimit:y,sortOptions:c.sort_options,sortOrder:"desc"===c.sort_order?"desc":"asc",dateGranularity:c.granularity,startDate:c.start_date,endDate:c.end_date,dateRange:c.quick_date_range}};!function(e){var t=e.slug,n=e.users,a=e.additionalRecipients,r=e.subject,o=e.body,l=e.dispatch,i=e.emailExtraRows,s=e.expiry,c=e.pdfPostBody,u=n.map((function(e){return e.usernames}));c.dataFetchingParams.showExtraRows=i,""!==a&&u.push(a.split(","));var d=Math.random().toString(36).substring(2,16),m=window.location.href;l((0,fe.Do)({recipient:u.flat(),subject:""===r?"Report is ready to be viewed":r,body:o.toString().replace(/(?:\r\n|\r|\n)/g,"<br>"),reportUrl:ve(0,m,d,0,t),expiry:s,slug:t,token:d,payload:"Download",pdfPostBody:c},l,t,d))}({slug:o,users:M,additionalRecipients:N,subject:q,body:V,dispatch:D,emailExtraRows:z,expiry:se,pdfPostBody:n})}H({type:X}),O(!1)},me=function(){var e=A.additionalRecipients,t=A.selectedRbacGroups,n=A.users;if(""!==e){for(var a=e.split(","),r=0;r<a.length;r++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(a[r]))return!0;return!1}return 0===t.length&&""===e||(0===n.length||1===n.length&&n[0].emails.length<=0)&&""===e||void 0},Ee=[{id:1,name:"Export format",component:r().createElement(ce,{formData:A,dispatchReducer:H})},{id:2,name:"Configure details",nextButtonText:"pdf"===W?"Export":"Send e-mail",component:"pdf"===W?r().createElement(ue,{options:{settingsNamespace:"settings",slug:o,name:l,description:i,endpointUrl:s,queryParams:c,selectOptions:u,y:d,label:p,xTickFormat:g,chartType:h,totalPages:v,pageLimit:y,sortOptions:E,sortOrder:b,dateGranularity:_,startDate:w,endDate:k,dateRange:T},formData:A,dispatchReducer:H}):r().createElement(pe,{options:{totalPages:v,pageLimit:y},formData:A,dispatchReducer:H})}],be=function(e){G(j<(null==e?void 0:e.id)?e.id:j)},_e=function(){H({type:X}),O(!1)},we=r().createElement(m.WizardFooter,null,r().createElement(m.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack;return 2!==t.id?r().createElement(r().Fragment,null,r().createElement(m.Button,{variant:m.ButtonVariant.primary,type:"submit",onClick:"pdf"===W&&v<=1?de:n,isDisabled:!W},"pdf"===W&&v<=1?"Export":"Next"),1!==t.id&&r().createElement(m.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(m.Button,{variant:"link",onClick:_e},"Cancel")):r().createElement(r().Fragment,null,r().createElement(m.Button,{variant:m.ButtonVariant.primary,type:"submit",onClick:de,isDisabled:"email"===W&&me()},"email"===W?"Send e-mail":"Export"),r().createElement(m.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(m.Button,{variant:"link",onClick:_e},"Cancel"))})));return r().createElement(r().Fragment,null,r().createElement(m.Tooltip,{position:m.TooltipPosition.top,content:"Export report"},r().createElement(m.Button,{variant:I?m.ButtonVariant.link:m.ButtonVariant.plain,"aria-label":"Export report",onClick:function(){return O(!0)},isDanger:I,"data-cy":"download-button"},F&&r().createElement(m.Spinner,{"data-cy":"download-button-loading",isSVG:!0,size:"md"}),!F&&I&&r().createElement(U.$O,{"data-cy":"download-button-error"}),!F&&!I&&r().createElement(J,{"data-cy":"download-button-icon"}))),P&&r().createElement(m.Wizard,{title:"Export report",description:"".concat(l," | ").concat("pdf"===W?"PDF":"E-mail"),steps:Ee,hideClose:!0,onNext:function(){return be},onBack:function(){return be},onSave:de,onClose:function(){_e()},footer:we,isOpen:P}))};var be;!function(e){e.operations="Operations",e.executive="Executive",e.subscription="Subscription",e.migration="Migration",e.controller="Controller",e.catalog="Catalog",e.automationHub="Automation Hub",e.modules="Modules",e.hosts="Hosts",e.tasks="Tasks",e.organization="Organization",e.jobTemplate="Job template",e.jobRuns="Job runs",e.timeSeries="Time series",e.performanceAnomalyDetection="Performance anomaly detection",e.savings="Savings"}(be||(be={}));var _e=[{key:be.operations,name:"Operations",description:"This report is useful to the engineers who manage day-to-day Ansible operations.  In other words, team members who write playbooks, do administration tasks within Controller, etc."},{key:be.executive,name:"Executive",description:"This report is useful to executives who want to monitor and learn about the Ansible operations happening across the company."},{key:be.subscription,name:"Subscription",description:"This report provides useful information around subscription data, helping you make decisions around compliance."},{key:be.migration,name:"Migration",description:"This report provides useful information around migrations, such as helping to identify what could be necessary to move to newer versions of the Ansible Automation Platform."},{key:be.controller,name:"Controller",description:"This report provides information gathered from Controller."},{key:be.catalog,name:"Catalog",description:"This report provides information gathered from Automation Services Catalog."},{key:be.automationHub,name:"Automation Hub",description:"This report provides information gathered from Automation Hub."},{key:be.modules,name:"Modules",description:"This report groups information by Ansible modules, the specific executable code ran in individual playbook or job template tasks."},{key:be.hosts,name:"Hosts",description:"This report groups information by the hosts within the Ansible inventories that are executed by playbooks or job templates."},{key:be.tasks,name:"Tasks",description:"This report groups information by the individual tasks that make up a playbook or job template."},{key:be.organization,name:"Organization",description:"This report groups information by the organizations set up within the company’s Ansible Controller instances."},{key:be.jobTemplate,name:"Job template",description:"This report groups information by the job templates set up within the company’s Ansible Controller instances."},{key:be.jobRuns,name:"Job runs",description:"This report groups information by the individual runs of playbooks or job templates."},{key:be.timeSeries,name:"Time series",description:"This report groups information for a specified time range and granularity, such as weekly (e.g., from the past 12 weeks) or monthly (e.g., between August and November)."},{key:be.performanceAnomalyDetection,name:"Performance anomaly detection",description:"This report provides the ability to detect anomalies in Ansible performance, such as identifying slow tasks or hosts, or tasks with high error rates."},{key:be.savings,name:"Savings",description:"This report is useful for showing potential or actual savings based on Ansible usage."}],we=[{title:"4",value:4},{title:"6",value:6},{title:"8",value:8},{title:"10",value:10}];const ke=function(e){return function(t){if(!t)return e;var n=JSON.stringify(e);return Object.entries(t).forEach((function(e){var t=new RegExp("VAR_".concat(e[0]),"g");n=n.replace(t,"".concat(e[1]))})),JSON.parse(n)}};var xe=function(){return xe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},xe.apply(this,arguments)};const Te=function(e){var t,n,o=e.slug,l=e.name,i=e.description,s=e.tableHeaders,c=e.expandedTableRowName,u=e.clickableLinking,d=e.showPagination,h=e.showKebab,v=e.defaultSelectedToolbarCategory,y=void 0===v?"":v,w=e.availableChartTypes,k=e.dataEndpoint,T=e.optionsEndpoint,S=e.schema,P=e.fullCard,O=void 0===P||P,D=(0,de.Bt)(k),F=(0,de.Bt)(T),I=(0,R.Me)(o),L=(0,f.Kx)(I),Z=L.queryParams,j=L.setFromPagination,B=L.setFromToolbar,A=(0,f.Kx)({chartType:w[0]},"settings"),H=A.queryParams,M=A.dispatch,N=(0,g.ZP)(F,{}),q=N.result,V=N.request,U=(0,g.ZP)(D,{meta:{count:0,legend:[]}}),K=U.request,J=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(U,["request"]),W=(0,f.eR)();(0,a.useEffect)((function(){K(Z),V(Z)}),[Z]);var Y={y:Z.sort_options,label:(null===(n=null===(t=q.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===Z.sort_options})))||void 0===n?void 0:n.value)||"Label Y",xTickFormat:(0,x.MA)(Z.granularity),chartType:H.chartType||w[0]},$=function(e,t){var n;switch(e){case"average_duration_per_task":n=t.toFixed(2)+" seconds";break;case"slow_hosts_percentage":case"template_success_rate":n=C(t)+"%";break;default:n=t.toFixed(2)}return n},X=function(e,t){!function(e,t,n,a,r,o,l,i){var s,c=((s={})[f.zG]=xe(xe({},(0,R.gb)(e)),{template_id:t,cluster_id:n,org_id:a,inventory_id:r,status:o,host_status:l,quick_date_range:i}),s);W(G.Z.getDetails(e),c)}("host_anomalies_scatter",t.datum.id,Z.cluster_id,Z.org_id,Z.inventory_id,Z.status,Z.host_status,Z.quick_date_range),window.location.reload()},Q=function(e){var t=e.datum;return t.host_status?"Host: "+t.host_name+"\nAverage duration per task: "+$(Z.sortOptions,t.y)+"\nHost status: "+t.host_status+"\nTotal tasks executed: "+t.total_tasks_executed+"\nLast Referenced: "+t.last_referenced+"\nSlow: "+(t.failed_duration?"True":"False"):Y.label+" for "+t.name+": "+$(Z.sort_options,t.y)},ee=function(e){var t,n=null===(t=null==q?void 0:q.sort_options)||void 0===t?void 0:t.map((function(e){return e.key}));return(null==n?void 0:n.includes(e))?{sort:{sortBy:{index:s.findIndex((function(e){return e.key===Z.sort_options}))||0,direction:Z.sort_order||"none"},onSort:function(e,t,n){var a;B("sort_order",n),B("sort_options",null===(a=s[t])||void 0===a?void 0:a.key)},columnIndex:s.findIndex((function(t){return t.key===e}))}}:{}},te=[w.length>1&&r().createElement(m.ToggleGroup,{"aria-label":"Chart type toggle",key:"chart-toggle"},w.map((function(e){return r().createElement(m.ToggleGroupItem,{key:e,"data-cy":"chart_type",text:"".concat((0,x.kC)(e)," Chart"),buttonId:e,isSelected:e===Y.chartType,onChange:function(){M({type:"SET_CHART_TYPE",value:e})}})}))),r().createElement(Ee,{key:"download-button",slug:o,name:l,description:i,endpointUrl:k,queryParams:Z,selectOptions:q,y:Y.y,label:Y.label,xTickFormat:Y.xTickFormat,totalPages:Math.ceil(J.result.meta.count/Z.limit),pageLimit:Z.limit,chartType:Y.chartType,sortOptions:Y.y,sortOrder:Z.sort_order,dateGranularity:Z.granularity,startDate:Z.start_date,endDate:Z.end_date,dateRange:Z.quick_date_range})];return O?r().createElement(m.Card,{"data-cy":J.isLoading?"toolbar_loading":"toolbar_loaded"},r().createElement(m.CardBody,null,r().createElement(b.Z,{categories:q,defaultSelected:y,filters:Z,setFilters:B,pagination:d&&r().createElement(p.Z,{count:J.result.meta.count,perPageOptions:we,params:{limit:+Z.limit,offset:+Z.offset},setPagination:j,isCompact:!0}),additionalControls:te}),s&&!h?r().createElement(E,{api:J},r().createElement(_.Z,{schema:ke(S)({label:Y.label,y:Y.y,xTickFormat:Y.xTickFormat,chartType:Y.chartType}),dataComponent:"foobar",data:J.result,specificFunctions:{labelFormat:{customTooltipFormatting:Q},onClick:{handleClick:X}}}),r().createElement(z,{legend:J.result.meta.tableData?J.result.meta.tableData:J.result.meta.legend,headers:s,getSortParams:ee,expandedRowName:c,clickableLinking:u,showKebab:h})):r().createElement(r().Fragment,null,r().createElement(E,{api:J},r().createElement(_.Z,{schema:ke(S)({label:Y.label,y:Y.y,xTickFormat:Y.xTickFormat,chartType:Y.chartType}),dataComponent:"foobar",data:J.result,specificFunctions:{labelFormat:{customTooltipFormatting:Q},onClick:{handleClick:X}}})),r().createElement(z,{legend:J.result.meta.tableData?J.result.meta.tableData:J.result.meta.legend,headers:s,getSortParams:ee,expandedRowName:c,clickableLinking:u,showKebab:h}))),r().createElement(m.CardFooter,null,d&&r().createElement(p.Z,{count:J.result.meta.count,perPageOptions:we,params:{limit:+Z.limit,offset:+Z.offset},setPagination:j,variant:m.PaginationVariant.bottom}))):r().createElement("div",{"data-cy":J.isLoading?"toolbar_loading":"toolbar_loaded"},r().createElement(b.Z,{categories:q,defaultSelected:y,filters:Z,setFilters:B}),s&&r().createElement(E,{api:J},r().createElement(_.Z,{schema:ke(S)({label:Y.label,y:Y.y,xTickFormat:Y.xTickFormat,chartType:Y.chartType}),data:J.result})))};var Ce=n(83474),Se=l.ZP.div(Oe||(Oe=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 46.8px;\n  padding-left: 100px;\n"],["\n  height: 46.8px;\n  padding-left: 100px;\n"])));const Pe=function(e){var t=e.totalSavings,n=void 0===t?0:t,a=e.currentPageSavings,o=void 0===a?0:a,l=e.isLoading,i=void 0!==l&&l;return r().createElement(r().Fragment,null,["Total savings","Current page savings"].map((function(e,t){return r().createElement(m.Card,{"data-cy":e.toLowerCase().replace(" ","_").replace(" ","_"),isPlain:!0,isCompact:!0,key:e},r().createElement(m.CardTitle,null,e),r().createElement(m.CardBody,null,r().createElement(m.Title,{headingLevel:"h3",size:0===t?"4xl":"xl",style:{color:"var(--pf-global--success-color--200)"}},i?r().createElement(Se,null,r().createElement(m.Spinner,{"data-cy":"spinner",isSVG:!0,size:"lg"})):(0,T.Z)(0===t?n:o))))})))};var Oe;const De=(0,K.IU)({name:"DollarSignIcon",height:512,width:288,svgPath:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z",yOffset:0,xOffset:0});var Re=(0,l.ZP)(m.InputGroup)(Le||(Le=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  width: 170px;\n"],["\n  width: 170px;\n"]))),Fe=function(e){return+e&&+e<0?NaN:e};const Ie=function(e){var t=e.costManual,n=void 0===t?0:t,a=e.setFromCalculation,o=void 0===a?function(){return{}}:a,l=e.costAutomation,i=void 0===l?0:l,s=e.readOnly,c=void 0===s||s;return r().createElement(m.Card,{isPlain:!0,isCompact:!0},r().createElement(m.CardBody,null,r().createElement("p",null,"Manual cost of automation",r().createElement("span",{style:{color:"var(--pf-global--Color--dark-200)",fontSize:"0.8em",display:"block"}},"(e.g. average salary of mid-level Software Engineer)")),r().createElement(Re,null,r().createElement(m.InputGroupText,null,r().createElement(De,null)),r().createElement(m.TextInput,{id:"manual-cost",key:"manual-cost",type:"number","aria-label":"manual-cost",value:isNaN(n)?"":n.toString(),onChange:function(e){return o("manual_cost",Fe(+e))},isDisabled:c}),r().createElement(m.InputGroupText,null,"/hr")),r().createElement("p",{style:{paddingTop:"10px"}},"Automated process cost"),r().createElement(Re,null,r().createElement(m.InputGroupText,null,r().createElement(De,null)),r().createElement(m.TextInput,{id:"automation-cost",key:"automation-cost",type:"number","aria-label":"automation-cost",value:isNaN(i)?"":i.toString(),onChange:function(e){return o("automation_cost",Fe(+e))},isDisabled:c}),r().createElement(m.InputGroupText,null,"/hr"))))};var Le,Ze=n(53688),je=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Savings per template")),r().createElement("p",null,"Savings per template is the difference between the manual cost and automation cost of successfully running templates across hosts. Manual cost is calculated by multiplying the number of hours spent manually running templates across hosts by the average hourly wages per engineer. Automation cost is the total amount of time, in seconds, spent running templates automatically multiplied by the average monthly cost for automated processes."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate manual cost:"),r().createElement(m.CodeBlock,null,r().createElement(m.CodeBlockCode,null,"manual time  = configurable time (in minutes) to manually complete the task on one host * number of host runs \nmanual cost = manual time * configurable manual cost of automation (e.g. average salary of mid-level Software Engineer)")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate automation cost:"),r().createElement(m.CodeBlock,null,r().createElement(m.CodeBlockCode,null,"automation time = successful elapsed total / 3600\nautomation cost = automation time * configurable automated process cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate automation cost:"),r().createElement(m.CodeBlock,null,r().createElement(m.CodeBlockCode,null,"savings per template = manual cost - automation cost")),r().createElement("br",null))},Ge=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Failed hosts cost per template")),r().createElement("p",null,"Failed hosts cost per template is the total amount of time spent on failed automated job runs multiplied by the configured automated process cost."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate failed host cost per template:"),r().createElement(m.CodeBlock,null,r().createElement(m.CodeBlockCode,null,"failed cost per template = (failed elapsed total / 3600) * configurable automated process cost")),r().createElement("br",null))},Be=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Monetary gain per template")),r().createElement("p",null,"Monetary gain per template is the difference between total savings per template and failed hosts cost per template."),r().createElement("br",null),r().createElement("p",null,"The formula for monetary gain per template:"),r().createElement(m.CodeBlock,null,r().createElement(m.CodeBlockCode,null,"monetary gain per template = savings per template - failed host cost per template")),r().createElement("br",null))};const Ae=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return r().createElement(r().Fragment,null,r().createElement(m.Button,{variant:m.ButtonVariant.link,onClick:function(){return n(!0)},icon:r().createElement(Ze.uM,null),"data-cy":"automation_formula_button"},"Automation formula"),r().createElement(m.Modal,{title:"Automation formula","data-cy":"automation_formula_modal",isOpen:t,onClose:function(){return n(!1)},variant:m.ModalVariant.medium,actions:[r().createElement(m.Button,{key:"cancel",variant:m.ButtonVariant.primary,onClick:function(){return n(!1)},"data-cy":"automation_formula_cancel_button"},"Close")]},r().createElement("p",null,"We use manual effort versus time spent on automation as factors to create formulas for cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),r().createElement("br",null),r().createElement(je,null),r().createElement("br",null),r().createElement(Ge,null),r().createElement("br",null),r().createElement(Be,null)))},He=function(e){var t=e.template;return r().createElement(w.Td,{colSpan:5},r().createElement(w.ExpandableRowContent,null,r().createElement(m.DescriptionList,{columnModifier:{default:"3Col"}},r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Elapsed"),r().createElement(m.DescriptionListDescription,null,t.elapsed," seconds")),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Host count"),r().createElement(m.DescriptionListDescription,null,t.host_count)),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Total count"),r().createElement(m.DescriptionListDescription,null,t.total_count)),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Total org count"),r().createElement(m.DescriptionListDescription,null,t.total_org_count)),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Total cluster count"),r().createElement(m.DescriptionListDescription,null,t.total_cluster_count)),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Total inventory count"),r().createElement(m.DescriptionListDescription,null,t.total_inventory_count)),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Template success rate"),r().createElement(m.DescriptionListDescription,null,t.template_success_rate.toFixed(2))),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Savings from successful hosts"),r().createElement(m.DescriptionListDescription,null,(0,T.Z)(t.successful_hosts_savings))),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Costs from failed hosts"),r().createElement(m.DescriptionListDescription,null,(0,T.Z)(t.failed_hosts_costs))),r().createElement(m.DescriptionListGroup,null,r().createElement(m.DescriptionListTerm,null,"Monetary gain"),r().createElement(m.DescriptionListDescription,null,(0,T.Z)(t.monetary_gain))))))},Me=function(e){var t=e.template,n=e.variableRow,o=e.setDataRunTime,l=e.setEnabled,i=e.redirectToJobExplorer,s=e.readOnly,c=void 0===s||s,u=(0,a.useState)("true"===window.localStorage.getItem(t.id.toString())||!1),d=u[0],p=u[1];return r().createElement(r().Fragment,null,r().createElement(w.Tr,null,r().createElement(w.Td,{expand:{rowIndex:t.id,isExpanded:d,onToggle:function(){return e=!d,n=t.id,window.localStorage.setItem(n.toString(),e?"true":"false"),void p(e);var e,n}}}),r().createElement(w.Td,null,r().createElement(m.Tooltip,{content:"List of jobs for this template for past 30 days"},r().createElement(m.Button,{onClick:function(){return i(t.id)},variant:m.ButtonVariant.link,style:{padding:"0px"}},t.name))),n&&r().createElement(w.Td,null,function(e,t){var n,a;switch(e){case"elapsed":a=t,n=new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(a)+" seconds";break;case"template_automation_percentage":n=C(t)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;default:n=(+t).toFixed(2)}return n}(n.key,+t[n.key])),r().createElement(w.Td,null,r().createElement(m.InputGroup,null,r().createElement(m.TextInput,{autoFocus:window.localStorage.getItem("focused")==="manual-time-"+t.id.toString(),id:"manual-time-"+t.id.toString(),"data-cy":"manual-time",style:{maxWidth:"150px"},type:"number","aria-label":"time run manually",value:t.avgRunTime/60,onBlur:function(){return window.localStorage.setItem("focused","")},onChange:function(e){window.localStorage.setItem("focused","manual-time-"+t.id.toString()),o(60*+e,t.id)},isDisabled:c}),r().createElement(m.InputGroupText,null,"min"),r().createElement(m.InputGroupText,{variant:m.InputGroupTextVariant.plain},"x ",t.successful_hosts_total," host runs"))),r().createElement(w.Td,{"data-cy":"savings",style:{color:t.enabled?k.global_success_color_200.value:k.global_disabled_color_200.value}},(0,T.Z)(+t.monetary_gain)),r().createElement(w.Td,null,r().createElement(m.Switch,{label:"Show",labelOff:"Hide",isChecked:t.enabled,onChange:function(e){return l(e)},isDisabled:c}))),r().createElement(w.Tr,{isExpanded:d},r().createElement(He,{template:t})))};var Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ne.apply(this,arguments)};const qe=function(e){var t=e.data,n=void 0===t?[]:t,o=e.variableRow,l=e.setDataRunTime,i=void 0===l?function(){return{}}:l,s=e.setEnabled,c=void 0===s?function(){return function(){return{}}}:s,u=e.redirectToJobExplorer,d=void 0===u?function(){return{}}:u,p=e.getSortParams,g=void 0===p?function(){return{}}:p,h=e.readOnly,v=void 0===h||h,y=(0,a.useState)(!1),E=y[0],b=y[1],_=(0,R.Me)("automation_calculator"),k=(0,f.Kx)(_).setFromToolbar,x=[r().createElement(m.DropdownItem,{key:"showAll",component:"button",onClick:function(){return c(void 0)(!0)}},"Show all"),r().createElement(m.DropdownItem,{key:"hideAll",component:"button",onClick:function(){return c(void 0)(!1)}},"Hide all"),r().createElement(m.DropdownItem,{key:"showAll",component:"button",onClick:function(){return k("template_weigh_in",void 0)}},"Display all template rows"),r().createElement(m.DropdownItem,{key:"hideHiddenTemplates",component:"button",onClick:function(){return k("template_weigh_in",!0)}},"Display only shown template rows"),r().createElement(m.DropdownItem,{key:"showHiddenTemplates",component:"button",onClick:function(){return k("template_weigh_in",!1)}},"Display only hidden template rows")];return r().createElement(w.TableComposable,{"data-cy":"table","aria-label":"ROI Table",variant:w.TableVariant.compact},r().createElement(w.Thead,null,r().createElement(w.Tr,null,r().createElement(w.Th,null),r().createElement(w.Th,null,"Name"),o&&r().createElement(w.Th,Ne({},g()),o.value),r().createElement(w.Th,null,"Manual time"),r().createElement(w.Th,null,"Savings"),r().createElement(w.Th,{style:{float:"right",overflow:"visible",zIndex:1}},r().createElement(m.Dropdown,{onSelect:function(){b(!0)},toggle:r().createElement(m.KebabToggle,{style:{paddingBottom:"0px"},id:"table-kebab",onToggle:function(){return b(!E)}}),isOpen:E,isPlain:!0,dropdownItems:x,position:"right"})))),r().createElement(w.Tbody,null,n.map((function(e){return r().createElement(Me,{key:e.id,template:e,variableRow:o,setDataRunTime:i,redirectToJobExplorer:d,setEnabled:c(e.id),readOnly:v})}))))};var Ve=n(27443),ze=n(28216),Ue=n(83215),Ke=n(39677),Je=n(10001),We=function(){return We=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},We.apply(this,arguments)},Ye=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((a=a.apply(e,t||[])).next())}))},$e=function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},Xe=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Qe=l.ZP.div(rt||(rt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"],["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"]))),et=Xe(Xe([],we,!0),[{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],!1),tt=function(e){return e.filter((function(e){return e.enabled}))},nt=function(e,t,n){return e.map((function(e){var a=(0,x.B3)(e.avgRunTime)*e.successful_hosts_total*parseFloat(n),r=(0,x.B3)(e.successful_elapsed_total)*parseFloat(t),o=(0,x.YD)(r,a);return We(We({},e),{delta:o,manualCost:a,automatedCost:r})}))};const at=function(e){var t,n,o=e.slug,l=e.name,i=e.description,s=e.dataEndpoint,c=e.optionsEndpoint,u=e.schema,d=e.fullCard,h=void 0===d||d,v=(0,de.Bt)(s),y=(0,de.Bt)(c),b=(0,R.Me)(o),w=(0,f.eR)(),k=(0,f.Kx)(b),x=k.queryParams,C=k.setFromToolbar,S=k.setFromPagination,P=(0,a.useState)(""),O=P[0],D=P[1],F=(0,a.useState)(""),I=F[0],L=F[1],Z=function(e){var t=e.legend;return(void 0===t?[]:t).map((function(e){return We(We({},e),{delta:0,avgRunTime:60*e.manual_effort_minutes||3600,manualCost:0,automatedCost:0,enabled:e.template_weigh_in})}))},j=(0,g.ZP)(y,{sort_options:[{key:b.sort_options,value:b.sort_options}]}),G=j.result,B=j.request,A=(0,g.ZP)((function(e){return Ye(void 0,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return[4,v(e)];case 1:return t=n.sent(),[2,We(We({},t),{items:nt(Z(t.meta),t.cost.hourly_manual_labor_cost,t.cost.hourly_automation_cost)})]}}))}))}),{items:[],meta:{count:0}}),H=A.request,M=A.setValue,N=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(A,["request","setValue"]),q=function(e){M(We(We({},N.result),{items:e}))},V=function(e,t,n){return void 0===t&&(t=O),void 0===n&&(n=I),{currency:"USD",hourly_manual_labor_cost:t,hourly_automation_cost:n,templates_manual_equivalent:e.map((function(e){return{template_id:e.id,effort_minutes:e.avgRunTime/60,template_weigh_in:e.enabled}}))}},z=(0,ze.I0)(),U=function(){return Ye(void 0,void 0,void 0,(function(){var e;return $e(this,(function(t){switch(t.label){case 0:return[4,v(x)];case 1:return e=t.sent(),N.result.monetary_gain_current_page=e.monetary_gain_current_page,N.result.monetary_gain_other_pages=e.monetary_gain_other_pages,q(Z(e.meta)),[2,e]}}))}))},K=function(e,t){return Ye(void 0,void 0,void 0,(function(){var n,a,r;return $e(this,(function(o){switch(o.label){case 0:n="automation_cost"===e?t:I,a="manual_cost"===e?t:O,r="automation_cost"===e?"Automation cost":"Manual cost",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,de.mN)(V(N.result.items,a,n))];case 2:return o.sent(),[3,4];case 3:return o.sent(),z((0,Ue.wN)({title:"Unable to save changes to ".concat(r,"."),description:"Unable to save changes ".concat(r,". Please try again."),variant:Ke.k.danger,autoDismiss:!1})),[2];case 4:return[4,U()];case 5:return o.sent(),"manual_cost"===e?D(t):L(t),[2]}}))}))},J=function(e,t){return Ye(void 0,void 0,void 0,(function(){var n;return $e(this,(function(a){switch(a.label){case 0:n=N.result.items.map((function(n){return n.id===t?(n.avgRunTime=e,nt([n],I,O)[0]):n})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,de.mN)(V(n),z)];case 2:return a.sent(),[3,4];case 3:return a.sent(),z((0,Ue.wN)({title:"Unable to save changes to Manual time",description:"Unable to save changes to Manual time. Please try again.",variant:Ke.k.danger,autoDismiss:!1})),[2];case 4:return[4,U()];case 5:return a.sent(),[2]}}))}))},W=function(e){return function(t){return Ye(void 0,void 0,void 0,(function(){var n;return $e(this,(function(a){switch(a.label){case 0:n=e?N.result.items.map((function(n){return n.id===e?We(We({},n),{enabled:t}):n})):N.result.items.map((function(e){return We(We({},e),{enabled:t})})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,de.mN)(V(n))];case 2:return a.sent(),[3,4];case 3:return a.sent(),z((0,Ue.wN)({title:"Unable to save changes to visibility",description:"Unable to save changes to visibility. Please try again.",variant:Ke.k.danger,autoDismiss:!1})),[2];case 4:return[4,U()];case 5:return a.sent(),q(n),[2]}}))}))}},Y=function(){return{sort:{sortBy:{index:2,direction:x.sort_order||"none"},onSort:function(e,t,n){C("sort_order",n)},columnIndex:2}}};(0,a.useEffect)((function(){var e;!(null===(e=N.result)||void 0===e?void 0:e.cost)||I||O||(D(N.result.cost.hourly_manual_labor_cost),L(N.result.cost.hourly_automation_cost))}),[N]),(0,a.useEffect)((function(){q(nt(N.result.items,I,O))}),[I,O]),(0,a.useEffect)((function(){B(x),H(x)}),[x]);var $=function(e){var t,n=((t={})[f.zG]=We(We({},R.cY.defaultParams),{quick_date_range:"last_30_days",template_id:[e]}),t);w(Ve.n.jobExplorer,n)},X={y:x.sort_options,tooltip:"Savings for",field:x.sort_options,label:(null===(n=null===(t=G.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===x.sort_options})))||void 0===n?void 0:n.value)||"Label Y"},Q=function(e){var t=e.datum;return X.label+" for "+t.name+": "+function(e,t){var n;switch(e){case"elapsed":n=t.toFixed(2)+" seconds";break;case"template_automation_percentage":n=t.toFixed(2)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;default:n=t.toFixed(2)}return n}(x.sort_options,t.y)},ee=function(e){var t,n,a,r;return!(null===(n=null===(t=e.result.rbac)||void 0===t?void 0:t.perms)||void 0===n?void 0:n.all)&&!(null===(r=null===(a=e.result.rbac)||void 0===a?void 0:a.perms)||void 0===r?void 0:r.write)},te=function(){var e;return r().createElement(m.Card,{isPlain:!0},h&&r().createElement(m.CardHeader,null,r().createElement(m.CardTitle,null,"Automation savings")),N.isLoading?r().createElement(Qe,null,r().createElement(m.Spinner,{"data-cy":"spinner",isSVG:!0})):tt(null===(e=null==N?void 0:N.result)||void 0===e?void 0:e.items).length>0?r().createElement(_.Z,{schema:ke(u)({label:X.label,tooltip:X.tooltip,field:X.field}),data:{items:tt(N.result.items)},specificFunctions:{labelFormat:{customTooltipFormatting:Q}}}):r().createElement(Je.Z,{title:"No results found",message:"No results match the filter criteria. Clear all filters and try again.",showButton:!0,label:"Clear all filters",onButtonClick:function(){return C(void 0,void 0)}}))},ne=function(){var e,t,n;return r().createElement(m.Stack,null,r().createElement(m.StackItem,null,r().createElement(Pe,{totalSavings:(null===(e=N.result)||void 0===e?void 0:e.monetary_gain_other_pages)+(null===(t=N.result)||void 0===t?void 0:t.monetary_gain_current_page),currentPageSavings:null===(n=N.result)||void 0===n?void 0:n.monetary_gain_current_page,isLoading:N.isLoading})),r().createElement(m.StackItem,null,r().createElement(m.Stack,null,r().createElement(m.StackItem,null,r().createElement(Ie,{costManual:O,setFromCalculation:K,costAutomation:I,readOnly:ee(N)})),r().createElement(m.StackItem,null,r().createElement(Ae,null)))))};return r().createElement(E,{api:N,customLoading:!0,customEmptyState:!0},function(){var e,t,n;return h?r().createElement(m.Card,null,r().createElement(m.CardBody,null,r().createElement(Ce.Z,{categories:G,filters:x,setFilters:C,pagination:r().createElement(p.Z,{count:N.result.meta.count,perPageOptions:et,params:{limit:+x.limit,offset:+x.offset},setPagination:S,isCompact:!0}),additionalControls:[r().createElement(Ee,{key:"download-button",slug:o,name:l,description:i,endpointUrl:s,queryParams:x,selectOptions:G,y:"",label:"",xTickFormat:"",totalPages:Math.ceil(N.result.meta.count/x.limit),pageLimit:x.limit,sortOptions:X.y,sortOrder:x.sort_order,startDate:x.start_date,endDate:x.end_date,dateRange:x.quick_date_range,inputs:{costManual:O,costAutomation:I,totalSavings:(null===(e=N.result)||void 0===e?void 0:e.monetary_gain_other_pages)+(null===(t=N.result)||void 0===t?void 0:t.monetary_gain_current_page),currentPageSavings:null===(n=N.result)||void 0===n?void 0:n.monetary_gain_current_page}})]}),r().createElement(m.Grid,{hasGutter:!0},r().createElement(m.GridItem,{span:9},te()),r().createElement(m.GridItem,{span:3},ne()),r().createElement(m.GridItem,{span:12},r().createElement("p",null,"Enter the time it takes to run the following templates manually."),N.isLoading?r().createElement(m.Spinner,{"data-cy":"spinner",isSVG:!0}):r().createElement(qe,{redirectToJobExplorer:$,data:N.result.items,variableRow:G.sort_options.find((function(e){return e.key===x.sort_options})),setDataRunTime:J,setEnabled:W,getSortParams:Y,readOnly:ee(N)})))),r().createElement(m.CardFooter,null,r().createElement(p.Z,{count:N.result.meta.count,perPageOptions:et,params:{limit:+x.limit,offset:+x.offset},setPagination:S,variant:m.PaginationVariant.bottom}))):r().createElement(r().Fragment,null,r().createElement(Ce.Z,{categories:G,filters:x,setFilters:C}),r().createElement(m.Grid,{hasGutter:!0},r().createElement(m.GridItem,{span:9},te()),r().createElement(m.GridItem,{span:3},ne())))}())};var rt,ot=function(){return ot=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ot.apply(this,arguments)};const lt=function(e,t){switch(e.layoutComponent){case"standard":return!0===t?r().createElement(Te,ot({},e.layoutProps)):r().createElement(Te,ot({},e.layoutProps,{fullCard:!1}));case"automationCalculator":return!0===t?r().createElement(at,ot({},e.layoutProps)):r().createElement(at,ot({},e.layoutProps,{fullCard:!1}));default:return r().createElement(r().Fragment,null)}};var it=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},st=l.ZP.p(dt||(dt=it(["\n  max-width: 70em;\n  padding-top: 8px;\n"],["\n  max-width: 70em;\n  padding-top: 8px;\n"]))),ct=(0,l.ZP)(m.Label)(mt||(mt=it(["\n  margin-top: 16px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n"],["\n  margin-top: 16px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n"])));const ut=function(){var e=location.pathname.split("/").pop(),t=(0,g.ZP)((function(){return t=void 0,n=void 0,r=function(){return function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(t){switch(t.label){case 0:return[4,(0,de.T5)(e)];case 1:return[2,t.sent().report]}}))},new((a=void 0)||(a=Promise))((function(e,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(l,i)}s((r=r.apply(t,n||[])).next())}));var t,n,a,r}),{}),n=t.result,o=t.request,l=t.isSuccess,p=t.isLoading,f=t.error;(0,a.useEffect)((function(){o()}),[e]);var h=[{title:"Reports",navigate:G.Z.get}];return function(){if(l){var t=n.layoutProps,a=t.name,o=t.description,g=t.tags;return r().createElement(r().Fragment,null,r().createElement(c.Z,{"data-cy":"header-".concat(e)},r().createElement(d.Z,{items:h}),r().createElement(u.Z,{title:a}),r().createElement(st,null,o),g.map((function(e,t){var n=_e.find((function(t){return t.key===e}));if(n)return r().createElement(m.Tooltip,{key:"tooltip_".concat(t),position:m.TooltipPosition.bottom,content:n.description},r().createElement(ct,{"data-cy":n.name,key:t},n.name))}))),r().createElement(i.Z,null,lt(n,!0)))}return p?r().createElement(r().Fragment,null):f?r().createElement(s.Z,{title:"404: Page does not exist.",body:"The report you are looking for does not exist.",buttonText:"Return to Reports page",link:G.Z.get}):r().createElement(r().Fragment,null)}()};var dt,mt,pt=n(71973),ft=n(5964),gt=n(93174),ht=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},vt=(0,l.ZP)(m.CardTitle)(_t||(_t=ht(["\n  word-break: break-word;\n"],["\n  word-break: break-word;\n"]))),yt=l.ZP.small(wt||(wt=ht(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n  white-space: pre-line;\n"],["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n  white-space: pre-line;\n"]))),Et=(0,l.ZP)(m.Label)(kt||(kt=ht(["\n  margin-right: 10px;\n  margin-bottom: 10px;\n"],["\n  margin-right: 10px;\n  margin-bottom: 10px;\n"])));const bt=function(e){var t=e.report,n=t.slug,a=t.description,l=t.name,i=t.tags,s=e.selected,c=e.setSelected,u=e.history;return r().createElement(m.Card,{"data-cy":n,onClick:function(){u.replace({search:xt()}),c(n)},isSelectableRaised:!0,isSelected:s===n},r().createElement(m.CardHeader,null,r().createElement(m.CardHeaderMain,null,r().createElement(vt,null,r().createElement(o.Link,{to:G.Z.getDetails(n)},l)))),r().createElement(m.CardBody,null,a?r().createElement(yt,null,a):null),r().createElement(m.CardFooter,null,i.map((function(e,t){var n=_e.find((function(t){return t.key===e}));if(n)return r().createElement(m.Tooltip,{key:"tooltip_".concat(t),position:m.TooltipPosition.top,content:n.description},r().createElement(Et,{key:t},n.name))}))))};var _t,wt,kt,xt=function(){var e=window.location.href,t="";return e.includes("default.attributes[]")?t=e.substring(e.indexOf("?")+1,e.indexOf("default.attributes[]")-1):e.includes("?")&&!1===e.includes("default.attributes[]")&&(t=e.substring(e.indexOf("?")+1)),t};const Tt=function(){var e,t=(0,a.useState)(!1),n=t[0],l=t[1],s=(0,o.useHistory)(),d=0,p="",h="",v=(0,f.Kx)((0,R.Me)("reports"),"allReports").queryParams,E=(0,f.Kx)((0,R.Me)("reports"),"allReports").setFromToolbar,_=(0,g.ZP)(de.Pu,{reports:[]}),w=_.result.reports,k=_.isSuccess,x=_.error,T=_.request,C=(0,f.Kx)((0,R.Me)("reports")),S=(0,g.ZP)(de.c$,{}),P=S.result,O=S.request;(0,a.useEffect)((function(){T(v),O(C.queryParams)}),[v]);var D=w,F=v.selected_report||(null===(e=D[0])||void 0===e?void 0:e.slug)||"",I=function(e){return E("selected_report",e)},L=(0,g.ZP)((function(){return e=void 0,t=void 0,a=function(){return function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(e){switch(e.label){case 0:return[4,(0,de.T5)(F)];case 1:return[2,e.sent().report]}}))},new((n=void 0)||(n=Promise))((function(r,o){function l(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((a=a.apply(e,t||[])).next())}));var e,t,n,a}),{}),Z=L.result,j=L.request,B=L.isSuccess;(0,a.useEffect)((function(){if(k&&D.length>0){var e=D.filter((function(e){var t=e.slug;return F===t}));""!==F&&0!==e.length||I(D[0].slug),j()}}),[D,F]);var A=[k&&D.length>0&&B&&D.map((function(e){return r().createElement(m.Button,{key:e.slug,variant:m.ButtonVariant.plain,"aria-label":"Report list item",onClick:function(){return I(e.slug)}},r().createElement(m.DropdownItem,{key:e.slug},e.name))}))];return r().createElement(r().Fragment,null,r().createElement(c.Z,{"data-cy":"header-all_reports"},r().createElement(u.Z,{title:"Reports"}),r().createElement(b.Z,{categories:P,filters:v,setFilters:E})),k&&D.length>0&&B&&r().createElement(i.Z,null,D.filter((function(e){return e.slug===F})).map((function(e){return d=D.indexOf(e),D.indexOf(e)<D.length-1&&(p=D[d+1].slug),D.indexOf(e)>0&&(h=D[d-1].slug),r().createElement(r().Fragment,null,r().createElement(m.Card,{key:e.slug,style:{maxWidth:"100%",marginBottom:"25px"},isCompact:!0,"data-cy":e.slug},r().createElement(m.CardHeader,{style:{paddingTop:"16px",paddingBottom:"16px",paddingRight:"0px"}},r().createElement(m.CardTitle,null,r().createElement(o.Link,{"data-cy":"preview_title_link",to:G.Z.getDetails(e.slug)},e.name)),r().createElement(m.CardActions,{style:{marginLeft:"15px",marginTop:"-2px"}},e.tags.map((function(e,t){var n=_e.find((function(t){return t.key===e}));if(n)return r().createElement(m.Tooltip,{key:"tooltip_".concat(t),position:m.TooltipPosition.top,content:n.description},r().createElement(m.Label,{key:t},n.name))}))),r().createElement(m.CardActions,null,r().createElement(m.Button,{variant:m.ButtonVariant.plain,"aria-label":"Previous report","data-cy":"previous_report_button",isDisabled:0===D.indexOf(e),onClick:function(){s.replace({search:xt()}),I(h)}},r().createElement(pt.fP,null)),r().createElement(m.Dropdown,{"data-cy":"preview_dropdown",isPlain:!0,onSelect:function(){l(!n),s.replace({search:xt()})},toggle:r().createElement(m.DropdownToggle,{onToggle:function(e){return l(e)},toggleIndicator:ft.VA,id:"report_list","data-cy":"selected_report_dropdown",style:{color:"#151515"}},e.name),isOpen:n,dropdownItems:A}),r().createElement(m.Button,{variant:m.ButtonVariant.plain,"aria-label":"Next report","data-cy":"next_report_button",isDisabled:D.indexOf(e)>=D.length-1,onClick:function(){s.replace({search:xt()}),I(p)}},r().createElement(gt.oR,null)))),r().createElement(m.Divider,null),lt(Z,!1),r().createElement(m.CardFooter,{style:{paddingBottom:"16px"}},r().createElement(o.Link,{to:G.Z.getDetails(e.slug),style:{float:"right"},"data-cy":"view_full_report_link"},"View full report"))))})),r().createElement(m.Gallery,{"data-cy":"all_reports",hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},D.map((function(e){return r().createElement(bt,{key:e.slug,report:e,selected:F,setSelected:I,history:s})})))),k&&0===D.length&&r().createElement(Je.Z,{label:"Clear all filters",title:"No results found",message:"No results match the filter criteria. Clear all filters and try again.",showButton:!0,path:"/reports"}),x&&r().createElement(y.Z,null))},Ct=function(){return r().createElement(o.Switch,null,r().createElement(o.Route,{exact:!0,path:G.Z.get},r().createElement(Tt,null)),r().createElement(o.Route,{path:G.Z.details},r().createElement(ut,null)))}},22030:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(27443);const r={get:"".concat(a.n.reports),details:["".concat(a.n.reports,"/:slug"),"/automation_calculator"],getDetails:function(e){return"".concat(a.n.reports,"/").concat(e)}}},91354:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}}}]);
//# sourceMappingURL=../sourcemaps/3688.ffe3775b3ed32b19dfef6fc7d68697a0.js.map