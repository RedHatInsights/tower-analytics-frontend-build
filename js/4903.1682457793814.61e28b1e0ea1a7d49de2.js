"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[4903],{94592:(e,t,n)=>{n.d(t,{Z:()=>_});var a,r,o,l,i,s=n(30168),c=n(92950),u=n.n(c),d=n(29163),m=n(45697),p=n.n(m),f=d.default.div(a||(a=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 100%;\n  max-width: 100%;\n  height: 1rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n"]))),g=d.default.div(r||(r=(0,s.Z)(["\n  height: 100%;\n"]))),v=d.default.div(o||(o=(0,s.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n"]))),h=d.default.div(l||(l=(0,s.Z)(["\n  padding-left: 2rem;\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n"]))),y=d.default.div(i||(i=(0,s.Z)(["\n  width: 0.75rem;\n  height: 0.75rem;\n  margin-right: 0.5rem;\n"])));function b(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}var E=function(e){var t=e.categoryCount,n=e.categoryColor,a=e.showPercent,r=void 0!==a&&a,o=Object.values(t).reduce((function(e,t){return e+t})),l=Object.keys(t).filter((function(e){return t[e]>0})).sort((function(e,n){return t[e]<t[n]?1:t[e]>t[n]?-1:0})).map((function(e){return{name:e,barSpacing:t[e]/o,color:n[e]}})),i=1-.15*(l.length-1)/100;return u().createElement(u().Fragment,null,u().createElement(f,null,l.map((function(e,t){var n=e.barSpacing,a=e.color;return t<l.length-1?u().createElement(u().Fragment,{key:t},u().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}),u().createElement(g,{style:{backgroundColor:"transparent",width:"".concat(.15,"%")}})):u().createElement(u().Fragment,{key:t},u().createElement(g,{style:{backgroundColor:a,width:"".concat(100*n*i,"%")}}))}))),u().createElement(v,null,l.map((function(e){var t=e.name,n=e.barSpacing,a=e.color;return u().createElement(h,{key:"label-".concat(t)},u().createElement(y,{style:{backgroundColor:a}}),r?u().createElement("p",null,b(t)," ",Math.round(100*n),"%"):u().createElement("p",null,b(t)))}))))};E.propTypes={categoryColor:p().object.isRequired,categoryCount:p().object.isRequired,showPercent:p().bool};const _=E},48236:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(92950),r=n.n(a),o=n(1085),l=n(76473);const i=function(){return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full,style:{minHeight:"400px"}},r().createElement(o.EmptyStateIcon,{icon:l.TF}),r().createElement(o.Title,{headingLevel:"h5",size:"lg"},"Loading..."),r().createElement(o.EmptyStateBody,null,"Please wait."))}},83061:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(92950),r=n.n(a),o=n(1085),l=n(76473);const i=function(e){var t=e.title,n=e.subtext;return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full,style:{minHeight:"400px"}},r().createElement(o.EmptyStateIcon,{icon:l.TF}),r().createElement(o.Title,{headingLevel:"h5",size:"lg"},t||"No Data"),n&&r().createElement(o.EmptyStateBody,null,n))}},86552:(e,t,n)=>{n.d(t,{Z:()=>f});var a,r=n(92950),o=n.n(r),l=n(43047),i=n(50028),s=n(77685),c=n(44586);!function(e){e.nonGrouped="nonGrouped",e.grouped="grouped"}(a||(a={}));var u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.apply(this,arguments)},d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)},m=function(e){var t=e.x,n=e.y,a=(e.disableInlineStyles,function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["x","y","disableInlineStyles"]));return null!=t&&null!=n?o().createElement(l.$O,d({x:t-8,y:n-8},a,a.events)):null},p=function(e){return d(d({},i.wk),{axisFormat:d(d(d({},i.wk.axisFormat),{formatAsYear:function(e){return Intl.DateTimeFormat("en",{year:"numeric"}).format(new Date(e))},formatAsMonth:function(e){return Intl.DateTimeFormat("en",{month:"long"}).format(new Date(e))}}),null==e?void 0:e.axisFormat),labelFormat:d(d({},i.wk.labelFormat),null==e?void 0:e.labelFormat),onClick:d(d({},i.wk.onClick),null==e?void 0:e.onClick),dataComponent:{scatterPlot:m}})};const f=function(e){var t=e.schema,n=e.data,l=e.specificFunctions,m=e.namespace,f=void 0===m?"settings":m,g=(0,s.Kx)({chartSeriesHiddenProps:[]},f),v=g.queryParams.chartSeriesHiddenProps,h=g.dispatch,y=(0,r.useState)({series:[],legend:[]}),b=y[0],E=y[1];return(0,r.useEffect)((function(){E(function(e,t){return void 0===t&&(t=[]),d(d({},e),{series:e.series.map((function(e){return d(d({},e),{hidden:!(!e.serie[0].id&&!e.serie[0].host_id||!t.includes(e.serie[0].hasOwnProperty("host_id").toString()||e.serie[0].hasOwnProperty("id").toString()))})}))})}(function(e){var t,n={series:[],legend:[]};switch(e.type="dates"in e?a.grouped:a.nonGrouped,e.type){case a.grouped:n.series=function(e){var t=e.dates,n=[];return t.forEach((function(e){e.items.forEach((function(t,a){n[a]||(n[a]={serie:[],hidden:!1,name:(0,c.Z)()}),n[a].serie.push(u({created_date:e.date},t))}))})),n}(e);break;case a.nonGrouped:n.series=[{serie:e.items||e.meta.legend,hidden:!1,name:(0,c.Z)()}]}return(null===(t=e.meta)||void 0===t?void 0:t.legend)&&(n.legend=e.meta.legend.map((function(e){var t=n.series.find((function(t){return t.serie.find((function(t){return t.id===e.id}))}));return u(u({},e),{childName:t&&t.name?t.name:""})}))),n}(n),v))}),[n]),o().createElement(i.ZP,{schema:t,functions:d({},p(l)),dataState:[b,function(e){h({type:"SET_CHART_SERIES_HIDDEN_PROPS",value:e.series.map((function(e){return[e.serie[0].id,e.hidden]}))}),E(e)}]})}},10001:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(92950),r=n.n(a),o=n(1085),l=n(60433),i=n(80810),s=n(77685),c=n(62012);const u=function(e){var t=e.label,n=void 0===t?"":t,a=e.title,u=void 0===a?"No items found.":a,d=e.message,m=void 0===d?"":d,p=e.canAdd,f=void 0!==p&&p,g=e.showButton,v=void 0!==g&&g,h=e.path,y=void 0===h?void 0:h,b=e.onButtonClick,E=void 0===b?void 0:b,_=(0,c.useNavigate)();return r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},r().createElement(o.EmptyStateIcon,{icon:f?l.Mh:i.W1}),r().createElement(o.Title,{size:"lg",headingLevel:"h3"},u),r().createElement(o.EmptyStateBody,null,m),(f||v)&&r().createElement(o.Button,{key:"add-item-button",variant:o.ButtonVariant.primary,"aria-label":n,onClick:function(){y&&_((0,s.uJ)(y)),E&&E()}},n))}},12613:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(92950),r=n.n(a),o=n(45697),l=n.n(o),i=n(1085),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},c=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],u=function(e){var t=e.count,n=void 0===t?0:t,a=e.perPageOptions,o=void 0===a?null:a,l=e.params,u=e.setPagination,d=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["count","perPageOptions","params","setPagination"]),m=l.offset,p=l.limit,f=Math.floor(m/p+1),g=function(e){return(e-1)*p};return r().createElement(i.Pagination,s({"data-cy":d.isCompact?"pagination_top":"pagination_bottom",itemCount:n,widgetId:"aa-pagination",perPageOptions:null!=o?o:c,perPage:p,page:f,onPerPageSelect:function(e,t,n){u(g(n),t)},onSetPage:function(e,t){u(g(t))}},d))};u.propTypes={count:l().number,params:l().exact({offset:l().number.isRequired,limit:l().number.isRequired}).isRequired,setPagination:l().func.isRequired,perPageOptions:l().arrayOf(l().exact({title:l().string.isRequired,value:l().number.isRequired}).isRequired)};const d=u},54903:(e,t,n)=>{n.d(t,{Z:()=>at});var a=n(92950),r=n.n(a),o=n(1085),l=n(12613),i=n(77685),s=n(77388),c=n(9771),u=n(48236),d=n(83061);const m=function(e){var t=e.api,n=e.children,a=e.customLoading,o=void 0!==a&&a,l=e.customEmptyState,i=void 0!==l&&l;return o&&t.isLoading?r().createElement(r().Fragment,null,n):!t||t.isLoading?r().createElement(u.Z,{"data-cy":"api_loading_state"}):t.error?r().createElement(c.Z,{message:t.error.error.error||t.error.error}):t.isSuccess?0===t.result.meta.count&&!i&&t.result.meta.tableData?r().createElement(d.Z,{title:"There is currently no data to display.",subtext:"Select a template filter to see data."}):0!==t.result.meta.count||i?r().createElement(r().Fragment,null,n):r().createElement(d.Z,null):null};var p=n(68936),f=n(86552),g=n(45697),v=n.n(g),h=n(58660),y=n(35993),b=function(e){var t=e.data,n=(0,y.Me)("templates_by_organization"),a=(0,i.Kx)(n).queryParams,o="Organization";function l(){switch(a.adoption_rate_type){case"elapsed_of_templates_by_org":return"Elapsed";case"job_count_of_templates_by_org":return"Job count";case"task_count_of_templates_by_org":return"Task count";case"host_count_of_templates_by_org":return"Host count";default:return""}}var s=t.map((function(e){return e.org_name})),c=t.map((function(e){return e.template_count})),u=t.map((function(e){switch(a.adoption_rate_type){case"elapsed_of_templates_by_org":return e.elapsed;case"job_count_of_templates_by_org":return e.total_count;case"task_count_of_templates_by_org":return e.host_task_count;case"host_count_of_templates_by_org":return e.host_count;default:return null}})),d={config:{modeBarButtonsToRemove:["zoom"],displaylogo:!1,responsive:!0},data:[{customdata:t,hovertemplate:" <br>  <b>".concat(o,"</b>: %{").concat("customdata.org_name","}  <br>  <b>").concat("Template","</b>: %{").concat("customdata.template_name","}  <br>  <b>").concat(l(),"</b>: %{").concat(function(){switch(a.adoption_rate_type){case"elapsed_of_templates_by_org":return"customdata.elapsed";case"job_count_of_templates_by_org":return"customdata.total_count";case"task_count_of_templates_by_org":return"customdata.host_task_count";case"host_count_of_templates_by_org":return"customdata.host_count";default:return""}}(),"}  <br> "),marker:{color:u,coloraxis:"coloraxis"},name:"",x:s,y:c,type:"bar"}],layout:{template:{data:{bar:[{error_x:{color:"#2a3f5f"},error_y:{color:"#2a3f5f"},marker:{line:{color:"white",width:.5},pattern:{fillmode:"overlay",size:10,solidity:.2}},type:"bar"}]},layout:{hoverlabel:{align:"left"},hovermode:"closest",paper_bgcolor:"white",plot_bgcolor:"white",xaxis:{automargin:!0,gridcolor:"#D2D2D2",linecolor:"#D2D2D2",title:{standoff:15},zerolinecolor:"#D2D2D2",zerolinewidth:2},yaxis:{automargin:!0,gridcolor:"#D2D2D2",linecolor:"#D2D2D2",title:{standoff:15},zerolinecolor:"#D2D2D2",zerolinewidth:2}}},xaxis:{tickangle:-45,title:{text:"".concat(o),font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15,color:"black"}}},yaxis:{anchor:"x",domain:[0,1],title:{text:"".concat("Template count"),font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15,color:"black"}},color:"#4f5255"},coloraxis:{colorbar:{title:{text:"".concat(l()),font:{color:"#4f5255",family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15}},tickfont:{color:"#4f5255",family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:15}},colorscale:[[0,"#0066CC"],[.2,"#004B95"],[.4,"#5752D1"],[.6,"#3C3D99"],[.8,"#C9190B"],[1,"#A30000"]]},legend:{title:{font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",color:"#4f5255"}},font:{size:10}},margin:{t:30},font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",size:14,color:"#4f5255"},title:{font:{family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif",color:"#4f5255",size:15}},hoverlabel:{font:{size:14,family:"RedHatText, Overpass, overpass, helvetica, arial, sans-serif"},bgcolor:"#151515"},style:{cursor:"auto"}},style:{height:"500px",width:"100%"}};return r().createElement(h.Z,d)};b.propTypes={data:v().array};const E=b;var _=n(48607),w=n(91573),k=n(53345),T=n(91354);const x=function(e){return new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(e)},C=function(e){var t=e.isExpanded,n=e.item;return r().createElement(_.Tr,{isExpanded:t},r().createElement(_.Td,{colSpan:6},r().createElement(_.ExpandableRowContent,null,r().createElement(o.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n,a,r;return[{label:"Slow Hosts Count",value:null!==(t=e.slow_hosts_count)&&void 0!==t?t:0},{label:"Host Task Count",value:null!==(n=e.host_task_count)&&void 0!==n?n:0},{label:"Slow Hosts Percentage",value:null!==(a="".concat(x(e.slow_hosts_percentage),"%"))&&void 0!==a?a:0},{label:"Template Success Rate",value:null!==(r="".concat(x(e.template_success_rate),"%"))&&void 0!==r?r:0}]}(n).map((function(e){var t=e.label,n=e.value;return r().createElement(o.DescriptionListGroup,{key:t},r().createElement(o.DescriptionListTerm,null,t),r().createElement(o.DescriptionListDescription,null,n))}))))))};var S,D,O=n(94592),P=n(29163),R=(0,P.default)(o.DescriptionList)(I||(S=["\n  row-gap: 16px;\n"],D=["\n  row-gap: 16px;\n"],Object.defineProperty?Object.defineProperty(S,"raw",{value:D}):S.raw=D,I=S));const F=function(e){var t,n,a,l,i,s,c,u,d,m,p,f,g,v,h,b,E,w=e.isExpanded,k=e.item,T=k?{ok:null!==(t=null==k?void 0:k.successful_count)&&void 0!==t?t:0,skipped:null!==(n=null==k?void 0:k.skipped_count)&&void 0!==n?n:0,failed:null!==(a=null==k?void 0:k.failed_count)&&void 0!==a?a:0,error:null!==(l=null==k?void 0:k.error_count)&&void 0!==l?l:0}:null,x=k?{ok:null!==(i=null==k?void 0:k.average_host_task_ok_count_per_host)&&void 0!==i?i:0,skipped:null!==(s=null==k?void 0:k.average_host_task_skipped_count_per_host)&&void 0!==s?s:0,changed:null!==(c=null==k?void 0:k.average_host_task_changed_count_per_host)&&void 0!==c?c:0,failed:null!==(u=null==k?void 0:k.average_host_task_failed_count_per_host)&&void 0!==u?u:0,unreachable:null!==(d=null==k?void 0:k.average_host_task_unreachable_count_per_host)&&void 0!==d?d:0}:null,C=k?{ok:null!==(m=null==k?void 0:k.ok_host_count)&&void 0!==m?m:0,skipped:null!==(p=null==k?void 0:k.skipped_host_count)&&void 0!==p?p:0,changed:null!==(f=null==k?void 0:k.changed_host_count)&&void 0!==f?f:0,failed:null!==(g=null==k?void 0:k.failed_host_count)&&void 0!==g?g:0,unreachable:null!==(v=null==k?void 0:k.unreachable_host_count)&&void 0!==v?v:0}:null;return r().createElement(_.Tr,{isExpanded:w},r().createElement(_.Td,{colSpan:6},r().createElement(_.ExpandableRowContent,null,r().createElement(o.Flex,null,r().createElement(o.FlexItem,null,r().createElement("strong",null,"Job status")),r().createElement(o.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Jobs"),"  ",null!==(h=null==k?void 0:k.total_count)&&void 0!==h?h:0)),r().createElement(O.Z,{categoryCount:T,categoryColor:y.ss,showPercent:!0}),r().createElement(o.Flex,null,r().createElement(o.FlexItem,null,r().createElement("strong",null,"All Host status")),r().createElement(o.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Hosts"),"  ",null!==(b=null==k?void 0:k.host_count)&&void 0!==b?b:0)),r().createElement(O.Z,{categoryCount:C,categoryColor:y.ss,showPercent:!0}),r().createElement(o.Flex,null,r().createElement(o.FlexItem,null,r().createElement("strong",null,"All Task status")),r().createElement(o.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",null!==(E=null==k?void 0:k.host_task_count)&&void 0!==E?E:0)),r().createElement(O.Z,{categoryCount:x,categoryColor:y.ss,showPercent:!0}),r().createElement(o.Divider,{component:"div",style:{marginTop:"2rem",marginBottom:"1.5rem"}}),function(e){var t=e.most_failed_tasks;if(null!=t)return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Most failed tasks")),r().createElement("br",null),r().createElement(o.Grid,{hasGutter:!0},t.slice(0,t.length).map((function(e,t){var n,a,l,i,s,c,u={passed:null!==(n=null==e?void 0:e.passed_host_count)&&void 0!==n?n:0,failed:null!==(a=null==e?void 0:e.failed_host_count)&&void 0!==a?a:0,unreachable:null!==(l=null==e?void 0:e.unreachable_host_count)&&void 0!==l?l:0},d={passed:null!==(i=null==e?void 0:e.successful_count)&&void 0!==i?i:0,failed:null!==(s=null==e?void 0:e.failed_count)&&void 0!==s?s:0,unfinished:null!==(c=null==e?void 0:e.unfinished_count)&&void 0!==c?c:0};return r().createElement(r().Fragment,null,r().createElement(o.GridItem,null,r().createElement(R,{isHorizontal:!0},function(e){return[{label:"Task name",value:e.task_name},{label:"Module name",value:e.module_name}]}(e).map((function(e){var t=e.label,n=e.value;return r().createElement(o.DescriptionListGroup,{key:t},r().createElement(o.DescriptionListTerm,null,t),r().createElement(o.DescriptionListDescription,null,n))})))),r().createElement(o.GridItem,{lg:6,md:12,key:"hosts-".concat(t)},r().createElement(o.Flex,null,r().createElement(o.FlexItem,null,r().createElement("strong",null,"Host status")),r().createElement(o.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Hosts"),"  ",function(e){return parseInt(e.passed_host_count)+parseInt(e.failed_host_count)+parseInt(e.unreachable_host_count)}(e))),r().createElement(O.Z,{categoryCount:u,categoryColor:y.ss,showPercent:!0})),r().createElement(o.GridItem,{lg:6,md:12,key:"tasks-".concat(t)},r().createElement(o.Flex,null,r().createElement(o.FlexItem,null,r().createElement("strong",null,"Task status")),r().createElement(o.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",function(e){return parseInt(e.successful_count)+parseInt(e.failed_count)+parseInt(e.unfinished_count)}(e))),r().createElement(O.Z,{categoryCount:d,categoryColor:y.ss,showPercent:!0})))}))))}(k),r().createElement(o.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},function(e){var t,n;return[{label:"Clusters",value:null!==(t=e.total_cluster_count)&&void 0!==t?t:0},{label:"Organizations",value:null!==(n=e.total_org_count)&&void 0!==n?n:0}]}(k).map((function(e){var t=e.label,n=e.value;return r().createElement(o.DescriptionListGroup,{key:t},r().createElement(o.DescriptionListTerm,null,t),r().createElement(o.DescriptionListDescription,null,n))}))))))};var I;const L=function(e){var t,n,a,l,i,s,c=e.isExpanded,u=e.item,d=u?{ok:null!==(t=null==u?void 0:u.host_task_ok_count)&&void 0!==t?t:0,changed:null!==(n=null==u?void 0:u.host_task_changed_count)&&void 0!==n?n:0,failed:null!==(a=null==u?void 0:u.host_task_failed_count)&&void 0!==a?a:0,skipped:null!==(l=null==u?void 0:u.host_task_skipped_count)&&void 0!==l?l:0,unreachable:null!==(i=null==u?void 0:u.host_task_unreachable_count)&&void 0!==i?i:0}:null;return r().createElement(_.Tr,{isExpanded:c},r().createElement(_.Td,{colSpan:10},r().createElement(_.ExpandableRowContent,null,r().createElement(o.Flex,null,r().createElement(o.FlexItem,null,r().createElement("strong",null,"All Task status")),r().createElement(o.FlexItem,{align:{default:"alignRight"}},r().createElement("strong",null,"Tasks"),"  ",null!==(s=null==u?void 0:u.host_task_count)&&void 0!==s?s:0)),r().createElement(O.Z,{categoryCount:d,categoryColor:y.ss,showPercent:!0}))))};var j;!function(e){e.templatesExplorer="templatesExplorer",e.hostAnomalies="hostAnomalies",e.mostUsedModules="mostUsedModules"}(j||(j={}));var G=n(22030),B=n(62012),A=function(){return A=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},A.apply(this,arguments)},Z=["elapsed"],H=[],z=function(e,t){return"id"===t&&-1===e[t]},M=function(e,t){return"id"===t&&-2===e[t]};const N=function(e){var t,n,l=e.legendEntry,s=e.headers,c=e.expandedRowName,u=e.clickableLinking,d=(0,a.useState)(!1),m=d[0],p=d[1],f=function(e){for(var t=0;t<e.length;t++)return e[t]},g=(0,B.useNavigate)();return r().createElement(r().Fragment,null,r().createElement(_.Tr,{style:(n=l,"id",z(n,"id")?{backgroundColor:w.global_disabled_color_300.value}:{})},c&&r().createElement(_.Td,{expand:{rowIndex:+l.id,isExpanded:m,onToggle:function(){return p(!m)}}}),s.map((function(e){var t=e.key;return"total_elapsed_per_org"===t&&void 0===l.total_elapsed_per_org||"total_job_count_per_org"===t&&void 0===l.total_job_count_per_org||"total_host_count_per_org"===t&&void 0===l.total_host_count_per_org||"total_task_count_per_org"===t&&void 0===l.total_task_count_per_org?null:r().createElement(_.Td,{key:"".concat(l.id,"-").concat(t)},u?function(e,t){var n={host_task_count:"module_usage_by_task",total_org_count:"module_usage_by_organization",total_template_count:"module_usage_by_job_template",total_templates_per_org:"templates_explorer"};return M(e,t)||z(e,t)?"-":Z.includes(t)?(0,k.yH)(+e[t]):H.includes(t)?(0,T.Z)(+e[t]):Object.keys(n).includes(t)&&-1!=e.id&&e.name?r().createElement(o.Tooltip,{content:"View ".concat(e.name," usage")},r().createElement("a",{onClick:function(){return function(e,t){var n,a=((n={})[i.zG]=A(A({},(0,y.gb)(e)),{task_action_id:[t]}),n);g((0,i.uJ)("reports/"+G.Z.getDetails(e).replace("/",""),!0,a))}(n[t],e.id)}},"".concat(e[t]))):Object.keys(n).includes(t)&&e.y_percentile_list?r().createElement(o.Tooltip,{content:"View ".concat(e.org_name," usage")},r().createElement("a",{onClick:function(){return function(e,t){var n,a=((n={})[i.zG]=A(A({},(0,y.gb)(e)),{template_id:f([t])}),n);g((0,i.uJ)("reports/"+G.Z.getDetails(e).replace("/",""),!0,a))}(n[t],e.y_percentile_list)}},"".concat(e[t]))):"".concat(e[t])}(l,t):function(e,t){return M(e,t)||z(e,t)?"-":Z.includes(t)?(0,k.yH)(+e[t]):H.includes(t)?(0,T.Z)(+e[t]):function(e,t){return"average_duration_per_task"===t}(0,t)?(0,k.Xt)(+e[t]):"".concat(e[t])}(l,t))}))),(t=function(e){switch(e){case"templatesExplorer":return F;case"hostAnomalies":return C;case"mostUsedModules":return L;default:return null}}(c))?r().createElement(t,{item:l,isExpanded:m}):null)};var q=function(){return q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},q.apply(this,arguments)};const U=function(e){var t=e.legend,n=e.headers,l=e.getSortParams,s=void 0===l?function(){return{}}:l,c=e.expandedRowName,u=e.clickableLinking,d=e.showKebab,m=(0,a.useState)(!1),p=m[0],f=m[1],g=(0,y.Me)("host_anomalies_scatter"),v=(0,i.Kx)(g).setFromToolbar,h=[r().createElement(o.DropdownItem,{key:"showAll",component:"button",onClick:function(){return v("anomaly",void 0)}},"Display all host rows"),r().createElement(o.DropdownItem,{key:"showAnomalousHosts",component:"button",onClick:function(){return v("anomaly",!0)}},"Display only slow host rows"),r().createElement(o.DropdownItem,{key:"showNonAnomalousHosts",component:"button",onClick:function(){return v("anomaly",!1)}},"Display only non-slow host rows")];return r().createElement(_.TableComposable,{"aria-label":"Report Table",variant:_.TableVariant.compact},r().createElement(_.Thead,null,r().createElement(_.Tr,null,c&&r().createElement(_.Th,null),n.map((function(e){var n=e.key,a=e.value;return d&&"anomaly"===n?r().createElement(_.Th,{key:n,style:{overflow:"visible",zIndex:1}},"Slow",r().createElement(o.Dropdown,{onSelect:function(){f(!0)},toggle:r().createElement(o.KebabToggle,{style:{paddingBottom:"0px"},id:"table-kebab",onToggle:function(){return f(!p)}}),isOpen:p,isPlain:!0,dropdownItems:h,position:"right"})):"total_elapsed_per_org"===n&&void 0===t[0].total_elapsed_per_org||"total_job_count_per_org"===n&&void 0===t[0].total_job_count_per_org||"total_host_count_per_org"===n&&void 0===t[0].total_host_count_per_org||"total_task_count_per_org"===n&&void 0===t[0].total_task_count_per_org?null:r().createElement(_.Th,q({key:n},s(n),{"data-cy":n}),a)})))),r().createElement(_.Tbody,null,t.map((function(e){return r().createElement(N,{key:e.id,legendEntry:e,headers:n,expandedRowName:c,clickableLinking:u})}))))};var V,J=n(43047),K=n(53983),W=n(16659),Y=n(28527),$="RESET_DATA",X="SET_DOWNLOAD_TYPE",Q="SET_SHOW_EXTRA_ROWS",ee="SET_SELECTED_RBAC_GROUPS",te="SET_USERS",ne="SET_ADDITIONAL_RECIPIENTS",ae="SET_EMAIL_EXTRA_ROWS",re="SET_SUBJECT",oe="SET_BODY",le="SET_SELECTED_EXPIRY";!function(e){e.moduleReports="moduleReports",e.newAutomationCalculator="newAutomationCalculator",e.onboardingReports="aa21Onboarding",e.sendEmail="sendEmail"}(V||(V={}));var ie=n(63746);const se=function(e){var t,n,a,l,i,s=e.formData,c=e.dispatchReducer,u=s.downloadType;return r().createElement(r().Fragment,null,r().createElement(o.Title,{size:"md",headingLevel:"h4"},"Select export format:"),r().createElement(o.Grid,{sm:2},r().createElement(o.GridItem,null,r().createElement(o.Radio,{onChange:function(){return c({type:X,value:"pdf"})},isChecked:"pdf"===u,name:"optionSelected",label:"PDF",id:"pdf-radio","aria-label":"pdf-radio"})),(t=V.sendEmail,n="beta_".concat(t),a=(0,ie.useFlagsStatus)().flagsReady,l="beta"===window.location.pathname.split("/")[1]?n:t,i=(0,ie.useFlag)(l),(!("localhost"!==window.location.hostname&&!window.location.hostname.includes("ephemeral"))||!!a&&i)&&r().createElement(o.GridItem,null,r().createElement(o.Radio,{onChange:function(){return c({type:X,value:"email"})},isChecked:"email"===u,name:"optionSelected",label:"E-mail",id:"email-radio","aria-label":"email-radio"})))))},ce=function(e){var t=e.options,n=e.formData,a=e.dispatchReducer,l=n.showExtraRows,i=t.totalPages,s=t.pageLimit,c=i<=Math.ceil(100/s)?"All ".concat(i.toString()," pages"):"Top ".concat(Math.ceil(100/s)," of ").concat(i.toString()," pages");return r().createElement(r().Fragment,null,r().createElement(o.Title,{size:"md",headingLevel:"h4"},"Select details:"),r().createElement(o.Grid,{md:4},r().createElement(o.GridItem,null,r().createElement(o.Radio,{onChange:function(){return a({type:Q,value:!1})},isChecked:!l,name:"showExtraRows",label:"Current page",id:"current-radio","aria-label":"current-radio"})),r().createElement(o.GridItem,null,r().createElement(o.Radio,{onChange:function(){return a({type:Q,value:!0})},isChecked:l,name:"showExtraRows",label:c,id:"extra-radio","aria-label":"extra-radio"}))))};var ue=n(49148),de=n(13704);const me=function(e){var t=e.options,n=e.formData,l=e.dispatchReducer,i=n.body,c=n.selectedRbacGroups,u=n.users,d=n.subject,m=n.additionalRecipients,p=n.emailExtraRows,f=n.expiry,g=(0,s.ZP)((function(){return(0,ue.kL)()}),{data:[],meta:{count:0}}),v=g.result.data,h=g.request,y=window.location.href;(0,a.useEffect)((function(){h()}),[]);var b=(0,s.ZP)((function(){return(0,ue.Vk)(c.at(-1))}),{data:[]}),E=b.result.data,_=b.request;(0,a.useEffect)((function(){c.length>0&&_()}),[c]);var w=function(e){var t;return null===(t=v.find((function(t){return t.uuid===e})))||void 0===t?void 0:t.name},T=function(){var e=E.map((function(e){return e.email})),t=E.map((function(e){return e.username})),n=c.at(-1),a={uuid:n,name:w(n),usernames:t,emails:e};-1===u.findIndex((function(e){return e.uuid===a.uuid}))&&u.push(a),l({type:te,value:u})};(0,a.useEffect)((function(){c.length>0&&T()}),[E]);var x=t.totalPages,C=t.pageLimit,S=m.length>0,D=x<=Math.ceil(100/C)?"All ".concat(x," pages"):"Top ".concat(Math.ceil(100/C)," of ").concat(x," pages"),O=(0,a.useState)(!1),P=O[0],R=O[1],F=function(e){for(var t=e.target.value.split(","),n=0;n<t.length;n++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(t[n]))return void R(!0);R(!1)},I=(0,a.useState)(!1),L=I[0],j=I[1];return r().createElement(o.Form,null,x>1&&r().createElement(o.FormGroup,{label:"Select details:",fieldId:"details-field"},r().createElement(o.Grid,{md:4},r().createElement(o.GridItem,null,r().createElement(o.Radio,{onChange:function(){return l({type:ae,value:!1})},isChecked:!p,name:"emailExtraRows",label:"Current page",id:"email-current-radio","aria-label":"email-current-radio"})),r().createElement(o.GridItem,null,r().createElement(o.Radio,{onChange:function(){return l({type:ae,value:!0})},isChecked:p,name:"emailExtraRows",label:D,id:"email-extra-radio","aria-label":"email-extra-radio"})))),r().createElement(o.FormGroup,{label:"Recipient(s)",isRequired:!0,fieldId:"selectedRbacGroups-field"},r().createElement(o.Select,{variant:o.SelectVariant.checkbox,"aria-label":"Recipient",isOpen:L,onClear:function(){return l({type:ee,value:[]}),void l({type:te,value:[]})},onToggle:function(){return j(!L)},onSelect:function(e,t){!function(e,t){var n,a=[t];if(c.indexOf(t)>-1){a=c.filter((function(e){return e!==t}));var r=u.findIndex((function(e){return e.uuid===t}));r>=0&&u.splice(r,1),n=a}else n=c.concat(a);l({type:ee,value:n})}(0,"string"!=typeof t?t.toString():t),j(!1)},hasInlineFilter:!0,selections:c,placeholderText:"Select Recipients"},v.map((function(e,t){var n=e.uuid,a=e.name;return r().createElement(o.SelectOption,{key:t,value:n},a)})))),u.length>0&&r().createElement(o.FormGroup,{label:"User emails",fieldId:"emails-field"},u.map((function(e,t){var n=e.name,a=e.emails;return r().createElement("p",{key:t},r().createElement("b",null,n),":"," ",a.length>0?a.join(", "):r().createElement("i",null,"No emails associated with this group"))}))),r().createElement(o.FormGroup,{label:"External recipient(s)",fieldId:"additionalRecipients-field"},r().createElement(o.TextInput,{placeholder:"Comma separated emails",type:"email",id:"additionalRecipients",name:"additionalRecipients",value:m,onBlur:function(e){return F(e)},onFocus:function(e){return F(e)},onChange:function(e){return l({type:ne,value:e})}}),m&&P&&r().createElement(o.FormHelperText,{isError:!0,icon:r().createElement(J.$O,null),isHidden:!P},"The email format must be valid and comma separated.")),r().createElement(o.FormGroup,{label:"Subject",fieldId:"subject-field"},r().createElement(o.TextInput,{placeholder:"Report is ready to be downloaded",type:"text",id:"subject",name:"subject",value:d,onChange:function(e){return l({type:re,value:e})}})),r().createElement(o.FormGroup,{label:"Body",fieldId:"body-field"},r().createElement(o.TextArea,{rows:10,autoResize:!0,placeholder:"",type:"text",id:"body",name:"body",value:i,onChange:function(e){return l({type:oe,value:e})}})),S&&r().createElement(r().Fragment,null,r().createElement(o.FormGroup,{label:"Link expires on",fieldId:"expiry-field"},r().createElement(de.Z,{categoryKey:"start_date",value:f,setValue:function(e){return l({type:le,value:e}),void T()},validators:[function(e){return e<(0,k.Lg)()?"Must not be before today":""}]})),r().createElement(o.FormHelperText,{isError:!0,icon:r().createElement(J.$O,null),isHidden:!S},"Link expiry date only applies to external users")),r().createElement(o.FormGroup,{label:"Report link",fieldId:"link-field"},y))};var pe=n(37347),fe=function(){return fe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},fe.apply(this,arguments)};var ge=function(){return ge=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ge.apply(this,arguments)};var ve=function(e,t,n,a,r){var o="slug=".concat(r,"&token=").concat(n);return location.protocol+"//"+location.host+"/api/tower-analytics/v1/generate_pdf/"+(""===new URL(t).search?"?"+o:location.search+"&"+o)};var he=function(){return he=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},he.apply(this,arguments)};const ye=function(e){var t=e.settingsNamespace,n=void 0===t?"settings":t,l=e.slug,s=e.name,c=e.description,u=e.endpointUrl,d=e.queryParams,m=e.selectOptions,p=e.y,f=e.label,g=e.xTickFormat,v=e.chartType,h=e.totalPages,y=e.pageLimit,b=e.sortOptions,E=e.sortOrder,_=e.dateGranularity,w=e.startDate,T=e.endDate,x=e.dateRange,C=e.adoptionRateType,S=e.inputs,D=(0,a.useState)(!1),O=D[0],P=D[1],R=(0,Y.TL)(),F=(0,Y.CG)((function(e){return null==e?void 0:e.pdfDownloadButton[l]})),I=F===W.r.pending,L=F===W.r.rejected,j=(0,i.cm)({chartSeriesHiddenProps:[]},n).chartSeriesHiddenProps,G=(0,a.useState)(1),B=G[0],A=G[1],Z=function(e,t,n){var r,o={downloadType:(null==e?void 0:e.downloadType)||"pdf",showExtraRows:(null==e?void 0:e.showExtraRows)||!1,additionalRecipients:(null==e?void 0:e.additionalRecipients)||"",eula:(null==e?void 0:e.eula)||!1,emailExtraRows:(null==e?void 0:e.emailExtraRows)||!1,subject:(null==e?void 0:e.subject)||"The Ansible report, ".concat(t,", is available for view"),body:(null==e?void 0:e.body)||"<b>".concat(t,"</b>\nThis report shows ").concat(n[0].toLowerCase()).concat(n.substring(1)),selectedRbacGroups:(null==e?void 0:e.selectedRbacGroups)||[],users:(null==e?void 0:e.users)||[],expiry:(null==e?void 0:e.expiry)||(r=new Date,r.setMonth(r.getMonth()+3),(0,k.p6)(r))},l=(0,a.useReducer)((function(e,t){switch(t.type){case X:return ge(ge({},e),{downloadType:t.value});case Q:return ge(ge({},e),{showExtraRows:t.value});case ee:return ge(ge({},e),{selectedRbacGroups:t.value});case ne:return ge(ge({},e),{additionalRecipients:t.value});case"SET_EULA":return ge(ge({},e),{eula:t.value});case ae:return ge(ge({},e),{emailExtraRows:t.value});case re:return ge(ge({},e),{subject:t.value});case oe:return ge(ge({},e),{body:t.value});case te:return ge(ge({},e),{users:t.value});case le:return ge(ge({},e),{expiry:t.value});case $:return o;default:throw new Error("useOptionsData reducer action type ".concat(t.type," was not found."))}}),o);return{formData:l[0],dispatchReducer:l[1]}}({},s,c),H=Z.formData,z=Z.dispatchReducer,M=H.users,N=H.additionalRecipients,q=H.subject,U=H.body,V=H.emailExtraRows,ie=H.showExtraRows,ue=H.downloadType,de=H.expiry,ye=function(){if("pdf"===ue&&function(e){var t=e.slug,n=e.endpointUrl,a=e.queryParams,r=e.selectOptions,o=e.y,l=e.label,i=e.xTickFormat,s=e.chartType,c=e.totalPages,u=e.pageLimit,d=e.sortOptions,m=e.sortOrder,p=e.dateGranularity,f=e.startDate,g=e.endDate,v=e.dateRange,h=e.adoptionRateType,y=e.dispatch,b=e.chartSeriesHiddenProps,E=e.showExtraRows,_=e.inputs,w=_?fe(fe({},a),{inputs:_}):a;b||(b=[]),y((0,pe.jG)({slug:t,schemaParams:{y:o,label:l,xTickFormat:i,chartType:s},dataFetchingParams:{showExtraRows:E,endpointUrl:n,queryParams:w,selectOptions:r,chartSeriesHiddenProps:b,totalPages:c,pageLimit:u,sortOptions:d,sortOrder:m,dateGranularity:p,startDate:f,endDate:g,dateRange:v,adoptionRateType:h}},y,t,""))}({slug:l,endpointUrl:u,queryParams:d,selectOptions:m,y:p,label:f,xTickFormat:g,chartType:v,totalPages:h,pageLimit:y,sortOptions:b,sortOrder:E,dateGranularity:_,startDate:w,endDate:T,dateRange:x,adoptionRateType:C,dispatch:R,chartSeriesHiddenProps:j,showExtraRows:ie,inputs:S}),"email"===ue){var e={y:d.sort_options,label:d.sort_options,xTickFormat:(0,k.MA)(d.granularity),chartType:v},t=S?he(he({},d),{inputs:S}):d,n={slug:l,schemaParams:{y:e.y,label:e.label,xTickFormat:e.xTickFormat,chartType:e.chartType},dataFetchingParams:{expiry:de,showExtraRows:ie,endpointUrl:u,queryParams:t,chartSeriesHiddenProps:j||[],totalPages:h,pageLimit:y,sortOptions:d.sort_options,sortOrder:"desc"===d.sort_order?"desc":"asc",dateGranularity:d.granularity,startDate:d.start_date,endDate:d.end_date,dateRange:d.quick_date_range,adoptionRateType:d.adoption_rate_type}};!function(e){var t=e.slug,n=e.users,a=e.additionalRecipients,r=e.subject,o=e.body,l=e.dispatch,i=e.emailExtraRows,s=e.expiry,c=e.pdfPostBody,u=n.map((function(e){return e.usernames}));c.dataFetchingParams.showExtraRows=i,""!==a&&u.push(a.split(","));var d=Math.random().toString(36).substring(2,16),m=window.location.href;l((0,pe.Do)({recipient:u.flat(),subject:""===r?"Report is ready to be viewed":r,body:o.toString().replace(/(?:\r\n|\r|\n)/g,"<br>"),reportUrl:ve(0,m,d,0,t),expiry:s,slug:t,token:d,payload:"Download",pdfPostBody:c},l,t,d))}({slug:l,users:M,additionalRecipients:N,subject:q,body:U,dispatch:R,emailExtraRows:V,expiry:de,pdfPostBody:n})}z({type:$}),P(!1)},be=function(){var e=H.additionalRecipients,t=H.selectedRbacGroups,n=H.users;if(""!==e){for(var a=e.split(","),r=0;r<a.length;r++)if(!/^([\w-.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(a[r]))return!0;return!1}return 0===t.length&&""===e||(0===n.length||1===n.length&&n[0].emails.length<=0)&&""===e||void 0},Ee=[{id:1,name:"Export format",component:r().createElement(se,{formData:H,dispatchReducer:z})},{id:2,name:"Configure details",nextButtonText:"pdf"===ue?"Export":"Send e-mail",component:"pdf"===ue?r().createElement(ce,{options:{settingsNamespace:"settings",slug:l,name:s,description:c,endpointUrl:u,queryParams:d,selectOptions:m,y:p,label:f,xTickFormat:g,chartType:v,totalPages:h,pageLimit:y,sortOptions:b,sortOrder:E,dateGranularity:_,startDate:w,endDate:T,dateRange:x,adoptionRateType:C},formData:H,dispatchReducer:z}):r().createElement(me,{options:{totalPages:h,pageLimit:y},formData:H,dispatchReducer:z})}],_e=function(e){A(B<(null==e?void 0:e.id)?e.id:B)},we=function(){z({type:$}),P(!1)},ke=r().createElement(o.WizardFooter,null,r().createElement(o.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack;return 2!==t.id?r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:"pdf"===ue&&h<=1?ye:n,isDisabled:!ue},"pdf"===ue&&h<=1?"Export":"Next"),1!==t.id&&r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:we},"Cancel")):r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:ye,isDisabled:"email"===ue&&be()},"email"===ue?"Send e-mail":"Export"),r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:we},"Cancel"))})));return r().createElement(r().Fragment,null,r().createElement(o.Tooltip,{position:o.TooltipPosition.top,content:"Export report"},r().createElement(o.Button,{variant:L?o.ButtonVariant.link:o.ButtonVariant.plain,"aria-label":"Export report",onClick:function(){return P(!0)},isDanger:L,"data-cy":"download-button"},I&&r().createElement(o.Spinner,{"data-cy":"download-button-loading",isSVG:!0,size:"md"}),!I&&L&&r().createElement(J.$O,{"data-cy":"download-button-error"}),!I&&!L&&r().createElement(K._8,{"data-cy":"download-button-icon"}))),O&&r().createElement(o.Wizard,{title:"Export report",description:"".concat(s," | ").concat("pdf"===ue?"PDF":"E-mail"),steps:Ee,hideClose:!0,onNext:function(){return _e},onBack:function(){return _e},onSave:ye,onClose:function(){we()},footer:ke,isOpen:O}))};var be=n(74221);const Ee=function(e){return function(t){if(!t)return e;var n=JSON.stringify(e);return Object.entries(t).forEach((function(e){var t=new RegExp("VAR_".concat(e[0]),"g");n=n.replace(t,"".concat(e[1]))})),JSON.parse(n)}};var _e=function(){return _e=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},_e.apply(this,arguments)};const we=function(e){var t,n,c=e.slug,u=e.name,d=e.description,g=e.tableHeaders,v=e.expandedTableRowName,h=e.clickableLinking,b=e.showPagination,_=e.showKebab,w=e.defaultSelectedToolbarCategory,T=void 0===w?"":w,C=e.availableChartTypes,S=e.dataEndpoint,D=e.optionsEndpoint,O=e.schema,P=e.fullCard,R=void 0===P||P,F=(0,ue.Bt)(S),I=(0,ue.Bt)(D),L=(0,y.Me)(c),j=(0,i.Kx)(L),G=j.queryParams,A=j.setFromPagination,Z=j.setFromToolbar,H=(0,i.Kx)({chartType:C[0]},"settings"),z=H.queryParams,M=H.dispatch,N=(0,s.ZP)(I,{}),q=N.result,V=N.request,J=(0,s.ZP)(F,{meta:{count:0,legend:[]}}),K=J.request,W=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(J,["request"]),Y=(0,B.useNavigate)();(0,a.useEffect)((function(){K(G),V(G)}),[G]);var $={y:G.sort_options,label:(null===(n=null===(t=q.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===G.sort_options})))||void 0===n?void 0:n.value)||"Label Y",xTickFormat:(0,k.MA)(G.granularity),chartType:z.chartType||C[0]},X=function(e,t){var n;switch(e){case"average_duration_per_task":n=t.toFixed(2)+" seconds";break;case"slow_hosts_percentage":case"template_success_rate":n=x(t)+"%";break;default:n=t.toFixed(2)}return n},Q=function(e,t){!function(e,t,n,a,r,o,l,s){var c,u=((c={})[i.zG]=_e(_e({},(0,y.gb)(e)),{template_id:t,cluster_id:n,org_id:a,inventory_id:r,status:o,host_status:l,quick_date_range:s}),c);Y((0,i.uJ)("reports\\".concat(e),!0,u))}("host_anomalies_scatter",t.datum.id,G.cluster_id,G.org_id,G.inventory_id,G.status,G.host_status,G.quick_date_range),window.location.reload()},ee=function(e){var t=e.datum;return t.host_status?"Host: "+t.host_name+"\nAverage duration per task: "+X(G.sortOptions,t.y)+"\nHost status: "+t.host_status+"\nTotal tasks executed: "+t.total_tasks_executed+"\nLast Referenced: "+t.last_referenced+"\nSlow: "+(t.failed_duration?"True":"False"):$.label+" for "+t.name+": "+X(G.sort_options,t.y)},te=function(e){var t,n=null===(t=null==q?void 0:q.sort_options)||void 0===t?void 0:t.map((function(e){return e.key}));return(null==n?void 0:n.includes(e))?{sort:{sortBy:{index:g.findIndex((function(e){return e.key===G.sort_options}))||0,direction:G.sort_order||"none"},onSort:function(e,t,n){var a;Z("sort_order",n),Z("sort_options",null===(a=g[t])||void 0===a?void 0:a.key)},columnIndex:g.findIndex((function(t){return t.key===e}))}}:{}},ne=[C.length>1&&r().createElement(o.ToggleGroup,{"aria-label":"Chart type toggle",key:"chart-toggle"},C.map((function(e){return r().createElement(o.ToggleGroupItem,{key:e,"data-cy":"chart_type",text:"".concat((0,k.kC)(e)," Chart"),buttonId:e,isSelected:e===$.chartType,onChange:function(){M({type:"SET_CHART_TYPE",value:e})}})}))),r().createElement(ye,{key:"download-button",slug:c,name:u,description:d,endpointUrl:S,queryParams:G,selectOptions:q,y:$.y,label:$.label,xTickFormat:$.xTickFormat,totalPages:Math.ceil(W.result.meta.count/G.limit),pageLimit:G.limit,chartType:$.chartType,sortOptions:$.y,sortOrder:G.sort_order,dateGranularity:G.granularity,startDate:G.start_date,endDate:G.end_date,dateRange:G.quick_date_range,adoptionRateType:G.adoption_rate_type})];return R?r().createElement(o.Card,{"data-cy":W.isLoading?"toolbar_loading":"toolbar_loaded"},r().createElement(o.CardBody,null,r().createElement(p.Z,{categories:q,defaultSelected:T,filters:G,setFilters:Z,pagination:b&&r().createElement(l.Z,{count:W.result.meta.count,perPageOptions:be.zT,params:{limit:+G.limit,offset:+G.offset},setPagination:A,isCompact:!0}),additionalControls:ne}),g&&!_&&"templates_by_organization"!==c?r().createElement(m,{api:W},r().createElement(f.Z,{schema:Ee(O)({label:$.label,y:$.y,xTickFormat:$.xTickFormat,chartType:$.chartType}),dataComponent:"foobar",data:W.result,specificFunctions:{labelFormat:{customTooltipFormatting:ee},onClick:{handleClick:Q}}}),r().createElement(U,{legend:W.result.meta.tableData?W.result.meta.tableData:W.result.meta.legend,headers:g,getSortParams:te,expandedRowName:v,clickableLinking:h,showKebab:_})):g&&!_&&"templates_by_organization"===c?r().createElement(m,{api:W},r().createElement(E,{data:W.result.items}),r().createElement(U,{legend:W.result.meta.tableData?W.result.meta.tableData:W.result.meta.legend,headers:g,getSortParams:te,expandedRowName:v,clickableLinking:h,showKebab:_})):r().createElement(r().Fragment,null,r().createElement(m,{api:W},r().createElement(f.Z,{schema:Ee(O)({label:$.label,y:$.y,xTickFormat:$.xTickFormat,chartType:$.chartType}),dataComponent:"foobar",data:W.result,specificFunctions:{labelFormat:{customTooltipFormatting:ee},onClick:{handleClick:Q}}})),r().createElement(U,{legend:W.result.meta.tableData?W.result.meta.tableData:W.result.meta.legend,headers:g,getSortParams:te,expandedRowName:v,clickableLinking:h,showKebab:_}))),r().createElement(o.CardFooter,null,b&&r().createElement(l.Z,{count:W.result.meta.count,perPageOptions:be.zT,params:{limit:+G.limit,offset:+G.offset},setPagination:A,variant:o.PaginationVariant.bottom}))):r().createElement("div",{"data-cy":W.isLoading?"toolbar_loading":"toolbar_loaded"},r().createElement(p.Z,{categories:q,defaultSelected:T,filters:G,setFilters:Z}),g&&"templates_by_organization"===c?r().createElement(m,{api:W},r().createElement(E,{data:W.result.items})):r().createElement(m,{api:W},r().createElement(f.Z,{schema:Ee(O)({label:$.label,y:$.y,xTickFormat:$.xTickFormat,chartType:$.chartType}),data:W.result,specificFunctions:{labelFormat:{customTooltipFormatting:ee}}})))};var ke=n(83474),Te=P.default.div(Ce||(Ce=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 46.8px;\n  padding-left: 100px;\n"],["\n  height: 46.8px;\n  padding-left: 100px;\n"])));const xe=function(e){var t=e.totalSavings,n=void 0===t?0:t,a=e.currentPageSavings,l=void 0===a?0:a,i=e.isLoading,s=void 0!==i&&i;return r().createElement(r().Fragment,null,["Total savings","Current page savings"].map((function(e,t){return r().createElement(o.Card,{"data-cy":e.toLowerCase().replace(" ","_").replace(" ","_"),isPlain:!0,isCompact:!0,key:e},r().createElement(o.CardTitle,null,e),r().createElement(o.CardBody,null,r().createElement(o.Title,{headingLevel:"h3",size:0===t?"4xl":"xl",style:{color:"var(--pf-global--success-color--200)"}},s?r().createElement(Te,null,r().createElement(o.Spinner,{"data-cy":"spinner",isSVG:!0,size:"lg"})):(0,T.Z)(0===t?n:l))))})))};var Ce,Se=n(97960),De=(0,P.default)(o.InputGroup)(Re||(Re=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  width: 170px;\n"],["\n  width: 170px;\n"]))),Oe=function(e){return+e&&+e<0?NaN:e};const Pe=function(e){var t=e.costManual,n=void 0===t?0:t,a=e.setFromCalculation,l=void 0===a?function(){return{}}:a,i=e.costAutomation,s=void 0===i?0:i,c=e.readOnly,u=void 0===c||c;return r().createElement(o.Card,{isPlain:!0,isCompact:!0},r().createElement(o.CardBody,null,r().createElement("p",null,"Manual cost of automation",r().createElement("span",{style:{color:"var(--pf-global--Color--dark-200)",fontSize:"0.8em",display:"block"}},"(e.g. average salary of mid-level Software Engineer)")),r().createElement(De,null,r().createElement(o.InputGroupText,null,r().createElement(Se.bk,null)),r().createElement(o.TextInput,{id:"manual-cost",key:"manual-cost",type:"number","aria-label":"manual-cost",value:isNaN(n)?"":n.toString(),onChange:function(e){return l("manual_cost",Oe(+e))},isDisabled:u}),r().createElement(o.InputGroupText,null,"/hr")),r().createElement("p",{style:{paddingTop:"10px"}},"Automated process cost"),r().createElement(De,null,r().createElement(o.InputGroupText,null,r().createElement(Se.bk,null)),r().createElement(o.TextInput,{id:"automation-cost",key:"automation-cost",type:"number","aria-label":"automation-cost",value:isNaN(s)?"":s.toString(),onChange:function(e){return l("automation_cost",Oe(+e))},isDisabled:u}),r().createElement(o.InputGroupText,null,"/hr"))))};var Re,Fe=n(53688),Ie=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Savings per template")),r().createElement("p",null,"Savings per template is the difference between the manual cost and automation cost of successfully running templates across hosts. Manual cost is calculated by multiplying the number of hours spent manually running templates across hosts by the average hourly wages per engineer. Automation cost is the total amount of time, in seconds, spent running templates automatically multiplied by the average monthly cost for automated processes."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate manual cost:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"manual time  = configurable time (in minutes) to manually complete the task on one host * number of host runs \nmanual cost = manual time * configurable manual cost of automation (e.g. average salary of mid-level Software Engineer)")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate automation cost:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"automation time = successful elapsed total / 3600\nautomation cost = automation time * configurable automated process cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate automation cost:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"savings per template = manual cost - automation cost")),r().createElement("br",null))},Le=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Failed hosts cost per template")),r().createElement("p",null,"Failed hosts cost per template is the total amount of time spent on failed automated job runs multiplied by the configured automated process cost."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate failed host cost per template:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"failed cost per template = (failed elapsed total / 3600) * configurable automated process cost")),r().createElement("br",null))},je=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Monetary gain per template")),r().createElement("p",null,"Monetary gain per template is the difference between total savings per template and failed hosts cost per template."),r().createElement("br",null),r().createElement("p",null,"The formula for monetary gain per template:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"monetary gain per template = savings per template - failed host cost per template")),r().createElement("br",null))};const Ge=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:o.ButtonVariant.link,onClick:function(){return n(!0)},icon:r().createElement(Fe.uM,null),"data-cy":"automation_formula_button"},"Automation formula"),r().createElement(o.Modal,{title:"Automation formula","data-cy":"automation_formula_modal",isOpen:t,onClose:function(){return n(!1)},variant:o.ModalVariant.medium,actions:[r().createElement(o.Button,{key:"cancel",variant:o.ButtonVariant.primary,onClick:function(){return n(!1)},"data-cy":"automation_formula_cancel_button"},"Close")]},r().createElement("p",null,"We use manual effort versus time spent on automation as factors to create formulas for cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),r().createElement("br",null),r().createElement(Ie,null),r().createElement("br",null),r().createElement(Le,null),r().createElement("br",null),r().createElement(je,null)))},Be=function(e){var t=e.template;return r().createElement(_.Td,{colSpan:5},r().createElement(_.ExpandableRowContent,null,r().createElement(o.DescriptionList,{columnModifier:{default:"3Col"}},r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Elapsed"),r().createElement(o.DescriptionListDescription,null,t.elapsed," seconds")),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Host count"),r().createElement(o.DescriptionListDescription,null,t.host_count)),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Total count"),r().createElement(o.DescriptionListDescription,null,t.total_count)),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Total org count"),r().createElement(o.DescriptionListDescription,null,t.total_org_count)),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Total cluster count"),r().createElement(o.DescriptionListDescription,null,t.total_cluster_count)),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Total inventory count"),r().createElement(o.DescriptionListDescription,null,t.total_inventory_count)),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Template success rate"),r().createElement(o.DescriptionListDescription,null,t.template_success_rate.toFixed(2))),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Savings from successful hosts"),r().createElement(o.DescriptionListDescription,null,(0,T.Z)(t.successful_hosts_savings))),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Costs from failed hosts"),r().createElement(o.DescriptionListDescription,null,(0,T.Z)(t.failed_hosts_costs))),r().createElement(o.DescriptionListGroup,null,r().createElement(o.DescriptionListTerm,null,"Monetary gain"),r().createElement(o.DescriptionListDescription,null,(0,T.Z)(t.monetary_gain))))))},Ae=function(e){var t=e.template,n=e.variableRow,l=e.setDataRunTime,i=e.setEnabled,s=e.navigateToJobExplorer,c=e.readOnly,u=void 0===c||c,d=(0,a.useState)("true"===window.localStorage.getItem(t.id.toString())||!1),m=d[0],p=d[1];return r().createElement(r().Fragment,null,r().createElement(_.Tr,null,r().createElement(_.Td,{expand:{rowIndex:t.id,isExpanded:m,onToggle:function(){return e=!m,n=t.id,window.localStorage.setItem(n.toString(),e?"true":"false"),void p(e);var e,n}}}),r().createElement(_.Td,null,r().createElement(o.Tooltip,{content:"List of jobs for this template for past 30 days"},r().createElement(o.Button,{onClick:function(){return s(t.id)},variant:o.ButtonVariant.link,style:{padding:"0px"}},t.name))),n&&r().createElement(_.Td,null,function(e,t){var n,a;switch(e){case"elapsed":a=t,n=new Intl.NumberFormat("en-US",{maximumSignificantDigits:2}).format(a)+" seconds";break;case"template_automation_percentage":n=x(t)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;default:n=(+t).toFixed(2)}return n}(n.key,+t[n.key])),r().createElement(_.Td,null,r().createElement(o.InputGroup,null,r().createElement(o.TextInput,{autoFocus:window.localStorage.getItem("focused")==="manual-time-"+t.id.toString(),id:"manual-time-"+t.id.toString(),"data-cy":"manual-time",style:{maxWidth:"150px"},type:"number","aria-label":"time run manually",defaultValue:t.avgRunTime/60,onBlur:function(e){var n=+e.target.value;n<=0||isNaN(n)?(e.target.value="60",l(60*+e.target.value,t.id)):l(60*n,t.id),window.localStorage.setItem("focused","")},onChange:function(){window.localStorage.setItem("focused","manual-time-"+t.id.toString())},isDisabled:u}),r().createElement(o.InputGroupText,null,"min"),r().createElement(o.InputGroupText,{variant:o.InputGroupTextVariant.plain},"x ",t.successful_hosts_total," host runs"))),r().createElement(_.Td,{"data-cy":"savings",style:{color:t.enabled?w.global_success_color_200.value:w.global_disabled_color_200.value}},(0,T.Z)(+t.monetary_gain)),r().createElement(_.Td,null,r().createElement(o.Switch,{label:"Show",labelOff:"Hide",isChecked:t.enabled,onChange:function(e){return i(e)},isDisabled:u}))),r().createElement(_.Tr,{isExpanded:m},r().createElement(Be,{template:t})))};var Ze=function(){return Ze=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ze.apply(this,arguments)};const He=function(e){var t=e.data,n=void 0===t?[]:t,l=e.variableRow,s=e.setDataRunTime,c=void 0===s?function(){return{}}:s,u=e.setEnabled,d=void 0===u?function(){return function(){return{}}}:u,m=e.navigateToJobExplorer,p=void 0===m?function(){return{}}:m,f=e.getSortParams,g=void 0===f?function(){return{}}:f,v=e.readOnly,h=void 0===v||v,b=(0,a.useState)(!1),E=b[0],w=b[1],k=(0,y.Me)("automation_calculator"),T=(0,i.Kx)(k).setFromToolbar,x=[r().createElement(o.DropdownItem,{key:"showAll",component:"button",onClick:function(){return d(void 0)(!0)}},"Show all"),r().createElement(o.DropdownItem,{key:"hideAll",component:"button",onClick:function(){return d(void 0)(!1)}},"Hide all"),r().createElement(o.DropdownItem,{key:"showAll",component:"button",onClick:function(){return T("template_weigh_in",void 0)}},"Display all template rows"),r().createElement(o.DropdownItem,{key:"hideHiddenTemplates",component:"button",onClick:function(){return T("template_weigh_in",!0)}},"Display only shown template rows"),r().createElement(o.DropdownItem,{key:"showHiddenTemplates",component:"button",onClick:function(){return T("template_weigh_in",!1)}},"Display only hidden template rows")];return r().createElement(_.TableComposable,{"data-cy":"table","aria-label":"ROI Table",variant:_.TableVariant.compact},r().createElement(_.Thead,null,r().createElement(_.Tr,null,r().createElement(_.Th,null),r().createElement(_.Th,null,"Name"),l&&r().createElement(_.Th,Ze({},g()),l.value),r().createElement(_.Th,null,"Manual time"),r().createElement(_.Th,null,"Savings"),r().createElement(_.Th,{style:{float:"right",overflow:"visible",zIndex:1}},r().createElement(o.Dropdown,{onSelect:function(){w(!0)},toggle:r().createElement(o.KebabToggle,{style:{paddingBottom:"0px"},id:"table-kebab",onToggle:function(){return w(!E)}}),isOpen:E,isPlain:!0,dropdownItems:x,position:"right"})))),r().createElement(_.Tbody,null,n.map((function(e){return r().createElement(Ae,{key:e.id,template:e,variableRow:l,setDataRunTime:c,navigateToJobExplorer:p,setEnabled:d(e.id),readOnly:h})}))))};var ze=n(27443),Me=n(28216),Ne=n(83215),qe=n(39677),Ue=n(10001),Ve=function(){return Ve=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ve.apply(this,arguments)},Je=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((a=a.apply(e,t||[])).next())}))},Ke=function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},We=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Ye=P.default.div(tt||(tt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"],["\n  height: 400px;\n  padding-top: 200px;\n  padding-left: 400px;\n"]))),$e=We(We([],be.zT,!0),[{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],!1),Xe=function(e){return e.filter((function(e){return e.enabled}))},Qe=function(e,t,n){return e.map((function(e){var a=(0,k.B3)(e.avgRunTime)*e.successful_hosts_total*parseFloat(n),r=(0,k.B3)(e.successful_elapsed_total)*parseFloat(t),o=(0,k.YD)(r,a);return Ve(Ve({},e),{delta:o,manualCost:a,automatedCost:r})}))};const et=function(e){var t,n,c=e.slug,u=e.name,d=e.description,p=e.dataEndpoint,g=e.optionsEndpoint,v=e.schema,h=e.fullCard,b=void 0===h||h,E=(0,ue.Bt)(p),_=(0,ue.Bt)(g),w=(0,y.Me)(c),k=(0,B.useNavigate)(),x=(0,i.Kx)(w),C=x.queryParams,S=x.setFromToolbar,D=x.setFromPagination,O=(0,a.useState)(""),P=O[0],R=O[1],F=(0,a.useState)(""),I=F[0],L=F[1],j=function(e){var t=e.legend;return(void 0===t?[]:t).map((function(e){return Ve(Ve({},e),{delta:0,avgRunTime:60*e.manual_effort_minutes||3600,manualCost:0,automatedCost:0,enabled:e.template_weigh_in})}))},G=(0,s.ZP)(_,{sort_options:[{key:w.sort_options,value:w.sort_options}]}),A=G.result,Z=G.request,H=(0,s.ZP)((function(e){return Je(void 0,void 0,void 0,(function(){var t;return Ke(this,(function(n){switch(n.label){case 0:return[4,E(e)];case 1:return t=n.sent(),[2,Ve(Ve({},t),{items:Qe(j(t.meta),t.cost.hourly_manual_labor_cost,t.cost.hourly_automation_cost)})]}}))}))}),{items:[],meta:{count:0}}),z=H.request,M=H.setValue,N=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(H,["request","setValue"]),q=function(e){M(Ve(Ve({},N.result),{items:e}))},U=function(e,t,n){return void 0===t&&(t=P),void 0===n&&(n=I),{currency:"USD",hourly_manual_labor_cost:t,hourly_automation_cost:n,templates_manual_equivalent:e.map((function(e){return{template_id:e.id,effort_minutes:e.avgRunTime/60,template_weigh_in:e.enabled}}))}},V=(0,Me.I0)(),J=function(){return Je(void 0,void 0,void 0,(function(){var e;return Ke(this,(function(t){switch(t.label){case 0:return[4,E(C)];case 1:return e=t.sent(),N.result.monetary_gain_current_page=e.monetary_gain_current_page,N.result.monetary_gain_other_pages=e.monetary_gain_other_pages,q(j(e.meta)),[2,e]}}))}))},K=function(e,t){return Je(void 0,void 0,void 0,(function(){var n,a,r;return Ke(this,(function(o){switch(o.label){case 0:n="automation_cost"===e?t:I,a="manual_cost"===e?t:P,r="automation_cost"===e?"Automation cost":"Manual cost",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,ue.mN)(U(N.result.items,a,n))];case 2:return o.sent(),[3,4];case 3:return o.sent(),V((0,Ne.wN)({title:"Unable to save changes to ".concat(r,"."),description:"Unable to save changes ".concat(r,". Please try again."),variant:qe.k.danger,autoDismiss:!1})),[2];case 4:return[4,J()];case 5:return o.sent(),"manual_cost"===e?R(t):L(t),[2]}}))}))},W=function(e,t){return Je(void 0,void 0,void 0,(function(){var n;return Ke(this,(function(a){switch(a.label){case 0:n=N.result.items.map((function(n){return n.id===t?(n.avgRunTime=e,Qe([n],I,P)[0]):n})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,ue.mN)(U(n),V)];case 2:return a.sent(),[3,4];case 3:return a.sent(),V((0,Ne.wN)({title:"Unable to save changes to Manual time",description:"Unable to save changes to Manual time. Please try again.",variant:qe.k.danger,autoDismiss:!1})),[2];case 4:return[4,J()];case 5:return a.sent(),[2]}}))}))},Y=function(e){return function(t){return Je(void 0,void 0,void 0,(function(){var n;return Ke(this,(function(a){switch(a.label){case 0:n=e?N.result.items.map((function(n){return n.id===e?Ve(Ve({},n),{enabled:t}):n})):N.result.items.map((function(e){return Ve(Ve({},e),{enabled:t})})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,ue.mN)(U(n))];case 2:return a.sent(),[3,4];case 3:return a.sent(),V((0,Ne.wN)({title:"Unable to save changes to visibility",description:"Unable to save changes to visibility. Please try again.",variant:qe.k.danger,autoDismiss:!1})),[2];case 4:return[4,J()];case 5:return a.sent(),q(n),[2]}}))}))}},$=function(){return{sort:{sortBy:{index:2,direction:C.sort_order||"none"},onSort:function(e,t,n){S("sort_order",n)},columnIndex:2}}};(0,a.useEffect)((function(){var e;!(null===(e=N.result)||void 0===e?void 0:e.cost)||I||P||(R(N.result.cost.hourly_manual_labor_cost),L(N.result.cost.hourly_automation_cost))}),[N]),(0,a.useEffect)((function(){q(Qe(N.result.items,I,P))}),[I,P]),(0,a.useEffect)((function(){Z(C),z(C)}),[C]);var X=function(e){var t,n=((t={})[i.zG]=Ve(Ve({},y.cY.defaultParams),{quick_date_range:"last_30_days",template_id:[e]}),t);k((0,i.uJ)(ze.n.jobExplorer,!0,n))},Q={y:C.sort_options,tooltip:"Savings for",field:C.sort_options,label:(null===(n=null===(t=A.sort_options)||void 0===t?void 0:t.find((function(e){return e.key===C.sort_options})))||void 0===n?void 0:n.value)||"Label Y"},ee=function(e){var t=e.datum;return Q.label+" for "+t.name+": "+function(e,t){var n;switch(e){case"elapsed":n=t.toFixed(2)+" seconds";break;case"template_automation_percentage":n=t.toFixed(2)+"%";break;case"successful_hosts_savings":case"failed_hosts_costs":case"monetary_gain":n=(0,T.Z)(t);break;default:n=t.toFixed(2)}return n}(C.sort_options,t.y)},te=function(e){var t,n,a,r;return!(null===(n=null===(t=e.result.rbac)||void 0===t?void 0:t.perms)||void 0===n?void 0:n.all)&&!(null===(r=null===(a=e.result.rbac)||void 0===a?void 0:a.perms)||void 0===r?void 0:r.write)},ne=function(){var e;return r().createElement(o.Card,{isPlain:!0},b&&r().createElement(o.CardHeader,null,r().createElement(o.CardTitle,null,"Automation savings")),N.isLoading?r().createElement(Ye,null,r().createElement(o.Spinner,{"data-cy":"spinner",isSVG:!0})):Xe(null===(e=null==N?void 0:N.result)||void 0===e?void 0:e.items).length>0?r().createElement(f.Z,{schema:Ee(v)({label:Q.label,tooltip:Q.tooltip,field:Q.field}),data:{items:Xe(N.result.items)},specificFunctions:{labelFormat:{customTooltipFormatting:ee}}}):r().createElement(Ue.Z,{title:"No results found",message:"No results match the filter criteria. Clear all filters and try again.",showButton:!0,label:"Clear all filters",onButtonClick:function(){return S(void 0,void 0)}}))},ae=function(){var e,t,n;return r().createElement(o.Stack,null,r().createElement(o.StackItem,null,r().createElement(xe,{totalSavings:(null===(e=N.result)||void 0===e?void 0:e.monetary_gain_other_pages)+(null===(t=N.result)||void 0===t?void 0:t.monetary_gain_current_page),currentPageSavings:null===(n=N.result)||void 0===n?void 0:n.monetary_gain_current_page,isLoading:N.isLoading})),r().createElement(o.StackItem,null,r().createElement(o.Stack,null,r().createElement(o.StackItem,null,r().createElement(Pe,{costManual:P,setFromCalculation:K,costAutomation:I,readOnly:te(N)})),r().createElement(o.StackItem,null,r().createElement(Ge,null)))))};return r().createElement(m,{api:N,customLoading:!0,customEmptyState:!0},function(){var e,t,n;return b?r().createElement(o.Card,null,r().createElement(o.CardBody,null,r().createElement(ke.Z,{categories:A,filters:C,setFilters:S,pagination:r().createElement(l.Z,{count:N.result.meta.count,perPageOptions:$e,params:{limit:+C.limit,offset:+C.offset},setPagination:D,isCompact:!0}),additionalControls:[r().createElement(ye,{key:"download-button",slug:c,name:u,description:d,endpointUrl:p,queryParams:C,selectOptions:A,y:"",label:"",xTickFormat:"",totalPages:Math.ceil(N.result.meta.count/C.limit),pageLimit:C.limit,sortOptions:Q.y,sortOrder:C.sort_order,startDate:C.start_date,endDate:C.end_date,dateRange:C.quick_date_range,inputs:{costManual:P,costAutomation:I,totalSavings:(null===(e=N.result)||void 0===e?void 0:e.monetary_gain_other_pages)+(null===(t=N.result)||void 0===t?void 0:t.monetary_gain_current_page),currentPageSavings:null===(n=N.result)||void 0===n?void 0:n.monetary_gain_current_page}})]}),r().createElement(o.Grid,{hasGutter:!0},r().createElement(o.GridItem,{span:9},ne()),r().createElement(o.GridItem,{span:3},ae()),r().createElement(o.GridItem,{span:12},r().createElement("p",null,"Enter the time it takes to run the following templates manually."),N.isLoading?r().createElement(o.Spinner,{"data-cy":"spinner",isSVG:!0}):r().createElement(He,{navigateToJobExplorer:X,data:N.result.items,variableRow:A.sort_options.find((function(e){return e.key===C.sort_options})),setDataRunTime:W,setEnabled:Y,getSortParams:$,readOnly:te(N)})))),r().createElement(o.CardFooter,null,r().createElement(l.Z,{count:N.result.meta.count,perPageOptions:$e,params:{limit:+C.limit,offset:+C.offset},setPagination:D,variant:o.PaginationVariant.bottom}))):r().createElement(r().Fragment,null,r().createElement(ke.Z,{categories:A,filters:C,setFilters:S}),r().createElement(o.Grid,{hasGutter:!0},r().createElement(o.GridItem,{span:9},ne()),r().createElement(o.GridItem,{span:3},ae())))}())};var tt,nt=function(){return nt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},nt.apply(this,arguments)};const at=function(e,t){switch(e.layoutComponent){case"standard":return!0===t?r().createElement(we,nt({},e.layoutProps)):r().createElement(we,nt({},e.layoutProps,{fullCard:!1}));case"automationCalculator":return!0===t?r().createElement(et,nt({},e.layoutProps)):r().createElement(et,nt({},e.layoutProps,{fullCard:!1}));default:return r().createElement(r().Fragment,null)}}},74221:(e,t,n)=>{var a;n.d(t,{DX:()=>r,zT:()=>o}),function(e){e.operations="Operations",e.executive="Executive",e.subscription="Subscription",e.migration="Migration",e.controller="Controller",e.catalog="Catalog",e.automationHub="Automation Hub",e.modules="Modules",e.hosts="Hosts",e.tasks="Tasks",e.organization="Organization",e.jobTemplate="Job template",e.jobRuns="Job runs",e.timeSeries="Time series",e.performanceAnomalyDetection="Performance anomaly detection",e.savings="Savings"}(a||(a={}));var r=[{key:a.operations,name:"Operations",description:"This report is useful to the engineers who manage day-to-day Ansible operations.  In other words, team members who write playbooks, do administration tasks within Controller, etc."},{key:a.executive,name:"Executive",description:"This report is useful to executives who want to monitor and learn about the Ansible operations happening across the company."},{key:a.subscription,name:"Subscription",description:"This report provides useful information around subscription data, helping you make decisions around compliance."},{key:a.migration,name:"Migration",description:"This report provides useful information around migrations, such as helping to identify what could be necessary to move to newer versions of the Ansible Automation Platform."},{key:a.controller,name:"Controller",description:"This report provides information gathered from Controller."},{key:a.catalog,name:"Catalog",description:"This report provides information gathered from Automation Services Catalog."},{key:a.automationHub,name:"Automation Hub",description:"This report provides information gathered from Automation Hub."},{key:a.modules,name:"Modules",description:"This report groups information by Ansible modules, the specific executable code ran in individual playbook or job template tasks."},{key:a.hosts,name:"Hosts",description:"This report groups information by the hosts within the Ansible inventories that are executed by playbooks or job templates."},{key:a.tasks,name:"Tasks",description:"This report groups information by the individual tasks that make up a playbook or job template."},{key:a.organization,name:"Organization",description:"This report groups information by the organizations set up within the company’s Ansible Controller instances."},{key:a.jobTemplate,name:"Job template",description:"This report groups information by the job templates set up within the company’s Ansible Controller instances."},{key:a.jobRuns,name:"Job runs",description:"This report groups information by the individual runs of playbooks or job templates."},{key:a.timeSeries,name:"Time series",description:"This report groups information for a specified time range and granularity, such as weekly (e.g., from the past 12 weeks) or monthly (e.g., between August and November)."},{key:a.performanceAnomalyDetection,name:"Performance anomaly detection",description:"This report provides the ability to detect anomalies in Ansible performance, such as identifying slow tasks or hosts, or tasks with high error rates."},{key:a.savings,name:"Savings",description:"This report is useful for showing potential or actual savings based on Ansible usage."}],o=[{title:"4",value:4},{title:"6",value:6},{title:"8",value:8},{title:"10",value:10}]},22030:(e,t,n)=>{n.d(t,{Z:()=>a});const a={getDetails:function(e){return"".concat(e)}}},91354:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}}}]);
//# sourceMappingURL=../sourcemaps/4903.1648ddd2ca2cb6c344e13687e54db705.js.map