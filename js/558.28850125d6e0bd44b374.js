"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[558],{53558:(e,t,n)=>{n.r(t),n.d(t,{default:()=>cn,paths:()=>on});var a=n(92950),r=n.n(a),l=n(86235),i=n(20806),o=n(58788),c=n(86350),s=n(48716),u=n(39173),m=n(69595),d=n(64866),p=n(70885),f=n(45697),E=n.n(f),v=n(77388),g=n(4942),y="SET_NAME",b="SET_CATEGORY",h="SET_DESCRIPTION",k="SET_MANUAL_TIME",_="SET_HOSTS",C="SET_FREQUENCY_PERIOD",Z="SET_TASKS",P="SET_TEMPLATE_ID";function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null!=e&&e.length)return e.sort((function(e,t){return e.task_order-t.task_order})).map((function(e){return e.task}))};var w,S,O,j,q,I,R=n(87462),L=n(45987),B=n(30168),F=n(35451),A=n(84564),N=n(19694),G=n(31369),M=n(77669),W=n(29163),z=["isOpen","title","label","variant","children"],H=(0,W.ZP)(A.ZP)(w||(w=(0,B.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),U=(0,W.ZP)(M.ZP)(S||(S=(0,B.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),K=(0,W.ZP)(G.ZP)(O||(O=(0,B.Z)(["\n  color: var(--pf-global--info-color--100);\n"]))),V=(0,W.ZP)(F.ZP)(j||(j=(0,B.Z)(["\n  color: var(--pf-global--success-color--100);\n"]))),Y=(0,W.ZP)(N.ZP)(q||(q=(0,B.Z)(["\n  color: var(--pf-global--warning-color--100);\n"]))),$=W.ZP.div(I||(I=(0,B.Z)(["\n  display: flex;\n  svg {\n    margin-right: 16px;\n  }\n"]))),X=function(e){var t=e.isOpen,n=e.title,a=e.label,l=void 0===a?"Alert modal":a,i=e.variant,c=void 0===i?"warning":i,s=e.children,u=(0,L.Z)(e,z),m={danger:r().createElement(H,{size:"lg"}),error:r().createElement(U,{size:"lg"}),info:r().createElement(K,{size:"lg"}),success:r().createElement(V,{size:"lg"}),warning:r().createElement(Y,{size:"lg"})},d=r().createElement($,null,c?m[c]:null,r().createElement(o.Title,{id:"alert-modal-header-label",size:"2xl",headingLevel:"h2"},n));return r().createElement(o.Modal,(0,R.Z)({header:d,"aria-label":l,"aria-labelledby":"alert-modal-header-label",isOpen:!!t,variant:"small",title:n},u),s)};X.propTypes={isOpen:E().bool.isRequired,title:E().string.isRequired,label:E().string,variant:E().string,children:E().node};const Q=X;var J,ee,te,ne=(0,W.ZP)(o.Card)(J||(J=(0,B.Z)(["\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n"]))),ae=(0,W.ZP)(o.CardBody)(ee||(ee=(0,B.Z)(["\n  max-height: 200px;\n  overflow: scroll;\n"]))),re=(0,W.ZP)(o.ExpandableSection)(te||(te=(0,B.Z)(["\n  text-align: left;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n"])));function le(e){var t=e.error,n=(0,a.useState)(!1),l=(0,p.Z)(n,2),i=l[0],o=l[1];return r().createElement(r().Fragment,null,Array.isArray(t)&&t.length&&r().createElement(re,{toggleText:"Details",onToggle:function(){o(!i)},isExpanded:i},r().createElement(ne,null,r().createElement(ae,null,r().createElement("ul",null,t.map((function(e){return"string"==typeof e?r().createElement("li",{key:e},e):null})))))))}le.propTypes={error:E().arrayOf(E().string)};const ie=le;var oe=n(53345),ce=function(e){var t=e.options,n=e.formData,l=e.dispatch,i=n.name,c=n.category,s=n.description,u=n.manual_time,m=n.hosts,d=n.frequency_period,f=(0,a.useState)(!1),E=(0,p.Z)(f,2),v=E[0],g=E[1],Z=(0,a.useState)(!1),P=(0,p.Z)(Z,2),D=P[0],T=P[1],x=(0,a.useState)(!1),w=(0,p.Z)(x,2),S=w[0],O=w[1];return r().createElement(o.Form,null,t&&r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What do you want to automate?",isRequired:!0,fieldId:"name-field"},r().createElement(o.TextInput,{isRequired:!0,placeholder:"Example: Provision NGINX server",type:"text",id:"name-field",name:"name",value:i,onChange:function(e){return l({type:y,value:e})}})),r().createElement(o.FormGroup,{label:"What type of task is it?",fieldId:"category-field"},r().createElement(o.Select,{id:"category-field",isOpen:v,variant:"single","aria-label":"Plan category selector",maxHeight:390,onToggle:function(){return g(!v)},onSelect:function(e,t){l({type:b,value:t}),g(!1)},selections:c},((null==t?void 0:t.category)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"Enter a description of your automation plan",fieldId:"description-field"},r().createElement(o.TextInput,{type:"text",placeholder:"Place description here",id:"description-field",name:"description",value:s,onChange:function(e){return l({type:h,value:e})}})),r().createElement(o.FormGroup,{label:"How long does it take to do this manually?",fieldId:"manual-time-field"},r().createElement(o.Select,{id:"manual-time-field",isOpen:D,variant:"single",placeholderText:"Select amount","aria-label":"Plan time selector",onToggle:function(){return T(!D)},onSelect:function(e,t){l({type:k,value:t}),T(!1)},selections:u},((null==t?void 0:t.manual_time)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"How many hosts do you plan to run this on?",fieldId:"hosts-field"},r().createElement(o.NumberInput,{inputAriaLabel:"Number of hosts",widthChars:8,onChange:function(e){((0,oe.i_)(e.target.value)||0===e.target.value.length)&&l({type:_,value:parseInt(e.target.value)})},onMinus:function(){return l({type:_,value:(0,oe.i_)(m)?m-1:0})},onPlus:function(){return l({type:_,value:(0,oe.i_)(m)?m+1:1})},id:"hosts-field",name:"hosts",value:m,min:0})),r().createElement(o.FormGroup,{label:"How often do you do this?",fieldId:"frequency-period-field"},r().createElement(o.Select,{id:"frequency-period-field",isOpen:S,variant:"single",placeholderText:"Select frequency period","aria-label":"Plan frequency period selector",onToggle:function(){O(!S)},onSelect:function(e,t){l({type:C,value:t}),O(!1)},selections:d},((null==t?void 0:t.frequency_period)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)}))))))};ce.propTypes={options:E().object.isRequired,formData:E().object.isRequired,dispatch:E().func.isRequired};const se=ce;var ue,me,de,pe,fe,Ee=n(42982),ve=n(12294),ge=n(33606),ye=W.ZP.div(ue||(ue=(0,B.Z)(["\n  margin-top: 20px;\n"]))),be=(0,W.ZP)(o.Title)(me||(me=(0,B.Z)(["\n  margin-bottom: 10px;\n"]))),he=(0,W.ZP)(o.Button)(de||(de=(0,B.Z)(["\n  padding: 0 16px;\n"]))),ke=(0,W.ZP)(o.DataListAction)(pe||(pe=(0,B.Z)(["\n  padding: 6px 0;\n"]))),_e=(0,W.ZP)(o.DataListItemRow)(fe||(fe=(0,B.Z)(["\n  align-items: center;\n"]))),Ce=function(e){var t=e.tasks,n=e.dispatch,l=function(e){n({type:Z,value:e})},i=(0,a.useState)(""),c=(0,p.Z)(i,2),s=c[0],u=c[1],m=(0,a.useState)(""),d=(0,p.Z)(m,2),f=d[0],E=d[1],v=(0,a.useState)(""),g=(0,p.Z)(v,2),y=g[0],b=g[1],h=function(){var e=s.trim();""!==e&&(l([].concat((0,Ee.Z)(t),[e])),u(""))};return r().createElement(r().Fragment,null,r().createElement(o.Form,null,r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What tasks do you need to accomplish this plan?",fieldId:"task-field"},r().createElement(o.InputGroup,null,r().createElement(o.TextInput,{placeholder:"Enter a description of each task",type:"text",id:"task-field",name:"task",value:s,onChange:function(e){return u(e)},onKeyDown:function(e){e.key&&"Enter"===e.key&&(e.preventDefault(),h())}}),r().createElement(o.Button,{onClick:h,isDisabled:""===s.trim(),variant:"control","aria-label":"Add task"},r().createElement(ve.ZP,null)))))),t.length>0&&r().createElement(ye,null,r().createElement(be,{headingLevel:"h4",size:"xl"},"Tasks"),r().createElement(o.DataList,{"aria-label":"Draggable list to reorder and remove tasks.",isCompact:!0,onDragFinish:function(e){E("Dragging finished"),l(e.map((function(e){return e.split("-").slice(0,-1).join("-")})))},onDragStart:function(e){b(e),E("Dragging started for task ".concat(e,"."))},onDragMove:function(e,t){E("Dragging task ".concat(y,".  Task ").concat(e," is now task ").concat(t,"."))},onDragCancel:function(){E("Dragging cancelled. Tasks list order is unchanged.")},itemOrder:t.map((function(e,t){return"".concat(e,"-").concat(t)}))},t.map((function(e,n){return r().createElement(o.DataListItem,{"aria-labelledby":"cell-".concat(n+1),id:"".concat(e,"-").concat(n),key:n+1},r().createElement(_e,null,r().createElement(o.DataListControl,null,r().createElement(o.DataListDragButton,{"aria-label":"Reorder","aria-labelledby":"cell-".concat(n+1),"aria-describedby":"Press space or enter to begin dragging, and use the arrow keys to navigate up or down. Press enter to confirm the drag, or any other key to cancel the drag operation.","aria-pressed":"false"})),r().createElement(o.DataListItemCells,{dataListCells:[r().createElement(o.DataListCell,{key:n+1},r().createElement("span",{id:"cell-".concat(n+1)},"".concat(n+1,". ").concat(e)))]}),r().createElement(ke,{"aria-label":"Actions"},r().createElement(he,{onClick:function(){return function(e){l(t.filter((function(t,n){return n!==e})))}(n)},variant:"plain","aria-label":"Delete"},r().createElement(ge.ZP,null)))))})))),r().createElement("div",{className:"pf-screen-reader","aria-live":"assertive"},f))};Ce.propTypes={tasks:E().array.isRequired,dispatch:E().func.isRequired};const Ze=Ce;var Pe,De=n(15861),Te=n(87757),xe=n.n(Te),we=n(86445),Se=n(48236),Oe=n(37384),je=n(9771),qe=n(12613),Ie=n(47116),Re=n(83474),Le=["quick_date_range","sort_options"],Be=W.ZP.div(Pe||(Pe=(0,B.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Fe={group_by:"template",limit:10,group_by_time:!1,offset:0,sort_options:"name",sort_order:"asc",cluster_id:[],inventory_id:[],job_type:[],org_id:[],status:[],template_id:[]},Ae=function(e){var t=e.template_id,n=e.dispatch,l=(0,Ie.Kx)(Fe),i=l.queryParams,c=l.setFromPagination,s=l.setFromToolbar,u=l.dispatch,m=(0,v.ZP)(function(){var e=(0,De.Z)(xe().mark((function e(t){var n,a;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.ZW)(t);case 2:return(n=e.sent).quick_date_range,n.sort_options,a=(0,L.Z)(n,Le),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{}),p=m.result,f=m.error,E=m.isSuccess,g=m.request,y=(0,v.ZP)((0,a.useCallback)((0,De.Z)(xe().mark((function e(){var t;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Ij)(i);case 2:return t=e.sent,e.abrupt("return",{templates:t.items,count:t.meta.count});case 4:case"end":return e.stop()}}),e)}))),[i]),{templates:[],count:0}),b=y.result,h=b.templates,k=b.count,_=y.isLoading,C=y.isSuccess,Z=y.request,D={sort:{sortBy:{direction:i.sort_order},onSort:function(e,t,n){u({type:"SET_SORT_ORDER",value:{sort_order:n}})}}};return(0,a.useEffect)((function(){g(),Z()}),[i]),E?r().createElement(o.Form,null,r().createElement(o.FormGroup,{label:"Link a template to this plan:",fieldId:"template-link-field"},r().createElement(Re.Z,{categories:p,filters:i,setFilters:s,pagination:r().createElement(qe.Z,{count:k,params:{limit:+i.limit,offset:+i.offset},setPagination:c,isCompact:!0})}),f&&r().createElement(je.Z,{message:f.error}),_&&r().createElement(Se.Z,null),C&&h.length<=0&&r().createElement(Oe.Z,null),C&&h.length>0&&r().createElement(we.TableComposable,{"aria-label":"Template link table",variant:"compact"},r().createElement(we.Thead,null,r().createElement(we.Tr,null,r().createElement(we.Th,null),r().createElement(we.Th,D,"Name"))),r().createElement(we.Tbody,null,h.map((function(e){var a=e.id,l=e.name;return r().createElement(we.Tr,{key:"template-detail-".concat(a)},r().createElement(we.Td,{"data-testid":"radio-".concat(a),key:"template-detail-".concat(a,"-radio-td"),select:{rowIndex:a,onSelect:function(e,t,a){return n({type:P,value:a})},isSelected:t===a,variant:"radio"}}),r().createElement(we.Td,null,l))})))),r().createElement(Be,null,r().createElement("div",null,-2!==t&&r().createElement(o.Button,{key:"clear-selection-button",variant:"link","aria-label":"Clear selection",onClick:function(){n({type:P,value:-2})}},"Clear selection")),r().createElement(qe.Z,{count:k,params:{limit:+i.limit,offset:+i.offset},setPagination:c,variant:o.PaginationVariant.bottom})))):null};Ae.propTypes={template_id:E().number.isRequired,dispatch:E().func.isRequired};const Ne=Ae;var Ge=function(e){var t,n=e.title,i=e.options,c=e.data,s=void 0===c?{}:c,u=(0,l.useHistory)(),m=(0,l.useLocation)(),f=m.hash,E=m.pathname,g=(0,a.useState)(null),D=(0,p.Z)(g,2),w=D[0],S=D[1],O=(0,v.ZP)((0,a.useCallback)((function(e,t){return e?t?(0,d.Vs)(t,e):(0,d.he)(e):{}}),[]),s),j=O.result,q=O.error,I=O.request,R=function(e){var t,n=(0,a.useReducer)((function(e,t){var n=t.type,a=t.value;switch(n){case y:return T(T({},e),{},{name:a});case b:return T(T({},e),{},{category:a});case h:return T(T({},e),{},{description:a});case k:return T(T({},e),{},{manual_time:a});case _:return T(T({},e),{},{hosts:a});case C:return T(T({},e),{},{frequency_period:a});case Z:return T(T({},e),{},{tasks:a});case P:return T(T({},e),{},{template_id:a});default:throw new Error("usePlanData reducer action type ".concat(n," was not found."))}}),{name:(null==e?void 0:e.name)||"",category:(null==e?void 0:e.category)||"system",description:(null==e?void 0:e.description)||"",manual_time:(null==e?void 0:e.manual_time)||240,hosts:(null==e?void 0:e.hosts)||1,frequency_period:(null==e?void 0:e.frequency_period)||"weekly",tasks:x(null==e?void 0:e.tasks)||[],template_id:(null==e?void 0:e.template_id)||-2}),r=(0,p.Z)(n,2),l=r[0],i=r[1];return{formData:l,requestPayload:(t=T({},l),t.tasks=t.tasks.map((function(e,t){return{task:e,task_order:t+1}})),t.hosts&&""!==t.hosts||(t.hosts=1),t.hourly_rate=50,t.frequency_per_period=1,t),dispatch:i}}(s),L=R.formData,B=R.requestPayload,F=R.dispatch,A=[{step_number:1,id:"details",name:"Details",component:r().createElement(se,{options:i,formData:L,dispatch:F})},{step_number:2,id:"tasks",name:"Tasks",component:r().createElement(Ze,{tasks:L.tasks,dispatch:F})},{step_number:3,id:"link_template",name:"Link template",component:r().createElement(Ne,{template_id:L.template_id,dispatch:F}),nextButtonText:"Save"}],N=r().createElement(o.WizardFooter,null,r().createElement(o.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack,l=e.onClose;return 3!==t.step_number?r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:"primary",type:"submit",onClick:n},"Next"),1!==t.step_number&&r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel")):r().createElement(r().Fragment,null,r().createElement(o.Tooltip,{content:L.name&&""!==!L.name?"Save this plan":"In order to save this plan, you must enter a name in the details step",position:"top"},r().createElement("div",null,r().createElement(o.Button,{variant:"primary",type:"submit",onClick:M,isDisabled:!L.name||""===!L.name},"Save"))),r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel"))})));(0,a.useEffect)((function(){-1===E.indexOf("/add")&&f?S(A.find((function(e){return"#".concat(e.id)===f})).step_number):(u.replace({hash:"details"}),S(1))}),[]);var G=function(e){u.replace({hash:e.id})},M=function(){I(B,null==s?void 0:s.id)};return r().createElement(r().Fragment,null,!q&&(null==j?void 0:j.plan_created)&&r().createElement(l.Redirect,{to:{pathname:on.getDetails(j.id||j.plan_created.id),state:{reload:!0}}}),w&&r().createElement(o.Wizard,{navAriaLabel:"".concat(n," steps"),mainAriaLabel:"".concat(n," content"),steps:A,onGoToStep:G,onNext:G,onBack:G,onSave:M,onClose:function(){-1!==location.pathname.indexOf("/edit")?u.push(on.getDetails(null==s?void 0:s.id)):u.push(on.get)},footer:N,startAtStep:w,height:"calc(100vh - 240px)"}),q&&r().createElement(Q,{isOpen:!!q,onClose:function(){I()},title:"Error",variant:"error"},"There was an error saving the plan.",r().createElement(ie,{error:null==q||null===(t=q.error)||void 0===t?void 0:t.detail.name})))};Ge.propTypes={title:E().string.isRequired,options:E().object.isRequired,data:E().object},Ge.defaultProps={data:{}};const Me=Ge,We=function(){var e,t,n,p,f,E,g=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.nE)()}),[]),{}),y=g.result,b=g.isSuccess,h=g.request;(0,a.useEffect)((function(){h()}),[h]);var k=b&&(!0===(null===(e=y.meta)||void 0===e||null===(t=e.rbac)||void 0===t||null===(n=t.perms)||void 0===n?void 0:n.write)||!0===(null===(p=y.meta)||void 0===p||null===(f=p.rbac)||void 0===f||null===(E=f.perms)||void 0===E?void 0:E.all)),_="Create new plan";return b?k?r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:[{title:"Savings Planner",navigate:"/savings-planner"}]}),r().createElement(u.Z,{title:_})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(o.CardBody,null,r().createElement(Me,{title:_,options:y}))))):r().createElement(l.Redirect,{to:i.n.savingsPlanner}):null};var ze,He,Ue=n(83264),Ke=W.ZP.div(Ye||(ze=["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"],He=["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"],Object.defineProperty?Object.defineProperty(ze,"raw",{value:He}):ze.raw=He,Ye=ze));const Ve=function(e){var t=e.children;return r().createElement(Ke,null,r().createElement(o.CardActions,null,t))};var Ye,$e,Xe;function Qe(e){return Je.apply(this,arguments)}function Je(){return Je=(0,De.Z)(xe().mark((function e(t){var n,a,r;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=null,r=!1,e.prev=3,e.next=6,Promise.all(t.map(function(){var e=(0,De.Z)(xe().mark((function e(t){var a,l,i,o;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.request,l=t.label,e.next=3,a();case 3:i=e.sent,(o=i.items.count)>0&&(n[l]=o,r=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a=e.t0;case 11:return e.abrupt("return",{results:r&&n,error:a});case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))),Je.apply(this,arguments)}var et=(0,W.ZP)(o.Alert)($e||($e=(0,B.Z)(["\n  margin-top: 10px;\n"]))),tt=W.ZP.span(Xe||(Xe=(0,B.Z)(["\n  && {\n    margin-right: 10px;\n  }\n"]))),nt=function(e){var t=e.onConfirm,n=e.modalTitle,l=void 0===n?"Delete":n,i=e.name,c=void 0===i?"":i,s=e.variant,u=void 0===s?"secondary":s,m=e.isDisabled,d=void 0!==m&&m,f=e.ouiaId,E=void 0===f?null:f,v=e.deleteMessage,g=void 0===v?"Delete?":v,y=e.deleteDetailsRequests,b=void 0===y?[]:y,h=e.disabledTooltip,k=void 0===h?"This item cannot be deleted":h,_=e.children,C=(0,a.useState)(!1),Z=(0,p.Z)(C,2),P=Z[0],D=Z[1],T=(0,a.useState)(),x=(0,p.Z)(T,2),w=x[0],S=x[1],O=(0,a.useState)({}),j=(0,p.Z)(O,2),q=j[0],I=j[1],R=(0,a.useState)(!1),L=(0,p.Z)(R,2),B=L[0],F=L[1],A=function(){var e=(0,De.Z)(xe().mark((function e(t){var n,a,r;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(!0),!(b.length>0&&t)){e.next=8;break}return e.next=4,Qe(b);case 4:n=e.sent,a=n.results,(r=n.error)?S(r):I(a);case 8:F(!1),D(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return w?r().createElement(Q,{isOpen:!!w,variant:"error",title:"Error!",onClose:function(){A(!1),S()}},r().createElement(ie,{error:w.detail})):r().createElement(r().Fragment,null,k?r().createElement(o.Tooltip,{content:k,position:"top"},r().createElement("div",null,r().createElement(o.Button,{spinnerAriaValueText:B?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return A(!0)},ouiaId:E},_||"Delete"))):r().createElement(o.Button,{ouiaId:E,spinnerAriaValueText:B?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return A(!0)}},_||"Delete"),r().createElement(Q,{isOpen:P,title:l,variant:"danger",onClose:function(){return A(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"Confirm Delete",isDisabled:d,onClick:function(){t(),A(!1)}},"Delete"),r().createElement(o.Button,{ouiaId:"delete-modal-cancel",key:"cancel",variant:"link","aria-label":"Cancel",onClick:function(){return A(!1)}},"Cancel")]},"Are you sure you want to delete:",r().createElement("br",null),r().createElement("strong",null,c),Object.values(q).length>0&&r().createElement(et,{variant:"warning",isInline:!0,title:r().createElement("div",null,r().createElement("div",{"aria-label":g},g),r().createElement("br",null),Object.entries(q).map((function(e){var t=(0,p.Z)(e,2),n=t[0],a=t[1];return r().createElement("div",{"aria-label":"".concat(n,": ").concat(a),key:n},r().createElement(tt,null,n)," ",r().createElement(o.Badge,null,a))})))})))};nt.propTypes={onConfirm:E().func.isRequired,modalTitle:E().string,name:E().string,variant:E().object,isDisabled:E().bool,ouiaId:E().string,deleteMessage:E().string,deleteDetailsRequests:E().array,disabledTooltip:E().bool,children:E().node};const at=nt;var rt=function(e){var t=e.tabsArray,n=e.defaultTabId,a=(0,l.useHistory)(),i=(0,l.useLocation)();return r().createElement(o.Tabs,{activeKey:function(e){var n;return(null===(n=t.find((function(e){return e.link===i.pathname})))||void 0===n?void 0:n.id)||e}(n),onSelect:function(e,n){var r=t.find((function(e){return e.id===n}));r&&a.push(r.link)}},t.map((function(e){return r().createElement(o.Tab,{"aria-label":"string"==typeof e.name?e.name:"".concat(e.id," tab"),eventKey:e.id,key:e.id,link:e.link,title:r().createElement(o.TabTitleText,null,e.name),role:"tab"})})))};rt.propTypes={defaultTabId:E().number,tabsArray:(0,f.arrayOf)((0,f.shape)({id:f.number.isRequired,link:f.string.isRequired,name:(0,f.oneOfType)([f.string.isRequired,f.node.isRequired])})).isRequired},rt.defaultProps={defaultTabId:1};const lt=rt;var it,ot,ct=n(62455),st=n(13784);function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dt=(0,W.ZP)(o.CardBody)(it||(it=(0,B.Z)(["\n  min-height: 500px;\n  padding: 0;\n  padding-bottom: 20px;\n\n  &:first-child {\n    padding-top: 0;\n  }\n"]))),pt=(0,W.ZP)(o.Divider)(ot||(ot=(0,B.Z)(["\n  padding-top: 24px;\n"]))),ft=function(e){var t=e.tabsArray,n=e.plan,c=e.canWrite,s=e.options,u=(0,l.useLocation)().pathname,m=(0,Ie.eR)(),p=n.id,f=n.automation_status,E=n.category,y=n.description,b=n.frequency_period,h=n.hosts,k=n.manual_time,_=n.modified,C=n.name,Z=n.tasks,P=n.template_details,D=n.template_id,T=function(e,t){return((s[e]||[]).find((function(e){return e.key===t}))||{}).value},x={Name:C||void 0,"Automation type":E?T("category",E):void 0,Description:y||void 0,"Manual time":k?T("manual_time",k):void 0,"Run on hosts":h||void 0,Frequency:b?T("frequency_period",b):void 0,Template:D?function(e){if(e.id)return r().createElement("a",{onClick:function(){return function(e){var t=(0,g.Z)({},Ie.zG,mt(mt({},st.cY.defaultParams),{},{quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]}));m(i.n.jobExplorer,t)}(e.id)}},e.name)}(P):void 0,"Last job status":f.status&&"None"!==f.status?r().createElement(ct.Z,{status:f.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(A.ZP,null)},"Not Running"),"Last updated":_?r().createElement("span",null,(0,oe.o0)(_)):void 0},w=(0,v.ZP)((0,a.useCallback)((0,De.Z)(xe().mark((function e(){return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Kh)(p);case 2:m(i.n.savingsPlanner);case 3:case"end":return e.stop()}}),e)}))),[p,history])),S=w.request,O=w.error,j=(0,v.pF)(O),q=j.error,I=j.dismissError;return r().createElement(r().Fragment,null,n&&r().createElement(r().Fragment,null,r().createElement(dt,null,r().createElement(lt,{tabsArray:t}),r().createElement("div",{style:{padding:"1rem"}},r().createElement(o.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},Object.keys(x).map((function(e,t){return void 0!==x[e]&&r().createElement(o.DescriptionListGroup,{key:t},r().createElement(o.DescriptionListTerm,null,e),r().createElement(o.DescriptionListDescription,null,x[e]))}))),Z.length>0&&r().createElement(o.DescriptionList,null,r().createElement(pt,{component:"div"}),r().createElement(o.DescriptionListGroup,{key:Z},r().createElement(o.DescriptionListTerm,null,"Tasks"),r().createElement(o.DescriptionListDescription,null,r().createElement(o.List,{component:"ol",type:"1"},Z.map((function(e){var t=e.id,n=e.task;return r().createElement(o.ListItem,{key:t},n)})))))))),c&&r().createElement(o.CardFooter,null,r().createElement(Ve,null,r().createElement(o.Button,{key:"edit-plan-button",variant:"primary","aria-label":"Edit plan",onClick:function(){m("".concat(u.split("/details")[0],"/edit"))}},"Edit"),r().createElement(at,{key:"delete-plan-button",name:C,modalTitle:"Delete Plan",onConfirm:S},"Delete")),q&&r().createElement(Q,{isOpen:!!q,onClose:I,title:"Error",variant:"error"},r().createElement(ie,{error:q.detail})))))};ft.propTypes={plan:E().object,tabsArray:E().array,canWrite:E().bool.isRequired,options:E().object.isRequired};const Et=ft;var vt=n(90952),gt=n(91738),yt=n(91354);const bt=function(e){return(+e.toFixed(0)).toLocaleString()+" hours"};var ht=function(e){var t=e.value,n=void 0===t?0:t,a=e.isMoney,l=void 0===a||a;return r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),r().createElement(o.CardBody,null,r().createElement(o.Title,{headingLevel:"h3",size:"4xl",style:{color:l?"#81C46B":"#0063CF"}},l?""+(0,yt.Z)(n):""+bt(n))))};ht.propTypes={value:E().number,isMoney:E().bool};const kt=ht;var _t=n(53688),Ct=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Cost")),r().createElement("p",null,"The cost includes the hours spent in implementation, deployment, training and other expenditures for creating, maintaining and running the automation. These hours (cost of investment) are usually higher at the onset, and will be greatly reduced once the automation has been created and only maintenance is required."),r().createElement("br",null),r().createElement("p",null,"For the initial period and the first year, we assume approximately 10 hours spent on each host, as well as some buffer time and a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"For the next two years after the first year, we assume 4 hours spent on each host, as well as a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for the initial period and year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 10) + buffer time\nC2 = C1 * 40% risk adjustment\ninitial cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 1 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for years 2 and 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 4)\nC2 = C1 * 40% risk adjustment\nyear 2 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 3 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")))},Zt=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Savings")),r().createElement("p",null,"The savings indicates the time and money saved as a result of automating the plan."),r().createElement("br",null),r().createElement("p",null,"We assume 50% productivity recapture to account for the productivity that is usually gained by repeated manual implementation of a task over a period of time. We also add a -5% risk adjustment for unforeseen situations that might arise and need to be handled. We also assume a 15% year over year growth in savings."),r().createElement("br",null),r().createElement("p",null,"Money savings for the initial period is 0, so there is no formula necessary."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 0:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"initial period savings = 0 - initial cost")),r().createElement("br",null),r().createElement("p",null,"The formula used for savings for year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = (number of hosts * (manual time in minutes / 60) * yearly frequency of automation)\nS2 = S1 * 50% productivity recapture\nS3 = S2 * 5% risk adjustment * (cost per hour in USD if applicable, based on display)\nyear 1 savings = S2 - S3 - year 1 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 2:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = year 1 savings * 15% growth\nyear 2 savings = year 1 savings + S1 - year 2 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S2 = year 2 savings * 15% growth\nyear 3 savings = year 2 savings + S2 - year 3 cost")))};const Pt=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:"link",onClick:function(){return n(!0)},icon:r().createElement(_t.uM,null)},"Automation formula"),r().createElement(o.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:o.ModalVariant.medium,actions:[r().createElement(o.Button,{key:"cancel",variant:o.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},r().createElement("p",null,"We use risk-adjusted factors to create the 3-year projection of cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the risk-adjustment factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),r().createElement("br",null),r().createElement(Ct,null),r().createElement("br",null),r().createElement(Zt,null)))};var Dt=function(){return Dt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Dt.apply(this,arguments)},Tt=function(e){return{cost:{key:e?"total_costs":"total_hours_spent_risk_adjusted",color:"#8B8D8F"},benefit:{key:e?"total_benefits":"total_hours_saved",color:e?"#81C46B":"#0063CF"},net:{key:e?"cumulative_net_benefits":"cumulative_time_net_benefits",color:"#EE7A00"}}},xt=function(e){var t,n=e.tabsArray,l=function(e){if("series_stats"in e.projections)return e;var t={initial:"Initial",year1:"Year 1",year2:"Year 2",year3:"Year 3"},n=Object.keys(t).map((function(n){return{year:t[n],total_costs:+e.projections.monetary_stats.total_costs[n],total_benefits:+e.projections.monetary_stats.total_benefits[n],cumulative_net_benefits:+e.projections.monetary_stats.cumulative_net_benefits[n],total_hours_spent_risk_adjusted:+e.projections.time_stats.total_hours_spent_risk_adjusted[n],total_hours_saved:+e.projections.time_stats.total_hours_saved[n],cumulative_time_net_benefits:+e.projections.time_stats.cumulative_time_net_benefits[n]}}));return Dt(Dt({},e),{projections:Dt(Dt({},e.projections),{series_stats:n})})}(e.plan),i=(0,a.useState)(!0),c=i[0],s=i[1],u={charts:[{id:1e3,kind:gt.$v.wrapper,type:gt.yD.chart,parent:null,props:{height:600,domainPadding:{x:100},padding:{bottom:60,left:80},themeColor:gt.nz.gray},tooltip:{cursor:!0,stickToAxis:"x",mouseFollow:!0,legendTooltip:{legendData:[{childName:Tt(c).benefit.key,name:"Savings",symbol:{fill:Tt(c).benefit.color}},{childName:Tt(c).cost.key,name:"Costs",symbol:{fill:Tt(c).cost.color}},{childName:Tt(c).net.key,name:"Cumulative savings",symbol:{fill:Tt(c).net.color}}],titleProperyForLegend:"year"},customFnc:function(e){return c?(0,yt.Z)(+e.y):bt(+e.y)}},xAxis:{label:"Time"},yAxis:{label:c?"Money Saved":"Hours Saved",tickFormat:"formatNumberAsK",style:{grid:{stroke:"#D2D2D2"},axisLabel:{padding:60}}}},{id:1001,kind:gt.$v.stack,parent:1e3,props:{}},{id:1102,kind:gt.$v.simple,type:gt.oX.bar,name:Tt(c).benefit.key,parent:1001,props:{x:"year",y:Tt(c).benefit.key,barRatio:.8,barWidth:0,style:{data:{fill:Tt(c).benefit.color,width:120}}},tooltip:{labelName:""}},{id:1101,kind:gt.$v.simple,type:gt.oX.bar,name:Tt(c).cost.key,parent:1001,props:{x:"year",y:Tt(c).cost.key,barRatio:.8,barWidth:0,style:{data:{fill:Tt(c).cost.color,width:120}}},tooltip:{labelName:""}},{id:1002,kind:gt.$v.simple,type:gt.oX.line,name:Tt(c).net.key,parent:1e3,props:{x:"year",y:Tt(c).net.key,style:{data:{stroke:Tt(c).net.color,strokeWidth:5}}},tooltip:{labelName:""}}],functions:Dt(Dt({},gt.wk),{fetchFnc:function(){return new Promise((function(e){e({items:l.projections.series_stats.map((function(e){return Dt(Dt({},e),{total_costs:-1*e.total_costs,total_hours_spent_risk_adjusted:-1*e.total_hours_spent_risk_adjusted})})),type:gt.Ii.nonGrouped,response_type:""})}))}})};return r().createElement(o.Card,null,r().createElement(lt,{tabsArray:n}),r().createElement(o.Grid,null,r().createElement(o.GridItem,{span:9},r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardHeader,null,r().createElement(o.CardActions,null,r().createElement(o.ToggleGroup,{"aria-label":"toggleButton"},r().createElement(o.ToggleGroupItem,{text:"Money",buttonId:"money",isSelected:c,onChange:function(){return s(!0)}}),r().createElement(o.ToggleGroupItem,{text:"Time",buttonId:"time",isSelected:!c,onChange:function(){return s(!1)}}))),r().createElement(o.CardTitle,null,l.name)),r().createElement(o.CardBody,null,r().createElement(gt.ZP,{schema:u.charts,functions:u.functions})))),r().createElement(o.GridItem,{span:3},r().createElement(r().Fragment,null,r().createElement(kt,{value:(t=l,c?t.projections.series_stats[3].cumulative_net_benefits:t.projections.series_stats[3].cumulative_time_net_benefits),isMoney:c}),r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardBody,null,r().createElement(o.List,{isPlain:!0},r().createElement(o.ListItem,{icon:r().createElement(vt.fU,{color:Tt(c).benefit.color})},"Savings from automating this plan"),r().createElement(o.ListItem,{icon:r().createElement(vt.fU,{color:Tt(c).cost.color})},"Costs from creating, maintaining and running the automation"),r().createElement(o.ListItem,{icon:r().createElement(vt.fU,{color:Tt(c).net.color})},"Cumulative savings over time")))),r().createElement(Pt,null)))))};xt.propTypes={plan:E().object.isRequired,tabsArray:E().arrayOf(E().shape({id:E().number.isRequired,link:E().string.isRequired,name:E().node.isRequired}).isRequired).isRequired};const wt=xt;var St=function(e){var t,n,o,c,s,u,m=e.data,p=(0,l.useParams)().id,f=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.nE)()}),[]),{}),E=f.result,g=f.isSuccess,y=f.request;(0,a.useEffect)((function(){y()}),[y]);var b=g&&(!0===(null==E||null===(t=E.meta)||void 0===t||null===(n=t.rbac)||void 0===n||null===(o=n.perms)||void 0===o?void 0:o.write)||!0===(null==E||null===(c=E.meta)||void 0===c||null===(s=c.rbac)||void 0===s||null===(u=s.perms)||void 0===u?void 0:u.all));return g?b?r().createElement(Me,{title:"Edit plan",options:E,data:m}):r().createElement(l.Redirect,{to:"".concat(i.n.savingsPlanner,"/").concat(p)}):null};St.propTypes={data:E().object.isRequired};const Ot=St,jt=function(){var e,t,n=(0,l.useParams)().id,i=(0,l.useLocation)(),p=(0,l.useHistory)(),f={id:[n]},E="Details";-1!==i.pathname.indexOf("/statistics")?E="Statistics":-1!==i.pathname.indexOf("/edit")&&(E="Edit plan");var g=(0,v.ZP)((function(){return(0,d.nE)()}),{}),y=g.result,b=g.error,h=g.request,k=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.wD)(n)}),[n]),{plan:{},rbac:[]}),_=k.result,C=_.rbac,Z=_.plan,P=k.isSuccess,D=k.request;(0,a.useEffect)((function(){return h(),p.listen((function(e){e.pathname.includes("/edit")||D()}))}),[]),(0,a.useEffect)((function(){D()}),[n]);var T=P&&(!0===(null===(e=C.perms)||void 0===e?void 0:e.write)||!0===(null===(t=C.perms)||void 0===t?void 0:t.all)),x=[{id:0,name:r().createElement(r().Fragment,null,r().createElement(Ue.ZP,null),"Back to Plans"),link:on.get},{id:1,name:"Details",link:on.getDetails(n)},{id:2,name:"Statistics",link:"".concat(on.getDetails(n),"/statistics")}],w=P?[{title:"Savings Planner",navigate:on.get},{title:Z.name,navigate:on.getDetails(n)}]:[];return r().createElement(r().Fragment,null,b&&r().createElement(je.Z,{message:b.error}),P&&r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:w}),r().createElement(u.Z,{title:E})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/edit"},r().createElement(Ot,{data:Z})),r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/statistics"},r().createElement(wt,{tabsArray:x,plan:Z,queryParams:f})),r().createElement(l.Route,{exact:!0,path:on.details},r().createElement(Et,{plan:Z,tabsArray:x,canWrite:T,options:y})))))))};var qt,It,Rt,Lt,Bt,Ft=n(10001);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt=(0,W.ZP)(o.CardTitle)(qt||(qt=(0,B.Z)(["\n  word-break: break-word;\n"]))),Mt=W.ZP.span(It||(It=(0,B.Z)(["\n  margin-right: 5px;\n  font-weight: bold;\n"]))),Wt=W.ZP.small(Rt||(Rt=(0,B.Z)(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n"]))),zt=(0,W.ZP)(o.Checkbox)(Lt||(Lt=(0,B.Z)(["\n  &.pf-c-check.pf-m-standalone {\n    margin-top: -3px;\n  }\n"]))),Ht=W.ZP.div(Bt||(Bt=(0,B.Z)(["\n  display: flex;\n  min-height: 30px;\n  align-items: center;\n"]))),Ut=function(e){var t,n=e.isSuccess,c=e.plan,s=e.selected,u=void 0===s?[]:s,m=e.handleSelect,d=void 0===m?function(){}:m,f=e.canWrite,E=e.options,v=c.id,y=c.automation_status,b=c.category,h=c.description,k=c.frequency_period,_=c.modified,C=c.name,Z=c.template_details,P=c.projections,D=(0,Ie.eR)(),T=null==P?void 0:P.series_stats[P.series_stats.length-1].cumulative_net_benefits,x=(0,a.useState)(!1),w=(0,p.Z)(x,2),S=w[0],O=w[1],j=(0,l.useRouteMatch)(),q=function(e,t){return E[e].find((function(e){return e.key===t})).value},I=[r().createElement(r().Fragment,{key:v},r().createElement(o.DropdownItem,{key:"edit",onClick:function(){return D("".concat(j.url,"/").concat(v,"/edit"))},position:"right"},"Edit"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return D("".concat(j.url,"/").concat(v,"/edit#tasks"))},position:"right"},"Manage tasks"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return D("".concat(j.url,"/").concat(v,"/edit#link_template"))},position:"right"},"Link template"))];return r().createElement(o.Card,null,r().createElement(o.CardHeader,null,r().createElement(o.CardHeaderMain,null,r().createElement(Gt,null,r().createElement(l.Link,{to:"".concat(j.url,"/").concat(v)},C))),f&&r().createElement(o.CardActions,null,r().createElement(o.Dropdown,{onSelect:function(){},toggle:r().createElement(o.KebabToggle,{onToggle:function(){return O(!S)}}),isOpen:S,isPlain:!0,dropdownItems:I,position:"right"}),r().createElement(zt,{onChange:function(){return d(c)},isChecked:u.some((function(e){return e.id===c.id})),"aria-label":"card checkbox",id:"check-1",name:"check1"}))),r().createElement(o.CardBody,null,h?r().createElement(Wt,null,h):null,r().createElement(Ht,null,r().createElement(Mt,null,"Frequency")," ",k?q("frequency_period",k):r().createElement("span",null,"None")),r().createElement(Ht,null,r().createElement(Mt,null,"Template")," ",0!==Object.keys(Z||{}).length?(t=Z)&&n?r().createElement("a",{onClick:function(){return function(e){var t=(0,g.Z)({},Ie.zG,Nt(Nt({},st.cY.defaultParams),{},{quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]}));D(i.n.jobExplorer,t)}(t.id)}},t.name):null:r().createElement("span",null,"None -"," ",r().createElement("a",{onClick:function(){return D("".concat(j.url,"/").concat(v,"/edit#link_template"))}},"Link template"))),r().createElement(Ht,null,r().createElement(Mt,null,"Last job status"),"None"!==y.status?r().createElement(ct.Z,{status:y.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(A.ZP,null)},"Not Running")),T&&r().createElement(Ht,null,r().createElement(Mt,null,"Projected savings"),r().createElement("a",{onClick:function(){return D("".concat(j.url,"/").concat(v,"/statistics"))}},(0,yt.Z)(+T))),r().createElement(Ht,null,r().createElement(Mt,null,"Last updated")," ",r().createElement("span",null,(0,oe.o0)(_)))),r().createElement(o.CardFooter,null,r().createElement(o.Label,null,q("category",b))))};Ut.propTypes={isSuccess:E().bool.isRequired,canWrite:E().bool.isRequired,selected:E().array,handleSelect:E().func,plan:E().object,options:E().object};const Kt=Ut;var Vt=function(e){var t=e.name,n=e.username,a=e.image;return t||n||a?(t&&E().checkPropTypes({name:E().string},{name:e.name},"prop","ItemToDelete"),n&&E().checkPropTypes({username:E().string},{username:e.username},"prop","ItemToDelete"),a&&E().checkPropTypes({image:E().string},{image:e.image},"prop","ItemToDelete"),null):new Error("One of 'name', 'username' or 'image' is required by ItemToDelete component.")},Yt=function(e){var t,n=e.itemsToDelete,l=e.pluralizedItemName,i=void 0===l?"Items":l,c=e.onDelete,s=e.errorMessage,u=void 0===s?"Error while deleting":s,m=e.deleteDetailsRequests,d=void 0===m?[]:m,f=e.cannotDelete,E=void 0===f?function(e){return!e}:f,v=(0,a.useState)(!1),g=(0,p.Z)(v,2),y=g[0],b=g[1],h=(0,a.useState)(null),k=(0,p.Z)(h,2),_=k[0],C=k[1],Z=(0,a.useState)(!1),P=(0,p.Z)(Z,2),D=P[0],T=P[1],x=(0,a.useState)(""),w=(0,p.Z)(x,2),S=w[0],O=w[1],j=function(){var e=(0,De.Z)(xe().mark((function e(t){var a,r,l;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),C(null),!(t&&1===n.length&&(null==d?void 0:d.length)>0)){e.next=9;break}return e.next=5,Qe(d);case 5:a=e.sent,r=a.results,(l=a.error)?O(l):C(r);case 9:T(!1),b(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q="Delete ".concat(i,"?"),I=0===n.length||n.some(E);return S?r().createElement(Q,{isOpen:!!S,title:"Error!",onClose:function(){j(!1),O()}},r().createElement(ie,{error:S.detail})):r().createElement(r().Fragment,null,r().createElement(o.Tooltip,{content:(t=n.filter(E).map((function(e){return e.name||e.username})).join(", "),n.some(E)?r().createElement("div",null,u?r().createElement(r().Fragment,null,r().createElement("span",null,u),r().createElement("span",null,": ".concat(t))):"You do not have permission to delete ".concat(i,": ").concat(t)):n.length?"Delete":"Select a plan to delete"),position:"top"},r().createElement("div",null,r().createElement(o.Button,{variant:"secondary",ouiaId:"delete-button",spinnerAriaValueText:D?"Loading":void 0,"aria-label":"Delete",onClick:function(){return j(!0)},isDisabled:I},"Delete"))),y&&r().createElement(Q,{variant:"danger",title:q,isOpen:y,onClose:function(){return j(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"confirm delete",isDisabled:Boolean(_),onClick:function(){c(),j()}},"Delete"),r().createElement(o.Button,{key:"cancel",variant:"link","aria-label":"cancel delete",onClick:function(){return j(!1)}},"Cancel")]},r().createElement("div",null,"This action will delete the following:"),n.map((function(e){return r().createElement("span",{key:e.id},r().createElement("strong",null,e.name||e.username||e.image),r().createElement("br",null))}))))};Yt.propTypes={itemsToDelete:E().arrayOf(E().shape({id:E().number.isRequired,name:Vt,username:Vt,image:Vt})).isRequired,pluralizedItemName:E().string,onDelete:E().func.isRequired,errorMessage:E().string,warningMessage:E().node,deleteDetailsRequests:E().array,cannotDelete:E().func,deleteMessage:E().string};const $t=Yt;var Xt,Qt,Jt;function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nn=W.ZP.div(Xt||(Xt=(0,B.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 76px);\n"]))),an=W.ZP.div(Qt||(Qt=(0,B.Z)(["\n  flex-shrink: 0;\n"]))),rn=(0,W.ZP)(c.Z)(Jt||(Jt=(0,B.Z)(["\n  flex-grow: 1;\n"])));const ln=function(){var e,t,n=(0,Ie.eR)(),i=(0,l.useLocation)().pathname,c=(0,Ie.Kx)(st.bE.defaultParams),m=c.queryParams,f=c.setFromPagination,E=c.setFromToolbar,g=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.nE)()}),[m]),{}),y=g.result,b=g.error,h=g.isSuccess,k=g.request,_=(0,v.ZP)((0,a.useCallback)((0,De.Z)(xe().mark((function e(){var t;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Wu)(m);case 2:return t=e.sent,e.abrupt("return",{data:t.items,rbac:t.rbac,count:t.meta.count});case 4:case"end":return e.stop()}}),e)}))),[m]),{data:[],rbac:{},count:0}),C=_.result,Z=C.data,P=C.rbac,D=C.count,T=_.isLoading,x=_.isSuccess,w=_.request,S=tn(tn({},y),{},{name:[{key:"name",value:null}]});(0,a.useEffect)((function(){k(),w()}),[m]);var O=x&&(!0===(null==P||null===(e=P.perms)||void 0===e?void 0:e.write)||!0===(null==P||null===(t=P.perms)||void 0===t?void 0:t.all)),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,a.useState)([]),n=(0,p.Z)(t,2),r=n[0],l=n[1],i=r.length>0&&r.length===e.length,o=function(e){r.some((function(t){return t.id===e.id}))?l((function(t){return(0,Ee.Z)(t.filter((function(t){return t.id!==e.id})))})):l((function(t){return[].concat((0,Ee.Z)(t),[e])}))};return{selected:r,isAllSelected:i,handleSelect:o,setSelected:l}}(Z),q=j.selected,I=j.handleSelect,R=j.setSelected,L=(0,v.px)(d.z2,null),B=L.isLoading,F=L.deletionError,A=L.deleteItems,N=L.clearDeletionError,G=function(){var e=(0,De.Z)(xe().mark((function e(){return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(q.map((function(e){return e.id})));case 2:R([]),w();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r().createElement(nn,null,r().createElement(s.Z,null,r().createElement(u.Z,{title:"Savings Planner"}),r().createElement(Re.Z,{categories:S,filters:m,setFilters:E,additionalControls:[].concat((0,Ee.Z)(O?[r().createElement(o.Button,{key:"add-plan-button",variant:"primary","aria-label":"Add plan",onClick:function(){n("".concat(i,"/add"))}},"Add plan")]:[]),[O&&h&&Z.length>0&&r().createElement($t,{key:"delete-plan-button",onDelete:G,itemsToDelete:q,pluralizedItemName:"Savings plan"})]),pagination:x&&Z.length>0?r().createElement(qe.Z,{count:D,params:{limit:+m.limit,offset:+m.offset},setPagination:f,isCompact:!0}):null})),r().createElement(rn,null,b?r().createElement(je.Z,{message:b.error}):T||B?r().createElement(Se.Z,null):!x||0!==Z.length||T||B?!x||T||B?null:r().createElement(o.Gallery,{hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},h&&x&&Z.map((function(e){return r().createElement(Kt,{key:e.id,isSuccess:x,selected:q,plan:e,handleSelect:I,canWrite:O,options:y})}))):r().createElement(Ft.Z,{label:"Add plan",title:"No plans found",message:O?"Update the applied filters or add a new plan.":"Update the applied filters.",canAdd:O,path:"".concat(i,"/add")})),Z.length>0&&!(T||B)&&r().createElement(an,null,r().createElement(qe.Z,{count:D,params:{limit:parseInt(m.limit),offset:parseInt(m.offset)},setPagination:f,variant:o.PaginationVariant.bottom})),F&&r().createElement(Q,{"aria-label":"Deletion error",isOpen:F,onClose:N,title:"Error",variant:"error"},"Failed to delete one or more plans.",r().createElement(ie,{error:F.detail})))};var on={get:""+i.n.savingsPlanner,add:i.n.savingsPlanner+"/add",edit:i.n.savingsPlanner+"/:id/edit",getEdit:function(e){return i.n.savingsPlanner+"/"+e+"/edit"},details:i.n.savingsPlanner+"/:id",getDetails:function(e){return i.n.savingsPlanner+"/"+e}};const cn=function(){return r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:on.get},r().createElement(ln,null)),r().createElement(l.Route,{exact:!0,path:on.add},r().createElement(We,null)),r().createElement(l.Route,{path:[on.edit,on.details]},r().createElement(jt,null)))}}}]);
//# sourceMappingURL=../sourcemaps/558.1baebcfc27ec1f97d5aa80a37bfaaa23.js.map