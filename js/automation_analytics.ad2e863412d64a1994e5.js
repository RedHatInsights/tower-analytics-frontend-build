(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{101:function(t,e,a){"use strict";var n=a(1),r=a.n(n),i=a(0),l=a.n(i),o=a(102),s=a(62),c=a(76),u=a(100),d=a(115),p=a(342),m=a.n(p),f=function(t){var e=t.preflightError;return r.a.createElement(c.EmptyState,{variant:c.EmptyStateVariant.full},r.a.createElement(u.EmptyStateIcon,{icon:m.a}),404===e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Title,{headingLevel:"h5",size:"lg"},"No data found"),r.a.createElement(d.EmptyStateBody,null,"Please visit ",r.a.createElement("a",{href:"https://docs.ansible.com/ansible-tower/latest/html/administration/usability_data_collection.html#automation-analytics",target:"_blank",rel:"noopener noreferrer"},"here")," to learn how to enable Automation Analytics.")),401===e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Title,{headingLevel:"h5",size:"lg"},"Not authorized"),r.a.createElement(d.EmptyStateBody,null,"You do not have the correct permissions to view this page.")),!e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Title,{headingLevel:"h5",size:"lg"},"Something went wrong, please try reloading the page"),r.a.createElement(o.Button,{variant:"primary",onClick:function(){return window.location.reload()}},"Reload")))};f.propTypes={preflightError:l.a.object},e.a=f},106:function(t,e,a){"use strict";var n=a(28),r=a.n(n),i=a(1),l=a.n(i),o=a(0),s=a.n(o),c=a(90),u=function(t){var e=function(e){var a=e.id,n=e.margin;return l.a.createElement(t,r()({},e,{getWidth:function(){return parseInt(c.s("#"+a).style("width"))-n.left-n.right||700},getHeight:function(){return parseInt(c.s("#"+a).style("height"))-n.top-n.bottom||450}}))};return e.propTypes={id:s.a.string,margin:s.a.object},e};u.propTypes={Chart:s.a.element},e.a=u},107:function(t,e,a){"use strict";var n=a(1),r=a.n(n),i=a(62),l=a(76),o=a(100),s=a(302),c=a.n(s);e.a=function(){return r.a.createElement(l.EmptyState,{variant:l.EmptyStateVariant.full},r.a.createElement(o.EmptyStateIcon,{icon:c.a}),r.a.createElement(i.Title,{headingLevel:"h5",size:"lg"},"No Data"))}},337:function(t,e,a){var n={"./af":174,"./af.js":174,"./ar":175,"./ar-dz":176,"./ar-dz.js":176,"./ar-kw":177,"./ar-kw.js":177,"./ar-ly":178,"./ar-ly.js":178,"./ar-ma":179,"./ar-ma.js":179,"./ar-sa":180,"./ar-sa.js":180,"./ar-tn":181,"./ar-tn.js":181,"./ar.js":175,"./az":182,"./az.js":182,"./be":183,"./be.js":183,"./bg":184,"./bg.js":184,"./bm":185,"./bm.js":185,"./bn":186,"./bn.js":186,"./bo":187,"./bo.js":187,"./br":188,"./br.js":188,"./bs":189,"./bs.js":189,"./ca":190,"./ca.js":190,"./cs":191,"./cs.js":191,"./cv":192,"./cv.js":192,"./cy":193,"./cy.js":193,"./da":194,"./da.js":194,"./de":195,"./de-at":196,"./de-at.js":196,"./de-ch":197,"./de-ch.js":197,"./de.js":195,"./dv":198,"./dv.js":198,"./el":199,"./el.js":199,"./en-SG":200,"./en-SG.js":200,"./en-au":201,"./en-au.js":201,"./en-ca":202,"./en-ca.js":202,"./en-gb":203,"./en-gb.js":203,"./en-ie":204,"./en-ie.js":204,"./en-il":205,"./en-il.js":205,"./en-nz":206,"./en-nz.js":206,"./eo":207,"./eo.js":207,"./es":208,"./es-do":209,"./es-do.js":209,"./es-us":210,"./es-us.js":210,"./es.js":208,"./et":211,"./et.js":211,"./eu":212,"./eu.js":212,"./fa":213,"./fa.js":213,"./fi":214,"./fi.js":214,"./fo":215,"./fo.js":215,"./fr":216,"./fr-ca":217,"./fr-ca.js":217,"./fr-ch":218,"./fr-ch.js":218,"./fr.js":216,"./fy":219,"./fy.js":219,"./ga":220,"./ga.js":220,"./gd":221,"./gd.js":221,"./gl":222,"./gl.js":222,"./gom-latn":223,"./gom-latn.js":223,"./gu":224,"./gu.js":224,"./he":225,"./he.js":225,"./hi":226,"./hi.js":226,"./hr":227,"./hr.js":227,"./hu":228,"./hu.js":228,"./hy-am":229,"./hy-am.js":229,"./id":230,"./id.js":230,"./is":231,"./is.js":231,"./it":232,"./it-ch":233,"./it-ch.js":233,"./it.js":232,"./ja":234,"./ja.js":234,"./jv":235,"./jv.js":235,"./ka":236,"./ka.js":236,"./kk":237,"./kk.js":237,"./km":238,"./km.js":238,"./kn":239,"./kn.js":239,"./ko":240,"./ko.js":240,"./ku":241,"./ku.js":241,"./ky":242,"./ky.js":242,"./lb":243,"./lb.js":243,"./lo":244,"./lo.js":244,"./lt":245,"./lt.js":245,"./lv":246,"./lv.js":246,"./me":247,"./me.js":247,"./mi":248,"./mi.js":248,"./mk":249,"./mk.js":249,"./ml":250,"./ml.js":250,"./mn":251,"./mn.js":251,"./mr":252,"./mr.js":252,"./ms":253,"./ms-my":254,"./ms-my.js":254,"./ms.js":253,"./mt":255,"./mt.js":255,"./my":256,"./my.js":256,"./nb":257,"./nb.js":257,"./ne":258,"./ne.js":258,"./nl":259,"./nl-be":260,"./nl-be.js":260,"./nl.js":259,"./nn":261,"./nn.js":261,"./pa-in":262,"./pa-in.js":262,"./pl":263,"./pl.js":263,"./pt":264,"./pt-br":265,"./pt-br.js":265,"./pt.js":264,"./ro":266,"./ro.js":266,"./ru":267,"./ru.js":267,"./sd":268,"./sd.js":268,"./se":269,"./se.js":269,"./si":270,"./si.js":270,"./sk":271,"./sk.js":271,"./sl":272,"./sl.js":272,"./sq":273,"./sq.js":273,"./sr":274,"./sr-cyrl":275,"./sr-cyrl.js":275,"./sr.js":274,"./ss":276,"./ss.js":276,"./sv":277,"./sv.js":277,"./sw":278,"./sw.js":278,"./ta":279,"./ta.js":279,"./te":280,"./te.js":280,"./tet":281,"./tet.js":281,"./tg":282,"./tg.js":282,"./th":283,"./th.js":283,"./tl-ph":284,"./tl-ph.js":284,"./tlh":285,"./tlh.js":285,"./tr":286,"./tr.js":286,"./tzl":287,"./tzl.js":287,"./tzm":288,"./tzm-latn":289,"./tzm-latn.js":289,"./tzm.js":288,"./ug-cn":290,"./ug-cn.js":290,"./uk":291,"./uk.js":291,"./ur":292,"./ur.js":292,"./uz":293,"./uz-latn":294,"./uz-latn.js":294,"./uz.js":293,"./vi":295,"./vi.js":295,"./x-pseudo":296,"./x-pseudo.js":296,"./yo":297,"./yo.js":297,"./zh-cn":298,"./zh-cn.js":298,"./zh-hk":299,"./zh-hk.js":299,"./zh-tw":300,"./zh-tw.js":300};function r(t){var e=i(t);return a(e)}function i(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id=337},523:function(t,e,a){"use strict";a.r(e);var n=a(13),r=a.n(n),i=a(23),l=a.n(i),o=a(74),s=a.n(o),c=a(301),u=a.n(c),d=a(71),p=a.n(d),m=a(1),f=a.n(m),h=a(0),g=a.n(h),b=a(99),v=a(87),y=a(72),E=a(79),x=a(101),j=a(62),T=a(76),w=a(100),k=a(115),_=a(493),O=a.n(_),S=function(){return f.a.createElement(T.EmptyState,{variant:T.EmptyStateVariant.full},f.a.createElement(w.EmptyStateIcon,{icon:O.a}),f.a.createElement(j.Title,{size:"lg",headingLevel:"h4"},"No results found"),f.a.createElement(k.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."))},C=a(331),D=a.n(C),B=a(522),A=function(t){var e=t.message;return f.a.createElement(T.EmptyState,{variant:T.EmptyStateVariant.small},f.a.createElement(w.EmptyStateIcon,{icon:D.a,color:B.a.value}),f.a.createElement(j.Title,{headingLevel:"h2",size:"lg"},"Error"),f.a.createElement(k.EmptyStateBody,null,e))};A.propTypes={message:g.a.string};var I=A,R=a(93),L={attributes:["id","status","job_type","started","finished","elapsed","created","cluster_name","org_name","most_failed_tasks"],defaultParams:{status:["successful","failed"],quickDateRange:"last_30_days",jobType:["workflowjob","job"],orgId:[],clusterId:[],templateId:[],sortBy:"created:desc",startDate:"",endDate:"",onlyRootWorkflowsAndStandaloneJobs:!1,limit:5}},F=a(5),M=a(63),z=a(61),P=a(96),W=a(97),Y=a(333),U=a(125),N=a(124),q=a.n(N),J=a(145),V=a(502),H=a(121),G=a(147),$=a(501),K=a(499),Q=a(500),X=a(105),Z=a(498),tt=a.n(Z),et=a(75),at=a(322),nt=a(494),rt=a.n(nt),it=a(497),lt=a.n(it),ot=a(495),st=a.n(ot),ct=a(496),ut=a.n(ct),dt=function(t){var e=t.status;return f.a.createElement(at.Label,{variant:"outline",color:function(){switch(e){case"successful":return"green";case"failed":case"error":return"red";case"running":case"pending":return"blue";case"canceled":return"orange";default:return"grey"}}(),icon:function(){switch(e){case"successful":return f.a.createElement(rt.a,null);case"failed":case"error":return f.a.createElement(D.a,null);case"running":return f.a.createElement(st.a,null);case"canceled":return f.a.createElement(ut.a,null);default:return f.a.createElement(lt.a,null)}}()},function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e))};dt.propTypes={status:g.a.oneOf(["successful","failed","error","running","new","waiting","pending","canceled"])};var pt=dt;function mt(){var t=p()(["\n    align-items: center;\n"]);return mt=function(){return t},t}function ft(){var t=p()(["\n    align-items: center;\n"]);return ft=function(){return t},t}function ht(){var t=p()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    font-weight: bold;\n"]);return ht=function(){return t},t}function gt(){var t=p()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    text-align: center;\n"]);return gt=function(){return t},t}function bt(){var t=p()(["\n    margin-left: 7px;\n    color: var(--pf-global--Color--400);\n"]);return bt=function(){return t},t}var vt=["Id/Name","Status","Cluster","Organization","Type"],yt=Object(y.a)(tt.a)(bt()),Et=Object(y.a)(J.DataListCell)(gt()),xt=Object(y.a)(Et)(ht()),jt=Object(y.a)(K.DataListItemCells)(ft()),Tt=Object(y.a)(Q.DataListToggle)(mt()),wt=function(t,e,a,n){var r=Object(m.useState)([]),i=s()(r,2),l=i[0],o=i[1];return f.a.createElement(f.a.Fragment,null,t.map(function(t,e){return f.a.createElement(G.DataListItem,{key:t.id.id,"aria-labelledby":a,isExpanded:l.includes("".concat(t.id.id,"-toggle"))},f.a.createElement($.DataListItemRow,{key:t.id.id},f.a.createElement(Tt,{id:"".concat(t.id.id,"-toggle"),"aria-controls":"".concat(t.id.id,"-expand"),onClick:function(){return function(t){var e=l,a=e.indexOf(t),n=a>=0?[].concat(q()(e.slice(0,a)),q()(e.slice(a+1,e.length))):[].concat(q()(e),[t]);o(n)}("".concat(t.id.id,"-toggle"))},isExpanded:l.includes("".concat(t.id.id,"-toggle"))}),f.a.createElement(jt,{dataListCells:[f.a.createElement(Et,{key:e++},f.a.createElement("a",{href:t.id.tower_link,target:"_blank",rel:"noopener noreferrer"},n<765&&f.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Id/Name",f.a.createElement(yt,null),":"),"Â ","".concat(t.id.id," - ").concat(t.id.template_name))),f.a.createElement(Et,{key:e++},n<=765&&f.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Status:"),"Â ",f.a.createElement(pt,{status:t.status})),f.a.createElement(X.Tooltip,{key:e++,content:f.a.createElement("p",null,t.cluster_name)},f.a.createElement(Et,null,n<=765&&f.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Cluster:"),"Â ",t.cluster_name)),f.a.createElement(Et,{key:e++},n<=765&&f.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Organization:"),"Â ",t.org_name),f.a.createElement(Et,{key:e++},n<=765&&f.a.createElement("span",{style:{color:"initial",fontWeight:"bold"}},"Type:"),"Â ",Object(et.i)(t.job_type))]})),f.a.createElement(V.DataListContent,{"aria-label":"".concat(t.id.id,"-details"),id:"${item.id.id}",isHidden:!l.includes("".concat(t.id.id,"-toggle"))},f.a.createElement(jt,{dataListCells:[f.a.createElement(Et,{key:e++},"Created: ",Object(et.h)(t.created)),f.a.createElement(Et,{key:e++},"Started: ",Object(et.h)(t.started)),f.a.createElement(Et,{key:e++},"Finished: ",Object(et.h)(t.finished))]})))}))},kt=function(t){var e=t.jobs,a=Object(m.useState)(window.innerWidth),n=s()(a,2),r=n[0],i=n[1],l=function(){return i(window.innerWidth)};return Object(m.useEffect)(function(){return window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}},[]),wt(e,0,"all-jobs",r)},_t=function(t){var e=t.jobs,a=Object(m.useState)(window.innerWidth),n=s()(a,2),r=n[0],i=n[1],l=function(){return i(window.innerWidth)};return Object(m.useEffect)(function(){return window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}},[]),f.a.createElement(f.a.Fragment,null,e.length<=0&&f.a.createElement(E.a,null),f.a.createElement(H.DataList,{isCompact:!0},r>=765&&function(t){return f.a.createElement(G.DataListItem,null,f.a.createElement($.DataListItemRow,{style:{paddingLeft:"80px"}},f.a.createElement(jt,{dataListCells:t.map(function(t){return f.a.createElement(xt,{key:t},t,"Id/Name"===t&&f.a.createElement(yt,null))})})))}(vt),f.a.createElement(kt,{jobs:e,windowWidth:r})))};_t.propTypes={jobs:g.a.array,windowWidth:g.a.number},kt.propTypes={jobs:g.a.array,windowWidth:g.a.number};var Ot=_t,St=a(25),Ct=a.n(St),Dt=a(514),Bt=a(508),At=a(516),It=a(173),Rt=a(102),Lt=a(114),Ft=a(323),Mt=a(110),zt=a(511),Pt=a(123),Wt=a.n(Pt),Yt=a(510),Ut=a.n(Yt),Nt=a(517),qt=a.n(Nt),Jt=a(513),Vt=a.n(Jt),Ht=a(512),Gt=a.n(Ht),$t=a(148),Kt=a(109),Qt=function(t){var e=t.selected,a=t.setSelected,n=void 0===a?function(){}:a,r=t.categories,i=void 0===r?[]:r,l=Object(m.useState)(!1),o=s()(l,2),c=o[0],u=o[1];return f.a.createElement(Lt.ToolbarItem,null,f.a.createElement($t.Select,{isOpen:c,variant:"single","aria-label":"Categories",onToggle:function(){return u(!c)},onSelect:function(t,e){n(e),u(!1)},selections:e,placeholderText:"Filter by"},i.map(function(t){var e=t.key,a=t.name;return f.a.createElement(Kt.SelectOption,{key:e,value:e},a)})))};Qt.propTypes={categories:g.a.array,selected:g.a.string,setSelected:g.a.func};var Xt=Qt,Zt=a(329),te=a(171),ee=function(t){var e=t.onInputChange,a=void 0===e?function(){}:e,n=t.startDate,r=void 0===n?"":n,i=t.endDate,l=void 0===i?"":i;return f.a.createElement(f.a.Fragment,null,f.a.createElement(Zt.InputGroup,null,f.a.createElement(te.TextInput,{name:"startDate",id:"startDate",type:"date","aria-label":"Start Date",value:r,onChange:function(t){return a("startDate",t)}})),f.a.createElement(Zt.InputGroup,null,f.a.createElement(te.TextInput,{name:"endDate",id:"endDate",type:"date","aria-label":"End Date",value:l,onChange:function(t){return a("endDate",t)}})))};ee.propTypes={startDate:g.a.string,endDate:g.a.string,onInputChange:g.a.func};var ae=ee,ne={status:{isSingle:!1,name:"Status",placeholder:"Filter by job status"},quickDateRange:{isSingle:!0,name:"Date",placeholder:"Filter by date"},jobType:{isSingle:!1,name:"Job",placeholder:"Filter by job type"},orgId:{isSingle:!1,name:"Organization",placeholder:"Filter by organization"},clusterId:{isSingle:!1,name:"Cluster",placeholder:"Filter by cluster"},templateId:{isSingle:!1,name:"Template",placeholder:"Filter by template"},sortBy:{isSingle:!0,name:"Sort by",placeholder:"Sort by attribute"}},re=a(504),ie=function(t){var e=t.categoryKey,a=t.filter,n=void 0===a?null:a,r=t.values,i=void 0===r?[]:r,l=t.isVisible,o=void 0===l||l,c=t.hasChips,u=void 0===c||c,d=t.setFilter,p=Object(m.useState)(!1),h=s()(p,2),g=h[0],b=h[1],v=ne[e];return f.a.createElement(re.ToolbarFilter,{key:e,showToolbarItem:o,chips:u?v.isSingle?function(t,e){var a;return t&&"string"==typeof t&&e&&(e.forEach(function(e){e.key===t&&(a=e.value)}),void 0!==a)?[a]:[]}(n,i):function(t,e){return t&&e?t.reduce(function(t,a){return Number.isInteger(parseInt(a))&&(a=parseInt(a)),e.forEach(function(e){e.key===a&&t.push(e.value)}),t},[]):[]}(n,i):[],categoryName:v.name,deleteChip:u?function(t,a){if(ne[e].isSingle)d(null);else{var r=i.find(function(t){return t.value===a}).key,l=n.filter(function(t){return t!==r});d(l)}}:null},f.a.createElement($t.Select,{variant:v.isSingle?"single":"checkbox","aria-label":e,onToggle:function(){return b(!g)},onSelect:function(t,e){v.isSingle?(d(e),b(!1)):d(t.target.checked?[].concat(q()(n),[e]):n.filter(function(t){return t!==e}))},selections:n,isOpen:g,placeholderText:v.placeholder},i&&i.map(function(t){var e=t.key,a=t.value,n=t.description;return f.a.createElement(Kt.SelectOption,{key:e,value:e,description:n},a)})))};ie.propTypes={categoryKey:g.a.string.isRequired,filter:g.a.any,values:g.a.array,isVisible:g.a.bool,hasChips:g.a.bool,setFilter:g.a.func.isRequired};var le=ie;function oe(){var t=p()(["\n  .pf-c-toolbar__content-section {\n    justify-content: space-between;\n  }\n"]);return oe=function(){return t},t}function se(){var t=p()(["\n  button {\n    .pf-c-select__toggle-wrapper {\n      flex-wrap: nowrap;\n    }\n  }\n"]);return se=function(){return t},t}var ce=Object(y.a)(It.ToolbarGroup)(se()),ue=Object(y.a)(Bt.ToolbarContent)(oe()),de=function(t){var e=t.categories,a=t.filters,n=t.setFilters,r=t.pagination,i=t.hasSettings,l=void 0!==i&&i,o=Object(m.useState)(Object.keys(e)[0]),c=s()(o,2),u=c[0],d=c[1],p=Object(m.useState)(!1),h=s()(p,2),g=h[0],b=h[1],v=e.quickDateRange,y=e.sortBy,E=Ct()(e,["quickDateRange","sortBy"]),x=function(t,e){n(t,e)};return f.a.createElement(f.a.Fragment,null,f.a.createElement(Dt.Toolbar,{id:"filterable-toolbar-with-chip-groups",clearAllFilters:function(){n(null,null)},collapseListedFiltersBreakpoint:"xl"},f.a.createElement(ue,null,f.a.createElement(At.ToolbarToggleGroup,{toggleIcon:f.a.createElement(Wt.a,null),breakpoint:"xl"},f.a.createElement(Rt.Button,{variant:"control"},f.a.createElement(Wt.a,null)),Object.keys(E).length>0&&f.a.createElement(function(){return f.a.createElement(ce,{variant:"filter-group"},f.a.createElement(Xt,{selected:u,setSelected:d,categories:Object.keys(E).map(function(t){return{key:t,name:ne[t].name}})}),Object.keys(E).map(function(t){return f.a.createElement(le,{key:t,categoryKey:t,filter:a[t],values:e[t],isVisible:u===t,setFilter:function(e){return n(t,e)}})}))},null),v&&f.a.createElement(function(){return f.a.createElement(ce,{variant:"filter-group"},f.a.createElement(le,{categoryKey:"quickDateRange",filter:a.quickDateRange,values:v,setFilter:function(t){return n("quickDateRange",t)},hasChips:!1}),"custom"===a.quickDateRange&&f.a.createElement(ae,{startDate:a.startDate,endDate:a.endDate,onInputChange:x}))},null),y&&f.a.createElement(function(){return f.a.createElement(ce,{variant:"filter-group"},f.a.createElement(le,{categoryKey:"sortBy",filter:a.sortBy,values:y,setFilter:function(t){return n("sortBy",t)},hasChips:!1}),f.a.createElement(Rt.Button,{variant:"control"},f.a.createElement(Ut.a,null)))},null),l&&f.a.createElement(Lt.ToolbarItem,null,f.a.createElement(Rt.Button,{variant:"plain",onClick:function(){return b(!g)},"aria-label":"settings",isActive:g},f.a.createElement(qt.a,null)))),r&&f.a.createElement(Lt.ToolbarItem,{varian:"pagination",visibility:{default:"hidden",lg:"visible"}},r)),g&&f.a.createElement(function(){return f.a.createElement(P.Card,{isFlat:!0,style:{backgroundColor:"#EEEEEE"}},f.a.createElement(Y.CardHeader,null,f.a.createElement(zt.CardActions,null,f.a.createElement(Rt.Button,{variant:"plain"},f.a.createElement(Gt.a,null))),f.a.createElement(Mt.CardTitle,null,"Settings")),f.a.createElement(W.CardBody,null,f.a.createElement(Ft.Switch,{id:"showRootWorkflowJobs",label:"Ignore nested workflows and jobs",labelOff:"Ignore nested workflows and jobs",isChecked:a.onlyRootWorkflowsAndStandaloneJobs,onChange:function(t){n("onlyRootWorkflowsAndStandaloneJobs",t)}}),f.a.createElement(X.Tooltip,{position:"top",content:f.a.createElement("div",null," ","If enabled, nested workflows and jobs will not be included in the overall totals. Enable this option to filter out duplicate entries.")},f.a.createElement(Vt.a,null))))},null)))};de.propTypes={categories:g.a.object,filters:g.a.object,setFilters:g.a.func,pagination:g.a.object,hasSettings:g.a.bool};var pe=de;function me(){var t=p()(["\n  margin-top: 20px;\n"]);return me=function(){return t},t}function fe(){var t=p()(["\n  display: flex;\n  align-items: flex-start;\n  margin: 0;\n"]);return fe=function(){return t},t}function he(){var t=p()(["\n  display: flex;\n  justify-content: space-between;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n"]);return he=function(){return t},t}var ge=Object(y.a)(Y.CardHeader)(he()),be=Object(y.a)(U.Pagination)(fe()),ve=Object(y.a)(U.Pagination)(me()),ye=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],Ee=u()({},L.defaultParams,{attributes:L.attributes}),xe={attributes:L.attributes},je=function(t){var e=Object(m.useState)(null),a=s()(e,2),n=a[0],i=a[1],o=Object(m.useState)(null),c=s()(o,2),d=c[0],p=c[1],h=Object(m.useState)([]),g=s()(h,2),y=g[0],j=g[1],T=Object(m.useState)(!0),w=s()(T,2),k=w[0],_=w[1],O=Object(m.useState)({}),C=s()(O,2),D=C[0],B=C[1],A=Object(m.useState)(1),L=s()(A,2),Y=L[0],N=L[1],q=Object(m.useState)([]),J=s()(q,2),V=J[0],H=J[1],G=Object(m.useState)([]),$=s()(G,2),K=$[0],Q=$[1],X=Object(m.useState)([]),Z=s()(X,2),tt=Z[0],et=Z[1],at=Object(m.useState)(null),nt=s()(at,2),rt=nt[0],it=nt[1],lt=Object(m.useState)([]),ot=s()(lt,2),st=ot[0],ct=ot[1],ut=Object(m.useState)([]),dt=s()(ut,2),pt=dt[0],mt=dt[1],ft=Object(m.useState)([]),ht=s()(ft,2),gt=ht[0],bt=ht[1],vt=(0,Object(v.a)({}).parse)(t.location.search,{arrayFormat:"bracket"}),yt=u()({},Ee,vt),Et=Object(b.a)(yt),xt=Et.queryParams,jt=Et.urlMappedQueryParams,Tt=Et.setLimit,wt=Et.setOffset,kt=Et.setFromToolbar,_t=Object(b.a)(xe).queryParams,St=function(){var e=F.a.jobExplorer,a=Object(v.a)(jt),n=a.strings,r=(0,a.stringify)(n);t.history.push({pathname:e,search:r})};Object(m.useEffect)(function(){function t(){return(t=l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _(!0),t.next=3,window.insights.chrome.auth.getUser();case 3:return t.next=5,Object(R.a)().catch(function(t){i({preflightError:t})});case 5:Object(R.f)({params:_t}).then(function(t){var e=t.cluster_id,a=t.org_id,n=t.job_type,r=t.status,i=t.template_id,l=t.quick_date_range,o=t.sort_by;Q(e),H(a),et(i),it(o),ct(r),mt(n),bt(l)}).catch(function(t){return p(t.error)}).finally(function(){return _(!1)});case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}insights.chrome.appNavClick({id:"job-explorer",secondaryNav:!0}),St(),function(){t.apply(this,arguments)}(),St()},[]),Object(m.useEffect)(function(){(function(){var t=l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p(null),_(!0),t.next=4,window.insights.chrome.auth.getUser();case 4:Object(R.e)({params:jt}).then(function(t){var e=t.items,a=void 0===e?[]:e,n=t.meta;j(a),B(n)}).catch(function(t){return p(t.error)}).finally(function(){return _(!1)});case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()(),St()},[xt]);var Ct=function(t){return(t-1)*xt.limit},Dt=function(t){var e=Ct(t);wt(e),N(t)},Bt=function(t,e){Tt(t);var a=Ct(e);wt(a),N(e)};return f.a.createElement(f.a.Fragment,null,f.a.createElement(z.PageHeader,null,f.a.createElement(z.PageHeaderTitle,{title:"Job Explorer"})),n&&f.a.createElement(M.Main,null,f.a.createElement(x.a,n)),!n&&f.a.createElement(f.a.Fragment,null,f.a.createElement(M.Main,null,f.a.createElement(P.Card,null,f.a.createElement(ge,null),f.a.createElement(W.CardBody,null,f.a.createElement(pe,{categories:{status:st,quickDateRange:gt,jobType:pt,orgId:V,clusterId:K,templateId:tt,sortBy:rt},filters:xt,setFilters:kt,pagination:f.a.createElement(be,{itemCount:D.count?D.count:0,widgetId:"pagination-options-menu-top",perPageOptions:ye,perPage:xt.limit,page:Y,variant:U.PaginationVariant.bottom,dropDirection:"up",onPerPageSelect:function(t,e,a){Bt(e,a)},onSetPage:function(t,e){Dt(e)},isCompact:!0}),hasSettings:!0}),d&&f.a.createElement(I,{message:d}),!d&&k&&f.a.createElement(E.a,null),!d&&!k&&y.length<=0&&f.a.createElement(S,null),!d&&!k&&y.length>0&&f.a.createElement(f.a.Fragment,null,f.a.createElement(Ot,{jobs:y}),f.a.createElement(ve,{itemCount:D.count?D.count:0,widgetId:"pagination-options-menu-bottom",perPageOptions:ye,perPage:xt.limit,page:Y,variant:U.PaginationVariant.bottom,dropDirection:"up",onPerPageSelect:function(t,e,a){Bt(e,a)},onSetPage:function(t,e){Dt(e)},style:{marginTop:"20px"}})))))))};je.propTypes={location:g.a.object,history:g.a.object};e.default=je},524:function(t,e,a){"use strict";a.r(e);var n=a(74),r=a.n(n),i=a(71),l=a.n(i),o=a(1),s=a.n(o),c=a(64),u=a.n(c),d=a(99),p=a(72),m=a(79),f=a(101),h=a(93),g=a(63),b=a(61),v=a(96),y=a(97),E=a(110),x=a(112),j=a(113),T=a(123),w=a.n(T),k=a(18),_=a.n(k),O=a(19),S=a.n(O),C=a(20),D=a.n(C),B=a(21),A=a.n(B),I=a(39),R=a.n(I),L=a(22),F=a.n(L),M=a(528),z=a(106),P=a(90),W=a(0),Y=a.n(W),U=a(91),N=a.n(U),q=function(){function t(e){var a=this;_()(this,t),N()(this,"handleMouseOver",function(t){var e=0,n=0,r=0,i=P.g.pageX-P.s(a.svg).node().getBoundingClientRect().x+10,l=P.g.pageY-P.s(a.svg).node().getBoundingClientRect().y-10,o=P.x("%m/%d");if(t){var s=a.toolTipBase.node().getBoundingClientRect().width,c=P.s(a.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<i/c*100;t&&(e=t.RAN||0,n=t.FAIL||0,r=t.TOTAL||0,a.date.text(o(t.DATE||null))),t&&t.data&&(e=t.data.RAN||0,n=t.data.FAIL||0,r=t.data.TOTAL||0,a.date.text(o(t.data.DATE||null))),a.jobs.text(r+" jobs"),a.jobsWidth=a.jobs.node().getComputedTextLength(),a.failed.text(""+n),a.successful.text(""+e),a.successTextWidth=a.successful.node().getComputedTextLength(),a.failTextWidth=a.failed.node().getComputedTextLength();var d,p=a.jobsWidth/a.boxWidth*100,m=p/40;d=p>40?a.boxWidth*m:a.boxWidth,a.boundingBox.attr("width",d),a.toolTipBase.attr("transform","translate("+i+","+l+")"),u?(a.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),a.boundingBox.attr("x",-d-20),a.circleSuccess.attr("cx",-d),a.circleFail.attr("cx",-d),a.failedIcon.attr("x",-d-7),a.successIcon.attr("x",-d-7),a.successText.attr("x",17-d),a.failText.attr("x",17-d),a.successful.attr("x",-a.successTextWidth-20-12),a.failed.attr("x",-a.failTextWidth-20-12),a.date.attr("x",-d-5),a.jobs.attr("x",-a.jobsWidth/2-7),a.clickMore.attr("x",-d)):(a.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),a.boundingBox.attr("x",10),a.circleSuccess.attr("cx",26),a.circleFail.attr("cx",26),a.failedIcon.attr("x",19),a.successIcon.attr("x",19),a.successText.attr("x",43),a.failText.attr("x",43),a.successful.attr("x",d-a.successTextWidth),a.failed.attr("x",d-a.failTextWidth),a.date.attr("x",20),a.jobs.attr("x",d),a.clickMore.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),N()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.colors=e.colors,this.draw()}return S()(t,[{key:"draw",value:function(){this.toolTipBase=P.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=145,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-41).attr("rx",2).attr("height",110).attr("width",this.boxWidth).attr("fill","#393f44"),this.circleSuccess=this.toolTipBase.append("circle").attr("cx",26).attr("cy",0).attr("r",8).attr("stroke","white").attr("fill","white"),this.circleFail=this.toolTipBase.append("circle").attr("cx",26).attr("cy",26).attr("r",8).attr("stroke","white").attr("fill","white"),this.successText=this.toolTipBase.append("text").attr("x",43).attr("y",4).attr("font-size",12).attr("fill","white").text("Successful"),this.failText=this.toolTipBase.append("text").attr("x",43).attr("y",28).attr("font-size",12).attr("fill","white").text("Failed"),this.successIcon=this.toolTipBase.append("text").attr("class","fas fa-sm").attr("fill",this.colors(1)).attr("x",19).attr("y",5).text("ï"),this.failedIcon=this.toolTipBase.append("text").attr("class","fas fa-sm").attr("fill",this.colors(0)).attr("x",20).attr("y",31).text("ïª"),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("x",137).attr("y",-21).attr("font-size",12).attr("text-anchor","end").text("No jobs"),this.successful=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",4).text("0"),this.failed=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",28).text("0"),this.date=this.toolTipBase.append("text").attr("fill","white").attr("stroke","white").attr("x",20).attr("y",-21).attr("font-size",12).text("Never"),this.clickMore=this.toolTipBase.append("text").attr("fill","white").attr("x",20).attr("y",55).attr("font-size",12).text("Click for details")}}]),t}(),J=a(87),V=a(5),H=a(75),G=function(t){function e(t){var a;return _()(this,e),(a=D()(this,A()(e).call(this,t))).draw=a.draw.bind(R()(a)),a.init=a.init.bind(R()(a)),a.resize=a.resize.bind(R()(a)),a.redirectToJobExplorer=a.redirectToJobExplorer.bind(R()(a)),a.state={formattedData:[],timeout:null},a}return F()(e,t),S()(e,[{key:"redirectToJobExplorer",value:function(t){var e=t.data.DATE,a=V.a.jobExplorer,n=Object(H.g)(e),r={start_date:n,end_date:n,quick_date_range:"custom",status:["failed","successful"]},i=Object(J.a)(r),l=i.strings,o=(0,i.stringify)(l);this.props.history.push({pathname:a,search:o})}},{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){P.t("#"+this.props.id+" > *").remove();var t,e=P.y("%Y-%m-%d"),a=this.props,n=a.data,r=a.value,i=n.reduce(function(t,a){var n=a.created,r=a.successful,i=a.failed,l=e(n)||new Date,o=+r||0,s=+i||0,c=+r+i||0;return t.concat({DATE:l,RAN:o,FAIL:s,TOTAL:c})},[]),l=this.props.getWidth(),o=this.props.getHeight(),s=P.o().rangeRound([0,l]).padding(.35),c=P.p().range([o,0]),u=P.s("#"+this.props.id).append("svg").attr("width",l+this.props.margin.left+this.props.margin.right).attr("height",o+this.props.margin.top+this.props.margin.bottom).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),d=P.q(["#6EC664","#A30000"]),p=new q({svg:"#"+this.props.id,colors:d}),m=P.u().keys(["FAIL","RAN"]).order(P.w).offset(P.v)(i);s.domain(m[0].map(function(t){return t.data.DATE})),c.domain([0,P.l(m[m.length-1],function(t){return 1.15*t[1]})||8]),u.append("g").attr("class","y-axis").call(P.c(c).tickSize(-l,0,0)).selectAll("line").attr("stroke","#d7d7d7"),u.selectAll(".y-axis .tick text").attr("x",-5),u.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-o/2).attr("dy","1em").style("text-anchor","middle").text("Jobs across all clusters");var f=Math.round(i.length/(r/2));t=i.map(function(t){return t.DATE}),31===r&&(t=i.map(function(t,e){return e%f==0?t.DATE:void 0}).filter(function(t){return t})),u.append("g").attr("class","x-axis").attr("transform","translate(0,"+o+")").call(P.b(s).tickValues(t).tickFormat(P.x("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),u.selectAll(".x-axis .tick text").attr("y",10),u.append("text").attr("transform","translate("+l/2+" ,"+(o+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var h=u.selectAll("layer").data(m).enter().append("g").attr("class","layer").style("fill",function(t,e){return d(e)});h.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t){return s(t.data.DATE)}).attr("y",function(t){return c(t[0])}).attr("height",0).attr("width",s.bandwidth()-1).transition().duration(550).ease(P.f).attr("y",function(t){return c(t[1])}).attr("height",function(t){return c(t[0])-c(t[1])}),h.selectAll("rect").on("mouseover",p.handleMouseOver).on("mousemove",p.handleMouseOver).on("mouseout",p.handleMouseOut).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.value!==this.props.value&&this.init()}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id})}}]),e}(o.Component);G.propTypes={id:Y.a.string,data:Y.a.array,value:Y.a.number,margin:Y.a.object,getHeight:Y.a.func,getWidth:Y.a.func,history:Y.a.object};var $=Object(z.a)(Object(M.a)(G)),K=function(t){function e(t){var a;return _()(this,e),(a=D()(this,A()(e).call(this,t))).init=a.init.bind(R()(a)),a.draw=a.draw.bind(R()(a)),a.resize=a.resize.bind(R()(a)),a.updateCluster=a.updateCluster.bind(R()(a)),a.redirectToJobExplorer=a.redirectToJobExplorer.bind(R()(a)),a.state={formattedData:[],timeout:null},a}return F()(e,t),S()(e,[{key:"redirectToJobExplorer",value:function(t){var e=t.DATE,a=V.a.jobExplorer,n=Object(H.g)(e),r={start_date:n,end_date:n,quick_date_range:"custom",status:["failed","successful"],cluster_id:this.props.clusterId},i=Object(J.a)(r),l=i.strings,o=(0,i.stringify)(l);this.props.history.push({pathname:a,search:o})}},{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"getTickCount",value:function(){var t=this.props.value;return t>20?t/2:t}},{key:"updateCluster",value:function(){this.init()}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){P.t("#"+this.props.id+" > *").remove();var t=this.props.getWidth(),e=this.props.getHeight();function a(t){t.transition().duration(1e3).attrTween("stroke-dasharray",n)}function n(){var t=this.getTotalLength(),e=P.j("0,"+t,t+","+t);return function(t){return e(t)}}var r=P.r().rangeRound([0,t]),i=P.p().range([e,0]),l=P.q(["#6EC664","#A30000","#06C"]),o=P.s("#"+this.props.id).append("svg").attr("width",t+this.props.margin.left+this.props.margin.right).attr("height",e+this.props.margin.top+this.props.margin.bottom).attr("z",100).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),s=new q({svg:"#"+this.props.id,colors:l}),c=this.props,u=c.data,d=c.value,p=P.y("%Y-%m-%d"),m=u.reduce(function(t,e){var a=e.created,n=e.successful,r=e.failed,i=p(a)||new Date,l=+n||0,o=+r||0,s=+n+r||0;return t.concat({DATE:i,RAN:l,FAIL:o,TOTAL:s})},[]);r.domain(P.h(m,function(t){return t.DATE})),i.domain([0,P.l(m,function(t){return 1.15*t.TOTAL||8})]);var f,h=P.k().curve(P.d).x(function(t){return r(t.DATE)}).y(function(t){return i(t.RAN)}),g=P.k().defined(function(t){return!isNaN(t.FAIL)}).curve(P.d).x(function(t){return r(t.DATE)}).y(function(t){return i(t.FAIL)});o.append("g").attr("class","y-axis").call(P.c(i).ticks(10).tickSize(-t)).selectAll("line").attr("stroke","#d7d7d7"),o.selectAll(".y-axis .tick text").attr("x",-5),o.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-e/2).attr("dy","1em").style("text-anchor","middle").text("Job runs");var b=Math.round(m.length/(d/2));f=m.map(function(t){return t.DATE}),31===d&&(f=m.map(function(t,e){return e%b==0?t.DATE:void 0}).filter(function(t){return t})),o.append("g").attr("class","x-axis").attr("transform","translate(0,"+e+")").call(P.b(r).tickValues(f).tickSize(-e).tickFormat(P.x("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),o.selectAll(".x-axis .tick text").attr("y",10),o.append("text").attr("transform","translate("+t/2+" ,"+(e+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var v=o.append("path").attr("class","mouse-line").style("stroke","black").style("stroke-width","3px").style("stroke-dasharray","3, 3").style("opacity","0"),y=function(t){s.handleMouseOver(t),v.transition().style("opacity","1")},E=function(){var t=this.cx.baseVal.value;v.attr("d",function(){var a="M"+t+","+e;return a+=" "+t+",0"})},x=function(){s.handleMouseOut(),v.transition().style("opacity",0)};o.append("path").data([m]).attr("class","line").style("fill","none").style("stroke",function(){return l(1)}).attr("stroke-width",2).attr("d",h).call(a),o.append("path").data([m]).attr("class","line").style("fill","none").style("stroke",function(){return l(0)}).attr("stroke-width",2).attr("d",g).call(a),o.selectAll("dot").data(m).enter().append("circle").attr("r",3).style("stroke",function(){return l(1)}).style("fill",function(){return l(1)}).attr("cx",function(t){return r(t.DATE)}).attr("cy",function(t){return i(t.RAN)}).on("mouseover",y).on("mousemove",E).on("mouseout",x).on("click",this.redirectToJobExplorer),o.selectAll("dot").data(m).enter().append("circle").attr("r",3).style("stroke",function(){return l(0)}).style("fill",function(){return l(0)}).attr("cx",function(t){return r(t.DATE)}).attr("cy",function(t){return i(t.FAIL)}).on("mouseover",y).on("mousemove",E).on("mouseout",x).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.updateCluster(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.value!==this.props.value&&this.updateCluster()}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id})}}]),e}(o.Component);K.propTypes={id:Y.a.string,data:Y.a.array,value:Y.a.number,margin:Y.a.object,getHeight:Y.a.func,getWidth:Y.a.func,history:Y.a.object,clusterId:Y.a.number};var Q=Object(z.a)(Object(M.a)(K)),X=a(107),Z=a(121),tt=a(147),et=a(145);function at(){var t=l()(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]);return at=function(){return t},t}function nt(){var t=l()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n"]);return nt=function(){return t},t}function rt(){var t=l()(["\n    --pf-c-data-list__cell-cell--MarginRight: 0;\n"]);return rt=function(){return t},t}var it=Object(p.a)(et.DataListCell)(rt()),lt=Object(p.a)(tt.DataListItem)(nt()),ot=Object(p.a)(it)(at()),st=function(t){var e=t.modules,a=t.isLoading;return s.a.createElement(Z.DataList,{"aria-label":"Top Modules",style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},s.a.createElement(lt,{"aria-labelledby":"top-modules-header"},s.a.createElement(it,null,s.a.createElement("h3",null,"Top modules")),s.a.createElement(ot,null,s.a.createElement("h3",null,"Usage"))),a&&s.a.createElement(tt.DataListItem,{"aria-labelledby":"modules-loading",key:a,style:{border:"none"}},s.a.createElement(et.DataListCell,null,s.a.createElement(m.a,null))),!a&&e.length<=0&&s.a.createElement(tt.DataListItem,{"aria-labelledby":"modules-no-data",key:a,style:{border:"none"}},s.a.createElement(et.DataListCell,null,s.a.createElement(X.a,null))),!a&&e.filter(function(t){return null!==t.module}).map(function(t,e){var a=t.module,n=t.count;return s.a.createElement(lt,{"aria-labelledby":"top-modules-detail",key:e},s.a.createElement(it,null,s.a.createElement("span",null,Object(H.m)(a))),s.a.createElement(ot,null,n))}))};st.propTypes={modules:Y.a.array,isLoading:Y.a.bool};var ct=st,ut=a(13),dt=a.n(ut),pt=a(23),mt=a.n(pt),ft=a(102),ht=a(432),gt=a(322),bt=a(431),vt=a.n(bt);function yt(){var t=l()(["\n    padding: 7px !important;\n"]);return yt=function(){return t},t}function Et(){var t=l()(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]);return Et=function(){return t},t}function xt(){var t=l()(["\n    display: grid;\n    grid-template-columns: repeat(3, auto);\n    grid-gap: 10px;\n    padding: var(--pf-global--spacer--lg);\n    background: #ebebeb;\n    border: 1px solid #ccc;\n    border-top: none;\n    margin-bottom: 20px;\n"]);return xt=function(){return t},t}function jt(){var t=l()(["\n    padding: 7px;\n"]);return jt=function(){return t},t}function Tt(){var t=l()(["\n  padding: 0;\n  > .pf-c-data-list__cell {\n    font-weight: 600;\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n"]);return Tt=function(){return t},t}function wt(){var t=l()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n  justify-content: center;\n  align-items: center;\n"]);return wt=function(){return t},t}function kt(){var t=l()(["\n    border-bottom: none;\n    margin-bottom: -20px;\n"]);return kt=function(){return t},t}function _t(){var t=l()(["\n  --pf-c-data-list__cell-cell--MarginRight: 0;\n"]);return _t=function(){return t},t}var Ot=s.a.createElement(vt.a,{size:"sm",key:"5",style:{color:"rgb(110, 198, 100)",marginRight:"5px"}}),St=s.a.createElement(s.a.Fragment,null,s.a.createElement(vt.a,{size:"sm",key:"5",style:{color:"rgb(163, 0, 0)",marginRight:"5px"}}),s.a.createElement("span",{id:"fail-icon"},"!")),Ct=Object(p.a)(et.DataListCell)(_t()),Dt=Object(p.a)(tt.DataListItem)(kt()),Bt=Object(p.a)(tt.DataListItem)(wt()),At=Object(p.a)(Bt)(Tt()),It=Object(p.a)(Ct)(jt()),Rt=p.a.div(xt()),Lt=Object(p.a)(Ct)(Et()),Ft=Object(p.a)(Lt)(yt()),Mt=function(t){var e=t.history,a=t.clusterId,n=t.templates,i=t.isLoading,l=t.queryParams,c=Object(o.useState)(!1),u=r()(c,2),d=u[0],p=u[1],f=Object(o.useState)(null),g=r()(f,2),b=g[0],v=g[1],y=Object(o.useState)([]),E=r()(y,2),x=E[0],j=E[1],T=Object(o.useState)([]),w=r()(T,2),k=w[0],_=w[1];Object(o.useEffect)(function(){b&&function(){var t=mt()(dt.a.mark(function t(){return dt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.insights.chrome.auth.getUser();case 2:Object(h.l)(b,{params:l}).then(function(t){j(t),_(t.related_jobs)});case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[b]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z.DataList,{"aria-label":"Top Templates",style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},s.a.createElement(Bt,{"aria-labelledby":"top-templates-header"},s.a.createElement(Ct,null,s.a.createElement("h3",null,"Top templates")),s.a.createElement(Lt,null,s.a.createElement("h3",null,"Usage"))),i&&s.a.createElement(tt.DataListItem,{"aria-labelledby":"templates-loading",key:i,style:{border:"none"}},s.a.createElement(et.DataListCell,null,s.a.createElement(m.a,null))),!i&&n.length<=0&&s.a.createElement(tt.DataListItem,{"aria-labelledby":"templates-no-data",key:i,style:{border:"none"}},s.a.createElement(et.DataListCell,null,s.a.createElement(X.a,null))),!i&&n.map(function(t,e){var a=t.name,n=t.count,r=t.id;return s.a.createElement(Bt,{"aria-labelledby":"top-templates-detail",key:e},s.a.createElement(Ct,null,s.a.createElement("a",{onClick:function(){p(!0),v(r)}},a)),s.a.createElement(Lt,null,n))})),x&&x!==[]&&s.a.createElement(ht.Modal,{width:"80%",title:x.name?x.name:"no-template-name",isOpen:d,onClose:function(){p(!1),j([]),_([]),v(null)},actions:[s.a.createElement(ft.Button,{key:"cancel",variant:"secondary",onClick:function(){p(!1),j([]),_([]),v(null)}},"Close")]},s.a.createElement(Z.DataList,{"aria-label":"Selected Template Details"},s.a.createElement(Dt,{"aria-labelledby":"Selected Template Statistics"},s.a.createElement(Rt,null,s.a.createElement("div",{"aria-labelledby":"job runs"},s.a.createElement("b",{style:{marginRight:"10px"}},"Number of runs"),x.total_run_count?x.total_run_count:"Unavailable"),s.a.createElement("div",{"aria-labelledby":"total time"},s.a.createElement("b",{style:{marginRight:"10px"}},"Total time"),x.total_run?x.total_run:"Unavailable"),s.a.createElement("div",{"aria-labelledby":"Avg Time"},s.a.createElement("b",{style:{marginRight:"10px"}},"Avg time"),x.average_run?x.average_run:"Unavailable"),s.a.createElement("div",{"aria-labelledby":"success rate"},s.a.createElement("b",{style:{marginRight:"10px"}},"Success rate"),isNaN(x.success_rate)?"Unavailable":Object(H.j)(x.success_rate)),s.a.createElement("div",{"aria-labelledby":"most failed task"},s.a.createElement("b",{style:{marginRight:"10px"}},"Most failed task"),x.most_failed_tasks?function(t){if(t){if(t&&t[0]){var e=Object(H.j)(t[0].fail_rate);return"".concat(t[0].task_name," ").concat(e)}return"Unavailable"}}(x.most_failed_tasks):"Unavailable"))),s.a.createElement(At,null,s.a.createElement(It,{key:"last5jobs"},s.a.createElement(gt.Label,{variant:"outline"},"Last 5 jobs")),",",s.a.createElement(Ft,null,s.a.createElement(ft.Button,{component:"a",onClick:function(){var t=V.a.jobExplorer,n={template_id:b,status:["successful","failed","new","pending","waiting","error","canceled","running"],job_type:["job"],start_date:l.startDate,end_date:l.endDate,quick_date_range:"custom",cluster_id:a},r=Object(J.a)(n),i=r.strings,o=(0,r.stringify)(i);e.push({pathname:t,search:o})},variant:"link"},"View all jobs"))),s.a.createElement(At,{"aria-labelledby":"datalist header"},s.a.createElement(et.DataListCell,{key:"job heading"},"Id/Name"),s.a.createElement(et.DataListCell,{key:"cluster heading"},"Cluster"),s.a.createElement(et.DataListCell,{key:"start time heading"},"Start Time"),s.a.createElement(et.DataListCell,{key:"total time heading"},"Total Time")),k.length<=0&&s.a.createElement(m.a,null),k.length>0&&k.map(function(t,e){return s.a.createElement(Bt,{style:{padding:"10px 0"},key:"job-details-".concat(e),"aria-labelledby":"job details"},s.a.createElement(et.DataListCell,{key:"job name"},"successful"===t.status?Ot:St," ",t.job_id," - ",t.job_name),s.a.createElement(et.DataListCell,{key:"job cluster"},t.cluster_label||t.install_uuid),s.a.createElement(et.DataListCell,{key:"start time"},Object(H.h)(t.start_time)),s.a.createElement(et.DataListCell,{key:"total time"},Object(H.k)(t.total_time)))}))))};Mt.propTypes={templates:Y.a.array,isLoading:Y.a.bool,queryParams:Y.a.object};var zt=Mt;function Pt(){var t=l()(["\n  border-bottom: 2px solid #ebebeb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  &&& {\n    min-height: 60px;\n    --pf-c-card--first-child--PaddingTop: 10px;\n    --pf-c-card__header--not-last-child--PaddingBottom: 10px;\n\n    h3 {\n      font-size: 0.875em;\n    }\n  }\n"]);return Pt=function(){return t},t}var Wt=Object(p.a)(E.CardTitle)(Pt()),Yt=[{value:"please choose",label:"Select date range",disabled:!0},{value:7,label:"Past week",disabled:!1},{value:14,label:"Past 2 weeks",disabled:!1},{value:31,label:"Past month",disabled:!1}];var Ut={startDate:u()().subtract(1,"month").format("YYYY-MM-DD"),endDate:u()().format("YYYY-MM-DD")};e.default=function(t){var e=t.history,a=Object(o.useState)(null),n=r()(a,2),i=n[0],l=n[1],c=Object(o.useState)([]),u=r()(c,2),p=u[0],T=u[1],k=Object(o.useState)([]),_=r()(k,2),O=_[0],S=_[1],C=Object(o.useState)([]),D=r()(C,2),B=D[0],A=D[1],I=Object(o.useState)([]),R=r()(I,2),L=R[0],F=R[1],M=Object(o.useState)([]),z=r()(M,2),P=z[0],W=z[1],Y=Object(o.useState)(31),U=r()(Y,2),N=U[0],q=U[1],J=Object(o.useState)("all"),V=r()(J,2),H=V[0],G=V[1],K=Object(o.useState)(!0),X=r()(K,2),Z=X[0],tt=X[1],et=Object(d.a)(Ut),at=et.queryParams,nt=et.setEndDate,rt=et.setStartDate,it=et.setId;return Object(o.useEffect)(function(){tt(!0),window.insights.chrome.auth.getUser().then(function(){return Object(h.a)().then(function(){return Object(h.c)().then(function(t){var e=t.templates,a=function(t){return t.reduce(function(t,e){var a=e.label,n=e.cluster_id,r=e.install_uuid;return 0===a.length?t.push({value:n,label:r,disabled:!1}):t.push({value:n,label:a,disabled:!1}),t},[{value:"please choose",label:"Select cluster",disabled:!0},{value:"all",label:"All clusters",disabled:!1}])}(void 0===e?[]:e);W(a),tt(!1)})}).catch(function(t){l({preflightError:t})})})},[]),Object(o.useEffect)(function(){tt(!0),window.insights.chrome.auth.getUser().then(function(){return Promise.all([Object(h.b)({params:at}),Object(h.i)({params:at}),Object(h.m)({params:at})]).then(function(t){var e=r()(t,3),a=e[0].data,n=void 0===a?[]:a,i=e[1].modules,l=void 0===i?[]:i,o=e[2].templates,s=void 0===o?[]:o;at.id?S(n):T(n),F(l),A(s),tt(!1)}).catch(function(){return[]})})},[at]),s.a.createElement(s.a.Fragment,null,s.a.createElement(b.PageHeader,null,s.a.createElement(b.PageHeaderTitle,{title:"Clusters"})),i&&s.a.createElement(g.Main,null,s.a.createElement(f.a,i)),!i&&s.a.createElement(s.a.Fragment,null,s.a.createElement(g.Main,{style:{paddingBottom:"0"}},s.a.createElement(v.Card,null,s.a.createElement(Wt,{style:{paddingBottom:"0",paddingTop:"0"}},s.a.createElement("h2",null,s.a.createElement(w.a,{style:{marginRight:"10px"}}),"Filter"),s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},s.a.createElement(x.FormSelect,{name:"selectedCluster",value:H,onChange:function(t){G(t),it(t)},"aria-label":"Select Cluster",style:{margin:"2px 10px"}},P.map(function(t,e){var a=t.value,n=t.label,r=t.disabled;return s.a.createElement(j.FormSelectOption,{isDisabled:r,key:e,value:a,label:n})})),s.a.createElement(x.FormSelect,{name:"clusterTimeFrame",value:N,onChange:function(t){q(+t),nt(),rt(+t)},"aria-label":"Select Date Range",style:{margin:"2px 10px"}},Yt.map(function(t,e){return s.a.createElement(j.FormSelectOption,{isDisabled:t.disabled,key:e,value:t.value,label:t.label})})))))),s.a.createElement(g.Main,null,s.a.createElement(v.Card,null,s.a.createElement(E.CardTitle,null,s.a.createElement("h2",null,"Job status")),s.a.createElement(y.CardBody,null,Z&&!i&&s.a.createElement(m.a,null),"all"===H&&p.length>0&&!Z&&s.a.createElement($,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-bar-chart-root",data:p,value:N}),"all"!==H&&O.length>0&&!Z&&s.a.createElement(Q,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-line-chart-root",data:O,value:N,clusterId:at.id}))),s.a.createElement("div",{className:"dataCard",style:{display:"flex",marginTop:"20px"}},s.a.createElement(zt,{history:e,queryParams:at,clusterId:at.id,templates:B.slice(0,10),isLoading:Z}),s.a.createElement(ct,{modules:L.slice(0,10),isLoading:Z})))))}},525:function(t,e,a){"use strict";a.r(e);var n=a(13),r=a.n(n),i=a(23),l=a.n(i),o=a(74),s=a.n(o),c=a(71),u=a.n(c),d=a(1),p=a.n(d),m=a(72),f=a(64),h=a.n(f),g=a(99),b=a(79),v=a(107),y=a(101),E=a(93),x=a(63),j=a(61),T=a(96),w=a(97),k=a(110),_=a(112),O=a(113),S=a(123),C=a.n(S),D=a(124),B=a.n(D),A=a(20),I=a.n(A),R=a(21),L=a.n(R),F=a(39),M=a.n(F),z=a(22),P=a.n(z),W=a(18),Y=a.n(W),U=a(19),N=a.n(U),q=a(91),J=a.n(q),V=a(0),H=a.n(V),G=a(528),$=a(106),K=a(90),Q=a(323);function X(){var t=u()(["\n  margin-left: 20px;\n\n  svg {\n    display: none;\n  }\n"]);return X=function(){return t},t}function Z(){var t=u()(["\n    font-size: 15px;\n    margin-left: 20px;\n"]);return Z=function(){return t},t}function tt(){var t=u()(["\n  font-size: 12px;\n  display: inline-block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: left;\n"]);return tt=function(){return t},t}function et(){var t=u()(["\n  min-width: 12px;\n  height: 12px;\n  background: ",";\n  margin-right: 20px;\n"]);return et=function(){return t},t}function at(){var t=u()(["\n  display: flex;\n  align-items: center;\n  overflow: auto;\n"]);return at=function(){return t},t}function nt(){var t=u()(["\n  display: flex;\n  padding: 7.5px 15px;\n  align-items: center;\n  justify-content: space-between;\n"]);return nt=function(){return t},t}function rt(){var t=u()(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n  overflow: auto;\n  width: 100%;\n  height: ",";\n"]);return rt=function(){return t},t}var it=m.a.div(rt(),function(t){return t.height}),lt=m.a.div(nt()),ot=m.a.div(at()),st=m.a.div.attrs(function(t){return{color:t.color||"black"}})(et(),function(t){return t.color}),ct=m.a.span(tt()),ut=m.a.span(Z()),dt=Object(m.a)(Q.Switch)(X()),pt=function(t){function e(t){var a;return Y()(this,e),(a=I()(this,L()(e).call(this,t))).handleChange=a.handleChange.bind(M()(a)),a}return P()(e,t),N()(e,[{key:"handleChange",value:function(t,e){var a=e.target.value;(0,this.props.onToggle)(parseFloat(a))}},{key:"render",value:function(){var t=this,e=this.props,a=e.data,n=e.selected,r=e.height;return p.a.createElement(it,{height:r},a.map(function(e,a){var r=e.name,i=e.value,l=e.id,o=e.count;return p.a.createElement(lt,{key:a},p.a.createElement(ot,null,p.a.createElement(st,{color:i}),p.a.createElement(ct,null,r)),o&&p.a.createElement(ut,null,o,"%"),n&&p.a.createElement(dt,{isChecked:n.some(function(t){return t===l}),onChange:t.handleChange,"aria-label":r,value:l,id:"".concat(r,"-").concat(l)}))}))}}]),e}(d.Component);pt.propTypes={data:H.a.array,selected:H.a.array,onToggle:H.a.func,height:H.a.string};var mt=pt,ft=a(5),ht=a(75),gt=a(87),bt=["#06C","#4CB140","#009596","#5752D1","#F4C145","#EC7A08","#8BC1F7","#23511E","#A2D9D9","#2A265F","#F9E0A2","#8F4700","#002F5D"];function vt(){var t=u()(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n"]);return vt=function(){return t},t}var yt=m.a.div(vt()),Et=K.q(bt),xt=function(){function t(e){var a=this;Y()(this,t),J()(this,"handleMouseOver",function(t){var e,n,r,i=K.g.pageX-K.s(a.svg).node().getBoundingClientRect().x+10,l=K.g.pageY-K.s(a.svg).node().getBoundingClientRect().y-10;if(t){e=t.date,n=t.org_name,r=t.value,t.org_name.length>16&&(n=t.org_name.slice(0,16).concat("..."));var o=K.x("%m/%d"),s=a.toolTipBase.node().getBoundingClientRect().width,c=K.s(a.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<i/c*100;a.date.text(""+o(e)),a.orgName.text(""+n),a.jobs.text(r+" Jobs"),a.jobsWidth=a.jobs.node().getComputedTextLength();var d,p=a.jobsWidth/a.boxWidth*100,m=p/45;d=p>45?a.boxWidth*m:a.boxWidth,a.boundingBox.attr("width",d),a.toolTipBase.attr("transform","translate("+i+","+l+")"),u?(a.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),a.boundingBox.attr("x",-d-20),a.jobs.attr("x",-a.jobsWidth-20-7),a.orgName.attr("x",-d-7),a.clickMore.attr("x",-d-7),a.date.attr("x",-d-7)):(a.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),a.boundingBox.attr("x",10),a.orgName.attr("x",20),a.clickMore.attr("x",20),a.jobs.attr("x",d/2),a.date.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),J()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.draw()}return N()(t,[{key:"draw",value:function(){this.width=125,this.toolTipBase=K.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=125,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",68).attr("width",this.boxWidth).attr("fill","#393f44"),this.date=this.toolTipBase.append("text").attr("x",20).attr("y",14).attr("font-size",12).attr("fill","white").text("Date"),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",72).attr("y",14).text("0 Jobs"),this.orgName=this.toolTipBase.append("text").attr("fill","white").attr("font-weight",800).attr("x",20).attr("y",-1).attr("font-size",12).text("Org"),this.clickMore=this.toolTipBase.append("text").attr("fill","white").attr("x",20).attr("y",30).attr("font-size",12).text("Click for details")}}]),t}(),jt=function(t){function e(t){var a;return Y()(this,e),(a=I()(this,L()(e).call(this,t))).init=a.init.bind(M()(a)),a.handleToggle=a.handleToggle.bind(M()(a)),a.draw=a.draw.bind(M()(a)),a.resize=a.resize.bind(M()(a)),a.redirectToJobExplorer=a.redirectToJobExplorer.bind(M()(a)),a.orgsList=t.data[0].orgs,a.selection=[],a.state={colors:[],selected:[],formattedData:[],timeout:null},a}return P()(e,t),N()(e,[{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"redirectToJobExplorer",value:function(t){var e,a=t.date,n=t.id;if(-1!==n){e=n;var r=ft.a.jobExplorer,i=Object(ht.g)(a),l={start_date:i,end_date:i,status:["successful","failed","new","pending","waiting","error","canceled","running"],quick_date_range:"custom",org_id:e},o=Object(gt.a)(l),s=o.strings,c=(0,o.stringify)(s);this.props.history.push({pathname:r,search:c})}}},{key:"handleToggle",value:function(t){-1===this.selection.indexOf(t)?this.selection=[].concat(B()(this.selection),[t]):this.selection.includes(t)&&(this.selection=B()(this.selection).filter(function(e){return e!==t})),this.setState({selected:this.selection}),this.draw()}},{key:"init",value:function(){var t=this;0===this.selection.length&&this.orgsList.forEach(function(e,a){a<=7&&t.handleToggle(e.id)});var e=this.orgsList.reduce(function(t,e){return t.push({name:e.org_name,value:Et(e.org_name),id:e.id}),t},[]);this.setState({colors:e}),this.draw()}},{key:"draw",value:function(){K.t("#"+this.props.id+" > *").remove();var t,e=this.props,a=e.data,n=e.timeFrame,r=this.selection,i=K.y("%Y-%m-%d"),l=a.reduce(function(t,e){var a=e.date,n=e.orgs;a=i(a);var l=n.filter(function(t){var e=t.id;return r.includes(e)});return l.map(function(t){t.date=a}),t.concat({date:a,selectedOrgs:l})},[]),o=this.props.getWidth(),s=this.props.getHeight(),c=K.o().range([0,o]).padding(.35),u=K.o(),d=K.p().range([s,0]),p=Math.round(l.length/(n/2));t=l.map(function(t){return t.date}),31===n&&(t=l.map(function(t,e){return e%p==0?t.date:void 0}).filter(function(t){return t}));var m=K.b(c).tickValues(t).tickFormat(K.x("%-m/%-d")),f=K.c(d).ticks(8).tickSize(-o,0,0),h=K.s("#"+this.props.id).append("svg").attr("width",o+this.props.margin.left+this.props.margin.right).attr("height",s+this.props.margin.bottom+this.props.margin.top).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),g=l.map(function(t){return t.date}),b=l[0].selectedOrgs.map(function(t){return t.org_name}),v=new xt({svg:"#"+this.props.id});c.domain(g),u.domain(b).range([0,c.bandwidth()]),d.domain([0,K.l(l,function(t){return K.l(t.selectedOrgs,function(t){return 1.15*t.value})})||8]),h.append("g").attr("class","y axis").call(f).selectAll("line").attr("stroke","#d7d7d7").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-weight","bold").text("Value"),h.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-s/2).attr("dy","1em").style("text-anchor","middle").text("Jobs across orgs"),h.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(m).selectAll("line").attr("stroke","#d7d7d7"),h.append("text").attr("transform","translate("+o/2+" ,"+(s+this.props.margin.top+25)+")").style("text-anchor","middle").text("Date");var y=h.selectAll(".slice").data(l);y.exit().remove();var E=y.enter().append("g").attr("class","g foo").attr("transform",function(t){return"translate("+c(t.date)+",0)"}),x=(y=y.merge(E)).selectAll("rect").data(function(t){return t.selectedOrgs});x.exit().remove();var j=x.enter().append("rect").attr("width",u.bandwidth()).attr("x",function(t){return u(t.org_name)}).style("fill",function(t){return Et(t.org_name)}).attr("y",function(t){return d(t.value)}).attr("height",function(t){return s-d(t.value)}).on("mouseover",function(t){K.s(this).style("fill",K.n(Et(t.org_name)).darker(1)),v.handleMouseOver()}).on("mousemove",v.handleMouseOver).on("mouseout",function(t){K.s(this).style("fill",Et(t.org_name)),v.handleMouseOut()}).on("click",this.redirectToJobExplorer);x=x.merge(j)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var t=this.state,e=t.colors,a=t.selected;return p.a.createElement(yt,null,p.a.createElement("div",{id:this.props.id}),e.length>0&&p.a.createElement(mt,{id:"d3-grouped-bar-legend",data:e,selected:a,onToggle:this.handleToggle,height:"350px"}))}}]),e}(d.Component);jt.propTypes={id:H.a.string,isAccessible:H.a.bool,data:H.a.array,value:H.a.array,margin:H.a.object,getHeight:H.a.func,getWidth:H.a.func,timeFrame:H.a.number,history:H.a.object};var Tt=Object($.a)(Object(G.a)(jt));function wt(){var t=u()(["\n  display: flex;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n"]);return wt=function(){return t},t}var kt=m.a.div(wt()),_t=function(){function t(e){var a=this;Y()(this,t),J()(this,"handleMouseOver",function(t){var e,n,r;!0!==a.drawn&&(a.draw(t),a.drawn=!0);var i=K.g.pageX-K.s(a.svg).node().getBoundingClientRect().x+10,l=K.g.pageY-K.s(a.svg).node().getBoundingClientRect().y-10;if(t){if(t&&t.data){e=t.data.percent,n=t.data.success_rate,r=t.data.name,t.data.name.length>16&&(r=t.data.name.slice(0,13).concat("..."))}var o=a.toolTipBase.node().getBoundingClientRect().width,s=K.s(a.svg+"> svg").node().getBoundingClientRect().width,c=100-o/s*100<i/s*100;a.percentageTotal.text(e+"%"),n&&a.percentageSuccess&&a.percentageSuccess.text("("+n+"% successful)"),a.orgName.text(" "+r),a.toolTipBase.attr("transform","translate("+i+","+l+")"),c?(a.toolTipPoint.attr("transform","translate(-20, -10) rotate(45)"),a.boundingBOx.attr("x",-125),a.orgName.attr("x",-112),a.percentageTotal.attr("x",-112),a.showSuccess&&a.percentageSuccess.attr("x",-112)):(a.toolTipPoint.attr("transform","translate(10, -10) rotate(45)"),a.boundingBOx.attr("x",10),a.orgName.attr("x",20),a.percentageTotal.attr("x",20),a.showSuccess&&a.percentageSuccess.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),J()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.drawn=!1,this.showSuccess=!1}return N()(t,[{key:"draw",value:function(t){this.showSuccess=!!(t&&t.data&&"success_rate"in t.data);var e=this.showSuccess?70:52,a=this.showSuccess?120:108;this.toolTipBase=K.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBOx=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",e).attr("width",a).attr("fill","#393f44"),this.orgName=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",0).text("Organization"),this.percentageTotal=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",16).text("0"),this.percentageSuccess=null,this.showSuccess&&(this.percentageSuccess=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",30).text(""))}}]),t}(),Ot=function(t){function e(t){var a;return Y()(this,e),(a=I()(this,L()(e).call(this,t))).state={colors:[],timeout:null},a.draw=a.draw.bind(M()(a)),a.init=a.init.bind(M()(a)),a.resize=a.resize.bind(M()(a)),a}return P()(e,t),N()(e,[{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"sortDescending",value:function(t){t.sort(function(t,e){return K.e(parseFloat(t.count),parseFloat(e.count))})}},{key:"init",value:function(){var t=this.props.data,e=K.q(bt),a=t.reduce(function(t,a){return-1===a.id?t.push({name:"Others",value:e(a.name),count:Math.round(a.count)}):t.push({name:a.name,value:e(a.name),count:Math.round(a.count)}),t},[]);this.setState({colors:a}),this.draw()}},{key:"draw",value:function(){var t=K.q(bt);K.t("#"+this.props.id+" > *").remove();var e=this.props.getWidth(),a=this.props.getHeight(),n=K.s("#"+this.props.id).append("svg").attr("width",e+this.props.margin.left+this.props.margin.right).attr("height",a+this.props.margin.bottom).append("g");n.append("g").attr("class","slices"),n.append("g").attr("class","labels"),n.append("g").attr("class","lines");var r=Math.min(e,a)/2,i=this.props.data.filter(function(t){return-1!==t.id}),l=Object(ht.l)(i);i.forEach(function(t){t.count=+t.count,t.percent=+Math.round(t.count/l*100)});var o=new _t({svg:"#"+this.props.id}),s=K.m().sort(null).value(function(t){return t.count}),c=K.a().outerRadius(r-10).innerRadius(0);n.attr("transform","translate("+(e+this.props.margin.left+this.props.margin.right)/2+","+(a+this.props.margin.top+this.props.margin.bottom)/2+")"),n.selectAll("path").data(s(i)).enter().append("path").attr("d",c).attr("fill",function(e,a){return t(a)}),n.selectAll("path").on("mouseover",function(e,a){K.s(this).style("fill",K.n(t(a)).darker(1)),o.handleMouseOver(e)}).on("mouseout",function(e,a){K.s(this).style("fill",t(a)),o.handleMouseOut()}).on("mousemove",o.handleMouseOver),n.append("g").classed("labels",!0),n.append("g").classed("lines",!0)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(t){t.data!==this.props.data&&this.init()}},{key:"render",value:function(){var t=this.state.colors;return p.a.createElement(kt,null,p.a.createElement("div",{id:this.props.id}),t.length>0&&p.a.createElement(mt,{id:"d3-grouped-bar-legend",data:t,selected:null,onToggle:null,height:"300px"}))}}]),e}(d.Component);Ot.propTypes={id:H.a.string,isAccessible:H.a.bool,data:H.a.array,margin:H.a.object,getHeight:H.a.func,getWidth:H.a.func,timeFrame:H.a.number};var St=Object($.a)(Ot);function Ct(){var t=u()(["\n  min-height: 500px;\n"]);return Ct=function(){return t},t}function Dt(){var t=u()(["\n  display: flex;\n  overflow: hidden;\n\n  .pf-c-card {\n    width: 50%;\n    margin-top: 20px;\n    overflow: auto;\n  }\n\n  .pf-c-card:first-of-type {\n    margin-right: 20px;\n  }\n"]);return Dt=function(){return t},t}function Bt(){var t=u()(["\n  border-bottom: 2px solid #ebebeb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  &&& {\n    min-height: 60px;\n    --pf-c-card--first-child--PaddingTop: 10px;\n    --pf-c-card__header--not-last-child--PaddingBottom: 10px;\n\n    h3 {\n      font-size: 0.875em;\n    }\n  }\n"]);return Bt=function(){return t},t}var At=Object(m.a)(k.CardTitle)(Bt()),It=m.a.div(Dt()),Rt=Object(m.a)(T.Card)(Ct()),Lt=[{value:"please choose",label:"Select Date Range",disabled:!0},{value:7,label:"Past Week",disabled:!1},{value:14,label:"Past 2 Weeks",disabled:!1},{value:31,label:"Past Month",disabled:!1}],Ft=[{value:"please choose",label:"Order By",disabled:!0},{value:"count:desc",label:"Top 5 Orgs",disabled:!1},{value:"count:asc",label:"Bottom 5 Orgs",disabled:!1},{value:"all",label:"All Orgs",disabled:!1}],Mt={startDate:h()().subtract(1,"month").format("YYYY-MM-DD"),endDate:h()().format("YYYY-MM-DD"),sort_by:"count:desc",limit:5};e.default=function(){var t=Object(d.useState)(null),e=s()(t,2),a=e[0],n=e[1],i=Object(d.useState)([]),o=s()(i,2),c=o[0],u=o[1],m=Object(d.useState)([]),f=s()(m,2),h=f[0],k=f[1],S=Object(d.useState)([]),D=s()(S,2),B=D[0],A=D[1],I=Object(d.useState)(31),R=s()(I,2),L=R[0],F=R[1],M=Object(d.useState)("count:desc"),z=s()(M,2),P=z[0],W=z[1],Y=Object(d.useState)(!0),U=s()(Y,2),N=U[0],q=U[1],J=Object(d.useState)(!0),V=s()(J,2),H=V[0],G=V[1],$=Object(g.a)(Mt),K=$.queryParams,Q=$.setEndDate,X=$.setStartDate,Z=$.setSortBy,tt=$.setLimit;return Object(d.useEffect)(function(){var t=!1,e=function(){return Promise.all([Object(E.h)({params:K}),Object(E.g)({params:K}),Object(E.d)({params:K})].map(function(t){return t.catch(function(){return[]})}))},a=function(){var t=l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return G(!0),t.next=3,window.insights.chrome.auth.getUser();case 3:e().then(function(t){var e=s()(t,3),a=e[0].dates,n=void 0===a?[]:a,r=e[1].usages,i=void 0===r?[]:r,l=e[2].usages,o=void 0===l?[]:l;A(n),u(i),k(o),G(!1)});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();function i(){return(i=l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return G(!0),a.next=3,window.insights.chrome.auth.getUser();case 3:return a.next=5,Object(E.a)().catch(function(t){n({preflightError:t})});case 5:e().then(function(e){var a=s()(e,3),n=a[0].dates,r=void 0===n?[]:n,i=a[1].usages,l=void 0===i?[]:i,o=a[2].usages,c=void 0===o?[]:o;t||(A(r),u(l),k(c),q(!1),G(!1))});case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}if(N)return function(){i.apply(this,arguments)}(),function(){return t=!0};a()},[K]),p.a.createElement(p.a.Fragment,null,p.a.createElement(j.PageHeader,null,p.a.createElement(j.PageHeaderTitle,{title:"Organization Statistics"})),a&&p.a.createElement(x.Main,null,p.a.createElement(y.a,a)),!a&&p.a.createElement(p.a.Fragment,null,p.a.createElement(x.Main,{style:{paddingBottom:"0"}},p.a.createElement(T.Card,null,p.a.createElement(At,{style:{paddingBottom:"0",paddingTop:"0"}},p.a.createElement("h2",null,p.a.createElement(C.a,{style:{marginRight:"10px"}}),"Filter"),p.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},p.a.createElement(_.FormSelect,{name:"sortOrder",value:P,onChange:function(t){W(t),Z(t),function(t){tt("count:asc"===t||"count:desc"===t?5:200)}(t)},"aria-label":"Select Cluster",style:{margin:"2px 10px"}},Ft.map(function(t,e){var a=t.value,n=t.label,r=t.disabled;return p.a.createElement(O.FormSelectOption,{isDisabled:r,key:e,value:a,label:n})})),p.a.createElement(_.FormSelect,{name:"timeframe",value:L,onChange:function(t){F(+t),Q(),X(+t)},"aria-label":"Select Date Range",style:{margin:"2px 10px"}},Lt.map(function(t,e){return p.a.createElement(O.FormSelectOption,{isDisabled:t.disabled,key:e,value:t.value,label:t.label})})))))),p.a.createElement(x.Main,null,p.a.createElement(Rt,null,p.a.createElement(At,null,p.a.createElement("h2",null,"Organization Status")),p.a.createElement(w.CardBody,null,H&&p.a.createElement(b.a,null),!H&&B.length<=0&&p.a.createElement(v.a,null),!H&&B.length>0&&p.a.createElement(Tt,{margin:{top:20,right:20,bottom:50,left:50},id:"d3-grouped-bar-chart-root",data:B,timeFrame:L}))),p.a.createElement(It,null,p.a.createElement(T.Card,null,p.a.createElement(w.CardBody,{style:{padding:0}},p.a.createElement(At,{style:{padding:0}},p.a.createElement("h2",{style:{marginLeft:"20px"}},"Job Runs by Organization")),H&&p.a.createElement(b.a,null),!H&&c.length<=0&&p.a.createElement(v.a,null),!H&&c.length>0&&p.a.createElement(St,{margin:{top:20,right:20,bottom:0,left:20},id:"d3-donut-1-chart-root",data:c,timeFrame:L}))),p.a.createElement(T.Card,null,p.a.createElement(w.CardBody,{style:{padding:0}},p.a.createElement(At,{style:{padding:0}},p.a.createElement("h2",{style:{marginLeft:"20px"}},"Usage by Organization (Tasks)")),H&&p.a.createElement(b.a,null),!H&&h.length<=0&&p.a.createElement(v.a,null),!H&&h.length>0&&p.a.createElement(St,{margin:{top:20,right:20,bottom:0,left:20},id:"d3-donut-2-chart-root",data:h,timeFrame:L})))))))}},529:function(t,e,a){"use strict";a.r(e);var n=a(13),r=a.n(n),i=a(23),l=a.n(i),o=a(74),s=a.n(o),c=a(124),u=a.n(c),d=a(71),p=a.n(d),m=a(1),f=a.n(m),h=a(64),g=a.n(h),b=a(72),v=a(99),y=a(79),E=a(107),x=a(101),j=a(93),T=a(5),w=a(87),k=a(63),_=a(61),O=a(102),S=a(96),C=a(97),D=a(110),B=a(112),A=a(113),I=a(329),R=a(488),L=a(171),F=a(62),M=a(105),z=a(489),P=a.n(z),W=a(123),Y=a.n(W),U=a(490),N=a.n(U),q=a(491),J=a.n(q),V=a(492),H=a.n(V),G=a(20),$=a.n(G),K=a(21),Q=a.n(K),X=a(39),Z=a.n(X),tt=a(22),et=a.n(tt),at=a(18),nt=a.n(at),rt=a(19),it=a.n(rt),lt=a(91),ot=a.n(lt),st=a(0),ct=a.n(st),ut=a(90),dt=a(106),pt=function(){function t(e){var a=this;nt()(this,t),ot()(this,"handleMouseOver",function(t){var e,n,r,i,l=ut.s("#d3-roi-chart-root").node().scrollLeft,o=ut.g.pageX-ut.s(a.svg).node().getBoundingClientRect().x+10+l,s=ut.g.pageY-ut.s(a.svg).node().getBoundingClientRect().y-30;if(t){n=a.formatDollars(t.delta),e=t.name,r=a.formatDollars(t.calculations[0].cost),i=a.formatDollars(t.calculations[1].cost);var c=a.toolTipBase.node().getBoundingClientRect().width,u=ut.s(a.svg+"> svg").node().getBoundingClientRect().width,d=100-c/u*100<o/u*100;a.name.text(""+e),a.savings.text("Total savings $"+n),a.manualCost.text("Manual Cost $"+r),a.automationCost.text("Automation Cost $"+i),a.nameWidth=a.name.node().getComputedTextLength(),a.savingsWidth=a.savings.node().getComputedTextLength(),a.manualCostWidth=a.manualCost.node().getComputedTextLength(),a.automationCostWidth=a.automationCost.node().getComputedTextLength(),a.widestTextElem=ut.l([a.nameWidth,a.savingsWidth,a.automationCostWidth,a.manualCostWidth]);var p,m=a.widestTextElem/a.boxWidth*100,f=m/85;p=m>85?a.boxWidth*f:a.boxWidth,a.boundingBox.attr("width",p),a.toolTipBase.attr("transform","translate("+o+","+s+")"),d?(a.toolTipPoint.attr("transform","translate(-20, 15) rotate(45)"),a.boundingBox.attr("x",-p-20),a.name.attr("x",-(c-7)),a.savings.attr("x",-(c-7)),a.manualCost.attr("x",-(c-7)),a.automationCost.attr("x",-(c-7))):(a.toolTipPoint.attr("transform","translate(10, 15) rotate(45)"),a.boundingBox.attr("x",10),a.name.attr("x",20),a.savings.attr("x",20),a.manualCost.attr("x",20),a.automationCost.attr("x",20)),a.toolTipBase.style("opacity",1),a.toolTipBase.interrupt()}}),ot()(this,"handleMouseOut",function(){a.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")}),this.svg=e.svg,this.draw()}return it()(t,[{key:"formatDollars",value:function(t){return parseFloat(t).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"draw",value:function(){this.width=125,this.toolTipBase=ut.s(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=125,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, 0) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",92).attr("width",this.boxWidth).attr("fill","#393f44"),this.name=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",-2).text("Template name"),this.savings=this.toolTipBase.append("text").attr("x",20).attr("y",52).attr("font-size",12).attr("font-weight","bold").attr("fill","white").text("Total savings $0"),this.manualCost=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",16).text("Manual cost $0"),this.automationCost=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",34).text("Automation cost $0")}}]),t}(),mt=function(t){function e(t){var a;return nt()(this,e),(a=$()(this,Q()(e).call(this,t))).init=a.init.bind(Z()(a)),a.draw=a.draw.bind(Z()(a)),a.resize=a.resize.bind(Z()(a)),a.state={timeout:null},a}return et()(e,t),it()(e,[{key:"resize",value:function(){var t=this,e=this.state.timeout;clearTimeout(e),this.setState({timeout:setTimeout(function(){t.init()},500)})}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){var t=ut.q(["#0066CC"]);ut.t("#"+this.props.id+" > *").remove();var e,a=this.props,n=a.data,r=a.selected,i=n.filter(function(t){var e=t.id;return!r.includes(e)});(i.forEach(function(t){t.calculations.forEach(function(e){e.name=t.name})}),i.length>=15)?e=ut.s(".automation-wrapper").node().getBoundingClientRect().width-this.props.margin.left-this.props.margin.right:e=this.props.getWidth();var l,o=this.props.getHeight(),s=ut.o().rangeRound([0,e]).padding(.45),c=ut.p().range([o,0]);l=i.map(function(t){return t.name});var u=ut.i(".2s"),d=ut.b(s).tickValues(l),p=ut.c(c).ticks(8).tickFormat(function(t){return u(t).replace("G","B")}).tickSize(-e,0,0),m=ut.s("#"+this.props.id).append("svg").attr("width",e+this.props.margin.left+this.props.margin.right).attr("height",o+this.props.margin.bottom+this.props.margin.top).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),f=i.map(function(t){return t.name}),h=new pt({svg:"#"+this.props.id});s.domain(f),c.domain([0,ut.l(i,function(t){return 1.15*t.delta})||8]),m.append("g").attr("class","y axis").call(p).selectAll("line").attr("stroke","#d7d7d7").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-weight","bold").text("Value"),m.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-o/2).attr("dy","1em").style("text-anchor","middle").text("Savings per template ($)"),m.append("g").attr("class","x-axis").attr("transform","translate(0,"+o+")").call(d).selectAll("text").style("text-anchor","start").attr("dx","0.75em").attr("dy",-s.bandwidth()/1.45-8).attr("transform","rotate(-90)"),m.selectAll(".x-axis line").attr("stroke","transparent"),m.selectAll(".bar").data(i).enter().append("rect").attr("x",function(t){return s(t.name)}).attr("width",s.bandwidth()).attr("y",function(t){return c(t.delta)}).style("fill",function(e){return t(e.type)}).attr("height",function(t){return o-c(t.delta)}).on("mouseover",function(e){ut.s(this).style("fill",ut.n(t(e.type)).darker(1)),h.handleMouseOver(e)}).on("mousemove",h.handleMouseOver).on("mouseout",function(e){ut.s(this).style("fill",t(e.type)),h.handleMouseOut()})}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){var t=this.state.timeout;clearTimeout(t),window.removeEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"render",value:function(){return f.a.createElement("div",{id:this.props.id})}}]),e}(m.Component);mt.propTypes={id:ct.a.string,data:ct.a.array,selected:ct.a.array,margin:ct.a.object,getHeight:ct.a.func,getWidth:ct.a.func};var ft=Object(dt.a)(mt),ht=a(75);function gt(){var t=p()(["\n  flex: 2;\n  display: flex;\n  flex-direction: column;\n"]);return gt=function(){return t},t}function bt(){var t=p()(["\n  flex: 5;\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n"]);return bt=function(){return t},t}function vt(){var t=p()(["\n  display: grid;\n  grid-template-columns: 5fr 2fr;\n  height: 100%;\n"]);return vt=function(){return t},t}function yt(){var t=p()(["\n  & svg {\n    fill: var(--pf-global--Color--dark-200);\n\n    :hover {\n      cursor: pointer;\n    }\n\n    :first-of-type {\n      margin-right: 10px;\n      margin-left: 10px;\n\n      @media (max-width: 1350px) {\n        margin-left: 0;\n      }\n    }\n  }\n"]);return yt=function(){return t},t}function Et(){var t=p()(["\n  p {\n    text-align: left;\n  }\n"]);return Et=function(){return t},t}function xt(){var t=p()(["\n  color: var(--pf-global--Color--dark-200);\n"]);return xt=function(){return t},t}function jt(){var t=p()(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  div,\n  em {\n    padding-right: 5px;\n  }\n\n  @media (max-width: 1490px) {\n    display: block;\n\n    em {\n      padding: 10px 0;\n      display: block;\n    }\n  }\n"]);return jt=function(){return t},t}function Tt(){var t=p()(["\n  flex: 1;\n"]);return Tt=function(){return t},t}function wt(){var t=p()(["\n  border-bottom: 2px solid #ebebeb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  &&& {\n    min-height: 60px;\n    --pf-c-card--first-child--PaddingTop: 10px;\n    --pf-c-card__header--not-last-child--PaddingBottom: 10px;\n\n    h3 {\n      font-size: 0.875em;\n    }\n  }\n"]);return wt=function(){return t},t}a.d(e,"formatData",function(){return Nt}),a.d(e,"updateData",function(){return qt}),a.d(e,"handleManualTimeChange",function(){return Jt}),a.d(e,"formatSelectedIds",function(){return Vt}),a.d(e,"handleToggle",function(){return Ht}),a.d(e,"computeTotalSavings",function(){return Gt}),a.d(e,"floatToStringWithCommas",function(){return $t}),a.d(e,"filterDataBySelectedIds",function(){return Kt}),a.d(e,"setTemplatesIsActive",function(){return Qt});var kt=Object(b.a)(D.CardTitle)(wt()),_t=3600,Ot=20,St=50,Ct=b.a.div(Tt()),Dt=b.a.div(jt()),Bt=b.a.em(xt()),At=b.a.div(Et()),It=b.a.div(yt()),Rt=b.a.div(vt()),Lt=b.a.div(bt()),Ft=b.a.div(gt()),Mt=g()().subtract(1,"year"),zt=g()().startOf("year"),Pt=g()().startOf("quarter"),Wt=g()().subtract(1,"month"),Yt=[{value:"please choose",label:"Select date range",disabled:!0},{value:Mt.format("YYYY-MM-DD"),label:"Past year",disabled:!1},{value:zt.format("YYYY-MM-DD"),label:"Past year to date",disabled:!1},{value:Pt.format("YYYY-MM-DD"),label:"Past quarter",disabled:!1},{value:Wt.format("YYYY-MM-DD"),label:"Past month",disabled:!1}],Ut={startDate:Mt.format("YYYY-MM-DD"),endDate:g()().format("YYYY-MM-DD")},Nt=function(t,e){return t.reduce(function(t,a){var n=a.name,r=a.template_id,i=a.successful_run_count,l=a.successful_elapsed_sum,o=a.successful_host_run_count_avg,s=a.successful_host_run_count,c=a.elapsed_sum,u=a.failed_elapsed_sum,d=a.orgs,p=a.clusters,m=a.template_automation_percentage;return t.push({name:n,id:r,run_count:i,host_count:o||0,successful_host_run_count:s,delta:0,isActive:!0,calculations:[{type:"Manual",avg_run:e.defaultAvgRunVal,cost:0},{type:"Automated",avg_run:l||0,cost:0}],orgs:d,clusters:p,elapsed_sum:c,failed_elapsed_sum:u,successful_elapsed_sum:l,template_automation_percentage:m}),t},[])},qt=function(t,e,a){var n=u()(a);return n.map(function(a){a.id===e&&(a.calculations[0].avg_run=t,a.calculations[0].total=t*a.successful_host_run_count)}),n},Jt=function(t){return Object(ht.c)(t)},Vt=function(t,e){return t.includes(e)?u()(t).filter(function(t){return t!==e}):[].concat(u()(t),[e])},Ht=function(t,e){var a=u()(e);return Vt(a,t)},Gt=function(t,e,a){var n,r,i=0;return u()(t).forEach(function(t){n=Object(ht.d)(t.successful_elapsed_sum)*e,r=Object(ht.d)(t.calculations[0].avg_run)*t.successful_host_run_count*a,i+=Object(ht.a)(n,r),t.delta=Object(ht.a)(n,r),t.calculations[0].cost=r,t.calculations[1].cost=n}),i},$t=function(t){return t.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},Kt=function(t,e){return t.filter(function(t){var a=t.id;return!e.includes(a)})},Qt=function(t,e){return t.map(function(t){e.includes(t.id)?t.isActive=!1:t.isActive=!0}),t};e.default=function(t){var e=t.history,a=Object(m.useState)(!0),n=s()(a,2),i=n[0],o=n[1],c=Object(m.useState)(St),u=s()(c,2),d=u[0],p=u[1],h=Object(m.useState)(Ot),g=s()(h,2),b=g[0],z=g[1],W=Object(m.useState)(0),U=s()(W,2),q=U[0],V=U[1],G=Object(m.useState)([]),$=s()(G,2),K=$[0],Q=$[1],X=Object(m.useState)([]),Z=s()(X,2),tt=Z[0],et=Z[1],at=Object(m.useState)([]),nt=s()(at,2),rt=nt[0],it=nt[1],lt=Object(m.useState)([]),ot=s()(lt,2),st=ot[0],ct=ot[1],ut=Object(m.useState)(null),dt=s()(ut,2),pt=dt[0],mt=dt[1],gt=Object(m.useState)(Yt[1].value),bt=s()(gt,2),vt=bt[0],yt=bt[1],Et=Object(v.a)(Ut),xt=Et.queryParams,jt=Et.setStartDateAsString;Object(m.useEffect)(function(){var t=Gt(tt,b,d),e=$t(t);V("$"+e)},[tt,b,d]),Object(m.useEffect)(function(){var t=Kt(K,st);Qt(rt,st),et(t)},[st]),Object(m.useEffect)(function(){var t=!1,e=function(){return Object(j.k)({params:xt}).catch(function(){return[]})};function a(){return(a=l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),a.next=3,window.insights.chrome.auth.getUser();case 3:return a.next=5,Object(j.a)().catch(function(t){mt({preflightError:t})});case 5:e().then(function(e){var a=e.templates;if(!t){var n=Nt(void 0===a?[]:a,{defaultAvgRunVal:_t,defaultCostAutomation:Ot,defaultCostManual:St});Q(n),et(n),it(n),o(!1)}});case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return t=!0}},[xt]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(_.PageHeader,{style:{flex:"0"}},f.a.createElement(_.PageHeaderTitle,{title:"Automation Calculator"})),pt&&f.a.createElement(k.Main,null,f.a.createElement(S.Card,null,f.a.createElement(C.CardBody,null,f.a.createElement(x.a,pt)))),!pt&&f.a.createElement(f.a.Fragment,null,f.a.createElement(k.Main,{style:{paddingBottom:"0"}},f.a.createElement(S.Card,null,f.a.createElement(kt,{style:{paddingBottom:"0",paddingTop:"0"}},f.a.createElement("h2",null,f.a.createElement(Y.a,{style:{marginRight:"10px"}}),"Filter"),f.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},f.a.createElement(B.FormSelect,{name:"roiTimeFrame",value:vt,onChange:function(t){jt(t),yt(t)},"aria-label":"Select Date Range",style:{margin:"2px 10px"}},Yt.map(function(t,e){return f.a.createElement(A.FormSelectOption,{isDisabled:t.disabled,key:e,value:t.value,label:t.label})})))))),f.a.createElement(Rt,{className:"automation-wrapper"},f.a.createElement(Lt,null,f.a.createElement(k.Main,{style:{paddingBottom:"0"}},f.a.createElement(S.Card,null,f.a.createElement(D.CardTitle,null,"Automation savings"),f.a.createElement(C.CardBody,null,i&&!pt&&f.a.createElement(y.a,null),!i&&tt.length<=0&&f.a.createElement(E.a,null),tt.length>0&&!i&&f.a.createElement(f.a.Fragment,null,f.a.createElement(ft,{margin:{top:20,right:20,bottom:20,left:70},id:"d3-roi-chart-root",data:tt,selected:st}),f.a.createElement("p",{style:{textAlign:"center"}},"Templates"))))),f.a.createElement(k.Main,null,f.a.createElement(S.Card,{style:{height:"100%"}},f.a.createElement(D.CardTitle,null,"Automation formula"),f.a.createElement(C.CardBody,null,f.a.createElement("p",null,f.a.createElement("b",null,"Manual cost for template x")," =",f.a.createElement("em",null,"(time for a manual run on one host * (sum of all hosts across all job runs) ) * cost per hour")),f.a.createElement("p",null,f.a.createElement("b",null,"Automation cost for template x")," =",f.a.createElement("em",null,"cost of automation per hour * sum of total elapsed hours for a template")),f.a.createElement("p",null,f.a.createElement("b",null,"Savings")," =",f.a.createElement("em",null,"Sum of (manual cost - automation cost) across all templates")))))),f.a.createElement(Ft,null,f.a.createElement(k.Main,{style:{paddingBottom:"0",paddingLeft:"0"}},f.a.createElement(S.Card,null,f.a.createElement(D.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),f.a.createElement(C.CardBody,null,f.a.createElement(F.Title,{headingLevel:"h3",size:"3xl",style:{color:"var(--pf-global--success-color--200)"}},q)))),f.a.createElement(k.Main,{style:{paddingBottom:"0",paddingLeft:"0"}},f.a.createElement(S.Card,null,f.a.createElement(D.CardTitle,{style:{paddingBottom:"10px"}},"Calculate your automation"),f.a.createElement(C.CardBody,null,f.a.createElement(Ct,null,f.a.createElement("p",null,"Manual cost of automation"),f.a.createElement("em",{style:{color:"var(--pf-global--Color--dark-200)"}},"(e.g. average salary of mid-level SE)"),f.a.createElement(I.InputGroup,{style:{width:"50%"}},f.a.createElement(R.InputGroupText,null,f.a.createElement(P.a,null)),f.a.createElement(L.TextInput,{id:"manual-cost",type:"number",step:"any",min:"0","aria-label":"manual-cost",value:parseFloat(d),onChange:function(t){return p(t)}}),f.a.createElement(R.InputGroupText,null,"/hr"))),f.a.createElement(Ct,{style:{paddingTop:"10px"}},f.a.createElement("p",null,"Automated process cost"),f.a.createElement(I.InputGroup,{style:{width:"50%"}},f.a.createElement(R.InputGroupText,null,f.a.createElement(P.a,null)),f.a.createElement(L.TextInput,{id:"automation-cost",type:"number",step:"any",min:"0","aria-label":"automation-cost",value:parseFloat(b),onChange:function(t){return z(t)}}),f.a.createElement(R.InputGroupText,null,"/hr")))))),f.a.createElement(k.Main,{style:{display:"flex",flexDirection:"column",flex:"1 1 0",paddingLeft:"0"}},f.a.createElement(S.Card,{style:{overflow:"auto",flex:"1 1 0"}},f.a.createElement(D.CardTitle,null,"Top templates"),f.a.createElement(C.CardBody,null,f.a.createElement("p",null,"Enter the time it takes to manually perform the tasks that the following templates automate."),rt.map(function(t){return f.a.createElement("div",{key:t.id},f.a.createElement(M.Tooltip,{content:"Click for list of jobs in the past month"},f.a.createElement(O.Button,{style:{padding:"15px 0 10px"},component:"a",onClick:function(){return function(t){var a=T.a.jobExplorer,n={template_id:t,status:["successful"],job_type:["job"],quick_date_range:"last_30_days"},r=Object(w.a)(n),i=r.strings,l=(0,r.stringify)(i);e.push({pathname:a,search:l})}(t.id)},variant:"link"},t.name)),f.a.createElement(Dt,null,f.a.createElement(Ct,{key:t.id},f.a.createElement(I.InputGroup,null,f.a.createElement(L.TextInput,{id:t.id,type:"number","aria-label":"time run manually",value:Object(ht.e)(t.calculations[0].avg_run),onChange:function(e){var a=Jt(e),n=qt(a,t.id,tt);et(n)},isDisabled:!t.isActive}),f.a.createElement(R.InputGroupText,null,"min"))),f.a.createElement(Bt,null,"x ",t.run_count," runs, ",t.host_count," hosts"),f.a.createElement(It,null,f.a.createElement(M.Tooltip,{position:M.TooltipPosition.top,entryDelay:50,exitDelay:50,content:f.a.createElement(At,null,f.a.createElement("p",null,f.a.createElement("b",null,"Total elapsed sum"),":"," ",t.elapsed_sum.toFixed(2),"s"),f.a.createElement("p",null,f.a.createElement("b",null,"Success elapsed sum"),":"," ",t.successful_elapsed_sum.toFixed(2),"s"),f.a.createElement("p",null,f.a.createElement("b",null,"Failed elapsed sum"),":"," ",t.failed_elapsed_sum.toFixed(2),"s"),f.a.createElement("p",null,f.a.createElement("b",null,"Automation percentage"),":"," ",Object(ht.j)(t.template_automation_percentage.toFixed(2))),f.a.createElement("p",null,f.a.createElement("b",null,"Associated organizations"),":"," ",f.a.createElement("span",{key:t.id},Object(ht.f)(t.orgs,"org_name"))),f.a.createElement("p",null,f.a.createElement("b",null,"Associated clusters"),":"," ",f.a.createElement("span",{key:t.id},Object(ht.f)(t.clusters,"cluster_name"))))},f.a.createElement(N.a,null)),!0===t.isActive&&f.a.createElement(J.a,{onClick:function(){var e=Ht(t.id,st);ct(e)}}),!1===t.isActive&&f.a.createElement(H.a,{onClick:function(){var e=Ht(t.id,st);ct(e)}}))),f.a.createElement("p",{style:{color:"#486B00"}},"$",t.delta.toFixed(2)))}))))))))}},530:function(t,e,a){"use strict";a.r(e);var n=a(13),r=a.n(n),i=a(23),l=a.n(i),o=a(74),s=a.n(o),c=a(71),u=a.n(c),d=a(1),p=a.n(d),m=a(99),f=a(72),h=a(79),g=a(101),b=a(107),v=a(93),y=a(63),E=a(61),x=a(96),j=a(97),T=a(110),w=a(112),k=a(113),_=a(471),O=a(125),S=a(0),C=a.n(S),D=a(324),B=a(467),A=a(455),I=a.n(A),R=a(75);function L(){var t=u()(["\n  margin-left: 7px;\n"]);return L=function(){return t},t}var F=Object(f.a)(I.a)(L()),M=function(t){return t.notifications.map(function(t){var e=t.date,a=t.message,n=t.label,r=t.notification_id,i=t.tower_url;return""===n||"notice"===n?p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.default,isInline:!0,key:e+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},a," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(F,null)):null):"error"===n?p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.danger,isInline:!0,key:e+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},a," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(F,null)):null):"warning"===n?p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.warning,isInline:!0,key:e+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},a," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(F,null)):null):void 0})},z=function(t){return t.notifications.filter(function(t){return"error"===t.label}).map(function(t){var e=t.message,a=t.date,n=t.label,r=t.notification_id,i=t.tower_url;return p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.danger,isInline:!0,key:a+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},e," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(F,null)):null)})},P=function(t){return t.notifications.filter(function(t){return"notice"===t.label}).map(function(t){var e=t.message,a=t.date,n=t.label,r=t.notification_id,i=t.tower_url;return p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.default,isInline:!0,key:a+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},e," ",i?p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(F,null)):null)})},W=function(t){return t.notifications.filter(function(t){return"warning"===t.label}).map(function(t){var e=t.message,a=t.date,n=t.label,r=t.notification_id,i=t.tower_url;return p.a.createElement(D.Alert,{title:Object(R.b)(n),variant:D.AlertVariant.warning,isInline:!0,key:a+"-"+r,style:{marginTop:"var(--pf-c-alert-group__item--MarginTop)"}},e," ",p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},p.a.createElement(F,null)))})},Y=function(t){var e=t.filterBy,a=t.notifications;return p.a.createElement(p.a.Fragment,null,p.a.createElement(B.AlertGroup,null,a.length<=0&&p.a.createElement(h.a,null),""===e&&p.a.createElement(M,{notifications:a}),"notice"===e&&p.a.createElement(P,{notifications:a}),"error"===e&&p.a.createElement(z,{notifications:a}),"warning"===e&&p.a.createElement(W,{notifications:a})))};M.propTypes={notifications:C.a.array},z.propTypes={notifications:C.a.array},W.propTypes={notifications:C.a.array},Y.propTypes={notifications:C.a.array,filterBy:C.a.string};var U=Y;function N(){var t=u()(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n\n  select {\n    margin: 0 10px;\n    width: 150px;\n\n    @media screen and (max-width: 1035px) {\n      margin: 10px 10px 0 0;\n    }\n\n    @media screen and (max-width: 865px) {\n      width: 100%;\n    }\n  }\n"]);return N=function(){return t},t}function q(){var t=u()(["\n  display: flex;\n  align-items: center;\n\n  h2 {\n    margin-right: 10px;\n  }\n"]);return q=function(){return t},t}function J(){var t=u()(["\n  display: flex;\n  justify-content: space-between;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n"]);return J=function(){return t},t}var V=Object(f.a)(T.CardTitle)(J()),H=f.a.div(q()),G=f.a.div(N()),$=[{value:"please choose",label:"Select Notification Severity",disabled:!0},{value:"error",label:"View Critical",disabled:!1},{value:"warning",label:"View Warning",disabled:!1},{value:"notice",label:"View Notice",disabled:!1},{value:"",label:"View All",disabled:!1}],K=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}];function Q(t){return t.reduce(function(t,e){var a=e.label,n=e.cluster_id,r=e.install_uuid;return 0===a.length?t.push({value:n,label:r,disabled:!1}):t.push({value:n,label:a,disabled:!1}),t},[{value:"please choose",label:"Select cluster",disabled:!0},{value:"",label:"All Clusters",disabled:!1},{value:-1,label:"Unassociated",disabled:!1}])}var X={limit:5,offset:0};e.default=function(){var t=Object(d.useState)(null),e=s()(t,2),a=e[0],n=e[1],i=Object(d.useState)([]),o=s()(i,2),c=o[0],u=o[1],f=Object(d.useState)([]),T=s()(f,2),S=T[0],C=T[1],D=Object(d.useState)(""),B=s()(D,2),A=B[0],I=B[1],R=Object(d.useState)(!0),L=s()(R,2),F=L[0],M=L[1],z=Object(d.useState)(!0),P=s()(z,2),W=P[0],Y=P[1],N=Object(d.useState)({}),q=s()(N,2),J=q[0],Z=q[1],tt=Object(d.useState)(1),et=s()(tt,2),at=et[0],nt=et[1],rt=Object(m.a)(X),it=rt.queryParams,lt=rt.setId,ot=rt.setLimit,st=rt.setOffset,ct=rt.setSeverity;Object(d.useEffect)(function(){F||function(){var t=l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Y(!0),t.next=3,window.insights.chrome.auth.getUser();case 3:Object(v.j)({params:it}).then(function(t){var e=t.notifications,a=void 0===e?[]:e,n=t.meta;u(a),Z(n),Y(!1)});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[it]),Object(d.useEffect)(function(){var t=!1,e=function(){return Promise.all([Object(v.c)(),Object(v.j)({params:it})].map(function(t){return t.catch(function(){return[]})}))};function a(){return(a=l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Y(!0),a.next=3,window.insights.chrome.auth.getUser();case 3:return a.next=5,Object(v.a)().catch(function(t){n({preflightError:t})});case 5:e().then(function(e){var a=s()(e,2),n=a[0].templates,r=void 0===n?[]:n,i=a[1],l=i.notifications,o=void 0===l?[]:l,c=i.meta;if(!t){var d=Q(r);C(d),u(o),Z(c),M(!1),Y(!1)}});case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return t=!0}},[]);var ut=function(t){return(t-1)*it.limit};return p.a.createElement(p.a.Fragment,null,p.a.createElement(E.PageHeader,null,p.a.createElement(E.PageHeaderTitle,{title:"Notifications"})),a&&p.a.createElement(y.Main,null,p.a.createElement(g.a,a)),!a&&p.a.createElement(p.a.Fragment,null,p.a.createElement(y.Main,null,p.a.createElement(x.Card,null,p.a.createElement(V,null,p.a.createElement(H,null,p.a.createElement("h2",null,p.a.createElement("strong",null,"Notifications")),p.a.createElement(_.Badge,{isRead:!0},J.count?J.count:0)),p.a.createElement(G,null,p.a.createElement(w.FormSelect,{name:"selectedCluster",value:A,onChange:function(t){I(t),lt(t),st(0),nt(1)},"aria-label":"Select Cluster"},S.map(function(t,e){var a=t.value,n=t.label,r=t.disabled;return p.a.createElement(k.FormSelectOption,{isDisabled:r,key:e,value:a,label:n})})),p.a.createElement(w.FormSelect,{name:"selectedNotification",value:it.severity||"",onChange:function(t){ct(t),st(0),nt(1)},"aria-label":"Select Notification Type"},$.map(function(t,e){var a=t.disabled,n=t.value,r=t.label;return p.a.createElement(k.FormSelectOption,{isDisabled:a,key:e,value:n,label:r})})))),p.a.createElement(j.CardBody,null,W&&p.a.createElement(h.a,null),!W&&c.length<=0&&p.a.createElement(b.a,null),!W&&c.length>0&&p.a.createElement(p.a.Fragment,null,p.a.createElement(U,{filterBy:it.severity||"",options:$,notifications:c}),p.a.createElement(O.Pagination,{itemCount:J.count?J.count:0,widgetId:"pagination-options-menu-bottom",perPageOptions:K,perPage:it.limit,page:at,variant:O.PaginationVariant.bottom,dropDirection:"up",onPerPageSelect:function(t,e,a){!function(t,e){ot(t);var a=ut(e);st(a),nt(e)}(e,a)},onSetPage:function(t,e){!function(t){var e=ut(t);st(e),nt(t)}(e)},style:{marginTop:"20px"}})))))))}},75:function(t,e,a){"use strict";a.d(e,"m",function(){return l}),a.d(e,"h",function(){return o}),a.d(e,"g",function(){return s}),a.d(e,"k",function(){return c}),a.d(e,"l",function(){return u}),a.d(e,"j",function(){return d}),a.d(e,"b",function(){return p}),a.d(e,"a",function(){return m}),a.d(e,"e",function(){return f}),a.d(e,"c",function(){return h}),a.d(e,"d",function(){return g}),a.d(e,"f",function(){return b}),a.d(e,"i",function(){return v});var n=a(64),r=a.n(n);function i(t){return 0===t||"0"===t||(!!parseInt(t)||!!parseFloat(t))}function l(t){return t.toString().replace(/['"]+/g,"")}function o(t){return r()(new Date(t).toISOString()).format("M/D/YYYY h:mm:ssa")}function s(t){return r()(t).format("YYYY-MM-DD")}function c(t){return r()().startOf("day").seconds(t).format("H:mm:ss")}function u(t){if(t){var e=0;return t.forEach(function(t){e+=parseInt(t.count)}),e}}function d(t){if(!isNaN(t))return"".concat(t,"%")}var p=function(t){return"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)};function m(t,e){return i(t)&&i(e)?e-t<0?0:e-t:0}function f(t){return parseInt(t)?t/60:0}function h(t){return!parseInt(t)||parseInt(t)<0?0:60*+parseInt(t)}function g(t){return parseInt(t)?t/3600:0}function b(t,e){return t.reduce(function(t,a){return t.push(a[e]),t},[]).join(", ")}function v(t){return"job"===t?"Playbook run":"Workflow job"}},79:function(t,e,a){"use strict";var n=a(1),r=a.n(n),i=a(62),l=a(76),o=a(100),s=a(115),c=a(302),u=a.n(c);e.a=function(){return r.a.createElement(l.EmptyState,{variant:l.EmptyStateVariant.full},r.a.createElement(o.EmptyStateIcon,{icon:u.a}),r.a.createElement(i.Title,{headingLevel:"h5",size:"lg"},"Loading..."),r.a.createElement(s.EmptyStateBody,null,"Please wait."))}},87:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var n=a(403),r=function(t){var e=t.attributes,a=t.end_date,r=t.start_date,i=t.limit,l=t.offset,o=t.job_type,s=t.status,c=t.org_id,u=t.cluster_id,d=t.template_id,p=t.sort_by,m=t.only_root_workflows_and_standalone_jobs,f=t.quick_date_range,h={},g=function(t){return Array.isArray(t)?t.map(function(t){return"attributes[]=".concat(encodeURIComponent(t))}).join("&"):"attributes[]=".concat(encodeURIComponent(t))},b=function(t){return Array.isArray(t)?t.map(function(t){return"status[]=".concat(encodeURIComponent(t))}).join("&"):"status[]=".concat(encodeURIComponent(t))},v=function(t){return Array.isArray(t)?t.map(function(t){return"job_type[]=".concat(encodeURIComponent(t))}).join("&"):"job_type[]=".concat(encodeURIComponent(t))},y=function(t){return Array.isArray(t)?t.map(function(t){return"org_id[]=".concat(encodeURIComponent(t))}).join("&"):"org_id[]=".concat(encodeURIComponent(t))},E=function(t){return Array.isArray(t)?t.map(function(t){return"cluster_id[]=".concat(encodeURIComponent(t))}).join("&"):"cluster_id[]=".concat(encodeURIComponent(t))},x=function(t){return Array.isArray(t)?t.map(function(t){return"template_id[]=".concat(encodeURIComponent(t))}).join("&"):"template_id[]=".concat(encodeURIComponent(t))},j=function(t){return Array.isArray(t)?t.map(function(t){return"sort_by=".concat(encodeURIComponent(t))}).join("&"):"sort_by=".concat(encodeURIComponent(t))},T=function(t){return"start_date=".concat(encodeURIComponent(t))},w=function(t){return"end_date=".concat(encodeURIComponent(t))},k=function(t){return"limit=".concat(encodeURIComponent(t))},_=function(t){return"offset=".concat(encodeURIComponent(t))},O=function(t){return"only_root_workflows_and_standalone_jobs=".concat(encodeURIComponent(t))},S=function(t){return"quick_date_range=".concat(encodeURIComponent(t))};return e&&(h.attributes=g(e)),r&&(h.start_date=T(r)),a&&(h.end_date=w(a)),i&&(h.limit=k(i)),l>=0&&(h.offset=_(l)),o&&(h.job_type=v(o)),s&&(h.status=b(s)),c&&(h.org_id=y(c)),u&&(h.cluster_id=E(u)),d&&(h.template_id=x(d)),p&&(h.sort_by=j(p)),void 0!==m&&(h.only_root_workflows_and_standalone_jobs=O(m)),f&&(h.quick_date_range=S(f)),{strings:h,stringify:function(t){return Object.keys(t).map(function(e){return t[e]}).join("&")},parse:n.parse,parseStatuses:b,parseJobType:v,parseOrganization:y,parseCluster:E,parseTemplate:x,parseEndDate:w,parseStartDate:T,parseQuickDateRange:S,parseSortBy:j,parseAttrs:g,parseLimit:k,parseOffset:_,parseRootWorkflowsAndJobs:O}}},93:function(t,e,a){"use strict";a.d(e,"l",function(){return b}),a.d(e,"a",function(){return v}),a.d(e,"c",function(){return y}),a.d(e,"b",function(){return E}),a.d(e,"h",function(){return x}),a.d(e,"i",function(){return j}),a.d(e,"m",function(){return T}),a.d(e,"j",function(){return w}),a.d(e,"f",function(){return k}),a.d(e,"e",function(){return _}),a.d(e,"g",function(){return O}),a.d(e,"d",function(){return S}),a.d(e,"k",function(){return C});var n=a(87),r="/api/tower-analytics/".concat("v0","/chart30/"),i="/api/tower-analytics/".concat("v0","/clusters/"),l="/api/tower-analytics/".concat("v0","/jobs_by_date_and_org_30/"),o="/api/tower-analytics/".concat("v0","/modules/"),s="/api/tower-analytics/".concat("v0","/notifications/"),c="/api/tower-analytics/".concat("v0","/job_runs_by_org_30/"),u="/api/tower-analytics/".concat("v0","/job_events_by_org_30/"),d="/api/tower-analytics/".concat("v0","/authorized/"),p="/api/tower-analytics/".concat("v0","/template_jobs/"),m="/api/tower-analytics/".concat("v0","/templates/"),f="/api/tower-analytics/".concat("v0","/roi_templates/");function h(){var t=window.location.href.split("/");return t.pop(),t.join("/")}function g(t){return t.json().then(function(e){return t.ok?e:404===t.status||401===t.status?Promise.reject({status:t.status,message:e}):Promise.reject(e)})}var b=function(t,e){var a=e.params,n=void 0===a?{}:a;if(t){var r=h(),i=new URL(p+t+"/",r);return Object.keys(n).forEach(function(t){return i.searchParams.append(t,n[t])}),fetch(i).then(g)}},v=function(){return fetch(d).then(g)},y=function(){return fetch(i).then(g)},E=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),i=new URL(r,n);return Object.keys(a).forEach(function(t){return i.searchParams.append(t,a[t])}),fetch(i).then(g)},x=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(l,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},j=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(o,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},T=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(m,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},w=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(s,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},k=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL("/api/tower-analytics/v1/job_explorer_options/",n);return fetch(r,{method:"POST",body:JSON.stringify(a)}).then(g)},_=function(t){var e=t.params,a=void 0===e?{}:e,r={limit:a.limit,offset:a.offset,sort_by:a.sort_by},i=Object(n.a)(r),l=i.strings,o=(0,i.stringify)(l),s=h(),c=new URL("/api/tower-analytics/v1/job_explorer/",s);return c.search=o,fetch(c,{method:"POST",body:JSON.stringify(a)}).then(g)},O=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(c,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},S=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(u,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)},C=function(t){var e=t.params,a=void 0===e?{}:e,n=h(),r=new URL(f,n);return Object.keys(a).forEach(function(t){return r.searchParams.append(t,a[t])}),fetch(r).then(g)}},99:function(t,e,a){"use strict";a.d(e,"a",function(){return h});var n=a(91),r=a.n(n),i=a(74),l=a.n(i),o=a(25),s=a.n(o),c=a(301),u=a.n(c),d=a(1),p=a(64),m=a.n(p),f=a(75),h=function(t){var e=Object(d.useReducer)(function(t,e){var a=e.type,n=e.value;switch(a){case"SET_STARTDATE":return u()({},t,{startDate:n});case"SET_ENDDATE":return u()({},t,{endDate:n});case"SET_ID":return parseInt(n)?u()({},t,{id:parseInt(n)}):(t.id,s()(t,["id"]));case"SET_LIMIT":return parseInt(n.limit)?u()({},t,{limit:parseInt(n.limit)}):(t.limit,s()(t,["limit"]));case"SET_OFFSET":case"SET_SEVERITY":case"SET_ATTRIBUTES":case"SET_JOB_TYPE":case"SET_STATUS":case"SET_ORG":case"SET_CLUSTER":case"SET_TEMPLATE":case"SET_SORTBY":case"SET_ROOT_WORKFLOWS_AND_JOBS":return u()({},t,n);case"SET_QUICK_DATE_RANGE":var r=u()({},t);return"custom"!==n&&(r=u()({},r,{startDate:"",endDate:""})),r=u()({},r,n);case"SET_START_DATE":case"SET_END_DATE":var i={};return Object.entries(n).forEach(function(t){var e=l()(t,2),a=e[0],n=e[1];i[a]=Object(f.g)(n)}),u()({},t,i);case"RESET_FILTER":return u()({},t,{status:[],quickDateRange:"",jobType:[],orgId:[],clusterId:[],templateId:[],sortBy:"",startDate:"",endDate:"",onlyRootWorkflowsAndStandaloneJobs:!1});default:throw new Error}},u()({},t)),a=l()(e,2),n=a[0],i=a[1],o={status:"SET_STATUS",quickDateRange:"SET_QUICK_DATE_RANGE",jobType:"SET_JOB_TYPE",orgId:"SET_ORG",clusterId:"SET_CLUSTER",templateId:"SET_TEMPLATE",sortBy:"SET_SORTBY",startDate:"SET_START_DATE",endDate:"SET_END_DATE",onlyRootWorkflowsAndStandaloneJobs:"SET_ROOT_WORKFLOWS_AND_JOBS"};return{queryParams:n,urlMappedQueryParams:function(){var t={};return Object.keys(n).forEach(function(e){if(n[e]){if(Array.isArray(n[e])&&n[e].length<1)return;t[function(t){return t.replace(/[A-Z]/g,function(t){return"_".concat(t.toLowerCase())})}(e)]=n[e]}}),t}(),dispatch:i,setLimit:function(t){return i({type:"SET_LIMIT",value:{limit:t}})},setOffset:function(t){return i({type:"SET_OFFSET",value:{offset:t}})},setSeverity:function(t){return i({type:"SET_SEVERITY",value:{severity:t}})},setFromToolbar:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(t?{type:o[t],value:r()({},t,e)}:{type:"RESET_FILTER"})},setEndDate:function(){var t=m()().format("YYYY-MM-DD");i({type:"SET_ENDDATE",value:t})},setId:function(t){return i({type:"SET_ID",value:t})},setStartDate:function(t){var e;7===t&&(e=m()().subtract(1,"week").format("YYYY-MM-DD")),14===t&&(e=m()().subtract(2,"weeks").format("YYYY-MM-DD")),e=31===t?m()().subtract(1,"month").format("YYYY-MM-DD"):m()().subtract(t,"days").format("YYYY-MM-DD"),i({type:"SET_STARTDATE",value:e})},setStartDateAsString:function(t){return i({type:"SET_STARTDATE",value:t})}}}}}]);
//# sourceMappingURL=automation_analytics.ad2e863412d64a1994e5.js.map