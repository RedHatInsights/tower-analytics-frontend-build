"use strict";(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[674],{23674:(e,t,l)=>{l.r(t),l.d(t,{default:()=>O});var n=l(92950),a=l.n(n),r=l(64631),o=l(77388),u=l(48236),i=l(37384),s=l(9771),c=l(12613),d=l(49148),m=l(35993),E=l(86350),p=l(48716),_=l(39173),v=l(1085),g=l(87462),f=l(70885),h=l(45697),b=l.n(h),y=l(48607),T=l(53345),k=l(62455),Z=l(94592),x=l(91573),S={ok:x.global_palette_green_300.value,passed:x.global_palette_green_300.value,unreachable:x.global_palette_black_400.value,changed:x.global_palette_gold_300.value,failed:x.global_palette_red_100.value,skipped:x.global_palette_blue_300.value},P=function(e){var t,l,r,o,u,i,s,c=e.job,d=(0,n.useState)(!1),m=(0,f.Z)(d,2),E=m[0],p=m[1],_=c?{ok:null!==(t=null==c?void 0:c.ok_host_count)&&void 0!==t?t:0,skipped:null!==(l=null==c?void 0:c.skipped_host_count)&&void 0!==l?l:0,changed:null!==(r=null==c?void 0:c.changed_host_count)&&void 0!==r?r:0,failed:null!==(o=null==c?void 0:c.failed_host_count)&&void 0!==o?o:0,unreachable:null!==(u=null==c?void 0:c.unreachable_host_count)&&void 0!==u?u:0}:null,g=[{label:"Created",value:c.created?(0,T.o0)(c.created):"Unavailable"},{label:"Started",value:c.created?(0,T.o0)(c.started):"Unavailable"},{label:"Finished",value:c.created?(0,T.o0)(c.finished):"Unavailable"},{label:"Tasks",value:null!==(i=c.host_task_count)&&void 0!==i?i:0}];return a().createElement(a().Fragment,null,a().createElement(y.Tr,null,a().createElement(y.Td,{expand:{rowIndex:c.id.id,isExpanded:E,onToggle:function(){p(!E)}}}),a().createElement(y.Td,null,a().createElement("a",{href:c.id.tower_link},"".concat(c.id.id," - ").concat(c.id.template_name))),a().createElement(y.Td,null,a().createElement(k.Z,{status:null==c?void 0:c.status})),a().createElement(y.Td,null,null==c?void 0:c.cluster_name),a().createElement(y.Td,null,null==c?void 0:c.org_name),a().createElement(y.Td,null,(0,T.GV)(null==c?void 0:c.job_type))),a().createElement(y.Tr,{isExpanded:E},a().createElement(y.Td,{colSpan:6},a().createElement(y.ExpandableRowContent,null,a().createElement(v.Flex,null,a().createElement(v.FlexItem,null,a().createElement("strong",null,"Host status")),a().createElement(v.FlexItem,{align:{default:"alignRight"}},a().createElement("strong",null,"Hosts"),"  ",null!==(s=null==c?void 0:c.host_count)&&void 0!==s?s:0)),a().createElement(Z.Z,{categoryCount:_,categoryColor:S,showPercent:!0}),function(e){var t=(0,n.useState)(!1),l=(0,f.Z)(t,2),r=l[0],o=l[1];if(null!=e)return a().createElement(a().Fragment,null,a().createElement("p",null,a().createElement("strong",null,"Top failed tasks")),a().createElement(v.Grid,{hasGutter:!0},e.slice(0,r?e.length:2).map((function(e,t){var l,n,r,o={passed:null!==(l=null==e?void 0:e.passed_host_count)&&void 0!==l?l:0,failed:null!==(n=null==e?void 0:e.failed_host_count)&&void 0!==n?n:0,unreachable:null!==(r=null==e?void 0:e.unreachable_host_count)&&void 0!==r?r:0};return a().createElement(v.GridItem,{lg:6,md:12,key:"most-failed-".concat(t)},a().createElement(v.Flex,null,a().createElement(v.FlexItem,null,a().createElement("strong",null,"Task name ")," ",null==e?void 0:e.task_name),a().createElement(v.FlexItem,{align:{default:"alignRight"}},a().createElement("strong",null,"Module name ")," ",null==e?void 0:e.module_name)),a().createElement(Z.Z,{categoryCount:o,categoryColor:S,showPercent:!0}))}))),e.length>2?function(e,t){return a().createElement(v.Flex,{className:"pf-u-mb-md"},a().createElement(v.FlexItem,{align:{default:"alignRight"}},a().createElement(v.Button,{variant:"secondary",onClick:function(){t(!e)},fullWidth:{default:"fullWidth"}},e?"Show less":"Show more")))}(r,o):null)}(c.most_failed_tasks),a().createElement(v.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},g.map((function(e){var t=e.label,l=e.value;return a().createElement(v.DescriptionListGroup,{key:t},a().createElement(v.DescriptionListTerm,null,t),a().createElement(v.DescriptionListDescription,null,l))})))))))};P.propTypes={job:b().object.isRequired};const C=P;var F=["Id/Name","Status","Cluster","Organization","Type"],q=["Id/Name","Status","Type"],j={0:"id",1:"status",4:"job_type"},I={id:0,status:1,job_type:4},R=function(e){var t=e.jobs,l=e.queryParams,r=e.queryParamsDispatch,o=(0,n.useState)(-1),u=(0,f.Z)(o,2),i=u[0],s=u[1],c=(0,n.useState)("none"),d=(0,f.Z)(c,2),m=d[0],E=d[1];(0,n.useEffect)((function(){(null==l?void 0:l.sort_options)in I?(s(I[l.sort_options]),E(null==l||!l.sort_order||"desc"!==l.sort_order&&"asc"!==l.sort_order?"desc":l.sort_order)):(s(-1),E("none"))}),[l]);var p=function(e,t,l){t!==i&&(s(t),r({type:"SET_SORT_OPTIONS",value:{sort_options:j[t]}})),l!==m&&(E(l),r({type:"SET_SORT_ORDER",value:{sort_order:l}}))};return a().createElement(y.TableComposable,{"aria-label":"Job Explorer Table",variant:"compact"},a().createElement(y.Thead,null,a().createElement(y.Tr,null,a().createElement(y.Th,null),F.map((function(e,t){var l=q.includes(e)?{sort:{sortBy:{index:i,direction:m},onSort:p,columnIndex:t}}:{};return a().createElement(y.Th,(0,g.Z)({key:"col-".concat(t)},l),e)})))),a().createElement(y.Tbody,null,t.map((function(e){return a().createElement(C,{job:e,key:e.id.id})}))))};R.propTypes={jobs:b().array.isRequired,queryParams:b().object.isRequired,queryParamsDispatch:b().func.isRequired};const w=R;var D=l(83474);const O=function(){var e=(0,r.Kx)(m.cY.defaultParams),t=e.queryParams,l=e.setFromPagination,g=e.setFromToolbar,f=e.dispatch,h=(0,o.ZP)(d.ZW,{}),b=h.result,y=h.error,T=h.request,k=(0,o.ZP)(d.Ij,{items:[],meta:{count:0}}),Z=k.result,x=Z.items,S=Z.meta,P=k.isLoading,C=k.isSuccess,F=k.request;return(0,n.useEffect)((function(){T(t),F(t)}),[t]),y?a().createElement(s.Z,{message:y.error.error}):a().createElement(a().Fragment,null,a().createElement(p.Z,null,a().createElement(_.Z,{title:"Job Explorer"})),a().createElement(E.Z,null,a().createElement(v.Card,null,a().createElement(v.CardBody,null,a().createElement(D.Z,{categories:b,filters:t,setFilters:g,pagination:a().createElement(c.Z,{count:S.count,params:{limit:+t.limit,offset:+t.offset},setPagination:l,isCompact:!0}),hasSettings:!0}),P&&a().createElement(u.Z,null),C&&x.length<=0&&a().createElement(i.Z,null),C&&x.length>0&&a().createElement(w,{jobs:x,queryParams:t,queryParamsDispatch:f}),a().createElement(c.Z,{count:S.count,params:{limit:+t.limit,offset:+t.offset},setPagination:l,variant:v.PaginationVariant.bottom})))))}}}]);
//# sourceMappingURL=../sourcemaps/674.e21ad7b5fbf009c45a980faaa6c12d76.js.map