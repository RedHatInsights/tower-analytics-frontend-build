(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[188],{87986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(22122),a=n(92950),o=n.n(a),i=n(334),l=n(45697),s=n.n(l),c=n(25914),u=function(e){var t=function(t){var n=t.id,a=t.margin,l=(0,i.useHistory)();return o().createElement(e,(0,r.Z)({},t,{getWidth:function(){return parseInt(c.Ys("#"+n).style("width"))-a.left-a.right||700},getHeight:function(){return parseInt(c.Ys("#"+n).style("height"))-a.top-a.bottom||450},history:l}))};return t.propTypes={id:s().string,margin:s().object},t};u.propTypes={Chart:s().element};const d=u},81672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r,a,o,i,l,s,c=n(22122),u=n(81253),d=n(32465),p=n(92950),m=n.n(p),f=n(45697),h=n.n(f),g=n(58788),v=n(35451),y=n(84564),b=n(19694),E=n(31369),_=n(77669),x=n(29163),k=["isOpen","title","label","variant","children"],T=(0,x.ZP)(y.ZP)(r||(r=(0,d.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),w=(0,x.ZP)(_.ZP)(a||(a=(0,d.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),Z=(0,x.ZP)(E.ZP)(o||(o=(0,d.Z)(["\n  color: var(--pf-global--info-color--100);\n"]))),j=(0,x.ZP)(v.ZP)(i||(i=(0,d.Z)(["\n  color: var(--pf-global--success-color--100);\n"]))),C=(0,x.ZP)(b.ZP)(l||(l=(0,d.Z)(["\n  color: var(--pf-global--warning-color--100);\n"]))),S=x.ZP.div(s||(s=(0,d.Z)(["\n  display: flex;\n  svg {\n    margin-right: 16px;\n  }\n"]))),O=function(e){var t=e.isOpen,n=e.title,r=e.label,a=void 0===r?"Alert modal":r,o=e.variant,i=void 0===o?"warning":o,l=e.children,s=(0,u.Z)(e,k),d={danger:m().createElement(T,{size:"lg"}),error:m().createElement(w,{size:"lg"}),info:m().createElement(Z,{size:"lg"}),success:m().createElement(j,{size:"lg"}),warning:m().createElement(C,{size:"lg"})},p=m().createElement(S,null,i?d[i]:null,m().createElement(g.Title,{id:"alert-modal-header-label",size:"2xl",headingLevel:"h2"},n));return m().createElement(g.Modal,(0,c.Z)({header:p,"aria-label":a,"aria-labelledby":"alert-modal-header-label",isOpen:!!t,variant:"small",title:n},s),l)};O.propTypes={isOpen:h().bool.isRequired,title:h().string.isRequired,label:h().string,variant:h().string,children:h().node};const P=O},55411:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(81672)},83160:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),l=n(58788),s=n(84564),c=n(29587),u=function(e){var t=e.message;return a().createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},a().createElement(l.EmptyStateIcon,{icon:s.ZP,color:c.global_danger_color_200.value}),a().createElement(l.Title,{headingLevel:"h2",size:"lg"},"Error"),a().createElement(l.EmptyStateBody,null,t))};u.propTypes={message:i().string};const d=u},69595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),l=n(58788),s=n(83653),c=function(e){var t=e.items,n=void 0===t?[]:t,r=e.current,o=void 0===r?null:r;return a().createElement(l.Breadcrumb,null,n.map((function(e){var t=e.title,n=e.navigate,r=(0,s.Z)()+n;return a().createElement(l.BreadcrumbItem,{key:t,to:r},t)})),o&&a().createElement(l.BreadcrumbHeading,null,o))};c.propTypes={items:i().arrayOf(i().shape({navigate:i().any,title:i().node})),current:i().node};const u=c},2205:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),l=n(58788),s=n(2112),c=function(e){var t=e.preflightError;return a().createElement(l.EmptyState,{variant:l.EmptyStateVariant.full},a().createElement(l.EmptyStateIcon,{icon:s.ZP}),404===t.status&&a().createElement(a().Fragment,null,a().createElement(l.Title,{headingLevel:"h5",size:"lg"},"No data found"),a().createElement(l.EmptyStateBody,null,"Please visit"," ",a().createElement("a",{href:"https://docs.ansible.com/ansible-tower/latest/html/administration/usability_data_collection.html#automation-analytics",target:"_blank",rel:"noopener noreferrer"},"here")," ","to learn how to enable Automation Analytics.")),401===t.status&&a().createElement(a().Fragment,null,a().createElement(l.Title,{headingLevel:"h5",size:"lg"},"Not authorized"),a().createElement(l.EmptyStateBody,null,"You do not have the correct permissions to view this page.")),!t.status&&a().createElement(a().Fragment,null,a().createElement(l.Title,{headingLevel:"h5",size:"lg"},"Something went wrong, please try reloading the page"),a().createElement(l.Button,{variant:"primary",onClick:function(){return window.location.reload()}},"Reload")))};c.propTypes={preflightError:i().object};const u=c},62923:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r,a,o,i=n(34699),l=n(32465),s=n(92950),c=n.n(s),u=n(45697),d=n.n(u),p=n(29163),m=n(58788),f=(0,p.ZP)(m.Card)(r||(r=(0,l.Z)(["\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n"]))),h=(0,p.ZP)(m.CardBody)(a||(a=(0,l.Z)(["\n  max-height: 200px;\n  overflow: scroll;\n"]))),g=(0,p.ZP)(m.ExpandableSection)(o||(o=(0,l.Z)(["\n  text-align: left;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n"])));function v(e){var t=e.error,n=(0,s.useState)(!1),r=(0,i.Z)(n,2),a=r[0],o=r[1];return c().createElement(c().Fragment,null,Array.isArray(t)&&t.length&&c().createElement(g,{toggleText:"Details",onToggle:function(){o(!a)},isExpanded:a},c().createElement(f,null,c().createElement(h,null,c().createElement("ul",null,t.map((function(e){return"string"==typeof e?c().createElement("li",{key:e},e):null})))))))}v.propTypes={error:d().arrayOf(d().string)};const y=v},23071:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(62923)},20272:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),l=n(58788),s=n(35451),c=n(84564),u=n(56803),d=n(98717),p=n(19694),m=function(e){var t,n=e.status;return a().createElement(l.Label,{variant:"outline",color:function(){switch(n){case"successful":return"green";case"failed":case"error":return"red";case"running":case"pending":return"blue";case"canceled":return"orange";default:return"grey"}}(),icon:function(){switch(n){case"successful":return a().createElement(s.ZP,null);case"failed":case"error":return a().createElement(c.ZP,null);case"running":return a().createElement(d.ZP,null);case"canceled":return a().createElement(p.ZP,null);default:return a().createElement(u.ZP,null)}}()},(t=n).charAt(0).toUpperCase()+t.slice(1))};m.propTypes={status:i().oneOf(["successful","failed","error","running","new","waiting","pending","canceled"])};const f=m},94794:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(92950),a=n.n(r),o=n(58788),i=n(96733);const l=function(){return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},a().createElement(o.EmptyStateIcon,{icon:i.ZP}),a().createElement(o.Title,{headingLevel:"h5",size:"lg"},"Loading..."),a().createElement(o.EmptyStateBody,null,"Please wait."))}},97853:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(92950),a=n.n(r),o=n(58788),i=n(96733);const l=function(){return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},a().createElement(o.EmptyStateIcon,{icon:i.ZP}),a().createElement(o.Title,{headingLevel:"h5",size:"lg"},"No Data"))}},26249:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(92950),a=n.n(r),o=n(58788),i=n(71070);const l=function(){return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full},a().createElement(o.EmptyStateIcon,{icon:i.ZP}),a().createElement(o.Title,{size:"lg",headingLevel:"h4"},"No results found"),a().createElement(o.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."))}},13090:(e,t,n)=>{"use strict";n.d(t,{Z:()=>V});var r=n(96156),a=n(81253),o=n(34699),i=n(92950),l=n.n(i),s=n(45697),c=n.n(s),u=n(58788),d=n(8755),p=n(31257),m={status:{type:"select",isSingle:!1,name:"Status",placeholder:"Filter by job status",hasChips:!0},quick_date_range:{type:"select",isSingle:!0,name:"Date",placeholder:"Filter by date",hasChips:!1},start_date:{type:"date",name:"Start date",hasChips:!1},end_date:{type:"date",name:"End date",hasChips:!1},job_type:{type:"select",isSingle:!1,name:"Job",placeholder:"Filter by job type",hasChips:!0},org_id:{type:"select",isSingle:!1,name:"Organization",placeholder:"Filter by organization",hasChips:!0},cluster_id:{type:"select",isSingle:!1,name:"Cluster",placeholder:"Filter by cluster",hasChips:!0},template_id:{type:"select",isSingle:!1,name:"Template",placeholder:"Filter by template",hasChips:!0},sort_options:{type:"select",isSingle:!0,name:"Sort by",placeholder:"Sort by attribute",hasChips:!1},automation_status:{type:"select",isSingle:!1,name:"Automation status",placeholder:"Filter by automation status",hasChips:!0},frequency_period:{type:"select",isSingle:!1,name:"Frequency",placeholder:"Filter by frequency",hasChips:!0},category:{type:"select",isSingle:!1,name:"Category",placeholder:"Filter by category",hasChips:!0},inventory_id:{type:"select",isSingle:!1,name:"Inventory",placeholder:"Filter by inventory",hasChips:!0},name:{type:"text",name:"Search by name",hasChips:!0}},f=function(e){var t=e.selected,n=e.setSelected,r=void 0===n?function(){}:n,a=e.categories,s=void 0===a?[]:a,c=(0,i.useState)(!1),d=(0,o.Z)(c,2),p=d[0],m=d[1];return l().createElement(u.ToolbarItem,null,l().createElement(u.Select,{isOpen:p,variant:"single","aria-label":"Categories",onToggle:function(){return m(!p)},onSelect:function(e,t){r(t),m(!1)},selections:t,placeholderText:"Filter by"},s.map((function(e){var t=e.key,n=e.name;return l().createElement(u.SelectOption,{key:t,value:t},n)}))))};f.propTypes={categories:c().array,selected:c().string,setSelected:c().func};const h=f;var g,v=n(87329),y=n(32465),b=(0,n(29163).ZP)("span")(g||(g=(0,y.Z)(["\n  display: block;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  max-width: 300px;\n"]))),E=function(e){return e&&e.map((function(e){var t=e.key,n=e.value,r=e.description;return l().createElement(u.SelectOption,{key:t,value:t,description:r},l().createElement(u.Tooltip,{content:l().createElement("div",null,n)},l().createElement(b,null,n)))}))},_=function(e){var t,n,r,a=e.categoryKey,s=e.value,c=e.selectOptions,d=e.isVisible,p=void 0===d||d,f=e.setValue,h=(0,i.useState)(!1),g=(0,o.Z)(h,2),y=g[0],b=g[1],_=m[a];return l().createElement(u.ToolbarFilter,{"data-cy":a,key:a,showToolbarItem:p,chips:_.hasChips?_.isSingle?(n=c,(t=s)&&"string"==typeof t&&n&&(n.forEach((function(e){e.key===t&&(r=e.value)})),void 0!==r)?[r]:[]):function(e,t){return e&&t?e.reduce((function(e,n){return Number.isInteger(parseInt(n))&&(n=parseInt(n)),t.forEach((function(t){t.key===n&&e.push(t.value)})),e}),[]):[]}(s,c):[],categoryName:_.name,deleteChip:_.hasChips?function(e,t){if(m[a].isSingle)f(null);else{var n=c.find((function(e){return e.value===t})).key,r=s.filter((function(e){return e!==n}));f(r)}}:null},l().createElement(u.Select,{variant:_.isSingle?u.SelectVariant.single:u.SelectVariant.checkbox,"aria-label":_.name,onToggle:function(){return b(!y)},onSelect:function(e,t){_.isSingle?(f(t),b(!1)):f(s.includes(t)?s.filter((function(e){return e!==t})):[].concat((0,v.Z)(s),[t]))},selections:s,isOpen:y,hasInlineFilter:!0,placeholderText:_.placeholder,onFilter:function(e,t){return E(""===t?c:c.filter((function(e){return e.value.toLowerCase().includes(t.toLowerCase())})))},maxHeight:"1000%"},E(c)))};_.propTypes={categoryKey:c().string.isRequired,value:c().oneOfType([c().number,c().string,c().arrayOf(c().oneOfType([c().string,c().number]))]).isRequired,selectOptions:c().array,isVisible:c().bool,setValue:c().func.isRequired};const x=_;var k=function(e){var t=e.categoryKey,n=e.value,r=void 0===n?"":n,a=e.setValue,o=void 0===a?function(){}:a,i=m[t];return l().createElement(u.InputGroup,null,l().createElement(u.TextInput,{type:"date","aria-label":i.name,value:r,onChange:o}))};k.propTypes={categoryKey:c().string.isRequired,value:c().string,setValue:c().func.isRequired};const T=k;var w=n(71070),Z=function(e){var t=e.categoryKey,n=e.isVisible,r=void 0===n||n,a=e.value,s=void 0===a?"":a,c=e.setValue,d=(0,i.useState)(s),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=m[t];return(0,i.useEffect)((function(){h(s)}),[s]),l().createElement(u.ToolbarFilter,{"data-cy":t,key:t,showToolbarItem:r,chips:g.hasChips&&s?[s]:[],categoryName:g.name,deleteChip:g.hasChips?function(){c("")}:null},l().createElement(u.InputGroup,null,l().createElement(u.TextInput,{type:"search","aria-label":g.name,value:f,onChange:h,onKeyDown:function(e){e.key&&"Enter"===e.key&&(e.preventDefault(),c(f))}}),l().createElement(u.Button,{variant:"control","aria-label":"Search button for ".concat(g.name),onClick:function(){c(f)}},l().createElement(w.ZP,null))))};Z.propTypes={categoryKey:c().string.isRequired,value:c().any,isVisible:c().bool,setValue:c().func.isRequired};var j={select:x,date:T,text:Z},C=function(e){var t=e.categoryKey,n=e.value,r=e.selectOptions,a=e.isVisible,o=void 0===a||a,i=e.setValue,s=m[t],c=j[s.type];return l().createElement(c,{categoryKey:t,value:n||("select"!==s.type||s.isSingle?"":[]),selectOptions:r,isVisible:o,setValue:i})};C.propTypes={categoryKey:c().string.isRequired,value:c().oneOfType([c().number,c().string,c().arrayOf(c().oneOfType([c().string,c().number]))]),selectOptions:c().array,isVisible:c().bool,setValue:c().func.isRequired};const S=C;var O=function(e){var t=e.filterCategories,n=e.filters,r=e.handleSearch,a=e.setFilters,s=(0,i.useState)(Object.keys(t)[0]),c=(0,o.Z)(s,2),d=c[0],p=c[1];return l().createElement(u.ToolbarGroup,{variant:"filter-group"},l().createElement(h,{selected:d,setSelected:p,categories:Object.keys(t).map((function(e){return{key:e,name:m[e].name}}))}),Object.keys(t).map((function(e){return l().createElement(S,{key:e,categoryKey:e,value:n[e],selectOptions:t[e],isVisible:d===e,setValue:function(t){a(e,t),r(e,t)}})})))};O.propTypes={filterCategories:c().object.isRequired,filters:c().object.isRequired,handleSearch:c().func.isRequired,setFilters:c().func.isRequired};const P=O;var D=function(e){var t=e.filters,n=e.handleSearch,r=e.setFilters,a=e.values;return l().createElement(u.ToolbarGroup,{variant:"filter-group"},l().createElement(S,{categoryKey:"quick_date_range",value:t.quick_date_range,selectOptions:a,setValue:function(e){r("quick_date_range",e),n("quick_date_range",e)}}),t.quick_date_range&&t.quick_date_range.includes("custom")&&l().createElement(l().Fragment,null,l().createElement(S,{categoryKey:"start_date",value:t.start_date,setValue:function(e){r("start_date",e),n("start_date",e)}}),l().createElement(S,{categoryKey:"end_date",value:t.end_date,setValue:function(e){r("end_date",e),n("end_date",e)}})))};D.propTypes={filters:c().object.isRequired,handleSearch:c().func.isRequired,setFilters:c().func.isRequired,values:c().array.isRequired};const B=D;var I=n(59507),R=n(98702),q=function(e){var t=e.filters,n=e.handleSearch,r=e.setFilters,a=e.sort_options;return l().createElement(u.ToolbarGroup,{variant:"filter-group"},l().createElement(S,{categoryKey:"sort_options",value:t.sort_options,selectOptions:a,setValue:function(e){r("sort_options",e),n("sort_options",e)}}),l().createElement(u.Button,{variant:"control",onClick:function(){r("sort_order","asc"===t.sort_order?"desc":"asc"),n("sort_order","asc"===t.sort_order?"desc":"asc")}},"asc"===t.sort_order&&l().createElement(R.ZP,null),"desc"===t.sort_order&&l().createElement(I.ZP,null)))};q.propTypes={filters:c().object.isRequired,handleSearch:c().func.isRequired,setFilters:c().func.isRequired,sort_options:c().array.isRequired};const L=q;var F=n(87673),A=n(33606),N=function(e){var t=e.filters,n=e.handleSearch,r=e.setFilters,a=e.settingsExpanded,o=e.setSettingsExpanded;return l().createElement(u.Card,{isFlat:!0,style:{backgroundColor:"#EEEEEE"}},l().createElement(u.CardHeader,null,l().createElement(u.CardActions,null,l().createElement(u.Button,{variant:"plain",onClick:function(){return o(!a)}},l().createElement(A.ZP,null))),l().createElement(u.CardTitle,null,"Settings")),l().createElement(u.CardBody,null,l().createElement(u.Switch,{id:"showRootWorkflowJobs",label:"Ignore nested workflows and jobs",labelOff:"Ignore nested workflows and jobs",isChecked:t.only_root_workflows_and_standalone_jobs,onChange:function(e){r("only_root_workflows_and_standalone_jobs",e),n("only_root_workflows_and_standalone_jobs",e)}}),l().createElement(u.Tooltip,{position:"top",content:l().createElement("div",null," ","If enabled, nested workflows and jobs will not be included in the overall totals. Enable this option to filter out duplicate entries.")},l().createElement(F.ZP,null))))};N.propTypes={filters:c().object.isRequired,handleSearch:c().func.isRequired,setFilters:c().func.isRequired,settingsExpanded:c().bool.isRequired,setSettingsExpanded:c().func.isRequired};const z=N;var M=n(334),Y=n(21048),W=["quick_date_range","sort_options"];function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G=function(e){var t=e.categories,n=e.filters,s=e.qsConfig,c=e.setFilters,f=e.pagination,h=void 0===f?null:f,g=e.hasSettings,v=void 0!==g&&g,y=e.additionalControls,b=void 0===y?[]:y,E=e.hideQuickDateRange,_=void 0!==E&&E,x=e.hideSortOptions,k=void 0!==x&&x,T=(0,i.useState)(!1),w=(0,o.Z)(T,2),Z=w[0],j=w[1],C=t.quick_date_range,S=t.sort_options,O=(0,a.Z)(t,W),D=(0,M.useHistory)(),I=Object.keys(O).filter((function(e){return Object.keys(m).includes(e)})).reduce((function(e,t){return e[t]=O[t],e}),{}),R=function(e,t){var n=(0,Y.dD)(s,D.location.search);n=(0,Y.sM)(n,(0,r.Z)({},e,t)),n=(0,Y.Zd)(n,(0,r.Z)({},e,t)),""!==t&&0!==t.length||(n=(0,Y.mn)(s,n,(0,r.Z)({},e,n[e]))),q(n,s)},q=function(e,t){var n=D.location.pathname,r=(0,Y.dD)({},D.location.search),a=(0,Y.p9)(t,e,r);D.push(a?"".concat(n,"?").concat(a):n)};return l().createElement(l().Fragment,null,l().createElement(u.Toolbar,{id:"".concat(s.namespace,"-filterable-toolbar-with-chip-groups"),clearAllFilters:function(){(function(e){var t=(0,Y.dD)(e,D.location.search),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);delete n.limit,delete n.sort_by,q((0,Y.mn)(e,t,n),e)})(s),c(null,null)},collapseListedFiltersBreakpoint:"xl"},l().createElement(u.ToolbarContent,null,l().createElement(u.Button,{variant:"control"},l().createElement(d.ZP,null)),Object.keys(I).length>0&&l().createElement(P,{filterCategories:I,filters:n,setFilters:c,handleSearch:R}),!_&&C&&l().createElement(B,{filters:n,setFilters:c,values:C,handleSearch:R}),!k&&S&&l().createElement(L,{filters:n,setFilters:c,sort_options:S,handleSearch:R}),v&&l().createElement(u.ToolbarItem,null,l().createElement(u.Button,{variant:"plain",onClick:function(){return j(!Z)},"aria-label":"settings",isActive:Z},l().createElement(p.ZP,null))),b.length>0&&l().createElement(u.ToolbarGroup,null,b.map((function(e,t){return l().createElement(u.ToolbarItem,{key:t},e)}))),h&&l().createElement(u.ToolbarItem,{variant:"pagination",visibility:{default:"hidden",lg:"visible"}},h)),Z&&l().createElement(z,{filters:n,setFilters:c,handleSearch:R,settingsExpanded:Z,setSettingsExpanded:j})))};G.propTypes={categories:c().object.isRequired,qsConfig:c().object.isRequired,filters:c().object.isRequired,setFilters:c().func.isRequired,pagination:c().object,hasSettings:c().bool,additionalControls:c().array,hideSortOptions:c().bool,hideQuickDateRange:c().bool};const V=G},1859:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>xe});var r=n(92137),a=n(34699),o=n(96156),i=n(87757),l=n.n(i),s=n(92950),c=n.n(s),u=n(45697),d=n.n(u),p=n(86350),m=n(27839),f=n(48716),h=n(39173),g=n(58788),v=n(13784),y=n(94794),b=n(97853),E=n(2205),_=n(83160),x=n(13090),k=n(64866),T=n(53677),w=n(14115),Z=n(79886),j=n(63349),C=n(10379),S=n(86089),O=n(77608),P=n(6610),D=n(5991),B=n(25914),I=n(87986),R=n(91354);var q=function(){function e(t){var n=this;(0,P.Z)(this,e),(0,o.Z)(this,"handleMouseOver",(function(e){var t,r,a,o,i=B.Ys("#d3-roi-chart-root").node().scrollLeft,l=B.Ba6.pageX-B.Ys(n.svg).node().getBoundingClientRect().x+10+i,s=B.Ba6.pageY-B.Ys(n.svg).node().getBoundingClientRect().y-30;if(e){r=(0,R.Z)(+e.delta),t=e.name,a=(0,R.Z)(+e.manualCost),o=(0,R.Z)(+e.automatedCost);var c=n.toolTipBase.node().getBoundingClientRect().width,u=B.Ys(n.svg+"> svg").node().getBoundingClientRect().width,d=100-c/u*100<l/u*100;n.name.text(""+t),n.savings.text("Total savings ".concat(r)),n.manualCost.text("Manual Cost ".concat(a)),n.automationCost.text("Automation Cost ".concat(o)),n.nameWidth=n.name.node().getComputedTextLength(),n.savingsWidth=n.savings.node().getComputedTextLength(),n.manualCostWidth=n.manualCost.node().getComputedTextLength(),n.automationCostWidth=n.automationCost.node().getComputedTextLength(),n.widestTextElem=B.Fp7([n.nameWidth,n.savingsWidth,n.automationCostWidth,n.manualCostWidth]);var p,m=n.widestTextElem/n.boxWidth*100,f=m/85;p=m>85?n.boxWidth*f:n.boxWidth,n.boundingBox.attr("width",p),n.toolTipBase.attr("transform","translate("+l+","+s+")"),d?(n.toolTipPoint.attr("transform","translate(-20, 15) rotate(45)"),n.boundingBox.attr("x",-p-20),n.name.attr("x",-(c-7)),n.savings.attr("x",-(c-7)),n.manualCost.attr("x",-(c-7)),n.automationCost.attr("x",-(c-7))):(n.toolTipPoint.attr("transform","translate(10, 15) rotate(45)"),n.boundingBox.attr("x",10),n.name.attr("x",20),n.savings.attr("x",20),n.manualCost.attr("x",20),n.automationCost.attr("x",20)),n.toolTipBase.style("opacity",1),n.toolTipBase.interrupt()}})),(0,o.Z)(this,"handleMouseOut",(function(){n.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")})),this.svg=t.svg,this.draw()}return(0,D.Z)(e,[{key:"draw",value:function(){this.width=125,this.toolTipBase=B.Ys(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip-base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=125,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, 0) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",92).attr("width",this.boxWidth).attr("fill","#393f44"),this.name=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",-2).text("Template name"),this.savings=this.toolTipBase.append("text").attr("x",20).attr("y",52).attr("font-size",12).attr("font-weight","bold").attr("fill","white").text("Total savings $0"),this.manualCost=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",16).text("Manual cost $0"),this.automationCost=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",20).attr("y",34).text("Automation cost $0")}}]),e}(),L=function(e){(0,C.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,O.Z)(t);if(n){var a=(0,O.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,S.Z)(this,e)});function a(e){var t;return(0,P.Z)(this,a),(t=r.call(this,e)).init=t.init.bind((0,j.Z)(t)),t.draw=t.draw.bind((0,j.Z)(t)),t.resize=t.resize.bind((0,j.Z)(t)),t.state={timeout:null},t}return(0,D.Z)(a,[{key:"resize",value:function(){var e=this,t=this.state.timeout;clearTimeout(t),this.setState({timeout:setTimeout((function(){e.init()}),500)})}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){var e="#0066CC";B.td_("#"+this.props.id+" > *").remove();var t,n=this.props.data;t=n.length>=15?B.Ys(".automation-wrapper").node().getBoundingClientRect().width-this.props.margin.left-this.props.margin.right:this.props.getWidth();var r,a=this.props.getHeight(),o=B.tiA().rangeRound([0,t]).padding(.45),i=B.BYU().range([a,0]);r=n.map((function(e){return e.name}));var l=B.WUZ(".2s"),s=B.LLu(o).tickValues(r),c=B.y4O(i).ticks(8).tickFormat((function(e){return l(e).replace("G","B")})).tickSize(-t,0,0),u=B.Ys("#"+this.props.id).append("svg").attr("width",t+this.props.margin.left+this.props.margin.right).attr("height",a+this.props.margin.bottom+this.props.margin.top).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),d=n.map((function(e){return e.name})),p=new q({svg:"#"+this.props.id});o.domain(d),i.domain([0,B.Fp7(n,(function(e){return 1.15*e.delta}))||8]),u.append("g").attr("class","y axis").call(c).selectAll("line").attr("stroke","#d7d7d7").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-weight","bold").text("Value"),u.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-a/2).attr("dy","1em").style("text-anchor","middle").text("Savings per template ($)"),u.append("g").attr("class","x-axis").attr("transform","translate(0,"+a+")").call(s).selectAll("text").style("text-anchor","start").attr("dx","0.75em").attr("dy",-o.bandwidth()/1.45-8).attr("transform","rotate(-90)"),u.selectAll(".x-axis line").attr("stroke","transparent"),u.selectAll(".bar").data(n).enter().append("rect").attr("x",(function(e){return o(e.name)})).attr("width",o.bandwidth()).attr("y",(function(e){return i(e.delta)})).style("fill",(function(){return e})).attr("height",(function(e){return a-i(e.delta)})).on("mouseover",(function(t){B.Ys(this).style("fill",B.B8C(e).darker(1)),p.handleMouseOver(t)})).on("mousemove",p.handleMouseOver).on("mouseout",(function(){B.Ys(this).style("fill",e),p.handleMouseOut()}))}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){var e=this.state.timeout;clearTimeout(e),window.removeEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"render",value:function(){return c().createElement("div",{id:this.props.id})}}]),a}(s.Component);L.propTypes={id:d().string,data:d().array,margin:d().object,getHeight:d().func,getWidth:d().func};const F=(0,I.Z)(L);var A,N=n(32465),z=n(29163),M=(0,z.ZP)(g.CardTitle)(A||(A=(0,N.Z)(["\n  border-bottom: 1px solid #d7d7d7;\n  margin-bottom: 10px;\n"]))),Y=function(e){var t=e.totalSavings,n=void 0===t?0:t;return c().createElement(g.Card,{style:{borderTop:"3px solid #2B9AF3"}},c().createElement(g.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),c().createElement(g.CardBody,null,c().createElement(g.Title,{headingLevel:"h3",size:"4xl",style:{color:"var(--pf-global--success-color--200)"}},(0,R.Z)(n))))};Y.propTypes={totalSavings:d().number};const W=Y;var U,G=n(85111),V=z.ZP.div(U||(U=(0,N.Z)(["\n  flex: 1;\n"]))),H=function(e){var t=parseFloat(e);return t&&t>=0?e:""},K=function(e){var t=e.costManual,n=void 0===t?"0":t,r=e.setCostManual,a=void 0===r?function(){}:r,o=e.costAutomation,i=void 0===o?"0":o,l=e.setCostAutomation,s=void 0===l?function(){}:l;return c().createElement(g.Card,null,c().createElement(M,null,"Calculate your automation"),c().createElement(g.CardBody,null,c().createElement(V,null,c().createElement("p",null,"Manual cost of automation"),c().createElement("em",{style:{color:"var(--pf-global--Color--dark-200)"}},"(e.g. average salary of mid-level Software Engineer)"),c().createElement(g.InputGroup,{style:{width:"50%"}},c().createElement(g.InputGroupText,null,c().createElement(G.ZP,null)),c().createElement(g.TextInput,{id:"manual-cost",type:"number","aria-label":"manual-cost",value:n,onChange:function(e){return a(H(e))}}),c().createElement(g.InputGroupText,null,"/hr"))),c().createElement(V,{style:{paddingTop:"10px"}},c().createElement("p",null,"Automated process cost"),c().createElement(g.InputGroup,{style:{width:"50%"}},c().createElement(g.InputGroupText,null,c().createElement(G.ZP,null)),c().createElement(g.TextInput,{id:"automation-cost",type:"number","aria-label":"automation-cost",value:i,onChange:function(e){return s(H(e))}}),c().createElement(g.InputGroupText,null,"/hr")))))};K.propTypes={costManual:d().string,setCostManual:d().func,costAutomation:d().string,setCostAutomation:d().func};const J=K,$=function(){return c().createElement(g.Card,{style:{height:"100%"}},c().createElement(M,null,"Automation formula"),c().createElement(g.CardBody,null,c().createElement("p",null,c().createElement("b",null,"Manual cost for template x")," =",c().createElement("em",null,"(time for a manual run on one host in hours * (sum of all hosts across all job runs) ) * cost per hour")),c().createElement("p",null,c().createElement("b",null,"Automation cost for template x")," =",c().createElement("em",null,"cost of automation per hour * sum of total elapsed hours for a template")),c().createElement("p",null,c().createElement("b",null,"Savings")," =",c().createElement("em",null,"Sum of (manual cost - automation cost) across all templates"))))};var Q,X,ee,te,ne,re=n(31369),ae=n(34238),oe=n(787),ie=z.ZP.div(Q||(Q=(0,N.Z)(["\n  em {\n    display: block;\n    padding: 5px 0;\n  }\n\n  @media (max-width: 1490px) {\n    display: block;\n\n    em {\n      padding: 10px 0;\n      display: block;\n    }\n  }\n"]))),le=z.ZP.em(X||(X=(0,N.Z)(["\n  color: var(--pf-global--Color--dark-200);\n"]))),se=z.ZP.div(ee||(ee=(0,N.Z)(["\n  p {\n    text-align: left;\n  }\n"]))),ce=z.ZP.div(te||(te=(0,N.Z)(["\n  & svg {\n    fill: var(--pf-global--Color--dark-200);\n\n    :hover {\n      cursor: pointer;\n    }\n\n    :first-of-type {\n      margin-right: 10px;\n      margin-left: 10px;\n\n      @media (max-width: 1350px) {\n        margin-left: 0;\n      }\n    }\n  }\n"]))),ue=z.ZP.div(ne||(ne=(0,N.Z)(["\n  flex: 1;\n"]))),de=function(e){var t=e.details;return c().createElement(g.Popover,{"aria-label":"template detail popover",position:"left",bodyContent:c().createElement(se,null,Object.keys(t).map((function(e,n){return c().createElement("p",{key:n},c().createElement("b",null,(0,Z.kC)(e.split("_").join(" "))),": ",t[e])})))},c().createElement(re.ZP,null))};de.propTypes={details:d().object};var pe=function(e){var t=e.data,n=void 0===t?[]:t,r=e.sortBy,a=void 0===r?"":r,o=e.setDataRunTime,i=void 0===o?function(){}:o,l=e.setEnabled,s=void 0===l?function(){}:l,u=e.redirectToJobExplorer,d=void 0===u?function(){}:u;return c().createElement(g.Card,null,c().createElement(g.CardBody,null,c().createElement("p",null,"Enter the time it takes to run the following templates manually."),n.map((function(e){return c().createElement("div",{key:e.id},c().createElement(g.Tooltip,{content:"List of jobs for this template for past 30 days"},c().createElement(g.Button,{style:{padding:"15px 0 10px"},component:"a",onClick:function(){return d(e.id)},variant:"link"},e.name)),c().createElement(ie,null,c().createElement(ue,{key:e.id},c().createElement(g.InputGroup,null,c().createElement(g.TextInput,{id:e.id,type:"number","aria-label":"time run manually",value:(0,Z.xb)(e.avgRunTime),onChange:function(t){return i((0,Z.$$)(t),e.id)}}),c().createElement(g.InputGroupText,null,"min"))),c().createElement(le,null,"x ",e.successful_hosts_total," host runs"),function(e,t){var n=t.split(":")[0],r=Object.keys(e).map((function(t){return t===n?"".concat(e[t]):null}));return c().createElement(le,null,(0,Z.kC)(n.split("_").join(" ")),": ",r)}(e,a),c().createElement(ce,null,c().createElement(de,{details:e}),!e.enabled&&c().createElement(oe.ZP,{onClick:function(){return s(e.id)(!0)}}),e.enabled&&c().createElement(ae.ZP,{onClick:function(){return s(e.id)(!1)}}))),c().createElement("p",{style:{color:"#486B00"}},(0,R.Z)(+e.delta)))}))))};pe.propTypes={data:d().array,setDataRunTime:d().func,redirectToJobExplorer:d().func,deselectedIds:d().array,setDeselectedIds:d().func,setEnabled:d().func,sortBy:d().string};const me=pe;var fe=n(8644),he=n(21048);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){return e.filter((function(e){return e.enabled}))},be=function(e,t,n){return e.map((function(e){var r=(0,Z.B3)(e.avgRunTime)*e.successful_hosts_total*parseFloat(n),a=(0,Z.B3)(e.successful_elapsed_total)*parseFloat(t),o=(0,Z.YD)(a,r);return ve(ve({},e),{},{delta:o,manualCost:r,automatedCost:a})}))},Ee=(0,he.Hm)("clusters",ve({},v.GL.defaultParams),["limit","offset"]),_e=function(e){var t=e.history,n=(0,w.Z)(t,"jobExplorer"),o=(0,s.useState)("50"),i=(0,a.Z)(o,2),u=i[0],d=i[1],Z=(0,s.useState)("20"),j=(0,a.Z)(Z,2),C=j[0],S=j[1],O=(0,T.K)(Ee),P=O.queryParams,D=O.setFromToolbar,B=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.YU)();case 2:return t=e.sent,e.abrupt("return",{preflight:t});case 4:case"end":return e.stop()}}),e)}))),[]),{preflight:{},preflightError:I,preflightIsLoading:R}),I=B.error,R=B.isLoading,q=B.request,L=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.Yn)({params:P});case 2:return t=e.sent,e.abrupt("return",{options:t});case 4:case"end":return e.stop()}}),e)}))),[P]),{options:{},optionsError:N,optionsIsLoading:z}),A=L.result.options,N=L.error,z=L.isLoading,Y=L.request,U=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.QJ)({params:P});case 2:return t=e.sent,e.abrupt("return",{data:be((n=t,void 0,r=n.items,(void 0===r?[]:r).map((function(e){return ve(ve({},e),{},{delta:0,avgRunTime:3600,manualCost:0,automatedCost:0,enabled:!0})}))),C,u)});case 4:case"end":return e.stop()}var n,r}),e)}))),[P]),{data:[],apiError:V,apiIsLoading:H}),G=U.result.data,V=U.error,H=U.isLoading,K=U.request,Q=U.setValue;(0,s.useEffect)((function(){q(),Y()}),[]),(0,s.useEffect)((function(){Q({data:be(G,C,u)})}),[C,u]),(0,s.useEffect)((function(){Y(),K()}),[P]);var X;return 403===(null==I?void 0:I.status)?c().createElement(m.Z,v.dR):c().createElement(c().Fragment,null,c().createElement(f.Z,null,c().createElement(h.Z,{title:"Automation Calculator"}),c().createElement(x.Z,{categories:A,filters:P,qsConfig:Ee,setFilters:D})),c().createElement(p.Z,null,I?c().createElement(E.Z,{preflightError:I}):G?c().createElement(g.Grid,{hasGutter:!0,className:"automation-wrapper"},c().createElement(g.GridItem,{span:9},c().createElement(g.Stack,{hasGutter:!0},c().createElement(g.StackItem,null,c().createElement(g.Card,null,c().createElement(M,null,"Automation savings"),c().createElement(g.CardBody,null,H&&c().createElement(y.Z,null),V&&c().createElement(_.Z,{message:V.error}),G.length<=0&&c().createElement(b.Z,null),G.length>0&&c().createElement(c().Fragment,null,c().createElement(F,{margin:{top:20,right:20,bottom:20,left:70},id:"d3-roi-chart-root",data:ye(G)}),c().createElement("p",{style:{textAlign:"center"}},"Templates"))))),c().createElement(g.StackItem,{isFilled:!0},c().createElement($,null)))),c().createElement(g.GridItem,{span:3},c().createElement(g.Stack,{hasGutter:!0},c().createElement(g.StackItem,null,c().createElement(W,{totalSavings:(X=ye(G),X.reduce((function(e,t){return e+t.delta}),0))})),c().createElement(g.StackItem,null,c().createElement(g.Stack,null,c().createElement(g.StackItem,null,c().createElement(J,{costManual:u,setCostManual:d,costAutomation:C,setCostAutomation:S})),c().createElement(g.StackItem,{style:{overflow:"auto",maxHeight:"48vh"}},c().createElement(me,{redirectToJobExplorer:function(e){n({quick_date_range:"last_30_days",template_id:[e]})},data:G,setDataRunTime:function(e,t){var n=G.map((function(n){return n.id===t?(n.avgRunTime=e,be([n],C,u)[0]):n}));Q({data:n})},setUnfilteredData:G,setEnabled:function(e){return function(t){Q({data:G.map((function(n){return n.id===e?ve(ve({},n),{},{enabled:t}):n}))})}},sortBy:P.sort_by}))))))):c().createElement(c().Fragment,null)))};_e.propTypes={history:d().object};const xe=_e},19335:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ae});var r=n(92137),a=n(34699),o=n(96156),i=n(87757),l=n.n(i),s=n(92950),c=n.n(s),u=n(53677),d=n(94794),p=n(2205),m=n(64866),f=n(13784),h=n(86350),g=n(27839),v=n(48716),y=n(39173),b=n(58788),E=n(6610),_=n(5991),x=n(63349),k=n(10379),T=n(86089),w=n(77608),Z=n(87986),j=n(25914),C=n(45697),S=n.n(C);const O=function(){function e(t){var n=this;(0,E.Z)(this,e),(0,o.Z)(this,"handleMouseOver",(function(e){var t=0,r=0,a=0,o=j.Ba6.pageX-j.Ys(n.svg).node().getBoundingClientRect().x+10,i=j.Ba6.pageY-j.Ys(n.svg).node().getBoundingClientRect().y-10,l=j.i$Z("%m/%d");if(e){var s=n.toolTipBase.node().getBoundingClientRect().width,c=j.Ys(n.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<o/c*100;e&&(t=e.RAN||0,r=e.FAIL||0,a=e.TOTAL||0,n.date.text(l(e.DATE||null))),e&&e.data&&(t=e.data.RAN||0,r=e.data.FAIL||0,a=e.data.TOTAL||0,n.date.text(l(e.data.DATE||null))),n.jobs.text(a+" jobs"),n.jobsWidth=n.jobs.node().getComputedTextLength(),n.failed.text(""+r),n.successful.text(""+t),n.successTextWidth=n.successful.node().getComputedTextLength(),n.failTextWidth=n.failed.node().getComputedTextLength();var d,p=n.jobsWidth/n.boxWidth*100,m=p/40;d=p>40?n.boxWidth*m:n.boxWidth,n.boundingBox.attr("width",d),n.toolTipBase.attr("transform","translate("+o+","+i+")"),u?(n.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),n.boundingBox.attr("x",-d-20),n.circleSuccess.attr("cx",-d),n.circleFail.attr("cx",-d),n.failedIcon.attr("x",-d-7),n.successIcon.attr("x",-d-7),n.successText.attr("x",17-d),n.failText.attr("x",17-d),n.successful.attr("x",-n.successTextWidth-20-12),n.failed.attr("x",-n.failTextWidth-20-12),n.date.attr("x",-d-5),n.jobs.attr("x",-n.jobsWidth/2-7),n.clickMore.attr("x",-d)):(n.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),n.boundingBox.attr("x",10),n.circleSuccess.attr("cx",26),n.circleFail.attr("cx",26),n.failedIcon.attr("x",19),n.successIcon.attr("x",19),n.successText.attr("x",43),n.failText.attr("x",43),n.successful.attr("x",d-n.successTextWidth),n.failed.attr("x",d-n.failTextWidth),n.date.attr("x",20),n.jobs.attr("x",d),n.clickMore.attr("x",20)),n.toolTipBase.style("opacity",1),n.toolTipBase.interrupt()}})),(0,o.Z)(this,"handleMouseOut",(function(){n.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")})),this.svg=t.svg,this.colors=t.colors,this.draw()}return(0,_.Z)(e,[{key:"draw",value:function(){this.toolTipBase=j.Ys(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=145,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-41).attr("rx",2).attr("height",110).attr("width",this.boxWidth).attr("fill","#393f44"),this.circleSuccess=this.toolTipBase.append("circle").attr("cx",26).attr("cy",0).attr("r",8).attr("stroke","white").attr("fill","white"),this.circleFail=this.toolTipBase.append("circle").attr("cx",26).attr("cy",26).attr("r",8).attr("stroke","white").attr("fill","white"),this.successText=this.toolTipBase.append("text").attr("x",43).attr("y",4).attr("font-size",12).attr("fill","white").text("Successful"),this.failText=this.toolTipBase.append("text").attr("x",43).attr("y",28).attr("font-size",12).attr("fill","white").text("Failed"),this.successIcon=this.toolTipBase.append("text").attr("class","fas fa-sm").attr("fill",this.colors(1)).attr("x",19).attr("y",5).text(""),this.failedIcon=this.toolTipBase.append("text").attr("class","fas fa-sm").attr("fill",this.colors(0)).attr("x",20).attr("y",31).text(""),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("x",137).attr("y",-21).attr("font-size",12).attr("text-anchor","end").text("No jobs"),this.successful=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",4).text("0"),this.failed=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",122).attr("y",28).text("0"),this.date=this.toolTipBase.append("text").attr("fill","white").attr("stroke","white").attr("x",20).attr("y",-21).attr("font-size",12).text("Never"),this.clickMore=this.toolTipBase.append("text").attr("fill","white").attr("x",20).attr("y",55).attr("font-size",12).text("Click for details")}}]),e}();var P=n(17563),D=n(20806),B=n(79886);var I=function(e){(0,k.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,w.Z)(t);if(n){var a=(0,w.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,T.Z)(this,e)});function a(e){var t;return(0,E.Z)(this,a),(t=r.call(this,e)).draw=t.draw.bind((0,x.Z)(t)),t.init=t.init.bind((0,x.Z)(t)),t.resize=t.resize.bind((0,x.Z)(t)),t.redirectToJobExplorer=t.redirectToJobExplorer.bind((0,x.Z)(t)),t.state={formattedData:[],timeout:null},t}return(0,_.Z)(a,[{key:"redirectToJobExplorer",value:function(e){var t=e.data.DATE,n=D.n.jobExplorer,r=(0,B.p6)(t),a={start_date:r,end_date:r,quick_date_range:"custom",status:["failed","successful"],template_id:this.props.queryParams.template_id,org_id:this.props.queryParams.org_id,job_type:this.props.queryParams.job_type},o=(0,P.stringify)(a,{arrayFormat:"bracket"});this.props.history.push({pathname:n,search:o})}},{key:"resize",value:function(){var e=this,t=this.state.timeout;clearTimeout(t),this.setState({timeout:setTimeout((function(){e.init()}),500)})}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){j.td_("#"+this.props.id+" > *").remove();var e,t=j.Z1g("%Y-%m-%d"),n=this.props.data.reduce((function(e,n){var r=n.created_date,a=n.successful_count,o=n.failed_count,i=t(r)||new Date,l=+a||0,s=+o||0,c=+a+o||0;return e.concat({DATE:i,RAN:l,FAIL:s,TOTAL:c})}),[]),r=this.props.getWidth(),a=this.props.getHeight(),o=j.tiA().rangeRound([0,r]).padding(.35),i=j.BYU().range([a,0]),l=j.Ys("#"+this.props.id).append("svg").attr("width",r+this.props.margin.left+this.props.margin.right).attr("height",a+this.props.margin.top+this.props.margin.bottom).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),s=j.PKp(["#6EC664","#A30000"]),c=new O({svg:"#"+this.props.id,colors:s}),u=j.knu().keys(["FAIL","RAN"]).order(j.Qxt).offset(j.HLf)(n);o.domain(u[0].map((function(e){return e.data.DATE}))),i.domain([0,j.Fp7(u[u.length-1],(function(e){return 1.15*e[1]}))||8]),l.append("g").attr("class","y-axis").call(j.y4O(i).tickSize(-r,0,0)).selectAll("line").attr("stroke","#d7d7d7"),l.selectAll(".y-axis .tick text").attr("x",-5),l.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-a/2).attr("dy","1em").style("text-anchor","middle").text("Jobs across all clusters");var d=Math.round(n.length/(n.length/2));e=n.map((function(e){return e.DATE})),n.length>14&&(e=n.map((function(e,t){return t%d==0?e.DATE:void 0})).filter((function(e){return e}))),l.append("g").attr("class","x-axis").attr("transform","translate(0,"+a+")").call(j.LLu(o).tickValues(e).tickFormat(j.i$Z("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),l.selectAll(".x-axis .tick text").attr("y",10),l.append("text").attr("transform","translate("+r/2+" ,"+(a+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var p=l.selectAll("layer").data(u).enter().append("g").attr("class","layer").style("fill",(function(e,t){return s(t)}));p.selectAll("rect").data((function(e){return e})).enter().append("rect").attr("x",(function(e){return o(e.data.DATE)})).attr("y",(function(e){return i(e[0])})).attr("height",0).attr("width",o.bandwidth()-1).transition().duration(550).ease(j.LUP).attr("y",(function(e){return i(e[1])})).attr("height",(function(e){return i(e[0])-i(e[1])})),p.selectAll("rect").on("mouseover",c.handleMouseOver).on("mousemove",c.handleMouseOver).on("mouseout",c.handleMouseOut).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.init()}},{key:"componentWillUnmount",value:function(){var e=this.state.timeout;clearTimeout(e),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return c().createElement("div",{id:this.props.id})}}]),a}(s.Component);I.propTypes={id:S().string,queryParams:S().object,data:S().array,margin:S().object,getHeight:S().func,getWidth:S().func,history:S().object};const R=(0,Z.Z)(I);var q=function(e){(0,k.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,w.Z)(t);if(n){var a=(0,w.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,T.Z)(this,e)});function a(e){var t;return(0,E.Z)(this,a),(t=r.call(this,e)).init=t.init.bind((0,x.Z)(t)),t.draw=t.draw.bind((0,x.Z)(t)),t.resize=t.resize.bind((0,x.Z)(t)),t.updateCluster=t.updateCluster.bind((0,x.Z)(t)),t.redirectToJobExplorer=t.redirectToJobExplorer.bind((0,x.Z)(t)),t.state={formattedData:[],timeout:null},t}return(0,_.Z)(a,[{key:"redirectToJobExplorer",value:function(e){var t=e.DATE,n=D.n.jobExplorer,r=(0,B.p6)(t),a={start_date:r,end_date:r,quick_date_range:"custom",status:["failed","successful"],cluster_id:this.props.queryParams.cluster_id,org_id:this.props.queryParams.org_id,template_id:this.props.queryParams.template_id,job_type:this.props.queryParams.job_type},o=(0,P.stringify)(a,{arrayFormat:"bracket"});this.props.history.push({pathname:n,search:o})}},{key:"resize",value:function(){var e=this,t=this.state.timeout;clearTimeout(t),this.setState({timeout:setTimeout((function(){e.init()}),500)})}},{key:"updateCluster",value:function(){this.init()}},{key:"init",value:function(){this.draw()}},{key:"draw",value:function(){j.td_("#"+this.props.id+" > *").remove();var e=this.props.getWidth(),t=this.props.getHeight();function n(e){e.transition().duration(1e3).attrTween("stroke-dasharray",r)}function r(){var e=this.getTotalLength(),t=j.ITZ("0,"+e,e+","+e);return function(e){return t(e)}}var a=j.Xf().rangeRound([0,e]),o=j.BYU().range([t,0]),i=j.PKp(["#6EC664","#A30000","#06C"]),l=j.Ys("#"+this.props.id).append("svg").attr("width",e+this.props.margin.left+this.props.margin.right).attr("height",t+this.props.margin.top+this.props.margin.bottom).attr("z",100).append("g").attr("transform","translate("+this.props.margin.left+","+this.props.margin.top+")"),s=new O({svg:"#"+this.props.id,colors:i}),c=this.props.data,u=j.Z1g("%Y-%m-%d"),d=c.reduce((function(e,t){var n=t.created_date,r=t.successful_count,a=t.failed_count,o=u(n)||new Date,i=+r||0,l=+a||0,s=+r+a||0;return e.concat({DATE:o,RAN:i,FAIL:l,TOTAL:s})}),[]);a.domain(j.Wem(d,(function(e){return e.DATE}))),o.domain([0,j.Fp7(d,(function(e){return 1.15*e.TOTAL||8}))]);var p,m=j.jvg().curve(j.FdL).x((function(e){return a(e.DATE)})).y((function(e){return o(e.RAN)})),f=j.jvg().defined((function(e){return!isNaN(e.FAIL)})).curve(j.FdL).x((function(e){return a(e.DATE)})).y((function(e){return o(e.FAIL)}));l.append("g").attr("class","y-axis").call(j.y4O(o).ticks(10).tickSize(-e)).selectAll("line").attr("stroke","#d7d7d7"),l.selectAll(".y-axis .tick text").attr("x",-5),l.append("text").attr("transform","rotate(-90)").attr("y",0-this.props.margin.left).attr("x",0-t/2).attr("dy","1em").style("text-anchor","middle").text("Job runs");var h=Math.round(d.length/(d.length/2));p=d.map((function(e){return e.DATE})),d.length>14&&(p=d.map((function(e,t){return t%h==0?e.DATE:void 0})).filter((function(e){return e}))),l.append("g").attr("class","x-axis").attr("transform","translate(0,"+t+")").call(j.LLu(a).tickValues(p).tickSize(-t).tickFormat(j.i$Z("%-m/%-d"))).selectAll("line").attr("stroke","#d7d7d7"),l.selectAll(".x-axis .tick text").attr("y",10),l.append("text").attr("transform","translate("+e/2+" ,"+(t+this.props.margin.top+20)+")").style("text-anchor","middle").text("Date");var g=l.append("path").attr("class","mouse-line").style("stroke","black").style("stroke-width","3px").style("stroke-dasharray","3, 3").style("opacity","0"),v=function(e){s.handleMouseOver(e),g.transition().style("opacity","1")},y=function(){var e=this.cx.baseVal.value;g.attr("d",(function(){return"M"+e+","+t+" "+e+",0"}))},b=function(){s.handleMouseOut(),g.transition().style("opacity",0)};l.append("path").data([d]).attr("class","line").style("fill","none").style("stroke",(function(){return i(1)})).attr("stroke-width",2).attr("d",m).call(n),l.append("path").data([d]).attr("class","line").style("fill","none").style("stroke",(function(){return i(0)})).attr("stroke-width",2).attr("d",f).call(n),l.selectAll("dot").data(d).enter().append("circle").attr("r",3).style("stroke",(function(){return i(1)})).style("fill",(function(){return i(1)})).attr("cx",(function(e){return a(e.DATE)})).attr("cy",(function(e){return o(e.RAN)})).on("mouseover",v).on("mousemove",y).on("mouseout",b).on("click",this.redirectToJobExplorer),l.selectAll("dot").data(d).enter().append("circle").attr("r",3).style("stroke",(function(){return i(0)})).style("fill",(function(){return i(0)})).attr("cx",(function(e){return a(e.DATE)})).attr("cy",(function(e){return o(e.FAIL)})).on("mouseover",v).on("mousemove",y).on("mouseout",b).on("click",this.redirectToJobExplorer)}},{key:"componentDidMount",value:function(){this.updateCluster(),window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.updateCluster()}},{key:"componentWillUnmount",value:function(){var e=this.state.timeout;clearTimeout(e),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return c().createElement("div",{id:this.props.id})}}]),a}(s.Component);q.propTypes={id:S().string,queryParams:S().object,data:S().array,margin:S().object,getHeight:S().func,getWidth:S().func,history:S().object};const L=(0,Z.Z)(q);var F,A,N,z=n(32465),M=n(29163),Y=n(97853),W=(0,M.ZP)(b.DataListCell)(F||(F=(0,z.Z)(["\n  --pf-c-data-list__cell-cell--MarginRight: 0;\n"]))),U=(0,M.ZP)(b.DataListItem)(A||(A=(0,z.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n"]))),G=(0,M.ZP)(W)(N||(N=(0,z.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]))),V=function(e){var t=e.modules,n=e.isLoading;return c().createElement(b.DataList,{"aria-label":"Top Modules",style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},c().createElement(U,{"aria-labelledby":"top-modules-header"},c().createElement(W,null,c().createElement("h3",null,"Top modules")),c().createElement(G,null,c().createElement("h3",null,"Usage"))),n&&c().createElement(b.DataListItem,{"aria-labelledby":"modules-loading",key:n,style:{border:"none"}},c().createElement(b.DataListCell,null,c().createElement(d.Z,null))),!n&&t.length<=0&&c().createElement(b.DataListItem,{"aria-labelledby":"modules-no-data",key:n,style:{border:"none"}},c().createElement(b.DataListCell,null,c().createElement(Y.Z,null))),!n&&t.filter((function(e){return null!==e.name})).map((function(e,t){var n=e.name,r=e.host_task_count;return c().createElement(U,{"aria-labelledby":"top-modules-detail",key:t},c().createElement(W,null,c().createElement("span",null,(0,B.mN)(n))),c().createElement(G,null,r))})))};V.propTypes={modules:S().array,isLoading:S().bool};const H=V;var K,J,$,Q,X,ee=n(334),te=n(83160),ne=n(26249),re=M.ZP.div(K||(K=(0,z.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 100%;\n  max-width: 100%;\n  height: 1rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n"]))),ae=M.ZP.div(J||(J=(0,z.Z)(["\n  height: 100%;\n"]))),oe=M.ZP.div($||($=(0,z.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n"]))),ie=M.ZP.div(Q||(Q=(0,z.Z)(["\n  padding-left: 2rem;\n  display: flex;\n  align-items: center;\n"]))),le=M.ZP.div(X||(X=(0,z.Z)(["\n  width: 0.75rem;\n  height: 0.75rem;\n  margin-right: 0.5rem;\n"]))),se=function(e){var t=e.categoryCount,n=void 0===t?{}:t,r=e.categoryColor,a=Object.values(n).reduce((function(e,t){return e+t})),o=Object.keys(n).filter((function(e){return n[e]>0})).sort((function(e){return n[e]<n[e]?1:n[e]>n[e]?-1:0})).map((function(e){return{name:e,barSpacing:n[e]/a,color:r[e]}})),i=1-.15*(o.length-1)/100;return c().createElement(c().Fragment,null,c().createElement(re,null,o.map((function(e,t){var n=e.barSpacing,r=e.color;return t<o.length-1?c().createElement(c().Fragment,{key:t},c().createElement(ae,{style:{backgroundColor:r,width:"".concat(100*n*i,"%")}}),c().createElement(ae,{style:{backgroundColor:"transparent",width:"".concat(.15,"%")}})):c().createElement(c().Fragment,{key:t},c().createElement(ae,{style:{backgroundColor:r,width:"".concat(100*n*i,"%")}}))}))),c().createElement(oe,null,o.map((function(e){var t,n=e.name,r=e.color;return c().createElement(ie,{key:"label-".concat(n)},c().createElement(le,{style:{backgroundColor:r}}),c().createElement("p",null,(t=n)[0].toUpperCase()+t.slice(1).toLowerCase()))}))))};se.propTypes={categoryColor:S().object,categoryCount:S().object};const ce=se;var ue,de=n(20272),pe=n(29587),me=n(94550),fe=n(8644);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=M.ZP.div(ue||(ue=(0,z.Z)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 2rem;\n"]))),ye=function(e){if(e){if(e&&e[0]){var t=Math.ceil(e[0].failed_count/e[0].total_failed_count*100);return"".concat(e[0].task_name," ").concat(t,"%")}return"Unavailable"}},be=function(e,t){return Math.ceil(e/t*100)+"%"},Ee=function(e){return new Date(1e3*e).toISOString().substr(11,8)},_e=function(e){var t=e.selectedId,n=e.isOpen,o=e.handleModal,i=e.qp,u=e.jobType,p=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t,n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,m.Ij)({params:Z}),(0,m.Ij)({params:w})]);case 2:return t=e.sent,n=(0,a.Z)(t,2),r=n[0],o=n[1],e.abrupt("return",{relatedJobs:o.items,stats:r.items[0]});case 7:case"end":return e.stop()}}),e)}))),[]),{stats:{},relatedJobs:{}}),f=p.result,h=f.relatedJobs,g=f.stats,v=p.error,y=p.isLoading,E=p.isSuccess,_=p.request;(0,s.useEffect)((function(){_()}),[t,_]);var x,k,T=(0,ee.useHistory)(),w=ge(ge({},i),{},{template_id:[t],attributes:["id","status","job_type","started","finished","elapsed","created","cluster_name","org_name"],group_by_time:!1,limit:5,sort_by:"created:desc",quick_date_range:i.quick_date_range?i.quick_date_range:"last_30_days",job_type:[u]}),Z={group_by:"template",template_id:[t],attributes:["elapsed","job_type","successful_count","failed_count","error_count","waiting_count","pending_count","canceled_count","new_count","running_count","total_count","job"===u?"most_failed_tasks":"most_failed_steps"],status:i.status,quick_date_range:i.quick_date_range?i.quick_date_range:"last_30_days",job_type:[u]},j=g?{success:g.successful_count,cancelled:g.canceled_count,error:g.error_count,failed:g.failed_count,new:g.new_count,pending:g.pending_count,running:g.running_count,waiting:g.waiting_count}:null,C={success:pe.global_palette_green_200.value,cancelled:pe.global_palette_black_850.value,error:pe.global_palette_orange_300.value,failed:pe.global_palette_red_100.value,new:pe.global_palette_cyan_200.value,pending:pe.global_palette_purple_300.value,running:pe.global_palette_blue_300.value,waiting:pe.global_palette_light_green_200.value},S=g&&[{label:"Number of runs",id:"total-runs",value:g.total_count?g.total_count:"Unavailable"},{label:"Total time",id:"total-time",value:g.elapsed?Ee(g.elapsed):"Unavailable"},{label:"Average time",id:"avg-time",value:g.elapsed?(x=g.elapsed,k=g.total_count,new Date(1e3*Math.ceil(x/k)).toISOString().substr(11,8)):"Unavailable"},{label:"Type",id:"type",value:u?(0,B.GV)(u):"Unavailable"},{label:"Success rate",id:"success-rate",value:isNaN(g.successful_count)?"Unavailable":be(g.successful_count,g.total_count)},{label:"Most failed task",id:"most-failed",value:g.most_failed_tasks?ye(g.most_failed_tasks):"Unavailable"}],O=function(){o(!1)};return c().createElement(b.Modal,{"aria-label":"modal",variant:b.ModalVariant.medium,title:g.name?g.name:"No template name",isOpen:n,onClose:O},y&&c().createElement(d.Z,null),v&&c().createElement(te.Z,{message:v.error}),E&&h.length<=0&&c().createElement(ne.Z,null),E&&h.length>0&&c().createElement(c().Fragment,null,j&&c().createElement(ce,{categoryCount:j,categoryColor:C}),c().createElement(b.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},S.map((function(e){var t=e.label,n=e.id,r=e.value;return c().createElement(b.DescriptionListGroup,{className:n,key:t},c().createElement(b.DescriptionListTerm,null,t),c().createElement(b.DescriptionListDescription,null,r))}))),c().createElement(b.Divider,{component:"div",style:{marginTop:"2rem",marginBottom:"1.5rem"}}),c().createElement("p",null,c().createElement("strong",null,"Last 5 jobs")),c().createElement(me.TableComposable,{"aria-label":"Template information table",variant:"compact"},c().createElement(me.Thead,null,c().createElement(me.Tr,null,["Id/Name","Status","Cluster","Finished","Total time"].map((function(e,t){return c().createElement(me.Th,{key:t},e)})))),c().createElement(me.Tbody,null,h.map((function(e,t){return c().createElement(me.Tr,{key:"job-detail-".concat(t)},c().createElement(me.Td,null,"".concat(e.id.id," - ").concat(e.id.template_name)),c().createElement(me.Td,null,c().createElement(de.Z,{status:e.status})),c().createElement(me.Td,null,e.cluster_name),c().createElement(me.Td,null,(0,B.o0)(e.finished)),c().createElement(me.Td,null,Ee(e.elapsed)))}))))),c().createElement(ve,null,c().createElement(b.Button,{key:"cancel",variant:"secondary",onClick:function(){O()}},"Close"),c().createElement(b.Button,{component:"a",onClick:function(){var e=D.n.jobExplorer,n={template_id:[t],status:["successful","failed","new","pending","waiting","error","canceled","running"],job_type:[u],quick_date_range:"last_30_days"},r=(0,P.stringify)(n,{arrayFormat:"bracket"});T.push({pathname:e,search:r})},variant:"link"},"View all jobs")))};_e.propTypes={selectedId:S().number.isRequired,qp:S().object.isRequired,jobType:S().string.isRequired,isOpen:S().bool.isRequired,handleModal:S().func.isRequired};const xe=_e;var ke,Te,we,Ze=(0,M.ZP)(b.DataListCell)(ke||(ke=(0,z.Z)(["\n  --pf-c-data-list__cell-cell--MarginRight: 0;\n"]))),je=(0,M.ZP)(b.DataListItem)(Te||(Te=(0,z.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 0 15px 10px 15px;\n  justify-content: center;\n  align-items: center;\n"]))),Ce=(0,M.ZP)(Ze)(we||(we=(0,z.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]))),Se=function(e){var t=e.templates,n=e.isLoading,r=e.qp,o=e.title,i=e.jobType,l=(0,s.useState)(null),u=(0,a.Z)(l,2),p=u[0],m=u[1],f=(0,s.useState)(!1),h=(0,a.Z)(f,2),g=h[0],v=h[1],y=function(e){return"job"===e?"templates":"workflows"};return c().createElement(c().Fragment,null,c().createElement(b.DataList,{"aria-label":"Top ".concat(y(i)),style:{maxHeight:"400px",overflow:"auto",height:"400px",background:"white"}},c().createElement(je,{"aria-labelledby":"top-".concat(y(i),"-header")},c().createElement(Ze,null,c().createElement("h3",null,o)),c().createElement(Ce,null,c().createElement("h3",null,"Usage"))),n&&c().createElement(b.DataListItem,{"aria-labelledby":"".concat(y(i),"-loading"),key:n,style:{border:"none"}},c().createElement(b.DataListCell,null,c().createElement(d.Z,null))),!n&&t.length<=0&&c().createElement(b.DataListItem,{"aria-labelledby":"".concat(y(i),"-no-data"),key:n,style:{border:"none"}},c().createElement(b.DataListCell,null,c().createElement(Y.Z,null))),!n&&t.map((function(e,t){var n=e.name,r=e.total_count,a=e.id;return c().createElement(je,{"aria-labelledby":"top-".concat(y(i),"-detail"),key:t},c().createElement(Ze,null,c().createElement("a",{onClick:function(){v(!0),m(a)}},n)),c().createElement(Ce,null,r))}))),p&&c().createElement(xe,{isOpen:g,handleModal:v,selectedId:p,qp:r,jobType:i}))};Se.propTypes={templates:S().array,isLoading:S().bool,queryParams:S().object,title:S().string,qp:S().object,jobType:S().string};const Oe=Se;var Pe=n(13090),De=n(21048);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re={group_by:"template",limit:10,job_type:["job"],group_by_time:!1,status:["successful","failed"]},qe={group_by:"template",limit:10,job_type:["workflowjob"],group_by_time:!1,status:["successful","failed"]},Le={group_by:"module",sort_by:"host_task_count:desc",limit:10},Fe=(0,De.Hm)("clusters",Ie({},f.kK.defaultParams),["limit","offset"]);const Ae=function(){var e,t=(0,s.useState)(null),n=(0,a.Z)(t,2),o=n[0],i=n[1],E=(0,u.K)(Fe),_=E.queryParams,x=E.setFromToolbar,k=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.VU)({params:ne});case 2:return t=e.sent,e.abrupt("return",{options:t});case 4:case"end":return e.stop()}}),e)}))),[_]),{options:{}}),T=k.result.options,w=k.error,Z=k.request,j=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.Ij)({params:_});case 2:return t=e.sent,e.abrupt("return",{chartData:t.items});case 4:case"end":return e.stop()}}),e)}))),[_]),{chartData:[],chartDataError:S,chartDataIsLoading:O,chartDataIsSuccess:P}),C=j.result.chartData,S=j.error,O=j.isLoading,P=j.isSuccess,D=j.request,B=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.wi)({params:me});case 2:return t=e.sent,e.abrupt("return",{modules:t.items});case 4:case"end":return e.stop()}}),e)}))),[_]),{modules:[],modulesError:q,modulesIsLoading:F,modulesIsSuccess:A}),I=B.result.modules,q=B.error,F=B.isLoading,A=B.isSuccess,N=B.request,z=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.Ij)({params:de});case 2:return t=e.sent,e.abrupt("return",{templates:t.items});case 4:case"end":return e.stop()}}),e)}))),[_]),{templates:[],templatesError:Y,templatesIsLoading:W,templatesIsSuccess:U}),M=z.result.templates,Y=z.error,W=z.isLoading,U=z.isSuccess,G=z.request,V=(0,fe.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.Ij)({params:pe});case 2:return t=e.sent,e.abrupt("return",{workflows:t.items});case 4:case"end":return e.stop()}}),e)}))),[_]),{workflows:[],workflowsError:J,workflowsIsLoading:$,workflowsIsSuccess:Q}),K=V.result.workflows,J=V.error,$=V.isLoading,Q=V.isSuccess,X=V.request,ee={attributes:f.cY.attributes},ne=(0,u.K)(ee);(0,s.useEffect)((function(){Z(),D(),N(),G(),X()}),[_]);var re,ae,oe=_.cluster_id,ie=_.org_id,le=_.template_id,se=_.quick_date_range,ce=_.start_date,ue=_.end_date,de=Ie({cluster_id:oe,org_id:ie,template_id:le,quick_date_range:se,start_date:ce,end_date:ue},Re),pe=Ie({cluster_id:oe,org_id:ie,template_id:le,quick_date_range:se,start_date:ce,end_date:ue},qe),me=Ie({cluster_id:oe,org_id:ie,template_id:le,quick_date_range:se,start_date:ce,end_date:ue},Le);return(0,s.useEffect)((function(){function e(){return(e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.YU)().catch((function(e){i({preflightError:e})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),403===(null==o||null===(e=o.preflightError)||void 0===e?void 0:e.status)?c().createElement(g.Z,f.dR):null!=o&&o.preflightError?c().createElement(p.Z,o):w?c().createElement(te.Z,{message:w.error}):c().createElement(c().Fragment,null,c().createElement(v.Z,null,c().createElement(y.Z,{title:"Clusters"}),c().createElement(Pe.Z,{categories:T,qsConfig:Fe,filters:_,setFilters:x})),c().createElement(h.Z,null,c().createElement(b.Grid,{hasGutter:!0},c().createElement(b.GridItem,{span:12},c().createElement(b.Card,null,c().createElement(b.CardTitle,null,c().createElement("h2",null,"Job status")),c().createElement(b.CardBody,null,O&&c().createElement(d.Z,null),(!_.cluster_id||(null===(re=_.cluster_id)||void 0===re?void 0:re.length)<=0)&&P&&c().createElement(R,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-bar-chart-root",data:C,queryParams:_}),(null===(ae=_.cluster_id)||void 0===ae?void 0:ae.length)>0&&P&&c().createElement(L,{margin:{top:20,right:20,bottom:50,left:70},id:"d3-line-chart-root",data:C,queryParams:_})))),c().createElement(b.GridItem,{span:4},c().createElement(Oe,{qp:_,templates:K,isLoading:$,title:"Top workflows",jobType:"workflowjob"})),c().createElement(b.GridItem,{span:4},c().createElement(Oe,{qp:_,templates:M,isLoading:W,title:"Top templates",jobType:"job"})),c().createElement(b.GridItem,{span:4},c().createElement(H,{modules:I,isLoading:F})))))}},84823:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r=n(92137),a=n(34699),o=n(96156),i=n(87757),l=n.n(i),s=n(92950),c=n.n(s),u=n(45697),d=n.n(u),p=n(53677),m=n(8644),f=n(94794),h=n(2205),g=n(26249),v=n(83160),y=n(12613),b=n(20806),E=n(17563),_=n(64866),x=n(13784),k=n(86350),T=n(27839),w=n(48716),Z=n(39173),j=n(58788),C=n(94550),S=n(79886),O=n(20272),P=function(e){var t=e.job,n=(0,s.useState)(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1],l=[{label:"Created",value:t.created?(0,S.o0)(t.created):"Unavailable"},{label:"Started",value:t.created?(0,S.o0)(t.started):"Unavailable"},{label:"Finished",value:t.created?(0,S.o0)(t.finished):"Unavailable"}];return c().createElement(c().Fragment,null,c().createElement(C.Tr,null,c().createElement(C.Td,{expand:{rowIndex:t.id.id,isExpanded:o,onToggle:function(){i(!o)}}}),c().createElement(C.Td,{href:t.id.tower_link},"".concat(t.id.id," - ").concat(t.id.template_name)),c().createElement(C.Td,null,c().createElement(O.Z,{status:t.status})),c().createElement(C.Td,null,t.cluster_name),c().createElement(C.Td,null,t.org_name),c().createElement(C.Td,null,(0,S.GV)(t.job_type))),c().createElement(C.Tr,{isExpanded:o},c().createElement(C.Td,{colSpan:6},c().createElement(C.ExpandableRowContent,null,c().createElement(j.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},l.map((function(e){var t=e.label,n=e.value;return c().createElement(j.DescriptionListGroup,{key:t},c().createElement(j.DescriptionListTerm,null,t),c().createElement(j.DescriptionListDescription,null,n))})))))))};P.propTypes={job:d().object.isRequired};const D=P;var B=["Id/Name","Status","Cluster","Organization","Type"],I=function(e){var t=e.jobs;return c().createElement(C.TableComposable,{"aria-label":"Job Explorer Table",variant:"compact"},c().createElement(C.Thead,null,c().createElement(C.Tr,null,c().createElement(C.Th,null),B.map((function(e,t){return c().createElement(C.Th,{key:"col-".concat(t)},e)})))),c().createElement(C.Tbody,null,t.map((function(e){return c().createElement(D,{job:e,key:e.id.id})}))))};I.propTypes={jobs:d().array.isRequired};const R=I;var q=n(13090),L=n(21048);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=A(A({},x.cY.defaultParams),{},{attributes:x.cY.attributes}),z=(0,L.Hm)("job-explorer",A({},N),["limit","offset"]),M=function(e){var t,n=e.location.search,o=e.history,i=(0,s.useState)(null),u=(0,a.Z)(i,2),d=u[0],C=u[1],S=(0,p.K)(z),O=S.queryParams,P=S.setFromPagination,D=S.setFromToolbar,B=(0,m.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.ZW)({params:O});case 2:return t=e.sent,e.abrupt("return",{options:t});case 4:case"end":return e.stop()}}),e)}))),[O]),{options:{}}),I=B.result.options,L=B.error,F=B.request,M=(0,m.ZP)((0,s.useCallback)((0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.Ij)({params:O});case 2:return t=e.sent,e.abrupt("return",{data:t.items,meta:t.meta});case 4:case"end":return e.stop()}}),e)}))),[O]),{items:[],dataError:G,dataIsLoading:V,dataIsSuccess:H}),Y=M.result,W=Y.data,U=Y.meta,G=M.error,V=M.isLoading,H=M.isSuccess,K=M.request,J=(0,E.parse)(n,{arrayFormat:"bracket",parseBooleans:!0,parseNumbers:!0});return(0,s.useEffect)((function(){o.replace({pathname:x.cY,initialSearchParams:J})}),[]),(0,s.useEffect)((function(){insights.chrome.appNavClick({id:"job-explorer",secondaryNav:!0}),(0,_.YU)().catch((function(e){C({preflightError:e})}))}),[]),(0,s.useEffect)((function(){F(),K(),function(){var e=b.n.jobExplorer,t=(0,E.stringify)(A(A({},N),J),{arrayFormat:"bracket"});o.replace({pathname:e,search:t})}()}),[O]),403===(null==d||null===(t=d.preflightError)||void 0===t?void 0:t.status)?c().createElement(T.Z,x.dR):null!=d&&d.preflightError?c().createElement(h.Z,d):L?c().createElement(v.Z,{message:L.error}):c().createElement(c().Fragment,null,c().createElement(w.Z,null,c().createElement(Z.Z,{title:"Job Explorer"})),!d&&c().createElement(k.Z,null,c().createElement(j.Card,null,c().createElement(j.CardBody,null,c().createElement(q.Z,{categories:I,filters:O,qsConfig:z,setFilters:D,pagination:c().createElement(y.Z,{count:null==U?void 0:U.count,params:{limit:parseInt(O.limit),offset:parseInt(O.offset)},qsConfig:z,setPagination:P,isCompact:!0}),hasSettings:!0}),V&&c().createElement(f.Z,null),H&&W.length<=0&&c().createElement(g.Z,null),H&&W.length>0&&c().createElement(R,{jobs:W}),c().createElement(y.Z,{count:null==U?void 0:U.count,params:{limit:parseInt(O.limit),offset:parseInt(O.offset)},qsConfig:z,setPagination:P,variant:j.PaginationVariant.bottom})))))};M.propTypes={location:d().object,history:d().object};const Y=M},24704:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var r,a,o,i=n(92137),l=n(34699),s=n(96156),c=n(32465),u=n(87757),d=n.n(u),p=n(92950),m=n.n(p),f=n(53677),h=n(29163),g=n(94794),v=n(2205),y=n(97853),b=n(64866),E=n(86350),_=n(27839),x=n(48716),k=n(39173),T=n(13784),w=n(58788),Z=n(45697),j=n.n(Z),C=n(30381),S=n.n(C),O=n(50470),P=n(79886),D=(0,h.ZP)(O.ZP)(r||(r=(0,c.Z)(["\n  margin-left: 7px;\n  color: var(--pf-global--Color--400);\n  font-size: 14px;\n"]))),B=(0,h.ZP)(w.NotificationDrawerListItem)(a||(a=(0,c.Z)(["\n  border-top: 1px solid var(--pf-global--BorderColor--light-100\n    );\n  border-bottom::nth-child(odd): 1px solid var(--pf-global--BorderColor--light-100\n    );\n  box-shadow: none;\n  &:focus {\n    outline: none;\n  }\n"]))),I=(0,h.ZP)(w.NotificationDrawerList)(o||(o=(0,c.Z)(["\n  &:last-child {\n    border-bottom: 1px solid var(--pf-global--BorderColor--light-100);\n  }\n"]))),R=function(e){var t=S()(e),n=S()().utc();return n.isAfter(t)?"".concat(n.diff(t,"days")," day(s) ago."):t.isSame(n,"day")?t.valueOf()>36e5?"".concat(t.diff(n,"hours")," hour(s) ago."):"".concat(n.diff(t,"minutes")," minute(s) ago."):void 0},q=function(e){return e.notifications.map((function(e){var t=e.date,n=e.message,r=e.label,a=e.notification_id,o=e.tower_url;return""===r||"notice"===r?m().createElement(B,{variant:"info",key:t+"-"+a},m().createElement(w.NotificationDrawerListItemHeader,{variant:"info",title:m().createElement(m().Fragment,null,o?m().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},(0,P.kC)(r),m().createElement(D,null)):(0,P.kC)(r))}),m().createElement(w.NotificationDrawerListItemBody,null,n," ")):"error"===r?m().createElement(B,{variant:"danger",key:t+"-"+a},m().createElement(w.NotificationDrawerListItemHeader,{variant:"danger",title:m().createElement(m().Fragment,null,o?m().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},(0,P.kC)(r),m().createElement(D,null)):(0,P.kC)(r))}),m().createElement(w.NotificationDrawerListItemBody,{timestamp:R(t)},n," ")):"warning"===r?m().createElement(B,{variant:"warning",key:t+"-"+a},m().createElement(w.NotificationDrawerListItemHeader,{variant:"warning",title:m().createElement(m().Fragment,null,o?m().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},(0,P.kC)(r),m().createElement(D,null)):(0,P.kC)(r))}),m().createElement(w.NotificationDrawerListItemBody,{timestamp:R(t)},n," ")):void 0}))},L=function(e){return e.notifications.filter((function(e){return"error"===e.label})).map((function(e){var t=e.message,n=e.date,r=e.label,a=e.notification_id,o=e.tower_url;return m().createElement(B,{variant:"danger",key:n+"-"+a},m().createElement(w.NotificationDrawerListItemHeader,{variant:"danger",title:m().createElement(m().Fragment,null,o?m().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},(0,P.kC)(r),m().createElement(D,null)):(0,P.kC)(r))}),m().createElement(w.NotificationDrawerListItemBody,{timestamp:R(n)},t," "))}))},F=function(e){return e.notifications.filter((function(e){return"notice"===e.label})).map((function(e){var t=e.message,n=e.date,r=e.label,a=e.notification_id,o=e.tower_url;return m().createElement(B,{variant:"info",key:n+"-"+a},m().createElement(w.NotificationDrawerListItemHeader,{variant:"info",title:m().createElement(m().Fragment,null,o?m().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},(0,P.kC)(r),m().createElement(D,null)):(0,P.kC)(r))}),m().createElement(w.NotificationDrawerListItemBody,{timestamp:R(n)},t," "))}))},A=function(e){return e.notifications.filter((function(e){return"warning"===e.label})).map((function(e){var t=e.message,n=e.date,r=e.label,a=e.notification_id,o=e.tower_url;return m().createElement(B,{variant:"warning",key:n+"-"+a},m().createElement(w.NotificationDrawerListItemHeader,{variant:"warning",title:m().createElement(m().Fragment,null,o?m().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},(0,P.kC)(r),m().createElement(D,null)):(0,P.kC)(r))}),m().createElement(w.NotificationDrawerListItemBody,{timestamp:R(n)},t," "))}))},N=function(e){var t=e.filterBy,n=e.notifications;return m().createElement(m().Fragment,null,m().createElement(I,null,n.length<=0&&m().createElement(g.Z,null),""===t&&m().createElement(q,{notifications:n}),"notice"===t&&m().createElement(F,{notifications:n}),"error"===t&&m().createElement(L,{notifications:n}),"warning"===t&&m().createElement(A,{notifications:n})))};q.propTypes={notifications:j().array},L.propTypes={notifications:j().array},A.propTypes={notifications:j().array},N.propTypes={notifications:j().array,filterBy:j().string};const z=N;var M,Y,W=n(12613),U=n(21048);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V=(0,h.ZP)(w.CardTitle)(M||(M=(0,c.Z)(["\n  display: flex;\n  justify-content: space-between;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n"]))),H=h.ZP.div(Y||(Y=(0,c.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n\n  @media screen and (max-width: 1035px) {\n    display: block;\n  }\n\n  select {\n    margin: 0 10px;\n    width: 150px;\n\n    @media screen and (max-width: 1035px) {\n      margin: 10px 10px 0 0;\n    }\n\n    @media screen and (max-width: 865px) {\n      width: 100%;\n    }\n  }\n"]))),K=[{value:"please choose",label:"Select Notification Severity",disabled:!0},{value:"error",label:"View Critical",disabled:!1},{value:"warning",label:"View Warning",disabled:!1},{value:"notice",label:"View Notice",disabled:!1},{value:"",label:"View All",disabled:!1}];function J(e){return e.reduce((function(e,t){var n=t.label,r=t.cluster_id,a=t.install_uuid;return 0===n.length?e.push({value:r,label:a,disabled:!1}):e.push({value:r,label:n,disabled:!1}),e}),[{value:"please choose",label:"Select cluster",disabled:!0},{value:"",label:"All Clusters",disabled:!1},{value:-1,label:"Unassociated",disabled:!1}])}var $=(0,U.Hm)("notifications",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{limit:5,offset:0}),["limit","offset"]);const Q=function(){var e,t=(0,p.useState)(null),n=(0,l.Z)(t,2),r=n[0],a=n[1],o=(0,p.useState)([]),s=(0,l.Z)(o,2),c=s[0],u=s[1],h=(0,p.useState)([]),Z=(0,l.Z)(h,2),j=Z[0],C=Z[1],S=(0,p.useState)(""),O=(0,l.Z)(S,2),P=O[0],D=O[1],B=(0,p.useState)(!0),I=(0,l.Z)(B,2),R=I[0],q=I[1],L=(0,p.useState)(!0),F=(0,l.Z)(L,2),A=F[0],N=F[1],M=(0,p.useState)({}),Y=(0,l.Z)(M,2),U=Y[0],G=Y[1],Q=(0,f.K)($),X=Q.queryParams,ee=Q.setId,te=Q.setFromPagination,ne=Q.setSeverity;return(0,p.useEffect)((function(){R||(N(!0),(0,b.A7)({params:X}).then((function(e){var t=e.notifications,n=void 0===t?[]:t,r=e.meta;u(n),G(r),N(!1)})))}),[X]),(0,p.useEffect)((function(){insights.chrome.appNavClick({id:"notifications",secondaryNav:!0});var e=!1,t=function(){return Promise.all([(0,b.hD)(),(0,b.A7)({params:X})].map((function(e){return e.catch((function(){return[]}))})))};function n(){return(n=(0,i.Z)(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return N(!0),n.next=3,(0,b.YU)().catch((function(e){a({preflightError:e})}));case 3:t().then((function(t){var n=(0,l.Z)(t,2),r=n[0].templates,a=void 0===r?[]:r,o=n[1],i=o.notifications,s=void 0===i?[]:i,c=o.meta;if(!e){var d=J(a);C(d),u(s),G(c),q(!1),N(!1)}}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){return e=!0}}),[X]),403===(null==r||null===(e=r.preflightError)||void 0===e?void 0:e.status)?m().createElement(_.Z,T.dR):m().createElement(m().Fragment,null,m().createElement(x.Z,null,m().createElement(k.Z,{title:"Notifications"})),r&&m().createElement(E.Z,null,m().createElement(v.Z,r)),!r&&m().createElement(m().Fragment,null,m().createElement(E.Z,null,m().createElement(w.Card,null,m().createElement(V,null,m().createElement(H,null,m().createElement(w.FormSelect,{name:"selectedCluster",value:P,onChange:function(e){D(e),ee(e),te(0)},"aria-label":"Select Cluster"},j.map((function(e,t){var n=e.value,r=e.label,a=e.disabled;return m().createElement(w.FormSelectOption,{isDisabled:a,key:t,value:n,label:r})}))),m().createElement(w.FormSelect,{name:"selectedNotification",value:X.severity||"",onChange:function(e){ne(e),te(0)},"aria-label":"Select Notification Type"},K.map((function(e,t){var n=e.disabled,r=e.value,a=e.label;return m().createElement(w.FormSelectOption,{isDisabled:n,key:t,value:r,label:a})})))),m().createElement(W.Z,{count:null==U?void 0:U.count,qsConfig:$,params:{limit:X.limit,offset:X.offset},setPagination:te,isCompact:!0})),m().createElement(w.CardBody,null,A&&m().createElement(g.Z,null),!A&&c.length<=0&&m().createElement(y.Z,null),!A&&c.length>0&&m().createElement(w.NotificationDrawer,null,m().createElement(z,{filterBy:X.severity||"",options:K,notifications:c})),m().createElement(W.Z,{count:null==U?void 0:U.count,qsConfig:$,params:{limit:X.limit,offset:X.offset},setPagination:te,variant:w.PaginationVariant.bottom}))))))}},15691:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ke});var r,a,o,i,l,s,c=n(92137),u=n(34699),d=n(81253),p=n(96156),m=n(32465),f=n(87757),h=n.n(f),g=n(92950),v=n.n(g),y=n(45697),b=n.n(y),E=n(29163),_=n(53677),x=n(14115),k=n(79886),T=n(94794),w=n(97853),Z=n(2205),j=n(83160),C=n(64866),S=n(86350),O=n(27839),P=n(48716),D=n(39173),B=n(13784),I=n(58788),R=n(87329),q=n(25914),L=n(87986),F=E.ZP.div(r||(r=(0,m.Z)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n  overflow: auto;\n  width: 100%;\n  height: ",";\n"])),(function(e){return e.height})),A=E.ZP.div(a||(a=(0,m.Z)(["\n  display: flex;\n  padding: 7.5px 15px;\n  align-items: center;\n  justify-content: space-between;\n"]))),N=E.ZP.div(o||(o=(0,m.Z)(["\n  display: flex;\n  align-items: center;\n  overflow: auto;\n"]))),z=E.ZP.div.attrs((function(e){return{color:e.color||"black"}}))(i||(i=(0,m.Z)(["\n  min-width: 12px;\n  height: 12px;\n  background: ",";\n  margin-right: 20px;\n"])),(function(e){return e.color})),M=E.ZP.span(l||(l=(0,m.Z)(["\n  font-size: 15px;\n  display: inline-block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: left;\n"]))),Y=E.ZP.span(s||(s=(0,m.Z)(["\n  font-size: 15px;\n  margin-left: auto;\n  margin-right: 0;\n  padding-right: 10px;\n"]))),W=function(e){var t=e.data,n=e.selected,r=e.height,a=e.onToggle,o=e.chartName;return v().createElement(F,{height:r},t.map((function(e,t){var r=e.name,i=e.value,l=e.id,s=e.count;return v().createElement(A,{key:t},v().createElement(N,null,v().createElement(z,{color:i}),v().createElement(M,null,r)),s&&v().createElement(Y,null,s),n&&v().createElement(I.Switch,{isChecked:n.some((function(e){return e===l})),onChange:function(){return a(l)},"aria-label":"".concat(o,"-").concat(r),value:l,key:t}))})))};W.propTypes={data:b().array.isRequired,selected:b().array.isRequired,onToggle:b().func.isRequired,height:b().string.isRequired,chartName:b().string.isRequired};const U=W;var G,V=["onClick","TooltipClass","legend"],H=E.ZP.div(G||(G=(0,m.Z)(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n"]))),K=function(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[2])},J=function(e){var t=e.onClick,n=void 0===t?null:t,r=e.TooltipClass,a=e.legend,o=(0,d.Z)(e,V),i=a.map((function(e){var t=e.id;return{name:e.name,value:o.colorFunc(t),id:t}})),l=(0,g.useState)(a.map((function(e){return e.id})).slice(0,8)),s=(0,u.Z)(l,2),c=s[0],p=s[1],m=null,f=function(){q.td_("#"+o.id+" > *").remove();var e=o.data.reduce((function(e,t){var n=t.date,r=t.items.filter((function(e){var t=e.id;return c.includes(t)}));return e.concat({date:n,selectedOrgs:r})}),[]),t=o.getWidth(),a=o.getHeight(),i=q.tiA().range([0,t]).padding(.35),l=q.tiA(),s=q.BYU().range([a,0]),u=Math.round(e.length/(e.length/2)),d=Math.round(e.length/(e.length/4)),p=e.map((function(e){return e.date}));e.length>14&&(p=e.map((function(t,n){return n%(e.length>31?d:u)==0?t.date:void 0})).filter((function(e){return e})));var m=q.LLu(i).tickValues(p).tickFormat(K),f=q.y4O(s).ticks(8).tickSize(-t,0,0),h=q.Ys("#"+o.id).append("svg").attr("width",t+o.margin.left+o.margin.right).attr("height",a+o.margin.bottom+o.margin.top).append("g").attr("transform","translate("+o.margin.left+","+o.margin.top+")"),g=e.map((function(e){return e.date})),v=new r({svg:"#"+o.id});i.domain(g),l.domain(c).range([0,i.bandwidth()]),s.domain([0,q.Fp7(e,(function(e){return q.Fp7(e.selectedOrgs,(function(e){return 1.15*e.value}))}))||8]),h.append("g").attr("class","y axis").call(f).selectAll("line").attr("stroke","#d7d7d7").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-weight","bold").text("Value"),h.append("text").attr("transform","rotate(-90)").attr("y",0-o.margin.left).attr("x",0-a/2).attr("dy","1em").style("text-anchor","middle").text(o.yLabel),h.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(m).selectAll("line").attr("stroke","#d7d7d7"),h.append("text").attr("transform","translate("+t/2+" ,"+(a+o.margin.top+25)+")").style("text-anchor","middle").text("Date");var y=h.selectAll(".slice").data(e);y.exit().remove();var b=y.enter().append("g").attr("class","g foo").attr("transform",(function(e){return"translate("+i(e.date)+",0)"})),E=(y=y.merge(b)).selectAll("rect").data((function(e){return e.selectedOrgs}));E.exit().remove();var _=o.colorFunc,x=E.enter().append("rect").attr("width",l.bandwidth()).attr("x",(function(e){return l(e.id)})).style("fill",(function(e){return _(e.id)})).attr("y",(function(e){return s(e.value)})).attr("height",(function(e){return a-s(e.value)})).on("mouseover",(function(e){e.moreDetail=!e.name.endsWith("Others"),q.Ys(this).style("cursor",n&&e.moreDetail?"pointer":"default"),q.Ys(this).style("fill",q.B8C(_(e.id)).darker(1)),v.handleMouseOver(e)})).on("mousemove",v.handleMouseOver).on("mouseout",(function(e){q.Ys(this).style("fill",_(e.id)),v.handleMouseOut()})).on("click",n);E=E.merge(x)},h=function(){clearTimeout(m),m=setTimeout((function(){f()}),500)};return(0,g.useEffect)((function(){return f(),window.addEventListener("resize",h),function(){clearTimeout(m),window.removeEventListener("resize",h)}}),[]),(0,g.useEffect)((function(){f()}),[o.data,c]),v().createElement(H,null,v().createElement("div",{id:o.id}),i.length>0&&v().createElement(U,{id:"".concat(o.id,"-legend"),data:i,selected:c,onToggle:function(e){c.includes(e)?p(c.filter((function(t){return t!==e}))):p([].concat((0,R.Z)(c),[e]))},height:"350px",chartName:"".concat(o.id,"-legend")}))};J.propTypes={id:b().string,data:b().array,legend:b().array,margin:b().object,getHeight:b().func,getWidth:b().func,colorFunc:b().func,yLabel:b().string,onClick:b().func,TooltipClass:b().any.isRequired},J.defaultProps={legend:[]};const $=(0,L.Z)(J);var Q,X=n(6610),ee=n(5991),te=function(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[2])},ne=function(){function e(t){var n=this;(0,X.Z)(this,e),(0,p.Z)(this,"handleMouseOver",(function(e){var t,r,a,o=q.Ba6.pageX-q.Ys(n.svg).node().getBoundingClientRect().x+10,i=q.Ba6.pageY-q.Ys(n.svg).node().getBoundingClientRect().y-10;if(e){t=e.date,r=e.name,a=e.value,e.name.length>16&&(r=e.name.slice(0,16).concat("...")),e.moreDetail?(n.boundingBox.attr("height",68),n.boundingBox.attr("y",-23),n.date.attr("y",14),n.jobs.attr("y",14),n.orgName.attr("y",-1),n.clickMore.text("Click for details")):(n.boundingBox.attr("height",50),n.boundingBox.attr("y",-12),n.date.attr("y",25),n.jobs.attr("y",25),n.orgName.attr("y",10),n.clickMore.text(""));var l=te,s=n.toolTipBase.node().getBoundingClientRect().width,c=q.Ys(n.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<o/c*100;n.date.text(""+l(t)),n.orgName.text(""+r),n.jobs.text(a+" Jobs"),n.jobsWidth=n.jobs.node().getComputedTextLength();var d,p=n.jobsWidth/n.boxWidth*100,m=p/45;d=p>45?n.boxWidth*m:n.boxWidth,n.boundingBox.attr("width",d),n.toolTipBase.attr("transform","translate("+o+","+i+")"),u?(n.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),n.boundingBox.attr("x",-d-20),n.jobs.attr("x",-n.jobsWidth-20-7),n.orgName.attr("x",-d-7),n.date.attr("x",-d-7),n.clickMore.attr("x",-d-7)):(n.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),n.boundingBox.attr("x",10),n.orgName.attr("x",20),n.jobs.attr("x",d/2),n.date.attr("x",20),n.clickMore.attr("x",20)),n.toolTipBase.style("opacity",1),n.toolTipBase.interrupt()}})),(0,p.Z)(this,"handleMouseOut",(function(){n.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")})),this.svg=t.svg,this.draw()}return(0,ee.Z)(e,[{key:"draw",value:function(){this.width=125,this.toolTipBase=q.Ys(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=125,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-12).attr("rx",2).attr("height",50).attr("width",this.boxWidth).attr("fill","#393f44"),this.date=this.toolTipBase.append("text").attr("x",20).attr("y",25).attr("font-size",12).attr("fill","white").text("Date"),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",72).attr("y",25).text("0 Jobs"),this.orgName=this.toolTipBase.append("text").attr("fill","white").attr("font-weight",800).attr("x",20).attr("y",10).attr("font-size",12).text("Org"),this.clickMore=this.toolTipBase.append("text").attr("fill","white").attr("x",20).attr("y",30).attr("font-size",12).text("")}}]),e}(),re=function(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[2])},ae=function(){function e(t){var n=this;(0,X.Z)(this,e),(0,p.Z)(this,"handleMouseOver",(function(e){var t,r,a,o=q.Ba6.pageX-q.Ys(n.svg).node().getBoundingClientRect().x+10,i=q.Ba6.pageY-q.Ys(n.svg).node().getBoundingClientRect().y-10;if(e){t=e.date,r=e.name,a=e.value,e.name.length>16&&(r=e.name.slice(0,16).concat("..."));var l=re,s=n.toolTipBase.node().getBoundingClientRect().width,c=q.Ys(n.svg+"> svg").node().getBoundingClientRect().width,u=100-s/c*100<o/c*100;n.date.text(""+l(t)),n.orgName.text(""+r),n.jobs.text(a+" Hosts"),n.jobsWidth=n.jobs.node().getComputedTextLength();var d,p=n.jobsWidth/n.boxWidth*100,m=p/45;d=p>45?n.boxWidth*m:n.boxWidth,n.boundingBox.attr("width",d),n.toolTipBase.attr("transform","translate("+o+","+i+")"),u?(n.toolTipPoint.attr("transform","translate(-20, 0) rotate(45)"),n.boundingBox.attr("x",-d-20),n.jobs.attr("x",-n.jobsWidth-20-7),n.orgName.attr("x",-d-7),n.date.attr("x",-d-7)):(n.toolTipPoint.attr("transform","translate(10, 0) rotate(45)"),n.boundingBox.attr("x",10),n.orgName.attr("x",20),n.jobs.attr("x",d/2),n.date.attr("x",20)),n.toolTipBase.style("opacity",1),n.toolTipBase.interrupt()}})),(0,p.Z)(this,"handleMouseOut",(function(){n.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")})),this.svg=t.svg,this.draw()}return(0,ee.Z)(e,[{key:"draw",value:function(){this.width=125,this.toolTipBase=q.Ys(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.boxWidth=125,this.textWidthThreshold=20,this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBox=this.toolTipBase.append("rect").attr("x",10).attr("y",-12).attr("rx",2).attr("height",50).attr("width",this.boxWidth).attr("fill","#393f44"),this.date=this.toolTipBase.append("text").attr("x",20).attr("y",25).attr("font-size",12).attr("fill","white").text("Date"),this.jobs=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("x",72).attr("y",25).text("0 Jobs"),this.orgName=this.toolTipBase.append("text").attr("fill","white").attr("font-weight",800).attr("x",20).attr("y",10).attr("font-size",12).text("Org")}}]),e}(),oe=E.ZP.div(Q||(Q=(0,m.Z)(["\n  display: flex;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n"]))),ie=function(){function e(t){var n=this;(0,X.Z)(this,e),(0,p.Z)(this,"handleMouseOver",(function(e){var t,r,a;!0!==n.drawn&&(n.draw(e),n.drawn=!0);var o=q.Ba6.pageX-q.Ys(n.svg).node().getBoundingClientRect().x+10,i=q.Ba6.pageY-q.Ys(n.svg).node().getBoundingClientRect().y-10;if(e){e&&e.data&&(t=e.data.percent,r=e.data.success_rate,a=e.data.name,e.data.name.length>16&&(a=e.data.name.slice(0,13).concat("...")));var l=n.toolTipBase.node().getBoundingClientRect().width,s=q.Ys(n.svg+"> svg").node().getBoundingClientRect().width,c=100-l/s*100<o/s*100;n.percentageTotal.text(t+"%"),r&&n.percentageSuccess&&n.percentageSuccess.text("("+r+"% successful)"),n.orgName.text(" "+a),n.toolTipBase.attr("transform","translate("+o+","+i+")"),c?(n.toolTipPoint.attr("transform","translate(-20, -10) rotate(45)"),n.boundingBOx.attr("x",-125),n.orgName.attr("x",-112),n.percentageTotal.attr("x",-112),n.showSuccess&&n.percentageSuccess.attr("x",-112)):(n.toolTipPoint.attr("transform","translate(10, -10) rotate(45)"),n.boundingBOx.attr("x",10),n.orgName.attr("x",20),n.percentageTotal.attr("x",20),n.showSuccess&&n.percentageSuccess.attr("x",20)),n.toolTipBase.style("opacity",1),n.toolTipBase.interrupt()}})),(0,p.Z)(this,"handleMouseOut",(function(){n.toolTipBase.transition().delay(15).style("opacity",0).style("pointer-events","none")})),this.svg=t.svg,this.drawn=!1,this.showSuccess=!1}return(0,ee.Z)(e,[{key:"draw",value:function(e){this.showSuccess=!!(e&&e.data&&"success_rate"in e.data);var t=this.showSuccess?70:52,n=this.showSuccess?120:108;this.toolTipBase=q.Ys(this.svg+"> svg").append("g"),this.toolTipBase.attr("id","svg-chart-Tooltip.base-"+this.svg.slice(1)),this.toolTipBase.attr("overflow","visible"),this.toolTipBase.style("opacity",0),this.toolTipBase.style("pointer-events","none"),this.toolTipBase.attr("transform","translate(100, 100)"),this.toolTipPoint=this.toolTipBase.append("rect").attr("transform","translate(10, -10) rotate(45)").attr("x",0).attr("y",0).attr("height",20).attr("width",20).attr("fill","#393f44"),this.boundingBOx=this.toolTipBase.append("rect").attr("x",10).attr("y",-23).attr("rx",2).attr("height",t).attr("width",n).attr("fill","#393f44"),this.orgName=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",0).text("Organization"),this.percentageTotal=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",16).text("0"),this.percentageSuccess=null,this.showSuccess&&(this.percentageSuccess=this.toolTipBase.append("text").attr("fill","white").attr("font-size",12).attr("font-weight",800).attr("x",20).attr("y",30).text(""))}}]),e}(),le=function(e){var t=e.data,n=e.id,r=e.colorFunc,a=e.margin,o=e.getWidth,i=e.getHeight,l=t.map((function(e){var t=e.id,n=e.name,a=e.count;return{id:t,name:n,value:r(t),count:Math.round(a)}})).sort((function(e,t){return e.count>t.count?1:t.count>e.count?-1:0})),s=(0,g.useState)(t.map((function(e){return e.id})).slice(0,8)),c=(0,u.Z)(s,2),d=c[0],p=c[1],m=null,f=function(){q.td_("#"+n+" > *").remove();var e=o(),l=i(),s=q.Ys("#"+n).append("svg").attr("width",e+a.left+a.right).attr("height",l+a.bottom).append("g");s.append("g").attr("class","slices"),s.append("g").attr("class","labels"),s.append("g").attr("class","lines");var c=Math.min(e,l)/2,u=t.filter((function(e){var t=e.id;return d.includes(t)})),p=(0,k.NU)(u);u.forEach((function(e){e.count=+e.count,e.percent=+Math.round(e.count/p*100)}));var m=new ie({svg:"#"+n}),f=q.ve8().sort(null).value((function(e){return e.count})),h=q.Nb1().outerRadius(c-10).innerRadius(0);s.attr("transform","translate("+(e+a.left+a.right)/2+","+(l+a.top+a.bottom)/2+")"),s.selectAll("path").data(f(u)).enter().append("path").attr("d",h).attr("fill",(function(e){return r(e.data.id)})),s.selectAll("path").on("mouseover",(function(e){q.Ys(this).style("fill",q.B8C(r(e.data.id)).darker(1)),m.handleMouseOver(e)})).on("mouseout",(function(e){q.Ys(this).style("fill",r(e.data.id)),m.handleMouseOut()})).on("mousemove",m.handleMouseOver),s.append("g").classed("labels",!0),s.append("g").classed("lines",!0)},h=function(){clearTimeout(m),m=setTimeout((function(){f()}),500)};return(0,g.useEffect)((function(){return f(),window.addEventListener("resize",h),function(){clearTimeout(m),window.removeEventListener("resize",h)}}),[]),(0,g.useEffect)((function(){f()}),[t,d]),v().createElement(oe,null,v().createElement("div",{id:n}),l.length>0&&v().createElement(U,{id:"".concat(n,"-legend"),data:l,selected:d,onToggle:function(e){d.includes(e)?p(d.filter((function(t){return t!==e}))):p([].concat((0,R.Z)(d),[e]))},height:"300px",chartName:"".concat(n,"-legend")}))};le.propTypes={id:b().string,data:b().array,margin:b().object,getHeight:b().func,getWidth:b().func,colorFunc:b().func};const se=(0,L.Z)(le);var ce,ue=n(13090),de=n(8644),pe=n(21048),me=["sort_by"];function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=(0,E.ZP)("hr")(ce||(ce=(0,m.Z)(["\n  border: 1px solid #ebebeb;\n"]))),ve=(0,q.PKp)(["#06C","#4CB140","#009596","#5752D1","#F4C145","#EC7A08","#8BC1F7","#23511E","#A2D9D9","#2A265F","#F9E0A2","#8F4700","#002F5D"]),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=e.map((function(e){var t=e.date,r=e.items;return{date:t,items:r.map((function(e){var r=e.id,a=e[n],o=e.name;return{id:r,date:t,value:a,name:o||"No organization"}}))}}));return t.legend.map((function(e){return he(he({},e),{},{name:e.name||"No organization"})})),r},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.map((function(e){return{id:e.id,count:e[t],name:e.name||"No organization"}}));return n},Ee=[{api:C.Ij,attr:"total_count",label:"Jobs across organizations",onClick:function(e,t){return function(n){var r=n.date,a=n.id;if(-1!==a){t.sort_by;var o=(0,d.Z)(t,me),i=(0,k.p6)(r),l=he(he({},o),{},{quick_date_range:"custom",start_date:i,end_date:i,status:["successful","failed","new","pending","waiting","error","canceled","running"],org_id:[a]});e(l)}}},tooltip:ne},{api:C.og,attr:"total_unique_host_count",label:"Hosts across organizations",onClick:function(){return null},tooltip:ae}],_e=(0,pe.Hm)("organization-statistics",he({},B.wC.defaultParams),["limit","offset"]),xe=function(e){var t=e.history,n=(0,x.Z)(t,"jobExplorer"),r=(0,g.useState)(0),a=(0,u.Z)(r,2),o=a[0],i=a[1],l=(0,_.K)(_e),s=l.queryParams,d=l.setFromToolbar,p=(0,de.ZP)((0,g.useCallback)((0,c.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.YU)();case 2:return t=e.sent,e.abrupt("return",{preflight:t});case 4:case"end":return e.stop()}}),e)}))),[]),{preflight:{},preflightError:m,preflightIsLoading:f,preflightIsSuccess:y}),m=p.error,f=p.isLoading,y=p.isSuccess,b=p.request,E=(0,de.ZP)((0,g.useCallback)((0,c.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Ij)({params:fe});case 2:return t=e.sent,e.abrupt("return",{jobs:t});case 4:case"end":return e.stop()}}),e)}))),[s]),{jobs:[],jobsError:R,jobsIsLoading:q,jobsIsSuccess:L}),k=E.result.jobs,R=E.error,q=E.isLoading,L=E.isSuccess,F=E.request,A=(0,de.ZP)((0,g.useCallback)((0,c.Z)(h().mark((function e(){var t,n=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n.length>0&&void 0!==n[0]?n[0]:0)){e.next=7;break}return e.next=4,(0,C.Ij)({params:xe});case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,(0,C.og)({params:ke});case 9:t=e.sent;case 10:return e.abrupt("return",{orgs:t});case 11:case"end":return e.stop()}}),e)}))),[s]),{orgs:[],orgsError:z,orgsIsLoading:M,orgsIsSuccess:Y}),N=A.result.orgs,z=A.error,M=A.isLoading,Y=A.isSuccess,W=A.request,U=(0,de.ZP)((0,g.useCallback)((0,c.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.wp)({params:s});case 2:return t=e.sent,e.abrupt("return",{options:t});case 4:case"end":return e.stop()}}),e)}))),[s]),{options:{},optionsError:V,optionsIsLoading:H,optionsIsSuccess:K}),G=U.result.options,V=U.error,H=U.isLoading,K=U.isSuccess,J=U.request,Q=(0,de.ZP)((0,g.useCallback)((0,c.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Ij)({params:me});case 2:return t=e.sent,e.abrupt("return",{tasks:t});case 4:case"end":return e.stop()}}),e)}))),[s]),{tasks:[],tasksError:ee,tasksIsLoading:te,tasksIsSuccess:ne}),X=Q.result.tasks,ee=Q.error,te=Q.isLoading,ne=Q.isSuccess,re=Q.request;(0,g.useEffect)((function(){W(o)}),[o]),(0,g.useEffect)((function(){W(),re(),J(),F()}),[s]);var ae,oe,ie,le,ce,pe,me=he(he({},s),{},{attributes:["host_task_count"],group_by:"org",include_others:!0,sort_by:"host_task_count:desc"}),fe=he(he({},s),{},{attributes:["total_count"],group_by:"org",include_others:!0,sort_by:"total_count:desc"}),xe=he(he({},s),{},{attributes:["total_count"],group_by:"org",group_by_time:!0,sort_by:"total_count:desc"}),ke=he(he({},s),{},{attributes:["total_unique_host_count"],group_by:"org",group_by_time:!0,sort_by:"host_task_count:desc"});return(0,g.useEffect)((function(){insights.chrome.appNavClick({id:"organization-statistics",secondaryNav:!0}),b()}),[]),403===(null==m?void 0:m.status)?v().createElement(O.Z,B.dR):v().createElement(v().Fragment,null,v().createElement(P.Z,null,v().createElement(D.Z,{title:"Organization Statistics"}),v().createElement(ue.Z,{categories:G,filters:s,setFilters:d,qsConfig:_e})),v().createElement(S.Z,null,m?v().createElement(Z.Z,{preflightError:m}):m?"":v().createElement(I.Grid,{hasGutter:!0},v().createElement(I.GridItem,{span:12},v().createElement(I.Card,null,v().createElement(I.Tabs,{activeKey:o,onSelect:function(e,t){i(t)}},v().createElement(I.Tab,{eventKey:0,title:"Jobs"}),v().createElement(I.Tab,{eventKey:1,title:"Hosts"})),v().createElement(I.CardBody,null,M&&v().createElement(T.Z,null),z&&v().createElement(j.Z,{message:z.error}),Y&&(null===(ae=N.dates)||void 0===ae?void 0:ae.length)<=0&&v().createElement(w.Z,null),Y&&(null===(oe=N.dates)||void 0===oe?void 0:oe.length)>0&&v().createElement($,{margin:{top:20,right:20,bottom:50,left:50},id:"d3-grouped-bar-chart-root",data:ye(N.dates,N.meta,Ee[o].attr),legend:N.meta.legend,history:t,colorFunc:ve,yLabel:Ee[o].label,onClick:Ee[o].onClick(n,s),TooltipClass:Ee[o].tooltip})))),v().createElement(I.GridItem,{span:6},v().createElement(I.Card,null,v().createElement(I.CardTitle,null,v().createElement("h2",null,"Job Runs by Organization")),v().createElement(ge,null),v().createElement(I.CardBody,null,q&&v().createElement(T.Z,null),R&&v().createElement(j.Z,{message:R.error}),L&&(null===(ie=k.items)||void 0===ie?void 0:ie.length)<=0&&v().createElement(w.Z,null),L&&(null===(le=k.items)||void 0===le?void 0:le.length)>0&&v().createElement(se,{margin:{top:20,right:20,bottom:0,left:20},id:"d3-donut-1-chart-root",data:be(k.items,"total_count"),colorFunc:ve})))),v().createElement(I.GridItem,{span:6},v().createElement(I.Card,null,v().createElement(I.CardTitle,null,v().createElement("h2",null,"Usage by Organization (Tasks)")),v().createElement(ge,null),v().createElement(I.CardBody,null,te&&v().createElement(T.Z,null),ee&&v().createElement(j.Z,{message:ee.error}),ne&&(null===(ce=X.items)||void 0===ce?void 0:ce.length)<=0&&v().createElement(w.Z,null),ne&&(null===(pe=X.items)||void 0===pe?void 0:pe.length)>0&&v().createElement(se,{margin:{top:20,right:20,bottom:0,left:20},id:"d3-donut-2-chart-root",data:be(X.items,"host_task_count"),colorFunc:ve})))))))};xe.propTypes={history:b().object};const ke=xe},53210:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var r=n(92137),a=n(87757),o=n.n(a),i=n(92950),l=n.n(i),s=n(334),c=n(58788),u=n(86350),d=n(48716),p=n(39173),m=n(69595),f=n(64866),h=n(80922),g=n(20806),v=n(8644);const y=function(){var e,t,n,a,y,b,E,_,x=(0,v.ZP)((0,i.useCallback)((0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.nE)();case 2:return t=e.sent,e.abrupt("return",{data:t});case 4:case"end":return e.stop()}}),e)}))),[]),{options:{}}),k=x.result,T=x.isSuccess,w=x.request;(0,i.useEffect)((function(){w()}),[w]);var Z=T&&(!0===(null===(e=k.data)||void 0===e||null===(t=e.meta)||void 0===t||null===(n=t.rbac)||void 0===n||null===(a=n.perms)||void 0===a?void 0:a.write)||!0===(null===(y=k.data)||void 0===y||null===(b=y.meta)||void 0===b||null===(E=b.rbac)||void 0===E||null===(_=E.perms)||void 0===_?void 0:_.all)),j="Create new plan";return T?Z?l().createElement(l().Fragment,null,l().createElement(d.Z,null,l().createElement(m.Z,{items:[{title:"Savings Planner",navigate:"/savings-planner"}]}),l().createElement(p.Z,{title:j})),l().createElement(u.Z,null,l().createElement(c.Card,null,l().createElement(c.CardBody,null,l().createElement(h.Z,{title:j,options:k}))))):l().createElement(s.Redirect,{to:g.n.savingsPlanner}):null}},35945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ye});var r,a=n(92137),o=n(34699),i=n(87757),l=n.n(i),s=n(92950),c=n.n(s),u=n(334),d=n(83264),p=n(58788),m=n(86350),f=n(32465),h=n(45697),g=n.n(h),v=n(29163),y=n(20806),b=n(17563),E=v.ZP.div(r||(r=(0,f.Z)(["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"]))),_=function(e){var t=e.children;return c().createElement(E,null,c().createElement(p.CardActions,null,t))};_.propTypes={children:g().node};const x=_;var k,T,w=n(96183),Z=n(64866),j=n(8644),C=n(55411),S=n(23071),O=(0,v.ZP)(p.Alert)(k||(k=(0,f.Z)(["\n  margin-top: 10px;\n"]))),P=v.ZP.span(T||(T=(0,f.Z)(["\n  && {\n    margin-right: 10px;\n  }\n"]))),D=function(e){var t=e.onConfirm,n=e.modalTitle,r=void 0===n?"Delete":n,i=e.name,u=void 0===i?"":i,d=e.variant,m=void 0===d?"secondary":d,f=e.isDisabled,h=void 0!==f&&f,g=e.ouiaId,v=void 0===g?null:g,y=e.deleteMessage,b=void 0===y?"Delete?":y,E=e.deleteDetailsRequests,_=void 0===E?[]:E,x=e.disabledTooltip,k=void 0===x?"This item cannot be deleted":x,T=e.children,Z=(0,s.useState)(!1),j=(0,o.Z)(Z,2),D=j[0],B=j[1],I=(0,s.useState)(),R=(0,o.Z)(I,2),q=R[0],L=R[1],F=(0,s.useState)({}),A=(0,o.Z)(F,2),N=A[0],z=A[1],M=(0,s.useState)(!1),Y=(0,o.Z)(M,2),W=Y[0],U=Y[1],G=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),!(_.length>0&&t)){e.next=8;break}return e.next=4,(0,w.U)(_);case 4:n=e.sent,r=n.results,(a=n.error)?L(a):z(r);case 8:U(!1),B(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return q?c().createElement(C.Z,{isOpen:!!q,variant:"error",title:"Error!",onClose:function(){G(!1),L()}},c().createElement(S.Z,{error:q.detail})):c().createElement(c().Fragment,null,k?c().createElement(p.Tooltip,{content:k,position:"top"},c().createElement("div",null,c().createElement(p.Button,{spinnerAriaValueText:W?"Loading":void 0,variant:m||"secondary","aria-label":"Delete",isDisabled:h,onClick:function(){return G(!0)},ouiaId:v},T||"Delete"))):c().createElement(p.Button,{ouiaId:v,spinnerAriaValueText:W?"Loading":void 0,variant:m||"secondary","aria-label":"Delete",isDisabled:h,onClick:function(){return G(!0)}},T||"Delete"),c().createElement(C.Z,{isOpen:D,title:r,variant:"danger",onClose:function(){return G(!1)},actions:[c().createElement(p.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"Confirm Delete",isDisabled:h,onClick:function(){t(),G(!1)}},"Delete"),c().createElement(p.Button,{ouiaId:"delete-modal-cancel",key:"cancel",variant:"link","aria-label":"Cancel",onClick:function(){return G(!1)}},"Cancel")]},"Are you sure you want to delete:",c().createElement("br",null),c().createElement("strong",null,u),Object.values(N).length>0&&c().createElement(O,{variant:"warning",isInline:!0,title:c().createElement("div",null,c().createElement("div",{"aria-label":b},b),c().createElement("br",null),Object.entries(N).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return c().createElement("div",{"aria-label":"".concat(n,": ").concat(r),key:n},c().createElement(P,null,n)," ",c().createElement(p.Badge,null,r))})))})))};D.propTypes={onConfirm:g().func.isRequired,modalTitle:g().string,name:g().string,variant:g().object,isDisabled:g().bool,ouiaId:g().string,deleteMessage:g().string,deleteDetailsRequests:g().array,disabledTooltip:g().bool,children:g().node};const B=D;var I=n(84564),R=n(79886),q=function(e){var t=e.tabsArray,n=e.defaultTabId,r=(0,u.useHistory)(),a=(0,u.useLocation)();return c().createElement(p.Tabs,{activeKey:function(e){var n;return(null===(n=t.find((function(e){return e.link===a.pathname})))||void 0===n?void 0:n.id)||e}(n),onSelect:function(e,n){var a=t.find((function(e){return e.id===n}));a&&r.push(a.link)}},t.map((function(e){return c().createElement(p.Tab,{"aria-label":"string"==typeof e.name?e.name:"".concat(e.id," tab"),eventKey:e.id,key:e.id,link:e.link,title:c().createElement(p.TabTitleText,null,e.name),role:"tab"})})))};q.propTypes={defaultTabId:g().number,tabsArray:(0,h.arrayOf)((0,h.shape)({id:h.number.isRequired,link:h.string.isRequired,name:(0,h.oneOfType)([h.string.isRequired,h.node.isRequired])})).isRequired},q.defaultProps={defaultTabId:1};const L=q;var F,A,N=n(81672),z=n(62923),M=n(20272),Y=(0,v.ZP)(p.CardBody)(F||(F=(0,f.Z)(["\n  min-height: 500px;\n  padding: 0;\n  padding-bottom: 20px;\n\n  &:first-child {\n    padding-top: 0;\n  }\n"]))),W=(0,v.ZP)(p.Divider)(A||(A=(0,f.Z)(["\n  padding-top: 24px;\n"]))),U=function(e){var t=e.tabsArray,n=e.plans,r=e.canWrite,o=e.options,i=(0,u.useLocation)().pathname,d=(0,u.useHistory)(),m=n[0],f=m.id,h=m.automation_status,g=m.category,v=m.description,E=m.frequency_period,_=m.hosts,k=m.manual_time,T=m.modified,C=m.name,S=m.tasks,O=m.template_details,P=m.template_id,D=function(e,t){return((o[e]||[]).find((function(e){return e.key===t}))||{}).value},q={Name:C||void 0,"Automation type":g?D("category",g):void 0,Description:v||void 0,"Manual time":k?D("manual_time",k):void 0,"Run on hosts":_||void 0,Frequency:E?D("frequency_period",E):void 0,Template:P?function(e){if(e.id)return c().createElement("a",{onClick:function(){return t=e.id,n=y.n.jobExplorer,r={quick_date_range:"last_30_days",status:["failed","successful"],template_id:[t]},a=(0,b.stringify)(r,{arrayFormat:"bracket"}),void d.push({pathname:n,search:a});var t,n,r,a}},e.name)}(O):void 0,"Last job status":h.status&&"None"!==h.status?c().createElement(M.Z,{status:h.status}):c().createElement(p.Label,{variant:"outline",color:"red",icon:c().createElement(I.ZP,null)},"Not Running"),"Last updated":T?c().createElement("span",null,(0,R.o0)(T)):void 0},F=(0,j.ZP)((0,s.useCallback)((0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.Kh)({id:f});case 2:d.push("/savings-planner");case 3:case"end":return e.stop()}}),e)}))),[f,d])),A=F.request,U=F.error,G=(0,j.ZP)((0,s.useCallback)((0,a.Z)(l().mark((function e(){var t,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.U)(w.V.savingsPlan(n[0],Z.wD));case 2:if(t=e.sent,r=t.results,!(a=t.error)){e.next=7;break}throw new Error(a);case 7:if(!r){e.next=9;break}return e.abrupt("return",{isDeleteDisabled:!0});case 9:return e.abrupt("return",{isDeleteDisabled:!1});case 10:case"end":return e.stop()}}),e)}))),[n[0]]),{isDeleteDisabled:!1}),V=G.result.isDeleteDisabled,H=G.error,K=G.request;(0,s.useEffect)((function(){K()}),[K]);var J=(0,j.pF)(U||H),$=J.error,Q=J.dismissError;return c().createElement(c().Fragment,null,n&&c().createElement(c().Fragment,null,c().createElement(Y,null,c().createElement(L,{tabsArray:t}),c().createElement("div",{style:{padding:"1rem"}},c().createElement(p.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},Object.keys(q).map((function(e,t){return void 0!==q[e]&&c().createElement(p.DescriptionListGroup,{key:t},c().createElement(p.DescriptionListTerm,null,e),c().createElement(p.DescriptionListDescription,null,q[e]))}))),S.length>0&&c().createElement(p.DescriptionList,null,c().createElement(W,{component:"div"}),c().createElement(p.DescriptionListGroup,{key:S},c().createElement(p.DescriptionListTerm,null,"Tasks"),c().createElement(p.DescriptionListDescription,null,c().createElement(p.List,{component:"ol",type:"1"},S.map((function(e){var t=e.id,n=e.task;return c().createElement(p.ListItem,{key:t},n)})))))))),r&&c().createElement(p.CardFooter,null,c().createElement(x,null,c().createElement(p.Button,{key:"edit-plan-button",variant:"primary","aria-label":"Edit plan",onClick:function(){d.push({pathname:"".concat(i.split("/details")[0],"/edit")})}},"Edit"),c().createElement(B,{key:"delete-plan-button",name:C,modalTitle:"Delete Plan",onConfirm:A,disabledTooltip:V&&"This plan cannot be deleted"},"Delete")),$&&c().createElement(N.Z,{isOpen:!!$,onClose:Q,title:"Error",variant:"error"},c().createElement(z.Z,{error:$.detail})))))};U.propTypes={plans:g().array,tabsArray:g().array,canWrite:g().bool.isRequired,options:g().object.isRequired};const G=U;var V=n(90952),H=n(35397),K=n(91354);const J=function(e){return(+e.toFixed(0)).toLocaleString()+" hours"};var $=function(e){var t=e.value,n=void 0===t?0:t,r=e.isMoney,a=void 0===r||r;return c().createElement(p.Card,{isPlain:!0},c().createElement(p.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),c().createElement(p.CardBody,null,c().createElement(p.Title,{headingLevel:"h3",size:"4xl",style:{color:a?"#81C46B":"#0063CF"}},a?""+(0,K.Z)(n):""+J(n))))};$.propTypes={value:g().number,isMoney:g().bool};const Q=$;var X=n(53688),ee=function(){return c().createElement(c().Fragment,null,c().createElement("p",null,c().createElement("strong",null,"Cost")),c().createElement("p",null,"The cost includes the hours spent in implementation, deployment, training and other expenditures for creating, maintaining and running the automation. These hours (cost of investment) are usually higher at the onset, and will be greatly reduced once the automation has been created and only maintenance is required."),c().createElement("br",null),c().createElement("p",null,"For the initial period and the first year, we assume approximately 10 hours spent on each host, as well as some buffer time and a 40% risk adjustment to account for unforeseen situations."),c().createElement("br",null),c().createElement("p",null,"For the next two years after the first year, we assume 4 hours spent on each host, as well as a 40% risk adjustment to account for unforeseen situations."),c().createElement("br",null),c().createElement("p",null,"The formula used to calculate cost for the initial period and year 1:"),c().createElement(p.CodeBlock,null,c().createElement(p.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 10) + buffer time\nC2 = C1 * 40% risk adjustment\ninitial cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 1 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")),c().createElement("br",null),c().createElement("p",null,"The formula used to calculate cost for years 2 and 3:"),c().createElement(p.CodeBlock,null,c().createElement(p.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 4)\nC2 = C1 * 40% risk adjustment\nyear 2 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 3 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")))},te=function(){return c().createElement(c().Fragment,null,c().createElement("p",null,c().createElement("strong",null,"Savings")),c().createElement("p",null,"The savings indicates the time and money saved as a result of automating the plan."),c().createElement("br",null),c().createElement("p",null,"We assume 50% productivity recapture to account for the productivity that is usually gained by repeated manual implementation of a task over a period of time. We also add a -5% risk adjustment for unforeseen situations that might arise and need to be handled. We also assume a 15% year over year growth in savings."),c().createElement("br",null),c().createElement("p",null,"Money savings for the initial period is 0, so there is no formula necessary."),c().createElement("br",null),c().createElement("p",null,"The formula used to calculate savings for year 0:"),c().createElement(p.CodeBlock,null,c().createElement(p.CodeBlockCode,null,"initial period savings = 0 - initial cost")),c().createElement("br",null),c().createElement("p",null,"The formula used for savings for year 1:"),c().createElement(p.CodeBlock,null,c().createElement(p.CodeBlockCode,null,"S1 = (number of hosts * (manual time in minutes / 60) * yearly frequency of automation)\nS2 = S1 * 50% productivity recapture\nS3 = S2 * 5% risk adjustment * (cost per hour in USD if applicable, based on display)\nyear 1 savings = S2 - S3 - year 1 cost")),c().createElement("br",null),c().createElement("p",null,"The formula used to calculate savings for year 2:"),c().createElement(p.CodeBlock,null,c().createElement(p.CodeBlockCode,null,"S1 = year 1 savings * 15% growth\nyear 2 savings = year 1 savings + S1 - year 2 cost")),c().createElement("br",null),c().createElement("p",null,"The formula used to calculate savings for year 3:"),c().createElement(p.CodeBlock,null,c().createElement(p.CodeBlockCode,null,"S2 = year 2 savings * 15% growth\nyear 3 savings = year 2 savings + S2 - year 3 cost")))};const ne=function(){var e=(0,s.useState)(!1),t=e[0],n=e[1];return c().createElement(c().Fragment,null,c().createElement(p.Button,{variant:"link",onClick:function(){return n(!0)},icon:c().createElement(X.uM,null)},"Automation formula"),c().createElement(p.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:p.ModalVariant.medium,actions:[c().createElement(p.Button,{key:"cancel",variant:p.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},c().createElement("p",null,"We use risk-adjusted factors to create the 3-year projection of cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the risk-adjustment factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),c().createElement("br",null),c().createElement(ee,null),c().createElement("br",null),c().createElement(te,null)))};var re=function(){return(re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ae={initial:"Initial",year1:"Year 1",year2:"Year 2",year3:"Year 3"},oe=function(e){return{cost:{key:e?"total_costs":"total_hours_spent_risk_adjusted",color:"#8B8D8F"},benefit:{key:e?"total_benefits":"total_hours_saved",color:e?"#81C46B":"#0063CF"},net:{key:e?"cumulative_net_benefits":"cumulative_time_net_benefits",color:"#EE7A00"}}},ie=function(e){var t,n=e.tabsArray,r=e.data,a=(0,s.useState)(!0),o=a[0],i=a[1],l={charts:[{id:1e3,kind:H.$v.wrapper,type:H.yD.chart,parent:null,props:{height:600,domainPadding:{x:100},padding:{bottom:60,left:80},themeColor:H.nz.gray},tooltip:{cursor:!0,stickToAxis:"x",mouseFollow:!0,legendTooltip:{legendData:[{childName:oe(o).benefit.key,name:"Savings",symbol:{fill:oe(o).benefit.color}},{childName:oe(o).cost.key,name:"Costs",symbol:{fill:oe(o).cost.color}},{childName:oe(o).net.key,name:"Cumulative savings",symbol:{fill:oe(o).net.color}}],titleProperyForLegend:"year"},customFnc:function(e){return o?(0,K.Z)(+e.y):J(+e.y)}},xAxis:{label:"Time"},yAxis:{label:o?"Money Saved":"Hours Saved",tickFormat:"formatNumberAsK",style:{grid:{stroke:"#D2D2D2"},axisLabel:{padding:60}}}},{id:1001,kind:H.$v.stack,parent:1e3,props:{}},{id:1102,kind:H.$v.simple,type:H.oX.bar,name:oe(o).benefit.key,parent:1001,props:{x:"year",y:oe(o).benefit.key,barRatio:.8,barWidth:0,style:{data:{fill:oe(o).benefit.color,width:120}}},tooltip:{labelName:""}},{id:1101,kind:H.$v.simple,type:H.oX.bar,name:oe(o).cost.key,parent:1001,props:{x:"year",y:oe(o).cost.key,barRatio:.8,barWidth:0,style:{data:{fill:oe(o).cost.color,width:120}}},tooltip:{labelName:""}},{id:1002,kind:H.$v.simple,type:H.oX.line,name:oe(o).net.key,parent:1e3,props:{x:"year",y:oe(o).net.key,style:{data:{stroke:oe(o).net.color,strokeWidth:5}}},tooltip:{labelName:""}}],functions:re(re({},H.wk),{fetchFnc:function(){return new Promise((function(e){e(function(e){return{items:Object.keys(ae).map((function(t){return{year:ae[t],total_costs:-1*+e.projections.monetary_stats.total_costs[t],total_benefits:+e.projections.monetary_stats.total_benefits[t],cumulative_net_benefits:+e.projections.monetary_stats.cumulative_net_benefits[t],total_hours_spent_risk_adjusted:-1*+e.projections.time_stats.total_hours_spent_risk_adjusted[t],total_hours_saved:+e.projections.time_stats.total_hours_saved[t],cumulative_time_net_benefits:+e.projections.time_stats.cumulative_time_net_benefits[t]}})),type:H.Ii.nonGrouped,response_type:""}}(r))}))}})};return c().createElement(p.Card,null,c().createElement(L,{tabsArray:n}),c().createElement(p.Grid,null,c().createElement(p.GridItem,{span:9},c().createElement(p.Card,{isPlain:!0},c().createElement(p.CardHeader,null,c().createElement(p.CardActions,null,c().createElement(p.ToggleGroup,{"aria-label":"toggleButton"},c().createElement(p.ToggleGroupItem,{text:"Money",buttonId:"money",isSelected:o,onChange:function(){return i(!0)}}),c().createElement(p.ToggleGroupItem,{text:"Time",buttonId:"time",isSelected:!o,onChange:function(){return i(!1)}}))),c().createElement(p.CardTitle,null,r.name)),c().createElement(p.CardBody,null,c().createElement(H.ZP,{schema:l.charts,functions:l.functions})))),c().createElement(p.GridItem,{span:3},c().createElement(c().Fragment,null,c().createElement(Q,{value:(t=r,o?t.projections.monetary_stats.cumulative_net_benefits.year3:t.projections.time_stats.cumulative_time_net_benefits.year3),isMoney:o}),c().createElement(p.Card,{isPlain:!0},c().createElement(p.CardBody,null,c().createElement(p.List,{isPlain:!0},c().createElement(p.ListItem,{icon:c().createElement(V.fU,{color:oe(o).benefit.color})},"Savings from automating this plan"),c().createElement(p.ListItem,{icon:c().createElement(V.fU,{color:oe(o).cost.color})},"Costs from creating, maintaining and running the automation"),c().createElement(p.ListItem,{icon:c().createElement(V.fU,{color:oe(o).net.color})},"Cumulative savings over time")))),c().createElement(ne,null)))))};ie.propTypes={data:g().object.isRequired,tabsArray:g().arrayOf(g().shape({id:g().number.isRequired,link:g().string.isRequired,name:g().node.isRequired}).isRequired).isRequired};const le=ie;var se=n(97761),ce=n(83160),ue=n(13784),de=n(48716),pe=n(39173),me=n(27839),fe=n(69595),he=n(80922),ge=function(e){var t,n,r,o,i,d,p,m,f=e.data,h=(0,u.useParams)().id,g=(0,j.ZP)((0,s.useCallback)((0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.nE)();case 2:return t=e.sent,e.abrupt("return",{data:t});case 4:case"end":return e.stop()}}),e)}))),[]),{options:{}}),v=g.result,b=g.isSuccess,E=g.request;(0,s.useEffect)((function(){E()}),[E]);var _=b&&(!0===(null===(t=v.data)||void 0===t||null===(n=t.meta)||void 0===n||null===(r=n.rbac)||void 0===r||null===(o=r.perms)||void 0===o?void 0:o.write)||!0===(null===(i=v.data)||void 0===i||null===(d=i.meta)||void 0===d||null===(p=d.rbac)||void 0===p||null===(m=p.perms)||void 0===m?void 0:m.all));return b?_?c().createElement(c().Fragment,null,c().createElement(he.Z,{title:"Edit plan",options:v,data:f})):c().createElement(u.Redirect,{to:"".concat(y.n.savingsPlanner,"/").concat(h)}):null};ge.propTypes={data:g().object.isRequired};const ve=ge,ye=function(){var e,t,n,r=(0,u.useParams)().id,i=(0,u.useLocation)().state,f=(0,s.useState)(null),h=(0,o.Z)(f,2),g=h[0],v=h[1],y="Details",b=!1;null!=i&&i.reload&&(b=!0),-1!==location.pathname.indexOf("/statistics")?y="Statistics":-1!==location.pathname.indexOf("/edit")&&(y="Edit plan");var E=(0,s.useState)(r),_=(0,o.Z)(E,2),x=_[0],k=_[1],T={id:[x]},w=(0,j.ZP)((0,s.useCallback)((0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(r),e.next=3,(0,Z.YU)().catch((function(e){v({preflightError:e})}));case 3:return e.next=5,(0,Z.nE)();case 5:return t=e.sent,e.abrupt("return",{options:t});case 7:case"end":return e.stop()}}),e)}))),[]),{options:{}}),C=w.result.options,S=w.error,O=w.isSuccess,P=w.request,D=(0,j.ZP)((0,s.useCallback)((0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(r),e.next=3,(0,Z.YU)().catch((function(e){v({preflightError:e})}));case 3:return e.next=5,(0,Z.wD)({params:T});case 5:return t=e.sent,e.abrupt("return",{plans:t.items,rbac:t.rbac});case 7:case"end":return e.stop()}}),e)}))),[]),{plans:[],rbac:[],plansError:q,plansIsLoading:L,plansIsSuccess:F}),B=D.result,I=B.rbac,R=B.plans,q=D.error,L=D.isLoading,F=D.isSuccess,A=D.request;(0,s.useEffect)((function(){P(),A()}),[T]);var N=O&&(!0===(null===(e=I.perms)||void 0===e?void 0:e.write)||!0===(null===(t=I.perms)||void 0===t?void 0:t.all)),z=[{id:0,name:c().createElement(c().Fragment,null,c().createElement(d.ZP,null),"Back to Plans"),link:"/savings-planner"},{id:1,name:"Details",link:"/savings-planner/".concat(x,"/details")},{id:2,name:"Statistics",link:"/savings-planner/".concat(x,"/statistics")}],M="/savings-planner/".concat(x),Y=F?[{title:"Savings Planner",navigate:"/savings-planner"},{title:R[0].name,navigate:M}]:[];return 403===(null==g||null===(n=g.preflightError)||void 0===n?void 0:n.status)?c().createElement(me.Z,ue.dR):c().createElement(c().Fragment,null,S&&c().createElement(c().Fragment,null,c().createElement(ce.Z,{message:S.error})),F&&c().createElement(c().Fragment,null,c().createElement(de.Z,null,c().createElement(fe.Z,{items:Y}),c().createElement(pe.Z,{title:y})),c().createElement(m.Z,null,c().createElement(p.Card,null,c().createElement(u.Switch,null,c().createElement(u.Route,{path:"/savings-planner/:id/statistics"},c().createElement(le,{tabsArray:z,data:R[0],queryParams:T})),!b&&c().createElement(u.Route,{path:"/savings-planner/:id/details"},c().createElement(G,{plans:R,tabsArray:z,canWrite:N,options:C})),c().createElement(u.Route,{path:"/savings-planner/:id/edit"},c().createElement(ve,{data:R[0]})),c().createElement(u.Route,{path:"/savings-planner/:id"},c().createElement(G,{plans:R,tabsArray:z,canWrite:N,options:C})),c().createElement(u.Route,{exact:!0,path:"/savings-planner"},c().createElement(se.default,null)))))))}},97761:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>fe});var r=n(87329),a=n(92137),o=n(34699),i=n(96156),l=n(32465),s=n(87757),c=n.n(s),u=n(92950),d=n.n(u),p=n(29163),m=n(334),f=n(86350),h=n(48716),g=n(39173),v=n(27839),y=n(58788),b=n(64866),E=n(13090),_=n(83160),x=n(94794),k=n(2205),T=n(45697),w=n.n(T),Z=n(25811),j=n(71070),C=function(e){var t=e.label,n=void 0===t?"":t,r=e.title,a=void 0===r?"No items found.":r,o=e.message,i=void 0===o?"":o,l=e.canAdd,s=void 0!==l&&l,c=e.path,u=(0,m.useHistory)();return d().createElement(y.EmptyState,{variant:"full"},d().createElement(y.EmptyStateIcon,{icon:s?Z.ZP:j.ZP}),d().createElement(y.Title,{size:"lg",headingLevel:"h3"},a),d().createElement(y.EmptyStateBody,null,i),s&&d().createElement(y.Button,{key:"add-item-button",variant:"primary","aria-label":n,onClick:function(){u.push({pathname:c})}},n))};C.propTypes={canAdd:w().bool,label:w().string,message:w().string,title:w().string,path:w().string.isRequired};const S=C;var O,P,D,B,I,R=n(12613),q=n(84564),L=n(17563),F=n(20806),A=n(91354),N=n(79886),z=n(20272),M=(0,p.ZP)(y.CardTitle)(O||(O=(0,l.Z)(["\n  word-break: break-word;\n"]))),Y=p.ZP.span(P||(P=(0,l.Z)(["\n  margin-right: 5px;\n  font-weight: bold;\n"]))),W=p.ZP.small(D||(D=(0,l.Z)(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n"]))),U=(0,p.ZP)(y.Checkbox)(B||(B=(0,l.Z)(["\n  &.pf-c-check.pf-m-standalone {\n    margin-top: -3px;\n  }\n"]))),G=p.ZP.div(I||(I=(0,l.Z)(["\n  display: flex;\n  min-height: 30px;\n  align-items: center;\n"]))),V=function(e){var t,n,r,a=e.isSuccess,i=e.plan,l=e.selected,s=void 0===l?[]:l,c=e.handleSelect,p=void 0===c?function(){}:c,f=e.canWrite,h=e.options,g=i.id,v=i.automation_status,b=i.category,E=i.description,_=i.frequency_period,x=i.modified,k=i.name,T=i.template_details,w=i.projections,Z=null==w||null===(t=w.monetary_stats)||void 0===t||null===(n=t.cumulative_net_benefits)||void 0===n?void 0:n.year3,j=(0,u.useState)(!1),C=(0,o.Z)(j,2),S=C[0],O=C[1],P=(0,m.useRouteMatch)(),D=(0,m.useHistory)(),B=function(e,t){return h[e].find((function(e){return e.key===t})).value},I=[d().createElement(d().Fragment,{key:g},d().createElement(y.DropdownItem,{key:"edit",onClick:function(){return D.push("".concat(P.url,"/").concat(g,"/edit"))},position:"right"},"Edit"),d().createElement(y.DropdownItem,{key:"link",onClick:function(){return D.push("".concat(P.url,"/").concat(g,"/edit#tasks"))},position:"right"},"Manage tasks"),d().createElement(y.DropdownItem,{key:"link",onClick:function(){return D.push("".concat(P.url,"/").concat(g,"/edit#link_template"))},position:"right"},"Link template"))];return d().createElement(y.Card,null,d().createElement(y.CardHeader,null,d().createElement(y.CardHeaderMain,null,d().createElement(M,null,d().createElement(m.Link,{to:"".concat(P.url,"/").concat(g)},k))),f&&d().createElement(y.CardActions,null,d().createElement(y.Dropdown,{onSelect:function(){},toggle:d().createElement(y.KebabToggle,{onToggle:function(){return O(!S)}}),isOpen:S,isPlain:!0,dropdownItems:I,position:"right"}),d().createElement(U,{onChange:function(){return p(i)},isChecked:s.some((function(e){return e.id===i.id})),"aria-label":"card checkbox",id:"check-1",name:"check1"}))),d().createElement(y.CardBody,null,E?d().createElement(W,null,E):null,d().createElement(G,null,d().createElement(Y,null,"Frequency")," ",_?B("frequency_period",_):d().createElement("span",null,"None")),d().createElement(G,null,d().createElement(Y,null,"Template")," ",0!==Object.keys(T||{}).length?(r=T)&&a?d().createElement("a",{onClick:function(){return e=r.id,t=F.n.jobExplorer,n={quick_date_range:"last_30_days",status:["failed","successful"],template_id:[e]},a=(0,L.stringify)(n,{arrayFormat:"bracket"}),void D.push({pathname:t,search:a});var e,t,n,a}},r.name):null:d().createElement("span",null,"None -"," ",d().createElement("a",{onClick:function(){return D.push("".concat(P.url,"/").concat(g,"/edit#link_template"))}},"Link template"))),d().createElement(G,null,d().createElement(Y,null,"Last job status"),"None"!==v.status?d().createElement(z.Z,{status:v.status}):d().createElement(y.Label,{variant:"outline",color:"red",icon:d().createElement(q.ZP,null)},"Not Running")),Z&&d().createElement(G,null,d().createElement(Y,null,"Projected savings"),d().createElement("a",{onClick:function(){return D.push("".concat(P.url,"/").concat(g,"/statistics"))}},(0,A.Z)(+Z))),d().createElement(G,null,d().createElement(Y,null,"Last updated")," ",d().createElement("span",null,(0,N.o0)(x)))),d().createElement(y.CardFooter,null,d().createElement(y.Label,null,B("category",b))))};V.propTypes={isSuccess:w().bool.isRequired,canWrite:w().bool.isRequired,selected:w().array,handleSelect:w().func,plan:w().object,options:w().object};const H=V;var K=n(53677),J=n(13784),$=n(55411),Q=n(96183),X=n(23071),ee=function(e){var t=e.name,n=e.username,r=e.image;return t||n||r?(t&&w().checkPropTypes({name:w().string},{name:e.name},"prop","ItemToDelete"),n&&w().checkPropTypes({username:w().string},{username:e.username},"prop","ItemToDelete"),r&&w().checkPropTypes({image:w().string},{image:e.image},"prop","ItemToDelete"),null):new Error("One of 'name', 'username' or 'image' is required by ItemToDelete component.")},te=function(e){var t,n=e.itemsToDelete,r=e.pluralizedItemName,i=void 0===r?"Items":r,l=e.onDelete,s=e.errorMessage,p=void 0===s?"Error while deleting":s,m=e.deleteDetailsRequests,f=void 0===m?[]:m,h=e.cannotDelete,g=void 0===h?function(e){return!e}:h,v=(0,u.useState)(!1),b=(0,o.Z)(v,2),E=b[0],_=b[1],x=(0,u.useState)(null),k=(0,o.Z)(x,2),T=k[0],w=k[1],Z=(0,u.useState)(!1),j=(0,o.Z)(Z,2),C=j[0],S=j[1],O=(0,u.useState)(""),P=(0,o.Z)(O,2),D=P[0],B=P[1],I=function(){var e=(0,a.Z)(c().mark((function e(t){var r,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),w(null),!(t&&1===n.length&&(null==f?void 0:f.length)>0)){e.next=9;break}return e.next=5,(0,Q.U)(f);case 5:r=e.sent,a=r.results,(o=r.error)?B(o):w(a);case 9:S(!1),_(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R="Delete ".concat(i,"?"),q=0===n.length||n.some(g);return D?d().createElement($.Z,{isOpen:!!D,title:"Error!",onClose:function(){I(!1),B()}},d().createElement(X.Z,{error:D.detail})):d().createElement(d().Fragment,null,d().createElement(y.Tooltip,{content:(t=n.filter(g).map((function(e){return e.name||e.username})).join(", "),n.some(g)?d().createElement("div",null,p?d().createElement(d().Fragment,null,d().createElement("span",null,p),d().createElement("span",null,": ".concat(t))):"You do not have permission to delete ".concat(i,": ").concat(t)):n.length?"Delete":"Select a plan to delete"),position:"top"},d().createElement("div",null,d().createElement(y.Button,{variant:"secondary",ouiaId:"delete-button",spinnerAriaValueText:C?"Loading":void 0,"aria-label":"Delete",onClick:function(){return I(!0)},isDisabled:q},"Delete"))),E&&d().createElement($.Z,{variant:"danger",title:R,isOpen:E,onClose:function(){return I(!1)},actions:[d().createElement(y.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"confirm delete",isDisabled:Boolean(T),onClick:function(){l(),I()}},"Delete"),d().createElement(y.Button,{key:"cancel",variant:"link","aria-label":"cancel delete",onClick:function(){return I(!1)}},"Cancel")]},d().createElement("div",null,"This action will delete the following:"),n.map((function(e){return d().createElement("span",{key:e.id},d().createElement("strong",null,e.name||e.username||e.image),d().createElement("br",null))}))))};te.propTypes={itemsToDelete:w().arrayOf(w().shape({id:w().number.isRequired,name:ee,username:ee,image:ee})).isRequired,pluralizedItemName:w().string,onDelete:w().func.isRequired,errorMessage:w().string,warningMessage:w().node,deleteDetailsRequests:w().array,cannotDelete:w().func,deleteMessage:w().string};const ne=te;var re,ae,oe,ie=n(8644),le=n(21048);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=p.ZP.div(re||(re=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 76px);\n"]))),de=p.ZP.div(ae||(ae=(0,l.Z)(["\n  flex-shrink: 0;\n"]))),pe=(0,p.ZP)(f.Z)(oe||(oe=(0,l.Z)(["\n  flex-grow: 1;\n"]))),me=(0,le.Hm)("savings-planner",ce({},J.bE.defaultParams),["limit","offset"]);const fe=function(){var e,t,n,i=(0,m.useHistory)(),l=(0,m.useLocation)().pathname,s=(0,K.K)(me),p=s.queryParams,f=s.setFromPagination,T=s.setFromToolbar,w=(0,u.useState)(null),Z=(0,o.Z)(w,2),j=Z[0],C=Z[1],O=(0,ie.ZP)((0,u.useCallback)((0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.YU)().catch((function(e){C({preflightError:e})}));case 2:return e.next=4,(0,b.nE)();case 4:return t=e.sent,e.abrupt("return",{options:t});case 6:case"end":return e.stop()}}),e)}))),[p]),{options:{}}),P=O.result.options,D=O.error,B=O.isSuccess,I=O.request,q=(0,ie.ZP)((0,u.useCallback)((0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Wu)({params:p});case 2:return t=e.sent,e.abrupt("return",{data:t.items,rbac:t.rbac,total_count:t.meta.total_count});case 4:case"end":return e.stop()}}),e)}))),[p]),{data:[],itemsError:z,itemsIsSuccess:Y,itemsIsLoading:M}),L=q.result,F=L.data,A=L.rbac,N=L.total_count,z=q.error,M=q.isLoading,Y=q.isSuccess,W=q.request,U=ce(ce({},P),{},{name:[{key:"name",value:null}]});(0,u.useEffect)((function(){I(),W()}),[p]);var G=Y&&(!0===(null==A||null===(e=A.perms)||void 0===e?void 0:e.write)||!0===(null==A||null===(t=A.perms)||void 0===t?void 0:t.all)),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,u.useState)([]),n=(0,o.Z)(t,2),a=n[0],i=n[1],l=a.length>0&&a.length===e.length,s=function(e){a.some((function(t){return t.id===e.id}))?i((function(t){return(0,r.Z)(t.filter((function(t){return t.id!==e.id})))})):i((function(t){return[].concat((0,r.Z)(t),[e])}))};return{selected:a,isAllSelected:l,handleSelect:s,setSelected:i}}(F),Q=V.selected,ee=V.isAllSelected,te=V.handleSelect,re=V.setSelected,ae=(0,ie.px)((0,u.useCallback)((0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(Q.map((function(e){return(0,b.Kh)({id:e.id})}))));case 1:case"end":return e.stop()}}),e)}))),[Q]),{qsConfig:p,allItemsSelected:ee,fetchItems:W}),oe=ae.isLoading,le=ae.deletionError,se=ae.deleteItems,fe=ae.clearDeletionError,he=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:re([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return 403===(null==j||null===(n=j.preflightError)||void 0===n?void 0:n.status)?d().createElement(v.Z,J.dR):d().createElement(ue,null,d().createElement(h.Z,null,d().createElement(g.Z,{title:"Savings Planner"}),d().createElement(E.Z,{categories:U,filters:p,qsConfig:me,setFilters:T,additionalControls:[].concat((0,r.Z)(G?[d().createElement(y.Button,{key:"add-plan-button",variant:"primary","aria-label":"Add plan",onClick:function(){i.push({pathname:"".concat(l,"/add")})}},"Add plan")]:[]),[G&&B&&F.length>0&&d().createElement(ne,{key:"delete-plan-button",onDelete:he,itemsToDelete:Q,pluralizedItemName:"Savings plan"})]),pagination:Y&&F.length>0?d().createElement(R.Z,{count:N,params:{limit:parseInt(p.limit),offset:parseInt(p.offset)},qsConfig:me,setPagination:f,isCompact:!0}):d().createElement("div",null)})),d().createElement(pe,null,j?d().createElement(k.Z,j):D?d().createElement(_.Z,{message:D.error}):M||oe?d().createElement(x.Z,null):!Y||0!==F.length||M||oe?!Y||M||oe?d().createElement(d().Fragment,null):d().createElement(y.Gallery,{hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},B&&Y&&F.map((function(e){return d().createElement(H,{key:e.id,isSuccess:Y,selected:Q,plan:e,handleSelect:te,canWrite:G,options:P})}))):d().createElement(S,{label:"Add plan",title:"No plans found",message:G?"Update the applied filters or add a new plan.":"Update the applied filters.",canAdd:G,path:"".concat(l,"/add")})),F.length>0&&!(M||oe)&&d().createElement(de,null,d().createElement(R.Z,{count:N,params:{limit:parseInt(p.limit),offset:parseInt(p.offset)},qsConfig:me,setPagination:f,variant:y.PaginationVariant.bottom})),le&&d().createElement($.Z,{"aria-label":"Deletion error",isOpen:le,onClose:fe,title:"Error",variant:"error"},"Failed to delete one or more plans.",d().createElement(X.Z,{error:le.detail})))}},80922:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ge});var r=n(92137),a=n(34699),o=n(87757),i=n.n(o),l=n(92950),s=n.n(l),c=n(45697),u=n.n(c),d=n(334),p=n(58788),m=n(20806),f=n(8644),h=n(96156),g="SET_NAME",v="SET_CATEGORY",y="SET_DESCRIPTION",b="SET_MANUAL_TIME",E="SET_HOSTS",_="SET_FREQUENCY_PERIOD",x="SET_TASKS",k="SET_TEMPLATE_ID";function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null!=e&&e.length)return e.sort((function(e,t){return e.task_order-t.task_order})).map((function(e){return e.task}))};var j=n(64866),C=n(81672),S=n(62923),O=function(e){var t,n,r,o=e.options,i=e.formData,c=e.dispatch,u=i.name,d=i.category,m=i.description,f=i.manual_time,h=i.hosts,x=i.frequency_period,k=(0,l.useState)(!1),T=(0,a.Z)(k,2),w=T[0],Z=T[1],j=(0,l.useState)(!1),C=(0,a.Z)(j,2),S=C[0],O=C[1],P=(0,l.useState)(!1),D=(0,a.Z)(P,2),B=D[0],I=D[1];return s().createElement(p.Form,null,(null==o?void 0:o.data)&&s().createElement(p.Grid,{hasGutter:!0,md:6},s().createElement(p.FormGroup,{label:"What do you want to automate?",isRequired:!0,fieldId:"name-field"},s().createElement(p.TextInput,{isRequired:!0,placeholder:"Example: Provision NGINX server",type:"text",id:"name-field",name:"name",value:u,onChange:function(e){return c({type:g,value:e})}})),s().createElement(p.FormGroup,{label:"What type of task is it?",fieldId:"category-field"},s().createElement(p.Select,{id:"category-field",isOpen:w,variant:"single","aria-label":"Plan category selector",maxHeight:390,onToggle:function(){return Z(!w)},onSelect:function(e,t){c({type:v,value:t}),Z(!1)},selections:d},((null===(t=o.data)||void 0===t?void 0:t.category)||[]).map((function(e){var t=e.key,n=e.value;return s().createElement(p.SelectOption,{key:t,value:t},n)})))),s().createElement(p.FormGroup,{label:"Enter a description of your automation plan",fieldId:"description-field"},s().createElement(p.TextInput,{type:"text",placeholder:"Place description here",id:"description-field",name:"description",value:m,onChange:function(e){return c({type:y,value:e})}})),s().createElement(p.FormGroup,{label:"How long does it take to do this manually?",fieldId:"manual-time-field"},s().createElement(p.Select,{id:"manual-time-field",isOpen:S,variant:"single",placeholderText:"Select amount","aria-label":"Plan time selector",onToggle:function(){return O(!S)},onSelect:function(e,t){c({type:b,value:t}),O(!1)},selections:f},((null===(n=o.data)||void 0===n?void 0:n.manual_time)||[]).map((function(e){var t=e.key,n=e.value;return s().createElement(p.SelectOption,{key:t,value:t},n)})))),s().createElement(p.FormGroup,{label:"How many hosts do you plan to run this on?",fieldId:"hosts-field"},s().createElement(p.TextInput,{type:"number",placeholder:"Enter number of hosts",id:"hosts-field",name:"hosts",value:h,onChange:function(e){return c({type:E,value:e})}})),s().createElement(p.FormGroup,{label:"How often do you do this?",fieldId:"frequency-period-field"},s().createElement(p.Select,{id:"frequency-period-field",isOpen:B,variant:"single",placeholderText:"Select frequency period","aria-label":"Plan frequency period selector",onToggle:function(){I(!B)},onSelect:function(e,t){c({type:_,value:t}),I(!1)},selections:x},((null===(r=o.data)||void 0===r?void 0:r.frequency_period)||[]).map((function(e){var t=e.key,n=e.value;return s().createElement(p.SelectOption,{key:t,value:t},n)}))))))};O.propTypes={options:u().object.isRequired,formData:u().object.isRequired,dispatch:u().func.isRequired};const P=O;var D,B,I,R,q,L=n(87329),F=n(32465),A=n(29163),N=n(12294),z=n(33606),M=A.ZP.div(D||(D=(0,F.Z)(["\n  margin-top: 20px;\n"]))),Y=(0,A.ZP)(p.Title)(B||(B=(0,F.Z)(["\n  margin-bottom: 10px;\n"]))),W=(0,A.ZP)(p.Button)(I||(I=(0,F.Z)(["\n  padding: 0 16px;\n"]))),U=(0,A.ZP)(p.DataListAction)(R||(R=(0,F.Z)(["\n  padding: 6px 0;\n"]))),G=(0,A.ZP)(p.DataListItemRow)(q||(q=(0,F.Z)(["\n  align-items: center;\n"]))),V=function(e){var t=e.tasks,n=e.dispatch,r=function(e){n({type:x,value:e})},o=(0,l.useState)(""),i=(0,a.Z)(o,2),c=i[0],u=i[1],d=(0,l.useState)(""),m=(0,a.Z)(d,2),f=m[0],h=m[1],g=(0,l.useState)(""),v=(0,a.Z)(g,2),y=v[0],b=v[1],E=function(){var e=c.trim();""!==e&&(r([].concat((0,L.Z)(t),[e])),u(""))};return s().createElement(s().Fragment,null,s().createElement(p.Form,null,s().createElement(p.Grid,{hasGutter:!0,md:6},s().createElement(p.FormGroup,{label:"What tasks do you need to accomplish this plan?",fieldId:"task-field"},s().createElement(p.InputGroup,null,s().createElement(p.TextInput,{placeholder:"Enter a description of each task",type:"text",id:"task-field",name:"task",value:c,onChange:function(e){return u(e)},onKeyDown:function(e){e.key&&"Enter"===e.key&&(e.preventDefault(),E())}}),s().createElement(p.Button,{onClick:E,isDisabled:""===c.trim(),variant:"control","aria-label":"Add task"},s().createElement(N.ZP,null)))))),t.length>0&&s().createElement(M,null,s().createElement(Y,{headingLevel:"h4",size:"xl"},"Tasks"),s().createElement(p.DataList,{"aria-label":"Draggable list to reorder and remove tasks.",isCompact:!0,onDragFinish:function(e){h("Dragging finsihed"),r((0,L.Z)(e))},onDragStart:function(e){b(e),h("Dragging started for task ".concat(e,"."))},onDragMove:function(e,t){h("Dragging task ".concat(y,".  Task ").concat(e," is now task ").concat(t,"."))},onDragCancel:function(){h("Dragging cancelled. Tasks list order is unchanged.")},itemOrder:t},t.map((function(e,n){return s().createElement(p.DataListItem,{"aria-labelledby":"cell-".concat(n+1),id:e,key:n+1},s().createElement(G,null,s().createElement(p.DataListControl,null,s().createElement(p.DataListDragButton,{"aria-label":"Reorder","aria-labelledby":"cell-".concat(n+1),"aria-describedby":"Press space or enter to begin dragging, and use the arrow keys to navigate up or down. Press enter to confirm the drag, or any other key to cancel the drag operation.","aria-pressed":"false"})),s().createElement(p.DataListItemCells,{dataListCells:[s().createElement(p.DataListCell,{key:n+1},s().createElement("span",{id:"cell-".concat(n+1)},"".concat(n+1,". ").concat(e)))]}),s().createElement(U,{"aria-label":"Actions"},s().createElement(W,{onClick:function(){return function(e){r(t.filter((function(t){return t!==e})))}(e)},variant:"plain","aria-label":"Delete"},s().createElement(z.ZP,null)))))})))),s().createElement("div",{className:"pf-screen-reader","aria-live":"assertive"},f))};V.propTypes={tasks:u().array.isRequired,dispatch:u().func.isRequired};const H=V;var K,J=n(17563),$=n(94550),Q=n(27839),X=n(94794),ee=n(2205),te=n(26249),ne=n(83160),re=n(12613),ae=n(13784),oe=n(53677),ie=n(21048),le=n(13090);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=A.ZP.div(K||(K=(0,F.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),de={group_by:"template",limit:10,group_by_time:!1,offset:0,sort_options:"name",sort_order:"asc",sort_by:"name:asc"},pe=(0,ie.Hm)("job-explorer",ce({},de),["limit","offset"]),me=function(e){var t,n=e.template_id,o=e.dispatch,c=(0,d.useLocation)(),u=c.pathname,m=c.hash,h=c.search,g=(0,d.useHistory)(),v=(0,oe.K)(pe),y=v.queryParams,b=v.setFromPagination,E=v.setFromToolbar,_=v.dispatch,x=(0,l.useState)(null),T=(0,a.Z)(x,2),w=T[0],Z=T[1],C=(0,f.ZP)((0,l.useCallback)((0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.ZW)({params:y});case 2:return t=e.sent,e.abrupt("return",{options:t});case 4:case"end":return e.stop()}}),e)}))),[y]),{options:{}}),S=C.result.options,O=C.error,P=C.isSuccess,D=C.request,B=(0,f.ZP)((0,l.useCallback)((0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.Ij)({params:y});case 2:return t=e.sent,e.abrupt("return",{templates:t.items,count:t.meta.count});case 4:case"end":return e.stop()}}),e)}))),[y]),{templates:[],count:0,templatesIsError:L,templatesIsLoading:F,templatesIsSuccess:A}),I=B.result,R=I.templates,q=I.count,L=B.error,F=B.isLoading,A=B.isSuccess,N=B.request,z={sort:{sortBy:{direction:y.sort_order},onSort:function(e,t,n){_({type:"SET_SORT_ORDER",value:{sort_order:n}})}}};(0,l.useEffect)((function(){insights.chrome.appNavClick({id:"savings-planner",secondaryNav:!0}),(0,j.YU)().catch((function(e){Z({preflightError:e})}))}),[]);var M=(0,J.parse)(h,{arrayFormat:"bracket",parseBooleans:!0,parseNumbers:!0});return(0,l.useEffect)((function(){g.replace({pathname:u,hash:m,search:(0,J.stringify)(ce(ce({},de),M),{arrayFormat:"bracket"})})}),[]),(0,l.useEffect)((function(){D(),N()}),[y]),403===(null==w||null===(t=w.preflightError)||void 0===t?void 0:t.status)?s().createElement(Q.Z,ae.dR):s().createElement(s().Fragment,null,w&&s().createElement(ee.Z,w),P&&s().createElement(p.Form,null,s().createElement(p.FormGroup,{label:"Link a template to this plan:",fieldId:"template-link-field"},s().createElement(le.Z,{hideQuickDateRange:!0,hideSortOptions:!0,categories:S,filters:y,qsConfig:pe,setFilters:E,pagination:s().createElement(re.Z,{count:q,params:{limit:y.limit,offset:y.offset},qsConfig:pe,setPagination:b,isCompact:!0})}),O&&s().createElement(ne.Z,{message:O.error}),F&&s().createElement(X.Z,null),A&&R.length<=0&&s().createElement(te.Z,null),A&&R.length>0&&s().createElement($.TableComposable,{"aria-label":"Template link table",variant:"compact"},s().createElement($.Thead,null,s().createElement($.Tr,null,s().createElement($.Th,null),s().createElement($.Th,z,"Name"))),s().createElement($.Tbody,null,R.map((function(e){var t=e.id,r=e.name;return s().createElement($.Tr,{key:"template-detail-".concat(t)},s().createElement($.Td,{"data-testid":"radio-".concat(t),key:"template-detail-".concat(t,"-radio-td"),select:{rowIndex:t,onSelect:function(e,t,n){return o({type:k,value:n})},isSelected:n===t,variant:"radio"}}),s().createElement($.Td,null,r))})))),s().createElement(ue,null,s().createElement("div",null,-2!==n&&s().createElement(p.Button,{key:"clear-selection-button",variant:"link","aria-label":"Clear selection",onClick:function(){o({type:k,value:-2})}},"Clear selection")),s().createElement(re.Z,{count:q,params:{limit:y.limit,offset:y.offset},qsConfig:pe,setPagination:b,variant:p.PaginationVariant.bottom})))))};me.propTypes={template_id:u().number.isRequired,dispatch:u().func.isRequired};const fe=me;var he=function(e){var t=e.title,n=e.options,o=e.data,c=void 0===o?{}:o,u=(0,d.useHistory)(),h=(0,d.useLocation)(),T=h.hash,O=h.pathname,D=(0,l.useState)(null),B=(0,a.Z)(D,2),I=B[0],R=B[1],q=(0,f.ZP)((0,l.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=10;break}if(!n){e.next=7;break}return e.next=4,(0,j.Vs)({id:n,params:t});case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,(0,j.he)({params:t});case 9:c=e.sent;case 10:return e.abrupt("return",{data:c});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),{apiResponse:c}),L=q.result.data,F=q.error,A=q.request,N=function(e){var t,n=(0,l.useReducer)((function(e,t){var n=t.type,r=t.value;switch(n){case g:return w(w({},e),{},{name:r});case v:return w(w({},e),{},{category:r});case y:return w(w({},e),{},{description:r});case b:return w(w({},e),{},{manual_time:r});case E:return w(w({},e),{},{hosts:r});case _:return w(w({},e),{},{frequency_period:r});case x:return w(w({},e),{},{tasks:r});case k:return w(w({},e),{},{template_id:r});default:throw new Error("usePlanData reducer action type ".concat(n," was not found."))}}),{name:(null==e?void 0:e.name)||"",category:(null==e?void 0:e.category)||"system",description:(null==e?void 0:e.description)||"",manual_time:(null==e?void 0:e.manual_time)||240,hosts:(null==e?void 0:e.hosts)||1,frequency_period:(null==e?void 0:e.frequency_period)||"weekly",tasks:Z(null==e?void 0:e.tasks)||[],template_id:(null==e?void 0:e.template_id)||-2}),r=(0,a.Z)(n,2),o=r[0],i=r[1];return{formData:o,requestPayload:(t=w({},o),t.tasks=t.tasks.map((function(e,t){return{task:e,task_order:t+1}})),t.hosts&&""!==t.hosts||(t.hosts=1),t.hourly_rate=50,t.frequency_per_period=1,t),dispatch:i}}(c),z=N.formData,M=N.requestPayload,Y=N.dispatch,W=[{step_number:1,id:"details",name:"Details",component:s().createElement(P,{options:n,formData:z,dispatch:Y})},{step_number:2,id:"tasks",name:"Tasks",component:s().createElement(H,{tasks:z.tasks,dispatch:Y})},{step_number:3,id:"link_template",name:"Link template",component:s().createElement(fe,{template_id:z.template_id,dispatch:Y}),nextButtonText:"Save"}],U=s().createElement(p.WizardFooter,null,s().createElement(p.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,r=e.onBack,a=e.onClose;return 3!==t.step_number?s().createElement(s().Fragment,null,s().createElement(p.Button,{variant:"primary",type:"submit",onClick:n},"Next"),1!==t.step_number&&s().createElement(p.Button,{variant:"secondary",onClick:r},"Back"),s().createElement(p.Button,{variant:"link",onClick:a},"Cancel")):s().createElement(s().Fragment,null,s().createElement(p.Tooltip,{content:z.name&&""!==!z.name?"Save this plan":"In order to save this plan, you must enter a name in the details step",position:"top"},s().createElement("div",null,s().createElement(p.Button,{variant:"primary",type:"submit",onClick:V,isDisabled:!z.name||""===!z.name},"Save"))),s().createElement(p.Button,{variant:"secondary",onClick:r},"Back"),s().createElement(p.Button,{variant:"link",onClick:a},"Cancel"))})));(0,l.useEffect)((function(){-1===O.indexOf("/add")&&T?R(W.find((function(e){return"#".concat(e.id)===T})).step_number):(u.replace({hash:"details"}),R(1))}),[]);var G=function(e){u.replace({hash:e.id})},V=function(){var e;A(M,null===(e=c)||void 0===e?void 0:e.id)};return s().createElement(s().Fragment,null,!F&&(null==L?void 0:L.plan_created)&&s().createElement(d.Redirect,{to:{pathname:"".concat(m.n.savingsPlanner,"/").concat(L.id||L.plan_created.id),state:{reload:!0}}}),I&&s().createElement(p.Wizard,{navAriaLabel:"".concat(t," steps"),mainAriaLabel:"".concat(t," content"),steps:W,onGoToStep:G,onNext:G,onBack:G,onSave:V,onClose:function(){var e;-1!==location.pathname.indexOf("/edit")?u.push({pathname:"".concat(m.n.savingsPlanner,"/").concat(null===(e=c)||void 0===e?void 0:e.id)}):u.push({pathname:m.n.savingsPlanner})},footer:U,startAtStep:I,height:"calc(100vh - 240px)"}),F&&s().createElement(C.Z,{isOpen:!!F,onClose:function(){A()},title:"Error",variant:"error"},"There was an error saving the plan.",s().createElement(S.Z,{error:F.detail})))};he.propTypes={title:u().string.isRequired,options:u().object.isRequired,data:u().object},he.defaultProps={data:{}};const ge=he},13784:(e,t,n)=>{"use strict";n.d(t,{cY:()=>r,GL:()=>a,wC:()=>o,kK:()=>i,bE:()=>l,dR:()=>s,It:()=>c});var r={attributes:["id","status","job_type","started","finished","elapsed","created","cluster_name","org_name","most_failed_tasks"],defaultParams:{status:["successful","failed"],quick_date_range:"last_30_days",job_type:["workflowjob","job"],org_id:[],cluster_id:[],template_id:[],inventory_id:[],sort_by:"created:desc",sort_options:"created",sort_order:"desc",only_root_workflows_and_standalone_jobs:!1,limit:5,offset:0}},a={defaultParams:{status:["successful"],org_id:[],cluster_id:[],template_id:[],inventory_id:[],quick_date_range:"roi_last_year",job_type:["job"],sort_options:"template_productivity_score",sort_order:"desc",start_date:null,end_date:null,limit:25,only_root_workflows_and_standalone_jobs:!0,attributes:["successful_hosts_total","successful_elapsed_total","total_org_count","total_cluster_count"],group_by:"template",group_by_time:!1}},o={defaultParams:{status:[],org_id:[],quick_date_range:"last_30_days",limit:5,offset:0,job_type:["workflowjob","job"],cluster_id:[],template_id:[],inventory_id:[],start_date:null,end_date:null}},i={defaultParams:{status:["successful","failed"],quick_date_range:"last_30_days",job_type:["workflowjob","job"],group_by_time:!0,org_id:[],cluster_id:[],template_id:[],inventory_id:[],only_root_workflows_and_standalone_jobs:!1}},l={defaultParams:{template_id:[],inventory_id:[],automation_status:[],category:[],frequency_period:[],name:"",limit:10,offset:0,sort_options:"modified",sort_order:"desc",sort_by:"modified:desc"}},s={title:"RBAC Access Denied",description:"User does not have privileges to perform this action. Contact your organization adminstrator(s) for more information."},c=["automation_status","attributes","cluster_id","category","frequency_period","host_id","host_status","inventory_id","job_type","status","org_id","template_id"]},96183:(e,t,n)=>{"use strict";n.d(t,{U:()=>i,V:()=>s});var r=n(92137),a=n(87757),o=n.n(a);function i(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(o().mark((function e(t){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=null,i=!1,e.prev=3,e.next=6,Promise.all(t.map(function(){var e=(0,r.Z)(o().mark((function e(t){var r,a,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.request,a=t.label,e.next=3,r();case 3:l=e.sent,(s=l.items.count)>0&&(n[a]=s,i=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a=e.t0;case 11:return e.abrupt("return",{results:i&&n,error:a});case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}var s={savingsPlan:function(e,t){return[{request:(n=(0,r.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t({params:{id:[e.id]}}));case 1:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)}),label:"Plan"}];var n}}},79886:(e,t,n)=>{"use strict";n.d(t,{mN:()=>i,o0:()=>l,p6:()=>s,NU:()=>c,kC:()=>u,YD:()=>d,xb:()=>p,$$:()=>m,B3:()=>f,GV:()=>h});var r=n(30381),a=n.n(r);function o(e){return 0===e||"0"===e||!!parseInt(e)||!!parseFloat(e)}function i(e){return e.toString().replace(/['"]+/g,"")}function l(e){return a()(new Date(e).toISOString()).format("M/D/YYYY h:mm:ssa")}function s(e){return a()(e).format("YYYY-MM-DD")}function c(e){if(e){var t=0;return e.forEach((function(e){t+=parseInt(e.count)})),t}}var u=function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)};function d(e,t){return o(e)&&o(t)?t-e<0?0:t-e:0}function p(e){return parseInt(e)?e/60:0}function m(e){return!parseInt(e)||parseInt(e)<0?0:60*+parseInt(e)}function f(e){return parseInt(e)?e/3600:0}function h(e){return"job"===e?"Playbook run":"Workflow job"}},21048:(e,t,n)=>{"use strict";n.d(t,{Hm:()=>c,dD:()=>u,p9:()=>m,mn:()=>h,Zd:()=>v,sM:()=>b});var r=n(87329),a=n(96156),o=n(34699),i=n(13784);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offset:1,limit:5,sort_by:"name"},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["offset","limit"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["modified","created"];if(!e)throw new Error("a QS namespace is required");return{namespace:e,defaultParams:t,integerFields:n,dateFields:r}}function u(e,t){if(!t)return e.defaultParams||{};var n=function(e,t){var n={};return t.replace(/^\?/,"").split("&").map((function(e){return e.split("=")})).forEach((function(r){var a=(0,o.Z)(r,2),l=a[0],s=a[1];if(l&&d(e.namespace,l)){var c=e.namespace?decodeURIComponent(l.substr(e.namespace.length+1)):decodeURIComponent(l),u=function(e,t,n,r){var a=new URLSearchParams(r);if(e.integerFields&&e.integerFields.some((function(e){return e===t})))return parseInt(n,10);if(i.It&&i.It.some((function(e){return e===t}))){var o="".concat(e.namespace,".").concat(t),l=a.getAll(o).filter((function(e,t,n){return n.indexOf(e)===t}));return a.delete[o],l}return decodeURIComponent(n)}(e,c,s,t);n[c]=y(n[c],u)}})),n}(e,t);return function(e,t){return s(s({},e.defaultParams),t)}(e,n)}var d=function(e,t){return e?t.startsWith("".concat(e,".")):!t.includes(".")},p=function(e){return e?Object.keys(e).sort().filter((function(t){return null!==e[t]})).map((function(t){return[t,e[t]]})).map((function(e){var t,n,r=(0,o.Z)(e,2);return t=r[0],n=r[1],Array.isArray(n)?n.map((function(e){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})).join("&"):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))})).join("&"):""},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return"";var r=h({},t,e.defaultParams);return p(s(s({},f(e.namespace,r)),n))},f=function(e,t){if(!e)return t;var n={};return Object.keys(t).forEach((function(r){n["".concat(e,".").concat(r)]=t[r]})),n};function h(e,t,n){var r=s({},e.defaultParams);return Object.keys(t).forEach((function(e){var a=g(t[e],n[e]);null!==a&&(r[e]=a)})),r}function g(e,t){if(e===t)return null;if(Array.isArray(t))return t.reduce(g,e);if(Array.isArray(e)){var n=e.indexOf(t);if(n>-1&&e.splice(n,1),1===e.length)return e[0]}return e}function v(e,t){var n={};return Object.keys(e).forEach((function(r){n[r]=y(e[r],t[r])})),Object.keys(t).forEach((function(e){n[e]||(n[e]=t[e])})),n}function y(e,t){return t||""===t?e||""===e?(n=Array.isArray(e)?e.concat(t):[e].concat(t),1===(a=(0,r.Z)(new Set(n))).length?a[0]:a):t:e;var n,a}function b(e,t){return s(s({},e),t)}},53677:(e,t,n)=>{"use strict";n.d(t,{K:()=>g});var r=n(34699),a=n(81253),o=n(96156),i=n(92950),l=n(30381),s=n.n(l),c=n(334),u=n(79886),d=n(21048),p=["id"],m=["severity"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=(0,c.useHistory)(),n=h(h({},e),e.sort_options&&e.sort_order&&{sort_by:"".concat(e.sort_options,":").concat(e.sort_order)}),l="undefined"!==t&&null!=t&&t.location?(0,d.dD)(n,t.location.search):n,f=(0,i.useReducer)((function(e,t){var n=t.type,o=t.value;switch(n){case"SET_STARTDATE":return h(h({},e),{},{startDate:o});case"SET_ENDDATE":return h(h({},e),{},{endDate:o});case"SET_ID":return parseInt(o)?h(h({},e),{},{id:parseInt(o)}):(e.id,(0,a.Z)(e,p));case"SET_SEVERITY":return""===o.severity?(e.severity,(0,a.Z)(e,m)):h(h({},e),o);case"SET_LIMIT":return isNaN(o)?h(h({},e),{},{limit:5}):h(h({},e),{},{limit:parseInt(o)});case"SET_OFFSET":return isNaN(o)?h(h({},e),{},{offset:0}):h(h({},e),{},{offset:parseInt(o)});case"SET_ATTRIBUTES":case"SET_JOB_TYPE":case"SET_STATUS":case"SET_ORG":case"SET_CLUSTER":case"SET_TEMPLATE":case"SET_AUTOMATION_STATUS":case"SET_CATEGORY":case"SET_FREQUENCY":case"SET_NAME":case"SET_ROOT_WORKFLOWS_AND_JOBS":case"SET_INVENTORY":return h(h({},e),o);case"SET_QUICK_DATE_RANGE":var i=h({},e);return"custom"!==o&&(i=h(h({},i),{},{start_date:null,end_date:null})),h(h({},i),o);case"SET_START_DATE":case"SET_END_DATE":var s={};return Object.entries(o).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];s[n]=(0,u.p6)(a)})),h(h({},e),s);case"SET_SORT_OPTIONS":return h(h({},e),{},{sort_options:o.sort_options},e.sort_order&&{sort_by:"".concat(o.sort_options,":").concat(e.sort_order)});case"SET_SORT_ORDER":return h(h({},e),{},{sort_order:o.sort_order},e.sort_options&&{sort_by:"".concat(e.sort_options,":").concat(o.sort_order)});case"REINITIALIZE":return h({},o);case"RESET_FILTER":return h({},l);default:throw new Error("The query params reducer action (".concat(n,") not found."))}}),h({},l)),g=(0,r.Z)(f,2),v=g[0],y=g[1],b={status:"SET_STATUS",quick_date_range:"SET_QUICK_DATE_RANGE",job_type:"SET_JOB_TYPE",org_id:"SET_ORG",cluster_id:"SET_CLUSTER",template_id:"SET_TEMPLATE",sort_order:"SET_SORT_ORDER",sort_options:"SET_SORT_OPTIONS",start_date:"SET_START_DATE",end_date:"SET_END_DATE",automation_status:"SET_AUTOMATION_STATUS",category:"SET_CATEGORY",frequency_period:"SET_FREQUENCY",name:"SET_NAME",only_root_workflows_and_standalone_jobs:"SET_ROOT_WORKFLOWS_AND_JOBS",inventory_id:"SET_INVENTORY"};return{queryParams:v,dispatch:y,setFromToolbar:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y(e?{type:b[e],value:(0,o.Z)({},e,t)}:{type:"RESET_FILTER"})},setFromPagination:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y({type:"SET_OFFSET",value:e}),t&&y({type:"SET_LIMIT",value:t})},setSeverity:function(e){return y({type:"SET_SEVERITY",value:{severity:e}})},setEndDate:function(){var e=s()().format("YYYY-MM-DD");y({type:"SET_ENDDATE",value:e})},setId:function(e){return y({type:"SET_ID",value:e})},setStartDate:function(e){var t;7===e&&(t=s()().subtract(1,"week").format("YYYY-MM-DD")),14===e&&(t=s()().subtract(2,"weeks").format("YYYY-MM-DD")),t=31===e?s()().subtract(1,"month").format("YYYY-MM-DD"):s()().subtract(e,"days").format("YYYY-MM-DD"),y({type:"SET_STARTDATE",value:t})},setStartDateAsString:function(e){return y({type:"SET_STARTDATE",value:e})}}}},14115:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(20806),a=n(17563);const o=function(e,t){return function(n){var o=(0,a.stringify)(n,{arrayFormat:"bracket"});e.push({pathname:r.n[t],search:o})}}},8644:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>d,px:()=>u,pF:()=>c});var r=n(92137),a=n(34699),o=n(87757),i=n.n(o),l=n(92950),s=function(e,t){var n=(0,l.useState)(t),o=(0,a.Z)(n,2),s=o[0],c=o[1],u=(0,l.useState)(null),d=(0,a.Z)(u,2),p=d[0],m=d[1],f=(0,l.useState)(!1),h=(0,a.Z)(f,2),g=h[0],v=h[1],y=(0,l.useState)(!1),b=(0,a.Z)(y,2),E=b[0],_=b[1],x=function(){var e=(0,l.useRef)(null);return(0,l.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),e}();return{result:s,error:p,isLoading:g,isSuccess:E,request:(0,l.useCallback)((0,r.Z)(i().mark((function n(){var r,a=arguments;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.prev=1,n.next=4,e.apply(void 0,a);case 4:r=n.sent,x.current&&(c(r),m(null),_(!0)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),x.current&&(m(n.t0),c(t));case 11:return n.prev=11,x.current&&v(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])}))),[e]),setValue:c}},c=function(e){var t=(0,l.useState)(!1),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,l.useEffect)((function(){e&&o(!0)}),[e]),{error:r?e:null,dismissError:function(){o(!1)}}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.qsConfig,a=void 0===n?null:n,o=t.fetchItems,l=void 0===o?null:o,u=s(e,null),d=u.error,p=u.isLoading,m=u.request,f=c(d),h=f.error,g=f.dismissError,v=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:if(a){e.next=4;break}return e.abrupt("return");case 4:l();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{isLoading:p,deleteItems:v,deletionError:h,clearDeletionError:g}};const d=s},46700:(e,t,n)=>{var r={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=46700},12613:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),l=n(58788),s=n(21048),c=n(334),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},d=[{title:"5",value:5},{title:"10",value:10},{title:"15",value:15},{title:"20",value:20},{title:"25",value:25}],p=function(e){var t=e.count,n=void 0===t?0:t,r=e.qsConfig,o=e.params,i=e.setPagination,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["count","qsConfig","params","setPagination"]),m=o.offset,f=o.limit,h=Math.floor(m/f+1),g=function(e){return(e-1)*f},v=(0,c.useHistory)(),y=function(e){void 0===e&&(e={});var t=v.location,n=t.pathname,a=t.search,o=(0,s.dD)({},a),i=(0,s.p9)(r,e,o);v.push(i?n+"?"+i:n)};return a().createElement(l.Pagination,u({itemCount:n,widgetId:"aa-pagination",perPageOptions:d,perPage:f,page:h,onPerPageSelect:function(e,t,n){var a,o;i(g(n),t),a=t,o=(0,s.dD)(r,v.location.search),y(u(u({},o),{limit:a}))},onSetPage:function(e,t){i(g(t)),function(e,t){var n=(0,s.dD)(r,v.location.search);y(u(u({},n),{offset:t}))}(0,g(t))}},p))};p.propTypes={count:i().number,qsConfig:i().any,params:i().exact({offset:i().number.isRequired,limit:i().number.isRequired}).isRequired,setPagination:i().func.isRequired};const m=p},91354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}}}]);
//# sourceMappingURL=../sourcemaps/automation_analytics.ea378d2995ea6e2626c2.js.map