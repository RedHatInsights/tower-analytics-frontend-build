(self.webpackChunkautomation_analytics=self.webpackChunkautomation_analytics||[]).push([[3],{69003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>dn,paths:()=>mn});var a=n(92950),r=n.n(a),l=n(334),i=n(20806),o=n(58788),c=n(86350),s=n(48716),u=n(39173),m=n(69595),d=n(64866),p=n(34699),f=n(45697),E=n.n(f),v=n(77388),g=n(96156),y="SET_NAME",h="SET_CATEGORY",b="SET_DESCRIPTION",k="SET_MANUAL_TIME",C="SET_HOSTS",Z="SET_FREQUENCY_PERIOD",_="SET_TASKS",P="SET_TEMPLATE_ID";function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null!=e&&e.length)return e.sort((function(e,t){return e.task_order-t.task_order})).map((function(e){return e.task}))};var S,w,O,j,q,I,R=n(22122),F=n(81253),L=n(32465),B=n(35451),A=n(84564),N=n(19694),G=n(31369),M=n(77669),W=n(29163),H=["isOpen","title","label","variant","children"],z=(0,W.ZP)(A.ZP)(S||(S=(0,L.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),U=(0,W.ZP)(M.ZP)(w||(w=(0,L.Z)(["\n  color: var(--pf-global--danger-color--100);\n"]))),K=(0,W.ZP)(G.ZP)(O||(O=(0,L.Z)(["\n  color: var(--pf-global--info-color--100);\n"]))),V=(0,W.ZP)(B.ZP)(j||(j=(0,L.Z)(["\n  color: var(--pf-global--success-color--100);\n"]))),Y=(0,W.ZP)(N.ZP)(q||(q=(0,L.Z)(["\n  color: var(--pf-global--warning-color--100);\n"]))),$=W.ZP.div(I||(I=(0,L.Z)(["\n  display: flex;\n  svg {\n    margin-right: 16px;\n  }\n"]))),X=function(e){var t=e.isOpen,n=e.title,a=e.label,l=void 0===a?"Alert modal":a,i=e.variant,c=void 0===i?"warning":i,s=e.children,u=(0,F.Z)(e,H),m={danger:r().createElement(z,{size:"lg"}),error:r().createElement(U,{size:"lg"}),info:r().createElement(K,{size:"lg"}),success:r().createElement(V,{size:"lg"}),warning:r().createElement(Y,{size:"lg"})},d=r().createElement($,null,c?m[c]:null,r().createElement(o.Title,{id:"alert-modal-header-label",size:"2xl",headingLevel:"h2"},n));return r().createElement(o.Modal,(0,R.Z)({header:d,"aria-label":l,"aria-labelledby":"alert-modal-header-label",isOpen:!!t,variant:"small",title:n},u),s)};X.propTypes={isOpen:E().bool.isRequired,title:E().string.isRequired,label:E().string,variant:E().string,children:E().node};const Q=X;var J,ee,te,ne=(0,W.ZP)(o.Card)(J||(J=(0,L.Z)(["\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n"]))),ae=(0,W.ZP)(o.CardBody)(ee||(ee=(0,L.Z)(["\n  max-height: 200px;\n  overflow: scroll;\n"]))),re=(0,W.ZP)(o.ExpandableSection)(te||(te=(0,L.Z)(["\n  text-align: left;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n"])));function le(e){var t=e.error,n=(0,a.useState)(!1),l=(0,p.Z)(n,2),i=l[0],o=l[1];return r().createElement(r().Fragment,null,Array.isArray(t)&&t.length&&r().createElement(re,{toggleText:"Details",onToggle:function(){o(!i)},isExpanded:i},r().createElement(ne,null,r().createElement(ae,null,r().createElement("ul",null,t.map((function(e){return"string"==typeof e?r().createElement("li",{key:e},e):null})))))))}le.propTypes={error:E().arrayOf(E().string)};const ie=le;var oe=n(79886),ce=function(e){var t,n,l,i=e.options,c=e.formData,s=e.dispatch,u=c.name,m=c.category,d=c.description,f=c.manual_time,E=c.hosts,v=c.frequency_period,g=(0,a.useState)(!1),_=(0,p.Z)(g,2),P=_[0],T=_[1],x=(0,a.useState)(!1),D=(0,p.Z)(x,2),S=D[0],w=D[1],O=(0,a.useState)(!1),j=(0,p.Z)(O,2),q=j[0],I=j[1];return r().createElement(o.Form,null,i&&r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What do you want to automate?",isRequired:!0,fieldId:"name-field"},r().createElement(o.TextInput,{isRequired:!0,placeholder:"Example: Provision NGINX server",type:"text",id:"name-field",name:"name",value:u,onChange:function(e){return s({type:y,value:e})}})),r().createElement(o.FormGroup,{label:"What type of task is it?",fieldId:"category-field"},r().createElement(o.Select,{id:"category-field",isOpen:P,variant:"single","aria-label":"Plan category selector",maxHeight:390,onToggle:function(){return T(!P)},onSelect:function(e,t){s({type:h,value:t}),T(!1)},selections:m},((null===(t=i.data)||void 0===t?void 0:t.category)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"Enter a description of your automation plan",fieldId:"description-field"},r().createElement(o.TextInput,{type:"text",placeholder:"Place description here",id:"description-field",name:"description",value:d,onChange:function(e){return s({type:b,value:e})}})),r().createElement(o.FormGroup,{label:"How long does it take to do this manually?",fieldId:"manual-time-field"},r().createElement(o.Select,{id:"manual-time-field",isOpen:S,variant:"single",placeholderText:"Select amount","aria-label":"Plan time selector",onToggle:function(){return w(!S)},onSelect:function(e,t){s({type:k,value:t}),w(!1)},selections:f},((null===(n=i.data)||void 0===n?void 0:n.manual_time)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)})))),r().createElement(o.FormGroup,{label:"How many hosts do you plan to run this on?",fieldId:"hosts-field"},r().createElement(o.NumberInput,{inputAriaLabel:"Number of hosts",widthChars:8,onChange:function(e){((0,oe.i_)(e.target.value)||0===e.target.value.length)&&s({type:C,value:parseInt(e.target.value)})},onMinus:function(){return s({type:C,value:(0,oe.i_)(E)?E-1:0})},onPlus:function(){return s({type:C,value:(0,oe.i_)(E)?E+1:1})},id:"hosts-field",name:"hosts",value:E,min:0})),r().createElement(o.FormGroup,{label:"How often do you do this?",fieldId:"frequency-period-field"},r().createElement(o.Select,{id:"frequency-period-field",isOpen:q,variant:"single",placeholderText:"Select frequency period","aria-label":"Plan frequency period selector",onToggle:function(){I(!q)},onSelect:function(e,t){s({type:Z,value:t}),I(!1)},selections:v},((null===(l=i.data)||void 0===l?void 0:l.frequency_period)||[]).map((function(e){var t=e.key,n=e.value;return r().createElement(o.SelectOption,{key:t,value:t},n)}))))))};ce.propTypes={options:E().object.isRequired,formData:E().object.isRequired,dispatch:E().func.isRequired};const se=ce;var ue,me,de,pe,fe,Ee=n(87329),ve=n(12294),ge=n(33606),ye=W.ZP.div(ue||(ue=(0,L.Z)(["\n  margin-top: 20px;\n"]))),he=(0,W.ZP)(o.Title)(me||(me=(0,L.Z)(["\n  margin-bottom: 10px;\n"]))),be=(0,W.ZP)(o.Button)(de||(de=(0,L.Z)(["\n  padding: 0 16px;\n"]))),ke=(0,W.ZP)(o.DataListAction)(pe||(pe=(0,L.Z)(["\n  padding: 6px 0;\n"]))),Ce=(0,W.ZP)(o.DataListItemRow)(fe||(fe=(0,L.Z)(["\n  align-items: center;\n"]))),Ze=function(e){var t=e.tasks,n=e.dispatch,l=function(e){n({type:_,value:e})},i=(0,a.useState)(""),c=(0,p.Z)(i,2),s=c[0],u=c[1],m=(0,a.useState)(""),d=(0,p.Z)(m,2),f=d[0],E=d[1],v=(0,a.useState)(""),g=(0,p.Z)(v,2),y=g[0],h=g[1],b=function(){var e=s.trim();""!==e&&(l([].concat((0,Ee.Z)(t),[e])),u(""))};return r().createElement(r().Fragment,null,r().createElement(o.Form,null,r().createElement(o.Grid,{hasGutter:!0,md:6},r().createElement(o.FormGroup,{label:"What tasks do you need to accomplish this plan?",fieldId:"task-field"},r().createElement(o.InputGroup,null,r().createElement(o.TextInput,{placeholder:"Enter a description of each task",type:"text",id:"task-field",name:"task",value:s,onChange:function(e){return u(e)},onKeyDown:function(e){e.key&&"Enter"===e.key&&(e.preventDefault(),b())}}),r().createElement(o.Button,{onClick:b,isDisabled:""===s.trim(),variant:"control","aria-label":"Add task"},r().createElement(ve.ZP,null)))))),t.length>0&&r().createElement(ye,null,r().createElement(he,{headingLevel:"h4",size:"xl"},"Tasks"),r().createElement(o.DataList,{"aria-label":"Draggable list to reorder and remove tasks.",isCompact:!0,onDragFinish:function(e){E("Dragging finished"),l(e.map((function(e){return e.split("-").slice(0,-1).join("-")})))},onDragStart:function(e){h(e),E("Dragging started for task ".concat(e,"."))},onDragMove:function(e,t){E("Dragging task ".concat(y,".  Task ").concat(e," is now task ").concat(t,"."))},onDragCancel:function(){E("Dragging cancelled. Tasks list order is unchanged.")},itemOrder:t.map((function(e,t){return"".concat(e,"-").concat(t)}))},t.map((function(e,n){return r().createElement(o.DataListItem,{"aria-labelledby":"cell-".concat(n+1),id:"".concat(e,"-").concat(n),key:n+1},r().createElement(Ce,null,r().createElement(o.DataListControl,null,r().createElement(o.DataListDragButton,{"aria-label":"Reorder","aria-labelledby":"cell-".concat(n+1),"aria-describedby":"Press space or enter to begin dragging, and use the arrow keys to navigate up or down. Press enter to confirm the drag, or any other key to cancel the drag operation.","aria-pressed":"false"})),r().createElement(o.DataListItemCells,{dataListCells:[r().createElement(o.DataListCell,{key:n+1},r().createElement("span",{id:"cell-".concat(n+1)},"".concat(n+1,". ").concat(e)))]}),r().createElement(ke,{"aria-label":"Actions"},r().createElement(be,{onClick:function(){return function(e){l(t.filter((function(t,n){return n!==e})))}(n)},variant:"plain","aria-label":"Delete"},r().createElement(ge.ZP,null)))))})))),r().createElement("div",{className:"pf-screen-reader","aria-live":"assertive"},f))};Ze.propTypes={tasks:E().array.isRequired,dispatch:E().func.isRequired};const _e=Ze;var Pe,Te=n(92137),xe=n(87757),De=n.n(xe),Se=n(17563),we=n(94550),Oe=n(94794),je=n(26249),qe=n(83160),Ie=n(12613),Re=n(53677),Fe=n(21048),Le=n(95735);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=W.ZP.div(Pe||(Pe=(0,L.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Ge={group_by:"template",limit:10,group_by_time:!1,offset:0,sort_options:"name",sort_order:"asc",sort_by:"name:asc"},Me=(0,Fe.Hm)("job-explorer",Ae({},Ge),["limit","offset"]),We=function(e){var t=e.template_id,n=e.dispatch,i=(0,l.useLocation)(),c=i.pathname,s=i.hash,u=i.search,m=(0,l.useHistory)(),p=(0,Re.K)(Me),f=p.queryParams,E=p.setFromPagination,g=p.setFromToolbar,y=p.dispatch,h=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.ZW)(f)}),[f]),{}),b=h.result,k=h.error,C=h.isSuccess,Z=h.request,_=(0,v.ZP)((0,a.useCallback)((0,Te.Z)(De().mark((function e(){var t;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Ij)(f);case 2:return t=e.sent,e.abrupt("return",{templates:t.items,count:t.meta.count});case 4:case"end":return e.stop()}}),e)}))),[f]),{templates:[],count:0}),T=_.result,x=T.templates,D=T.count,S=_.isLoading,w=_.isSuccess,O=_.request,j={sort:{sortBy:{direction:f.sort_order},onSort:function(e,t,n){y({type:"SET_SORT_ORDER",value:{sort_order:n}})}}};(0,a.useEffect)((function(){insights.chrome.appNavClick({id:"savings-planner",secondaryNav:!0})}),[]);var q=(0,Se.parse)(u,{arrayFormat:"bracket",parseBooleans:!0,parseNumbers:!0});return(0,a.useEffect)((function(){m.replace({pathname:c,hash:s,search:(0,Se.stringify)(Ae(Ae({},Ge),q),{arrayFormat:"bracket"})})}),[]),(0,a.useEffect)((function(){Z(),O()}),[f]),C?r().createElement(o.Form,null,r().createElement(o.FormGroup,{label:"Link a template to this plan:",fieldId:"template-link-field"},r().createElement(Le.Z,{hideQuickDateRange:!0,hideSortOptions:!0,categories:b,filters:f,qsConfig:Me,setFilters:g,pagination:r().createElement(Ie.Z,{count:D,params:{limit:f.limit,offset:f.offset},qsConfig:Me,setPagination:E,isCompact:!0})}),k&&r().createElement(qe.Z,{message:k.error}),S&&r().createElement(Oe.Z,null),w&&x.length<=0&&r().createElement(je.Z,null),w&&x.length>0&&r().createElement(we.TableComposable,{"aria-label":"Template link table",variant:"compact"},r().createElement(we.Thead,null,r().createElement(we.Tr,null,r().createElement(we.Th,null),r().createElement(we.Th,j,"Name"))),r().createElement(we.Tbody,null,x.map((function(e){var a=e.id,l=e.name;return r().createElement(we.Tr,{key:"template-detail-".concat(a)},r().createElement(we.Td,{"data-testid":"radio-".concat(a),key:"template-detail-".concat(a,"-radio-td"),select:{rowIndex:a,onSelect:function(e,t,a){return n({type:P,value:a})},isSelected:t===a,variant:"radio"}}),r().createElement(we.Td,null,l))})))),r().createElement(Ne,null,r().createElement("div",null,-2!==t&&r().createElement(o.Button,{key:"clear-selection-button",variant:"link","aria-label":"Clear selection",onClick:function(){n({type:P,value:-2})}},"Clear selection")),r().createElement(Ie.Z,{count:D,params:{limit:f.limit,offset:f.offset},qsConfig:Me,setPagination:E,variant:o.PaginationVariant.bottom})))):null};We.propTypes={template_id:E().number.isRequired,dispatch:E().func.isRequired};const He=We;var ze=function(e){var t=e.title,n=e.options,c=e.data,s=void 0===c?{}:c,u=(0,l.useHistory)(),m=(0,l.useLocation)(),f=m.hash,E=m.pathname,g=(0,a.useState)(null),T=(0,p.Z)(g,2),S=T[0],w=T[1],O=(0,v.ZP)((0,a.useCallback)((function(e,t){return e?t?(0,d.Vs)(t,e):(0,d.he)(e):{}}),[]),s),j=O.result,q=O.error,I=O.request,R=function(e){var t,n=(0,a.useReducer)((function(e,t){var n=t.type,a=t.value;switch(n){case y:return x(x({},e),{},{name:a});case h:return x(x({},e),{},{category:a});case b:return x(x({},e),{},{description:a});case k:return x(x({},e),{},{manual_time:a});case C:return x(x({},e),{},{hosts:a});case Z:return x(x({},e),{},{frequency_period:a});case _:return x(x({},e),{},{tasks:a});case P:return x(x({},e),{},{template_id:a});default:throw new Error("usePlanData reducer action type ".concat(n," was not found."))}}),{name:(null==e?void 0:e.name)||"",category:(null==e?void 0:e.category)||"system",description:(null==e?void 0:e.description)||"",manual_time:(null==e?void 0:e.manual_time)||240,hosts:(null==e?void 0:e.hosts)||1,frequency_period:(null==e?void 0:e.frequency_period)||"weekly",tasks:D(null==e?void 0:e.tasks)||[],template_id:(null==e?void 0:e.template_id)||-2}),r=(0,p.Z)(n,2),l=r[0],i=r[1];return{formData:l,requestPayload:(t=x({},l),t.tasks=t.tasks.map((function(e,t){return{task:e,task_order:t+1}})),t.hosts&&""!==t.hosts||(t.hosts=1),t.hourly_rate=50,t.frequency_per_period=1,t),dispatch:i}}(s),F=R.formData,L=R.requestPayload,B=R.dispatch,A=[{step_number:1,id:"details",name:"Details",component:r().createElement(se,{options:n,formData:F,dispatch:B})},{step_number:2,id:"tasks",name:"Tasks",component:r().createElement(_e,{tasks:F.tasks,dispatch:B})},{step_number:3,id:"link_template",name:"Link template",component:r().createElement(He,{template_id:F.template_id,dispatch:B}),nextButtonText:"Save"}],N=r().createElement(o.WizardFooter,null,r().createElement(o.WizardContextConsumer,null,(function(e){var t=e.activeStep,n=e.onNext,a=e.onBack,l=e.onClose;return 3!==t.step_number?r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:"primary",type:"submit",onClick:n},"Next"),1!==t.step_number&&r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel")):r().createElement(r().Fragment,null,r().createElement(o.Tooltip,{content:F.name&&""!==!F.name?"Save this plan":"In order to save this plan, you must enter a name in the details step",position:"top"},r().createElement("div",null,r().createElement(o.Button,{variant:"primary",type:"submit",onClick:M,isDisabled:!F.name||""===!F.name},"Save"))),r().createElement(o.Button,{variant:"secondary",onClick:a},"Back"),r().createElement(o.Button,{variant:"link",onClick:l},"Cancel"))})));(0,a.useEffect)((function(){-1===E.indexOf("/add")&&f?w(A.find((function(e){return"#".concat(e.id)===f})).step_number):(u.replace({hash:"details"}),w(1))}),[]);var G=function(e){u.replace({hash:e.id})},M=function(){I(L,null==s?void 0:s.id)};return r().createElement(r().Fragment,null,!q&&(null==j?void 0:j.plan_created)&&r().createElement(l.Redirect,{to:{pathname:"".concat(i.n.savingsPlanner,"/").concat(j.id||j.plan_created.id),state:{reload:!0}}}),S&&r().createElement(o.Wizard,{navAriaLabel:"".concat(t," steps"),mainAriaLabel:"".concat(t," content"),steps:A,onGoToStep:G,onNext:G,onBack:G,onSave:M,onClose:function(){-1!==location.pathname.indexOf("/edit")?u.push({pathname:"".concat(i.n.savingsPlanner,"/").concat(null==s?void 0:s.id)}):u.push({pathname:i.n.savingsPlanner})},footer:N,startAtStep:S,height:"calc(100vh - 240px)"}),q&&r().createElement(Q,{isOpen:!!q,onClose:function(){I()},title:"Error",variant:"error"},"There was an error saving the plan.",r().createElement(ie,{error:q.detail})))};ze.propTypes={title:E().string.isRequired,options:E().object.isRequired,data:E().object},ze.defaultProps={data:{}};const Ue=ze,Ke=function(){var e,t,n,p,f,E,g=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.nE)()}),[]),{}),y=g.result,h=g.isSuccess,b=g.request;(0,a.useEffect)((function(){b()}),[b]);var k=h&&(!0===(null===(e=y.meta)||void 0===e||null===(t=e.rbac)||void 0===t||null===(n=t.perms)||void 0===n?void 0:n.write)||!0===(null===(p=y.meta)||void 0===p||null===(f=p.rbac)||void 0===f||null===(E=f.perms)||void 0===E?void 0:E.all)),C="Create new plan";return h?k?r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:[{title:"Savings Planner",navigate:"/savings-planner"}]}),r().createElement(u.Z,{title:C})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(o.CardBody,null,r().createElement(Ue,{title:C,options:y}))))):r().createElement(l.Redirect,{to:i.n.savingsPlanner}):null};var Ve,Ye=n(83264),$e=W.ZP.div(Ve||(Ve=(0,L.Z)(["\n  margin-top: 20px;\n  --pf-c-card__actions--PaddingLeft: 0;\n"]))),Xe=function(e){var t=e.children;return r().createElement($e,null,r().createElement(o.CardActions,null,t))};Xe.propTypes={children:E().node};const Qe=Xe;function Je(e){return et.apply(this,arguments)}function et(){return(et=(0,Te.Z)(De().mark((function e(t){var n,a,r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=null,r=!1,e.prev=3,e.next=6,Promise.all(t.map(function(){var e=(0,Te.Z)(De().mark((function e(t){var a,l,i,o;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.request,l=t.label,e.next=3,a();case 3:i=e.sent,(o=i.items.count)>0&&(n[l]=o,r=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a=e.t0;case 11:return e.abrupt("return",{results:r&&n,error:a});case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}var tt,nt,at=(0,W.ZP)(o.Alert)(tt||(tt=(0,L.Z)(["\n  margin-top: 10px;\n"]))),rt=W.ZP.span(nt||(nt=(0,L.Z)(["\n  && {\n    margin-right: 10px;\n  }\n"]))),lt=function(e){var t=e.onConfirm,n=e.modalTitle,l=void 0===n?"Delete":n,i=e.name,c=void 0===i?"":i,s=e.variant,u=void 0===s?"secondary":s,m=e.isDisabled,d=void 0!==m&&m,f=e.ouiaId,E=void 0===f?null:f,v=e.deleteMessage,g=void 0===v?"Delete?":v,y=e.deleteDetailsRequests,h=void 0===y?[]:y,b=e.disabledTooltip,k=void 0===b?"This item cannot be deleted":b,C=e.children,Z=(0,a.useState)(!1),_=(0,p.Z)(Z,2),P=_[0],T=_[1],x=(0,a.useState)(),D=(0,p.Z)(x,2),S=D[0],w=D[1],O=(0,a.useState)({}),j=(0,p.Z)(O,2),q=j[0],I=j[1],R=(0,a.useState)(!1),F=(0,p.Z)(R,2),L=F[0],B=F[1],A=function(){var e=(0,Te.Z)(De().mark((function e(t){var n,a,r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(!0),!(h.length>0&&t)){e.next=8;break}return e.next=4,Je(h);case 4:n=e.sent,a=n.results,(r=n.error)?w(r):I(a);case 8:B(!1),T(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return S?r().createElement(Q,{isOpen:!!S,variant:"error",title:"Error!",onClose:function(){A(!1),w()}},r().createElement(ie,{error:S.detail})):r().createElement(r().Fragment,null,k?r().createElement(o.Tooltip,{content:k,position:"top"},r().createElement("div",null,r().createElement(o.Button,{spinnerAriaValueText:L?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return A(!0)},ouiaId:E},C||"Delete"))):r().createElement(o.Button,{ouiaId:E,spinnerAriaValueText:L?"Loading":void 0,variant:u||"secondary","aria-label":"Delete",isDisabled:d,onClick:function(){return A(!0)}},C||"Delete"),r().createElement(Q,{isOpen:P,title:l,variant:"danger",onClose:function(){return A(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"Confirm Delete",isDisabled:d,onClick:function(){t(),A(!1)}},"Delete"),r().createElement(o.Button,{ouiaId:"delete-modal-cancel",key:"cancel",variant:"link","aria-label":"Cancel",onClick:function(){return A(!1)}},"Cancel")]},"Are you sure you want to delete:",r().createElement("br",null),r().createElement("strong",null,c),Object.values(q).length>0&&r().createElement(at,{variant:"warning",isInline:!0,title:r().createElement("div",null,r().createElement("div",{"aria-label":g},g),r().createElement("br",null),Object.entries(q).map((function(e){var t=(0,p.Z)(e,2),n=t[0],a=t[1];return r().createElement("div",{"aria-label":"".concat(n,": ").concat(a),key:n},r().createElement(rt,null,n)," ",r().createElement(o.Badge,null,a))})))})))};lt.propTypes={onConfirm:E().func.isRequired,modalTitle:E().string,name:E().string,variant:E().object,isDisabled:E().bool,ouiaId:E().string,deleteMessage:E().string,deleteDetailsRequests:E().array,disabledTooltip:E().bool,children:E().node};const it=lt;var ot=function(e){var t=e.tabsArray,n=e.defaultTabId,a=(0,l.useHistory)(),i=(0,l.useLocation)();return r().createElement(o.Tabs,{activeKey:function(e){var n;return(null===(n=t.find((function(e){return e.link===i.pathname})))||void 0===n?void 0:n.id)||e}(n),onSelect:function(e,n){var r=t.find((function(e){return e.id===n}));r&&a.push(r.link)}},t.map((function(e){return r().createElement(o.Tab,{"aria-label":"string"==typeof e.name?e.name:"".concat(e.id," tab"),eventKey:e.id,key:e.id,link:e.link,title:r().createElement(o.TabTitleText,null,e.name),role:"tab"})})))};ot.propTypes={defaultTabId:E().number,tabsArray:(0,f.arrayOf)((0,f.shape)({id:f.number.isRequired,link:f.string.isRequired,name:(0,f.oneOfType)([f.string.isRequired,f.node.isRequired])})).isRequired},ot.defaultProps={defaultTabId:1};const ct=ot;var st,ut,mt=n(20272),dt=(0,W.ZP)(o.CardBody)(st||(st=(0,L.Z)(["\n  min-height: 500px;\n  padding: 0;\n  padding-bottom: 20px;\n\n  &:first-child {\n    padding-top: 0;\n  }\n"]))),pt=(0,W.ZP)(o.Divider)(ut||(ut=(0,L.Z)(["\n  padding-top: 24px;\n"]))),ft=function(e){var t=e.tabsArray,n=e.plan,c=e.canWrite,s=e.options,u=(0,l.useLocation)().pathname,m=(0,l.useHistory)(),p=n.id,f=n.automation_status,E=n.category,g=n.description,y=n.frequency_period,h=n.hosts,b=n.manual_time,k=n.modified,C=n.name,Z=n.tasks,_=n.template_details,P=n.template_id,T=function(e,t){return((s[e]||[]).find((function(e){return e.key===t}))||{}).value},x={Name:C||void 0,"Automation type":E?T("category",E):void 0,Description:g||void 0,"Manual time":b?T("manual_time",b):void 0,"Run on hosts":h||void 0,Frequency:y?T("frequency_period",y):void 0,Template:P?function(e){if(e.id)return r().createElement("a",{onClick:function(){return function(e){var t=i.n.jobExplorer,n={"job-explorer.quick_date_range":"last_30_days","job-explorer.status":["failed","successful"],"job-explorer.template_id":e},a=(0,Se.stringify)(n,{arrayFormat:"bracket"});m.push({pathname:t,search:a})}(e.id)}},e.name)}(_):void 0,"Last job status":f.status&&"None"!==f.status?r().createElement(mt.Z,{status:f.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(A.ZP,null)},"Not Running"),"Last updated":k?r().createElement("span",null,(0,oe.o0)(k)):void 0},D=(0,v.ZP)((0,a.useCallback)((0,Te.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Kh)({id:p});case 2:m.push("/savings-planner");case 3:case"end":return e.stop()}}),e)}))),[p,m])),S=D.request,w=D.error,O=(0,v.pF)(w),j=O.error,q=O.dismissError;return r().createElement(r().Fragment,null,n&&r().createElement(r().Fragment,null,r().createElement(dt,null,r().createElement(ct,{tabsArray:t}),r().createElement("div",{style:{padding:"1rem"}},r().createElement(o.DescriptionList,{isHorizontal:!0,columnModifier:{lg:"3Col"}},Object.keys(x).map((function(e,t){return void 0!==x[e]&&r().createElement(o.DescriptionListGroup,{key:t},r().createElement(o.DescriptionListTerm,null,e),r().createElement(o.DescriptionListDescription,null,x[e]))}))),Z.length>0&&r().createElement(o.DescriptionList,null,r().createElement(pt,{component:"div"}),r().createElement(o.DescriptionListGroup,{key:Z},r().createElement(o.DescriptionListTerm,null,"Tasks"),r().createElement(o.DescriptionListDescription,null,r().createElement(o.List,{component:"ol",type:"1"},Z.map((function(e){var t=e.id,n=e.task;return r().createElement(o.ListItem,{key:t},n)})))))))),c&&r().createElement(o.CardFooter,null,r().createElement(Qe,null,r().createElement(o.Button,{key:"edit-plan-button",variant:"primary","aria-label":"Edit plan",onClick:function(){m.push({pathname:"".concat(u.split("/details")[0],"/edit")})}},"Edit"),r().createElement(it,{key:"delete-plan-button",name:C,modalTitle:"Delete Plan",onConfirm:S},"Delete")),j&&r().createElement(Q,{isOpen:!!j,onClose:q,title:"Error",variant:"error"},r().createElement(ie,{error:j.detail})))))};ft.propTypes={plan:E().object,tabsArray:E().array,canWrite:E().bool.isRequired,options:E().object.isRequired};const Et=ft;var vt=n(90952),gt=n(35397),yt=n(91354);const ht=function(e){return(+e.toFixed(0)).toLocaleString()+" hours"};var bt=function(e){var t=e.value,n=void 0===t?0:t,a=e.isMoney,l=void 0===a||a;return r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardTitle,{style:{paddingBottom:"0"}},"Total savings"),r().createElement(o.CardBody,null,r().createElement(o.Title,{headingLevel:"h3",size:"4xl",style:{color:l?"#81C46B":"#0063CF"}},l?""+(0,yt.Z)(n):""+ht(n))))};bt.propTypes={value:E().number,isMoney:E().bool};const kt=bt;var Ct=n(53688),Zt=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Cost")),r().createElement("p",null,"The cost includes the hours spent in implementation, deployment, training and other expenditures for creating, maintaining and running the automation. These hours (cost of investment) are usually higher at the onset, and will be greatly reduced once the automation has been created and only maintenance is required."),r().createElement("br",null),r().createElement("p",null,"For the initial period and the first year, we assume approximately 10 hours spent on each host, as well as some buffer time and a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"For the next two years after the first year, we assume 4 hours spent on each host, as well as a 40% risk adjustment to account for unforeseen situations."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for the initial period and year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 10) + buffer time\nC2 = C1 * 40% risk adjustment\ninitial cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 1 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate cost for years 2 and 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"C1 = (time for a manual run on one host in hours * 4)\nC2 = C1 * 40% risk adjustment\nyear 2 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)\nyear 3 cost = (C1 + C2) * (cost per hour in USD if applicable, based on display)")))},_t=function(){return r().createElement(r().Fragment,null,r().createElement("p",null,r().createElement("strong",null,"Savings")),r().createElement("p",null,"The savings indicates the time and money saved as a result of automating the plan."),r().createElement("br",null),r().createElement("p",null,"We assume 50% productivity recapture to account for the productivity that is usually gained by repeated manual implementation of a task over a period of time. We also add a -5% risk adjustment for unforeseen situations that might arise and need to be handled. We also assume a 15% year over year growth in savings."),r().createElement("br",null),r().createElement("p",null,"Money savings for the initial period is 0, so there is no formula necessary."),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 0:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"initial period savings = 0 - initial cost")),r().createElement("br",null),r().createElement("p",null,"The formula used for savings for year 1:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = (number of hosts * (manual time in minutes / 60) * yearly frequency of automation)\nS2 = S1 * 50% productivity recapture\nS3 = S2 * 5% risk adjustment * (cost per hour in USD if applicable, based on display)\nyear 1 savings = S2 - S3 - year 1 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 2:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S1 = year 1 savings * 15% growth\nyear 2 savings = year 1 savings + S1 - year 2 cost")),r().createElement("br",null),r().createElement("p",null,"The formula used to calculate savings for year 3:"),r().createElement(o.CodeBlock,null,r().createElement(o.CodeBlockCode,null,"S2 = year 2 savings * 15% growth\nyear 3 savings = year 2 savings + S2 - year 3 cost")))};const Pt=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return r().createElement(r().Fragment,null,r().createElement(o.Button,{variant:"link",onClick:function(){return n(!0)},icon:r().createElement(Ct.uM,null)},"Automation formula"),r().createElement(o.Modal,{title:"Automation formula",isOpen:t,onClose:function(){return n(!1)},variant:o.ModalVariant.medium,actions:[r().createElement(o.Button,{key:"cancel",variant:o.ButtonVariant.primary,onClick:function(){return n(!1)}},"Close")]},r().createElement("p",null,"We use risk-adjusted factors to create the 3-year projection of cost and savings related to automation. While we aim to provide as accurate an account of the cost and savings as possible, actual values may differ in practice. The following information breaks down where we get the data, the risk-adjustment factors we use, the assumptions we make, and the formula used to compute the values as displayed in the chart."),r().createElement("br",null),r().createElement(Zt,null),r().createElement("br",null),r().createElement(_t,null)))};var Tt=function(){return(Tt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},xt={initial:"Initial",year1:"Year 1",year2:"Year 2",year3:"Year 3"},Dt=function(e){return{cost:{key:e?"total_costs":"total_hours_spent_risk_adjusted",color:"#8B8D8F"},benefit:{key:e?"total_benefits":"total_hours_saved",color:e?"#81C46B":"#0063CF"},net:{key:e?"cumulative_net_benefits":"cumulative_time_net_benefits",color:"#EE7A00"}}},St=function(e){var t,n=e.tabsArray,l=e.plan,i=(0,a.useState)(!0),c=i[0],s=i[1],u={charts:[{id:1e3,kind:gt.$v.wrapper,type:gt.yD.chart,parent:null,props:{height:600,domainPadding:{x:100},padding:{bottom:60,left:80},themeColor:gt.nz.gray},tooltip:{cursor:!0,stickToAxis:"x",mouseFollow:!0,legendTooltip:{legendData:[{childName:Dt(c).benefit.key,name:"Savings",symbol:{fill:Dt(c).benefit.color}},{childName:Dt(c).cost.key,name:"Costs",symbol:{fill:Dt(c).cost.color}},{childName:Dt(c).net.key,name:"Cumulative savings",symbol:{fill:Dt(c).net.color}}],titleProperyForLegend:"year"},customFnc:function(e){return c?(0,yt.Z)(+e.y):ht(+e.y)}},xAxis:{label:"Time"},yAxis:{label:c?"Money Saved":"Hours Saved",tickFormat:"formatNumberAsK",style:{grid:{stroke:"#D2D2D2"},axisLabel:{padding:60}}}},{id:1001,kind:gt.$v.stack,parent:1e3,props:{}},{id:1102,kind:gt.$v.simple,type:gt.oX.bar,name:Dt(c).benefit.key,parent:1001,props:{x:"year",y:Dt(c).benefit.key,barRatio:.8,barWidth:0,style:{data:{fill:Dt(c).benefit.color,width:120}}},tooltip:{labelName:""}},{id:1101,kind:gt.$v.simple,type:gt.oX.bar,name:Dt(c).cost.key,parent:1001,props:{x:"year",y:Dt(c).cost.key,barRatio:.8,barWidth:0,style:{data:{fill:Dt(c).cost.color,width:120}}},tooltip:{labelName:""}},{id:1002,kind:gt.$v.simple,type:gt.oX.line,name:Dt(c).net.key,parent:1e3,props:{x:"year",y:Dt(c).net.key,style:{data:{stroke:Dt(c).net.color,strokeWidth:5}}},tooltip:{labelName:""}}],functions:Tt(Tt({},gt.wk),{fetchFnc:function(){return new Promise((function(e){var t;e((t=l,{items:Object.keys(xt).map((function(e){return{year:xt[e],total_costs:-1*+t.projections.monetary_stats.total_costs[e],total_benefits:+t.projections.monetary_stats.total_benefits[e],cumulative_net_benefits:+t.projections.monetary_stats.cumulative_net_benefits[e],total_hours_spent_risk_adjusted:-1*+t.projections.time_stats.total_hours_spent_risk_adjusted[e],total_hours_saved:+t.projections.time_stats.total_hours_saved[e],cumulative_time_net_benefits:+t.projections.time_stats.cumulative_time_net_benefits[e]}})),type:gt.Ii.nonGrouped,response_type:""}))}))}})};return r().createElement(o.Card,null,r().createElement(ct,{tabsArray:n}),r().createElement(o.Grid,null,r().createElement(o.GridItem,{span:9},r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardHeader,null,r().createElement(o.CardActions,null,r().createElement(o.ToggleGroup,{"aria-label":"toggleButton"},r().createElement(o.ToggleGroupItem,{text:"Money",buttonId:"money",isSelected:c,onChange:function(){return s(!0)}}),r().createElement(o.ToggleGroupItem,{text:"Time",buttonId:"time",isSelected:!c,onChange:function(){return s(!1)}}))),r().createElement(o.CardTitle,null,l.name)),r().createElement(o.CardBody,null,r().createElement(gt.ZP,{schema:u.charts,functions:u.functions})))),r().createElement(o.GridItem,{span:3},r().createElement(r().Fragment,null,r().createElement(kt,{value:(t=l,c?t.projections.monetary_stats.cumulative_net_benefits.year3:t.projections.time_stats.cumulative_time_net_benefits.year3),isMoney:c}),r().createElement(o.Card,{isPlain:!0},r().createElement(o.CardBody,null,r().createElement(o.List,{isPlain:!0},r().createElement(o.ListItem,{icon:r().createElement(vt.fU,{color:Dt(c).benefit.color})},"Savings from automating this plan"),r().createElement(o.ListItem,{icon:r().createElement(vt.fU,{color:Dt(c).cost.color})},"Costs from creating, maintaining and running the automation"),r().createElement(o.ListItem,{icon:r().createElement(vt.fU,{color:Dt(c).net.color})},"Cumulative savings over time")))),r().createElement(Pt,null)))))};St.propTypes={plan:E().object.isRequired,tabsArray:E().arrayOf(E().shape({id:E().number.isRequired,link:E().string.isRequired,name:E().node.isRequired}).isRequired).isRequired};const wt=St;var Ot=function(e){var t,n,o,c,s,u,m=e.data,p=(0,l.useParams)().id,f=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.nE)()}),[]),{}),E=f.result,g=f.isSuccess,y=f.request;(0,a.useEffect)((function(){y()}),[y]);var h=g&&(!0===(null==E||null===(t=E.meta)||void 0===t||null===(n=t.rbac)||void 0===n||null===(o=n.perms)||void 0===o?void 0:o.write)||!0===(null==E||null===(c=E.meta)||void 0===c||null===(s=c.rbac)||void 0===s||null===(u=s.perms)||void 0===u?void 0:u.all));return g?h?r().createElement(Ue,{title:"Edit plan",options:E,data:m}):r().createElement(l.Redirect,{to:"".concat(i.n.savingsPlanner,"/").concat(p)}):null};Ot.propTypes={data:E().object.isRequired};const jt=Ot,qt=function(){var e,t,n=(0,l.useParams)().id,i=(0,l.useLocation)(),p=(0,l.useHistory)(),f={id:[n]},E="Details";-1!==i.pathname.indexOf("/statistics")?E="Statistics":-1!==i.pathname.indexOf("/edit")&&(E="Edit plan");var g=(0,v.ZP)((function(){return(0,d.nE)()}),{}),y=g.result,h=g.error,b=g.request,k=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.wD)(n)}),[n]),{plan:{},rbac:[]}),C=k.result,Z=C.rbac,_=C.plan,P=k.isSuccess,T=k.request;(0,a.useEffect)((function(){return b(),p.listen((function(e){e.pathname.includes("/edit")||T()}))}),[]),(0,a.useEffect)((function(){T()}),[n]);var x=P&&(!0===(null===(e=Z.perms)||void 0===e?void 0:e.write)||!0===(null===(t=Z.perms)||void 0===t?void 0:t.all)),D=[{id:0,name:r().createElement(r().Fragment,null,r().createElement(Ye.ZP,null),"Back to Plans"),link:mn.get},{id:1,name:"Details",link:mn.getDetails(n)},{id:2,name:"Statistics",link:"".concat(mn.getDetails(n),"/statistics")}],S=P?[{title:"Savings Planner",navigate:mn.get},{title:_.name,navigate:mn.getDetails(n)}]:[];return r().createElement(r().Fragment,null,h&&r().createElement(qe.Z,{message:h.error}),P&&r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(m.Z,{items:S}),r().createElement(u.Z,{title:E})),r().createElement(c.Z,null,r().createElement(o.Card,null,r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/edit"},r().createElement(jt,{data:_})),r().createElement(l.Route,{exact:!0,path:"/savings-planner/:id/statistics"},r().createElement(wt,{tabsArray:D,plan:_,queryParams:f})),r().createElement(l.Route,{exact:!0,path:mn.details},r().createElement(Et,{plan:_,tabsArray:D,canWrite:x,options:y})))))))};var It=n(25811),Rt=n(71070),Ft=function(e){var t=e.label,n=void 0===t?"":t,a=e.title,i=void 0===a?"No items found.":a,c=e.message,s=void 0===c?"":c,u=e.canAdd,m=void 0!==u&&u,d=e.path,p=(0,l.useHistory)();return r().createElement(o.EmptyState,{variant:"full"},r().createElement(o.EmptyStateIcon,{icon:m?It.ZP:Rt.ZP}),r().createElement(o.Title,{size:"lg",headingLevel:"h3"},i),r().createElement(o.EmptyStateBody,null,s),m&&r().createElement(o.Button,{key:"add-item-button",variant:"primary","aria-label":n,onClick:function(){p.push({pathname:d})}},n))};Ft.propTypes={canAdd:E().bool,label:E().string,message:E().string,title:E().string,path:E().string.isRequired};const Lt=Ft;var Bt,At,Nt,Gt,Mt,Wt=(0,W.ZP)(o.CardTitle)(Bt||(Bt=(0,L.Z)(["\n  word-break: break-word;\n"]))),Ht=W.ZP.span(At||(At=(0,L.Z)(["\n  margin-right: 5px;\n  font-weight: bold;\n"]))),zt=W.ZP.small(Nt||(Nt=(0,L.Z)(["\n  display: block;\n  margin-bottom: 10px;\n  color: #6a6e73;\n"]))),Ut=(0,W.ZP)(o.Checkbox)(Gt||(Gt=(0,L.Z)(["\n  &.pf-c-check.pf-m-standalone {\n    margin-top: -3px;\n  }\n"]))),Kt=W.ZP.div(Mt||(Mt=(0,L.Z)(["\n  display: flex;\n  min-height: 30px;\n  align-items: center;\n"]))),Vt=function(e){var t,n,c,s=e.isSuccess,u=e.plan,m=e.selected,d=void 0===m?[]:m,f=e.handleSelect,E=void 0===f?function(){}:f,v=e.canWrite,g=e.options,y=u.id,h=u.automation_status,b=u.category,k=u.description,C=u.frequency_period,Z=u.modified,_=u.name,P=u.template_details,T=u.projections,x=null==T||null===(t=T.monetary_stats)||void 0===t||null===(n=t.cumulative_net_benefits)||void 0===n?void 0:n.year3,D=(0,a.useState)(!1),S=(0,p.Z)(D,2),w=S[0],O=S[1],j=(0,l.useRouteMatch)(),q=(0,l.useHistory)(),I=function(e,t){return g[e].find((function(e){return e.key===t})).value},R=[r().createElement(r().Fragment,{key:y},r().createElement(o.DropdownItem,{key:"edit",onClick:function(){return q.push("".concat(j.url,"/").concat(y,"/edit"))},position:"right"},"Edit"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return q.push("".concat(j.url,"/").concat(y,"/edit#tasks"))},position:"right"},"Manage tasks"),r().createElement(o.DropdownItem,{key:"link",onClick:function(){return q.push("".concat(j.url,"/").concat(y,"/edit#link_template"))},position:"right"},"Link template"))];return r().createElement(o.Card,null,r().createElement(o.CardHeader,null,r().createElement(o.CardHeaderMain,null,r().createElement(Wt,null,r().createElement(l.Link,{to:"".concat(j.url,"/").concat(y)},_))),v&&r().createElement(o.CardActions,null,r().createElement(o.Dropdown,{onSelect:function(){},toggle:r().createElement(o.KebabToggle,{onToggle:function(){return O(!w)}}),isOpen:w,isPlain:!0,dropdownItems:R,position:"right"}),r().createElement(Ut,{onChange:function(){return E(u)},isChecked:d.some((function(e){return e.id===u.id})),"aria-label":"card checkbox",id:"check-1",name:"check1"}))),r().createElement(o.CardBody,null,k?r().createElement(zt,null,k):null,r().createElement(Kt,null,r().createElement(Ht,null,"Frequency")," ",C?I("frequency_period",C):r().createElement("span",null,"None")),r().createElement(Kt,null,r().createElement(Ht,null,"Template")," ",0!==Object.keys(P||{}).length?(c=P)&&s?r().createElement("a",{onClick:function(){return function(e){var t=i.n.jobExplorer,n={"job-explorer.quick_date_range":"last_30_days","job-explorer.status":["failed","successful"],"job-explorer.template_id":e},a=(0,Se.stringify)(n,{arrayFormat:"bracket"});q.push({pathname:t,search:a})}(c.id)}},c.name):null:r().createElement("span",null,"None -"," ",r().createElement("a",{onClick:function(){return q.push("".concat(j.url,"/").concat(y,"/edit#link_template"))}},"Link template"))),r().createElement(Kt,null,r().createElement(Ht,null,"Last job status"),"None"!==h.status?r().createElement(mt.Z,{status:h.status}):r().createElement(o.Label,{variant:"outline",color:"red",icon:r().createElement(A.ZP,null)},"Not Running")),x&&r().createElement(Kt,null,r().createElement(Ht,null,"Projected savings"),r().createElement("a",{onClick:function(){return q.push("".concat(j.url,"/").concat(y,"/statistics"))}},(0,yt.Z)(+x))),r().createElement(Kt,null,r().createElement(Ht,null,"Last updated")," ",r().createElement("span",null,(0,oe.o0)(Z)))),r().createElement(o.CardFooter,null,r().createElement(o.Label,null,I("category",b))))};Vt.propTypes={isSuccess:E().bool.isRequired,canWrite:E().bool.isRequired,selected:E().array,handleSelect:E().func,plan:E().object,options:E().object};const Yt=Vt;var $t=n(13784),Xt=function(e){var t=e.name,n=e.username,a=e.image;return t||n||a?(t&&E().checkPropTypes({name:E().string},{name:e.name},"prop","ItemToDelete"),n&&E().checkPropTypes({username:E().string},{username:e.username},"prop","ItemToDelete"),a&&E().checkPropTypes({image:E().string},{image:e.image},"prop","ItemToDelete"),null):new Error("One of 'name', 'username' or 'image' is required by ItemToDelete component.")},Qt=function(e){var t,n=e.itemsToDelete,l=e.pluralizedItemName,i=void 0===l?"Items":l,c=e.onDelete,s=e.errorMessage,u=void 0===s?"Error while deleting":s,m=e.deleteDetailsRequests,d=void 0===m?[]:m,f=e.cannotDelete,E=void 0===f?function(e){return!e}:f,v=(0,a.useState)(!1),g=(0,p.Z)(v,2),y=g[0],h=g[1],b=(0,a.useState)(null),k=(0,p.Z)(b,2),C=k[0],Z=k[1],_=(0,a.useState)(!1),P=(0,p.Z)(_,2),T=P[0],x=P[1],D=(0,a.useState)(""),S=(0,p.Z)(D,2),w=S[0],O=S[1],j=function(){var e=(0,Te.Z)(De().mark((function e(t){var a,r,l;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),Z(null),!(t&&1===n.length&&(null==d?void 0:d.length)>0)){e.next=9;break}return e.next=5,Je(d);case 5:a=e.sent,r=a.results,(l=a.error)?O(l):Z(r);case 9:x(!1),h(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q="Delete ".concat(i,"?"),I=0===n.length||n.some(E);return w?r().createElement(Q,{isOpen:!!w,title:"Error!",onClose:function(){j(!1),O()}},r().createElement(ie,{error:w.detail})):r().createElement(r().Fragment,null,r().createElement(o.Tooltip,{content:(t=n.filter(E).map((function(e){return e.name||e.username})).join(", "),n.some(E)?r().createElement("div",null,u?r().createElement(r().Fragment,null,r().createElement("span",null,u),r().createElement("span",null,": ".concat(t))):"You do not have permission to delete ".concat(i,": ").concat(t)):n.length?"Delete":"Select a plan to delete"),position:"top"},r().createElement("div",null,r().createElement(o.Button,{variant:"secondary",ouiaId:"delete-button",spinnerAriaValueText:T?"Loading":void 0,"aria-label":"Delete",onClick:function(){return j(!0)},isDisabled:I},"Delete"))),y&&r().createElement(Q,{variant:"danger",title:q,isOpen:y,onClose:function(){return j(!1)},actions:[r().createElement(o.Button,{ouiaId:"delete-modal-confirm",key:"delete",variant:"danger","aria-label":"confirm delete",isDisabled:Boolean(C),onClick:function(){c(),j()}},"Delete"),r().createElement(o.Button,{key:"cancel",variant:"link","aria-label":"cancel delete",onClick:function(){return j(!1)}},"Cancel")]},r().createElement("div",null,"This action will delete the following:"),n.map((function(e){return r().createElement("span",{key:e.id},r().createElement("strong",null,e.name||e.username||e.image),r().createElement("br",null))}))))};Qt.propTypes={itemsToDelete:E().arrayOf(E().shape({id:E().number.isRequired,name:Xt,username:Xt,image:Xt})).isRequired,pluralizedItemName:E().string,onDelete:E().func.isRequired,errorMessage:E().string,warningMessage:E().node,deleteDetailsRequests:E().array,cannotDelete:E().func,deleteMessage:E().string};const Jt=Qt;var en,tn,nn;function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln=W.ZP.div(en||(en=(0,L.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 76px);\n"]))),on=W.ZP.div(tn||(tn=(0,L.Z)(["\n  flex-shrink: 0;\n"]))),cn=(0,W.ZP)(c.Z)(nn||(nn=(0,L.Z)(["\n  flex-grow: 1;\n"]))),sn=(0,Fe.Hm)("savings-planner",rn({},$t.bE.defaultParams),["limit","offset"]);const un=function(){var e,t,n=(0,l.useHistory)(),i=(0,l.useLocation)().pathname,c=(0,Re.K)(sn),m=c.queryParams,f=c.setFromPagination,E=c.setFromToolbar,g=(0,v.ZP)((0,a.useCallback)((function(){return(0,d.nE)()}),[m]),{}),y=g.result,h=g.error,b=g.isSuccess,k=g.request,C=(0,v.ZP)((0,a.useCallback)((0,Te.Z)(De().mark((function e(){var t;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Wu)(m);case 2:return t=e.sent,e.abrupt("return",{data:t.items,rbac:t.rbac,total_count:t.meta.total_count});case 4:case"end":return e.stop()}}),e)}))),[m]),{data:[],rbac:{},total_count:0}),Z=C.result,_=Z.data,P=Z.rbac,T=Z.total_count,x=C.isLoading,D=C.isSuccess,S=C.request,w=rn(rn({},y),{},{name:[{key:"name",value:null}]});(0,a.useEffect)((function(){k(),S()}),[m]);var O=D&&(!0===(null==P||null===(e=P.perms)||void 0===e?void 0:e.write)||!0===(null==P||null===(t=P.perms)||void 0===t?void 0:t.all)),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,a.useState)([]),n=(0,p.Z)(t,2),r=n[0],l=n[1],i=r.length>0&&r.length===e.length,o=function(e){r.some((function(t){return t.id===e.id}))?l((function(t){return(0,Ee.Z)(t.filter((function(t){return t.id!==e.id})))})):l((function(t){return[].concat((0,Ee.Z)(t),[e])}))};return{selected:r,isAllSelected:i,handleSelect:o,setSelected:l}}(_),q=j.selected,I=j.handleSelect,R=j.setSelected,F=(0,v.px)((0,a.useCallback)((function(){return Promise.all(q.map((function(e){return(0,d.Kh)({id:e.id})})),[q])})),{}),L=F.isLoading,B=F.deletionError,A=F.deleteItems,N=F.clearDeletionError,G=function(){var e=(0,Te.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:R([]),S();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r().createElement(ln,null,r().createElement(s.Z,null,r().createElement(u.Z,{title:"Savings Planner"}),r().createElement(Le.Z,{categories:w,filters:m,qsConfig:sn,setFilters:E,additionalControls:[].concat((0,Ee.Z)(O?[r().createElement(o.Button,{key:"add-plan-button",variant:"primary","aria-label":"Add plan",onClick:function(){n.push({pathname:"".concat(i,"/add")})}},"Add plan")]:[]),[O&&b&&_.length>0&&r().createElement(Jt,{key:"delete-plan-button",onDelete:G,itemsToDelete:q,pluralizedItemName:"Savings plan"})]),pagination:D&&_.length>0?r().createElement(Ie.Z,{count:T,params:{limit:parseInt(m.limit),offset:parseInt(m.offset)},qsConfig:sn,setPagination:f,isCompact:!0}):null})),r().createElement(cn,null,h?r().createElement(qe.Z,{message:h.error}):x||L?r().createElement(Oe.Z,null):!D||0!==_.length||x||L?!D||x||L?null:r().createElement(o.Gallery,{hasGutter:!0,minWidths:{sm:"307px",md:"307px",lg:"307px",xl:"307px","2xl":"307px"}},b&&D&&_.map((function(e){return r().createElement(Yt,{key:e.id,isSuccess:D,selected:q,plan:e,handleSelect:I,canWrite:O,options:y})}))):r().createElement(Lt,{label:"Add plan",title:"No plans found",message:O?"Update the applied filters or add a new plan.":"Update the applied filters.",canAdd:O,path:"".concat(i,"/add")})),_.length>0&&!(x||L)&&r().createElement(on,null,r().createElement(Ie.Z,{count:T,params:{limit:parseInt(m.limit),offset:parseInt(m.offset)},qsConfig:sn,setPagination:f,variant:o.PaginationVariant.bottom})),B&&r().createElement(Q,{"aria-label":"Deletion error",isOpen:B,onClose:N,title:"Error",variant:"error"},"Failed to delete one or more plans.",r().createElement(ie,{error:B.detail})))};var mn={get:""+i.n.savingsPlanner,add:i.n.savingsPlanner+"/add",edit:i.n.savingsPlanner+"/:id/edit",getEdit:function(e){return i.n.savingsPlanner+"/"+e+"/edit"},details:i.n.savingsPlanner+"/:id",getDetails:function(e){return i.n.savingsPlanner+"/"+e}};const dn=function(){return r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:mn.get},r().createElement(un,null)),r().createElement(l.Route,{exact:!0,path:mn.add},r().createElement(Ke,null)),r().createElement(l.Route,{path:[mn.edit,mn.details]},r().createElement(qt,null)))}}}]);
//# sourceMappingURL=../sourcemaps/3.2974b887c4f43ec1e72f.js.map